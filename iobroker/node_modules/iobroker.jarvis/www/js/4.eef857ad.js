(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0215":function(e,t,s){"use strict";s.r(t);var i=s("0692");t["default"]={translations:Object(i["a"])((e=>s("41f9")("./"+e))),register:i["c"]}},"105a":function(e,t,s){var i={"./":"6bed","./de":"d57e","./de.js":"d57e","./en":"5c81","./en.js":"5c81","./index":"6bed","./index.js":"6bed"};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id="105a"},"36b3":function(e,t,s){"use strict";s.r(t),t["default"]={"config#Devices#state#label":"Datenpunkt (Anzeige)","config#Devices#state#info":"Datenpunkt dessen State als Wert angezeigt wird","config#Devices#action#label":"Datenpunkt (Trigger)","config#Devices#action#info":"Datenpunkt der zum Schalten getriggert wird","config#Devices#label#label":"Label","config#Devices#unit#label":"Einheit","config#Devices#unit#info":"Einheit des Datenpunkts, z. B. % oder °","config#Devices#bodyStyle#label":"Body Stil","config#Devices#bodyStyle#info":"Stil des Bodys / Containers (im JSON Format)","config#Devices#stateStyle#label":"Datenpunkt Stil","config#Devices#stateStyle#info":"Stil des angezeigten Wertes (im JSON Format)","config#Devices#display#label":"Anzeigevariante","config#Devices#display#info":"Texte die den angezeigten Wert ersetzen (im JSON Format)","config#Devices#properties#label":"Datenpunkt Eigenschaften","config#Devices#properties#info":"Eigenschaften des Datenpunkts: on, off, min, max sowie level (im JSON Format)","config#Devices#icon#label":"Icon","config#Devices#icon#info":"Iconify Icon (klick zur Ansicht aller Icons)","config#Devices#iconStyle#label":"Icon Stil","config#Devices#iconStyle#info":"Stil des Icons (im JSON Format)","config#Devices#bodyElement#label":"Body Element","config#Devices#actionElement#label":"Action Element","config#Devices#showState#label":"Datenpunkt-Wert anzeigen","config#Devices#hide#label":"im Popup verstecken","config#Devices#hide#info":"Datenpunkt nicht in den Geräte-Details (Popup) zeigen","Device ID":"Geräte ID",Device:"Gerät",Name:"Name",General:"Allgemein",Label:"Label",Function:"Gewerk",Icon:"Icon",States:"States",Options:"Optionen","Suppress Popup":"Popup unterdrücken","new state key":"neuer Datenpunkt-Schlüssel","add state":"Datenpunkt hinzufügen","add default states":"Standard Datenpunkte"}},"40df":function(e,t,s){"use strict";s("e8c8")},"41f9":function(e,t,s){var i={"./":"0215","./de":"46e6","./de.js":"46e6","./en":"7767","./en.js":"7767","./index":"0215","./index.js":"0215"};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id="41f9"},"46e6":function(e,t,s){"use strict";s.r(t),t["default"]={"import#warning":'Damit ein Gerät vom Importer erkannt wird, müssen die Datenpunkte des Geräts unter einem gemeinsamen Datenpunkt des Typs "{deviceObjectType}" strukturiert sein.',Devices:"Geräte",Adapter:"Adapter",Function:"Gewerk","Adapter List":"Adapter Liste","Search the adapter structure for all devices or only devices added to enums":"Adapter-Struktur entweder nach allen oder nur nach in Enums vorhandenen Geräten durchsuchen","Search adapter structure for all devices":"nach allen Geräten durchsuchen","Search only for devices added to enums":"nur nach in Enums hinzugefügten Geräten durchsuchen","(Un)Select all adapters":"alle Adapter (de)selektieren","(Un)Select all devices":"alle Geräte (de)selektieren",ignore:"ignorieren",restore:"wiederherstellen","Read adapters":"Adapter lesen","Import selected devices":"ausgewählte Geräte importieren"}},"5c81":function(e,t,s){"use strict";s.r(t),t["default"]={}},"6bed":function(e,t,s){"use strict";s.r(t);var i=s("0692");t["default"]={translations:Object(i["a"])((e=>s("105a")("./"+e))),register:i["c"]}},7692:function(e,t,s){"use strict";s.r(t),t["default"]={"config#Devices#state#label":"State (to display)","config#Devices#state#info":"State which value is shown","config#Devices#action#label":"State (to trigger)","config#Devices#action#info":"State used to trigger an action","config#Devices#label#label":"Label","config#Devices#unit#label":"Unit","config#Devices#unit#info":"Unit of the state, e.g % or °","config#Devices#bodyStyle#label":"Body Style","config#Devices#bodyStyle#info":"Body Style of the container (in JSON Format)","config#Devices#stateStyle#label":"State Style","config#Devices#stateStyle#info":"State Style of the displayed values (in JSON Format)","config#Devices#display#label":"Display variant","config#Devices#display#info":"Texts replacing the displayed value (in JSON Format)","config#Devices#properties#label":"State Properties","config#Devices#properties#info":"State Properties such as min, max, dimmerOn Werte (in JSON Format)","config#Devices#icon#label":"Icon","config#Devices#icon#info":"Iconify Icon (click to view icons)","config#Devices#iconStyle#label":"Icon Style","config#Devices#iconStyle#info":"Icon Style of the icon (in JSON Format)","config#Devices#bodyElement#label":"Body Element","config#Devices#actionElement#label":"Action Element","config#Devices#showState#label":"Show State","config#Devices#hide#label":"Hide state in popup","config#Devices#hide#info":"Don't show state in the device details (popup)"}},7767:function(e,t,s){"use strict";s.r(t),t["default"]={}},a7a4:function(e,t,s){var i={"./":"def5","./de":"36b3","./de.js":"36b3","./en":"7692","./en.js":"7692","./index":"def5","./index.js":"def5"};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id="a7a4"},b2d7:function(e,t,s){},bb72:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return Fe}));var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"full-height DevicesPage"},[s("div",{staticClass:"row no-wrap"},[s("q-toolbar",{staticClass:"paper",staticStyle:{"min-height":"56px"}},[s("q-toolbar-title",{attrs:{shrink:""}},[e._v(e._s(e.$t("Devices List"))+" ("+e._s(e.devicesCount)+")")]),s("q-select",{staticStyle:{width:"150px","margin-right":"8px"},attrs:{dense:"",label:e.$t("Group by"),"stack-label":"",options:e.groupByOptions},model:{value:e.devicesGroupBy,callback:function(t){e.devicesGroupBy=t},expression:"devicesGroupBy"}}),s("q-input",{staticStyle:{width:"250px"},attrs:{dense:"",label:e.$t("Filter"),"stack-label":"",clearable:""},model:{value:e.devicesFilter,callback:function(t){e.devicesFilter=t},expression:"devicesFilter"}}),s("q-space"),s("q-btn-dropdown",{staticClass:"q-mx-xs",attrs:{icon:"mdi-hammer-screwdriver",color:"secondary",label:e.$t("Quick Actions")}},[s("q-list",[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.actionSwapNameWithLabel}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"mdi-swap-horizontal"}})],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.$t("Swap Device Name and Label")))])],1)],1)],1)],1),s("q-btn",{staticClass:"q-mx-xs",attrs:{color:"primary",icon:"mdi-cloud-download",label:e.$t("Import Devices")},on:{click:function(t){e.showImportDevices=!0}}}),s("q-btn",{staticClass:"q-mx-xs",attrs:{color:"primary",icon:"mdi-plus-circle",label:e.$t("Add Device")},on:{click:e.addDevice}})],1)],1),s("device-page"),s("import-devices",{attrs:{open:e.showImportDevices},on:{onClose:function(t){e.showImportDevices=!1}}}),e._l(e.groups,(function(t){return s("div",{directives:[{name:"show",rawName:"v-show",value:!e.expertMode&&t.devices.length>0,expression:"!expertMode && group.devices.length > 0"}],key:t.id,staticClass:"row no-wrap paper"},[s("q-expansion-item",{staticClass:"full-width",attrs:{icon:t.icon,label:(t.label||"(ohne Gruppe)")+" ("+t.devices.length+")"},scopedSlots:e._u([{key:"header",fn:function(){return[s("div",{staticClass:"row items-center"},[t.label?s("span",[e._v("\n\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t")]):s("em",[e._v("("+e._s(e.$t("without label"))+")")]),e._v("\n\t\t\t\t\t ("+e._s(t.devices.length)+")\n\t\t\t\t")]),s("q-space")]},proxy:!0}],null,!0),model:{value:e.expanded[t.id],callback:function(s){e.$set(e.expanded,t.id,s)},expression:"expanded[group.id]"}},[s("devices-table",{attrs:{devices:t.devices}})],1)],1)})),s("paper",{directives:[{name:"show",rawName:"v-show",value:e.expertMode,expression:"expertMode"}],style:{height:e.pageHeight-66-16+"px"}},[s("json-editor",{attrs:{id:"devices",json:e.json},on:{onChange:e.onJsonEditor}})],1)],2)},a=[],n=s("ed09"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{attrs:{value:null!==e.device,"full-height":"",persistent:""}},[null!==e.device?s("q-card",{staticClass:"column full-height",staticStyle:{width:"1000px","max-width":"80vw"}},[s("q-card-section",{staticClass:"row items-center"},[s("div",{staticClass:"text-h6 row items-center"},[e._v("\n\t\t\t\t"+e._s(e.$t("Device"))+": "),s("inputs",{staticStyle:{width:"230px"},attrs:{dense:"",id:"device.name",label:e.$t("Name"),value:e.device.name||"",required:"",autofocus:""},on:{onChange:e.onChange}}),e._v("\n\t\t\t\t("+e._s(e.$t("Device ID")+": "+e.device.id)+")\n\t\t\t")],1),s("q-space"),s("q-btn",{attrs:{flat:"",round:"",color:"grey",icon:"close"},on:{click:e.cancel}})],1),s("q-separator"),s("q-card-section",{staticClass:"col defaultPadding-2 q-pt-none scroll body"},[s("div",{staticClass:"text-h6 text-header primary"},[e._v(e._s(e.$t("General")))]),s("q-separator",{staticStyle:{margin:"0 -16px"}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-3"},[s("inputs",{attrs:{id:"device.label",label:e.$t("Label"),value:e.device.label||"",placeholder:e.device.name},on:{onChange:e.onChange}})],1),s("div",{staticClass:"col-3"},[s("inputs",{attrs:{id:"device.function",label:e.$t("Function"),value:"other"===e.device.function?"_defaults":e.device.function,type:"select",options:e.functions,"options-dense":"","use-input":""},on:{onSelect:e.onChange}})],1),s("div",{staticClass:"col-3"},[s("inputs",{attrs:{id:"device.icon",label:e.$t("Icon"),value:e.device.icon||"",icon:e.icon(e.device.icon)},on:{onChange:e.onChange}})],1)]),s("div",{staticClass:"text-h6 text-header primary"},[e._v(e._s(e.$t("Options")))]),s("q-separator",{staticStyle:{margin:"0 -16px"}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-3"},[s("inputs",{attrs:{type:"switch",id:"options.suppressPopup",label:"Suppress Popup","indeterminate-value":"false",value:e.device.options.suppressPopup||!1},on:{onChange:e.onChange}})],1)]),s("div",{staticClass:"text-h6 text-header primary"},[e._v(e._s(e.$t("States")))]),s("q-separator",{staticStyle:{margin:"0 -16px"}}),s("div",{staticClass:"row",staticStyle:{"margin-bottom":"16px"}},[s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"newStateKey",value:e.newStateKey,label:"new state key",icon:"mdi-plus",errorMessage:e.errorNewStateKey},on:{onChange:e.onChange},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addStateKey.apply(null,arguments)}}})],1),s("div",{staticClass:"col self-center"},[s("q-btn",{attrs:{color:"primary",label:e.$t("add state"),icon:"mdi-plus-circle"},on:{click:e.addStateKey}})],1),s("div",{staticClass:"col self-center",staticStyle:{"text-align":"right"}},["_defaults"!==this.device.function?s("q-btn",{attrs:{color:"secondary",label:e.$t("add default states"),icon:e.compareStatesToDefaults?"check":"mdi-playlist-plus",disable:e.compareStatesToDefaults},on:{click:e.addDefaultStates}}):e._e()],1)]),s("draggable",{attrs:{handle:".dragndrop"},model:{value:e.deviceStates,callback:function(t){e.deviceStates=t},expression:"deviceStates"}},[s("transition-group",{attrs:{type:"transition",name:"flip-list",tag:"div"}},e._l(e.deviceStates,(function(t){return s("div",{key:t.stateKey,staticClass:"list-group-item"},[s("device-state",{attrs:{device:e.device,stateKey:t.stateKey,stateList:e.stateList},on:{onChange:e.onChange,setComponentProps:function(t){e.component=arguments[0]}}})],1)})),0)],1)],1),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:e.$t("Cancel"),color:"negative"},on:{click:e.cancel}}),s("q-btn",{attrs:{flat:"",label:e.$t("Apply"),color:"primary",disable:e.hasErrors},on:{click:e.apply}})],1)],1):e._e()],1)},r=[],l=(s("5319"),s("a026")),c=s("7ead"),d=s("c7ac"),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("state-explorer-popup",{attrs:{open:null!==e.stateExplorer,selected:e.stateExplorerSelected},on:{onClose:e.onStateExplorerClose,onSave:e.onStateExplorerSave}}),s("paper",{directives:[{name:"show",rawName:"v-show",value:!0===e.editStateKey,expression:"editStateKey === true"}],staticClass:"row",staticStyle:{margin:"-2px 0 0 0",padding:"0 0 10px 44px"}},[s("inputs",{attrs:{id:"stateKeyModified",label:"",value:e.stateKey,"hide-bottom-space":"",dense:""},on:{onChange:e.onChange,click:e.stopPropagation}}),s("div",{staticStyle:{margin:"auto 84px -1px auto"}},[s("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-check"},on:{click:e.onStateSave}}),s("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-cancel"},on:{click:e.onStateEdit}})],1)],1),s("q-expansion-item",{directives:[{name:"show",rawName:"v-show",value:!1===e.editStateKey,expression:"editStateKey === false"}],staticClass:"paper full-width",class:{rowDeleted:e.deleted},attrs:{icon:"mdi-drag-horizontal",label:e.stateKey,disable:e.deleted},scopedSlots:e._u([{key:"header",fn:function(){return[s("q-item-section",{staticClass:"dragndrop",attrs:{avatar:""}},[s("icon",{staticClass:"dragndrop",attrs:{name:"mdi-drag-horizontal"}})],1),s("q-item-section",{class:{itemDeleted:e.deleted}},[e._v("\n\t\t\t\t"+e._s(e.stateKey)+"\n\t\t\t")]),s("q-item-section",{attrs:{side:""}},[s("div",{staticClass:"row items-center"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!0!==e.deleted,expression:"deleted !== true"}]},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:!1===e.editStateKey,expression:"editStateKey === false"}],attrs:{size:"sm",flat:"",round:"",icon:"mdi-pencil"},on:{click:e.onStateEdit}}),s("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-content-copy"},on:{click:e.onStateCopy}}),s("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-delete",color:"negative"},on:{click:e.onStateRemove}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.deleted,expression:"deleted === true"}]},[s("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-restore",color:"positive"},on:{click:e.onStateRestore}})],1)])])]},proxy:!0}]),model:{value:e.expanded,callback:function(t){e.expanded=t},expression:"expanded"}},[s("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"state",label:"config#Devices#state#label",info:"config#Devices#state#info",value:e.sState,options:e.stateList,clearable:""},on:{onChange:e.onChange},scopedSlots:e._u([{key:"end",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-database-search",color:"secondary"},on:{click:function(t){return e.onStateExplorerOpen("state",e.sState,t)}}})]},proxy:!0}])})],1),s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"action",label:"config#Devices#action#label",info:"config#Devices#action#info",placeholder:e.sState,value:e.sAction,options:e.stateList,clearable:""},on:{onChange:e.onChange},scopedSlots:e._u([{key:"end",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-database-search",color:"secondary"},on:{click:function(t){return e.onStateExplorerOpen("action",e.sAction||e.sState,t)}}})]},proxy:!0}])})],1)]),s("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"label",label:"config#Devices#label#label",value:e.sLabel,json:"",placeholder:e.placeholders.label},on:{onChange:e.onChange}})],1),s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"unit",label:"config#Devices#unit#label",info:"config#Devices#unit#info",value:e.sUnit,json:"allowTextInput",placeholder:e.placeholders.unit},on:{onChange:e.onChange}})],1)]),s("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"bodyStyle",label:"config#Devices#bodyStyle#label",info:"config#Devices#bodyStyle#info",value:e.sBodyStyle,json:"",placeholder:e.placeholders.bodyStyle},on:{onChange:e.onChange}})],1)]),s("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"stateStyle",label:"config#Devices#stateStyle#label",info:"config#Devices#stateStyle#label",value:e.sStateStyle,json:"",placeholder:e.placeholders.stateStyle},on:{onChange:e.onChange}})],1)]),s("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"display",label:"config#Devices#display#label",info:"config#Devices#display#info",value:e.sDisplay,json:"",placeholder:e.placeholders.display},on:{onChange:e.onChange}})],1)]),s("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"properties",label:"config#Devices#properties#label",info:"config#Devices#properties#info",value:e.sProperties,json:"",placeholder:e.placeholders.properties},on:{onChange:e.onChange}})],1)]),s("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"icon",label:"config#Devices#icon#label",info:"config#Devices#icon#info",link:"https://icon-sets.iconify.design/",value:e.sIcon,json:"allowTextInput",placeholder:e.placeholders.icon,icon:e.icon(e.sIcon)},on:{onChange:e.onChange}})],1),s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"iconStyle",label:"config#Devices#iconStyle#label",info:"config#Devices#iconStyle#info",value:e.sIconStyle,json:"",placeholder:e.placeholders.iconStyle},on:{onChange:e.onChange}})],1)]),s("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"bodyElement",label:"config#Devices#bodyElement#label",value:e.sBodyElement,type:"select.components",componentValues:e.sBodyElementComponentValues,components:e.FUNCTION_COMPONENTS["bodyElements"][e.deviceFunction],device:e.device},on:{onSelect:function(t){return e.onChange(Object.assign({},t,{value:t.value||null}))},onOptions:e.onChange}})],1),s("div",{staticClass:"col-2"},[s("inputs",{attrs:{type:"Switch",id:"showState",label:"config#Devices#showState#label",value:e.sShowState},on:{onChange:e.onChange}})],1),s("div",{staticClass:"col"},[s("inputs",{attrs:{id:"actionElement",label:"config#Devices#actionElement#label",value:e.sActionElement,type:"select.components",componentValues:e.sActionElementComponentValues,components:e.FUNCTION_COMPONENTS["actionElements"][e.deviceFunction],device:e.device},on:{onSelect:function(t){return e.onChange(Object.assign({},t,{value:t.value||null}))},onOptions:e.onChange}})],1)]),s("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[s("div",{staticClass:"col-2"},[s("inputs",{attrs:{type:"Switch",id:"hide",label:"config#Devices#hide#label",info:"config#Devices#hide#info",value:e.sHide},on:{onChange:e.onChange}})],1)]),s("q-separator",{staticStyle:{"margin-top":"16px"}})],1)],1)},u=[],v=(s("e9c4"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{attrs:{value:e.open,persistent:""}},[s("q-card",{staticClass:"column full-height",staticStyle:{width:"1000px","max-width":"80vw"}},[s("q-card-section",{staticClass:"row items-center"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("State Explorer")))]),s("q-space"),s("q-btn",{attrs:{flat:"",round:"",color:"grey",icon:"close"},on:{click:e.onClose}})],1),s("q-separator"),s("q-card-section",{staticClass:"col q-pa-sm scroll body"},[s("state-explorer",e._b({on:{onChange:e.onChange}},"state-explorer",e.$attrs,!1))],1),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:e.$t("Cancel"),color:"negative"},on:{click:e.onClose}}),s("q-btn",{attrs:{flat:"",label:e.$t("Apply"),color:"primary",disable:""===e.state},on:{click:e.onSave}})],1)],1)],1)}),h=[],m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"padding-bottom":"16px"}},[s("paper",{staticClass:"StateExplorerBar",staticStyle:{"min-height":"54px"}},[s("q-space"),s("div",{staticClass:"items-center justify-end row"},[s("span",{staticStyle:{"padding-right":"8px"}},[e._v(e._s(e.$t("Last Update"))+": "+e._s(e.lastUpdate))]),s("q-btn",{attrs:{color:"primary",label:e.$t("Refresh"),icon:"refresh",loading:e.loading,disable:e.loading},on:{click:e.updateObjects}})],1)],1),s("paper",{staticClass:"q-pa-sm"},[s("q-tree",{ref:"StateExplorer",attrs:{nodes:e.instanceList,"node-key":"_id","label-key":"label","selected-color":"primary",selected:e.selectedItem},on:{"lazy-load":e.onLazyLoad,"update:selected":e.onSelect},scopedSlots:e._u([{key:"default-header",fn:function(t){return[s("div",{staticClass:"row full-width",class:{item:!t.node.children||0===t.node.children.length}},[s("div",{staticClass:"overflow-dots",staticStyle:{width:"5%"}},[s("icon",{attrs:{color:e.selectedItem&&e.selectedItem.endsWith("."+t.node.label)?"accent":"primary",name:"state"===t.node.type?e.selectedItem&&e.selectedItem.endsWith("."+t.node.label)?"mdi-bookmark":"mdi-bookmark-outline":"folder"}})],1),s("div",{staticClass:"overflow-dots q-pr-xs",staticStyle:{width:"25%"}},[e._v(e._s(t.node.label))]),s("div",{staticClass:"overflow-dots q-pr-xs",staticStyle:{width:"45%"}},[t.node.common&&t.node.common.name&&t.node.common.name.length>50?s("q-tooltip",[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.node.common.name)+"\n\t\t\t\t\t\t\t")]):e._e(),e._v("\n\t\t\t\t\t\t\t"+e._s(t.node.common&&t.node.common.name?t.node.common.name.length>50?t.node.common.name.substr(0,47)+"...":t.node.common.name:"")+"\n\t\t\t\t\t\t")],1),s("div",{staticClass:"overflow-dots",staticStyle:{width:"10%"}},[e._v(e._s(t.node.type))]),s("div",{staticClass:"overflow-dots",staticStyle:{width:"15%"}},[e._v(e._s(t.node.common&&t.node.common.role?t.node.common.role:""))])])]}}])})],1)],1)},f=[],g=s("00da"),y=s("e580"),b=Object(n["c"])({name:"StateExplorer",props:["id","selected"],data(){return{filter:"",lastUpdate:Object(y["a"])(c["a"].get("objectsUpdated"),"dd. MMMM yyyy, HH:mm:ss"),loading:!1,objectTree:{},instanceList:[],selectedItem:this.selected,expandedItems:[]}},methods:{expandNode(e){if(e in this.objects){const t=e.split(".");t.splice(0,2,t[0]+"."+t[1]);let s="";t.forEach((e=>{s+=s?"."+e:e,this.$refs.StateExplorer.setExpanded(s,!0)}))}},onLazyLoad({key:e,done:t}){t(this.objectTree[e]&&this.objectTree[e].children||[])},onSelect(e){e=e||this.selectedItem,this.$refs.StateExplorer.isExpanded(e)?this.$refs.StateExplorer.setExpanded(e||this.selectedItem,!1):this.objectTree[e]&&this.objectTree[e].children&&this.$refs.StateExplorer.setExpanded(e,!0),this.selectedItem=e,this.$emit("onChange",{id:this.id||"StateExplorer",value:e||""})},filterMethod(e,t){console.warn(e._id,t);const s=this.objectTree[e._id]||null,i=e._id.indexOf(t)>-1;return s&&s.children&&s.children.forEach((e=>{console.log("->"+e._id)})),i},updateObjects(){this.loading=!0,g["a"].getObjects().then((()=>{this.lastUpdate=Object(y["a"])(c["a"].get("objectsUpdated"),"dd. MMMM yyyy, HH:mm:ss"),this.objects=c["a"].get("objects"),this.objectList=c["a"].get("objectList"),this.getInstanceList(),this.loading=!1}))},getInstanceList(){const e={},t=[];this.objectList.forEach((s=>{const i=this.objects[s];if(i){const s=i._id.substr(0,i._id.lastIndexOf(".")),a=i._id.substr(0,i._id.indexOf(".",i._id.indexOf(".")+1));a&&!t.find((e=>e._id===a))&&t.push({_id:a,label:a,lazy:!0}),e[s]=e[s]||{children:[]},-1===e[s].children.findIndex((e=>e._id===i._id))&&e[s].children.push({...i,label:i._id.substr(i._id.lastIndexOf(".")+1),lazy:"state"!==i.type,isState:"state"===i.type});const n=i._id.split(".");n.length>2&&n.forEach(((t,s)=>{const i=n.slice(0,s).join("."),a=i.substr(0,i.lastIndexOf("."));i&&a&&(e[a]=e[a]||{children:[]},-1===e[a].children.findIndex((e=>e._id===i))&&e[a].children.push({_id:i,label:i.substr(i.lastIndexOf(".")+1),lazy:!0,isState:!1}))}))}}));for(const s in e)e[s].children.sort(((e,t)=>!1===e.isState&&!0===t.isState?-1:!0===e.isState&&!1===t.isState?1:e.label.toLowerCase()===t.label.toLowerCase()?0:e.label.toLowerCase()>t.label.toLowerCase()?1:-1));this.objectTree=e,this.instanceList=t.sort(((e,t)=>e.label.toLowerCase()===t.label.toLowerCase()?0:e.label.toLowerCase()>t.label.toLowerCase()?1:-1))}},mounted(){this.selected&&(this.expandNode(this.selected),setTimeout((()=>{const e=document.querySelector(".q-tree__node--selected");e&&e.scrollIntoView(!1)}),2e3))},created(){this.filterTimeout=null,this.objects=c["a"].get("objects"),this.objectList=c["a"].get("objectList"),this.getInstanceList()}}),S=b,D=(s("40df"),s("2877")),w=s("2c91"),x=s("9c40"),C=s("7f41"),_=s("05c0"),k=s("eebe"),q=s.n(k),$=Object(D["a"])(S,m,f,!1,null,null,null),O=$.exports;q()($,"components",{QSpace:w["a"],QBtn:x["a"],QTree:C["a"],QTooltip:_["a"]});var E=Object(n["c"])({name:"StateExplorerPopup",props:["open"],components:{StateExplorer:O},data(){return{state:""}},methods:{onClose(){this.$emit("onClose",{id:this.id||"StateExplorer",value:this.state})},onSave(){this.$emit("onSave",{id:this.id||"StateExplorer",value:this.state})},onChange({value:e}){this.state=e}}}),j=E,I=s("24e8"),K=s("f09f"),L=s("a370"),N=s("eb85"),Q=s("4b7e"),A=Object(D["a"])(j,v,h,!1,null,null,null),T=A.exports;q()(A,"components",{QDialog:I["a"],QCard:K["a"],QCardSection:L["a"],QSpace:w["a"],QBtn:x["a"],QSeparator:N["a"],QCardActions:Q["a"]});var P=s("a2b6"),F=Object(n["c"])({name:"DeviceState",props:["device","stateKey","stateList"],components:{StateExplorerPopup:T},data(){return this.FUNCTION_COMPONENTS=d["listOfComponents"],{deleted:!1,editStateKey:!1,expanded:!1,stateExplorer:null,stateExplorerSelected:"",stateKeyModified:""}},methods:{stopPropagation(e){e.stopPropagation()},onChange(e){if(e._error)this.$emit("onChange",{...e,error:e._error,stateKey:this.stateKey,id:"state."+e.id});else if("stateKeyModified"===e.id)this.stateKeyModified=e.value;else{let s=e.value;try{s=s&&void 0!==e.json&&e.value.indexOf("{")>-1&&e.value.indexOf("}")>-1?JSON.parse(e.value):e.value}catch(t){console.warn(e.value,t)}this.$emit("onChange",{...e,value:s,stateKey:this.stateKey,id:"state."+e.id})}},onStateCopy(e){e.stopPropagation(),this.$store.commit("editor/copyState",{stateKey:this.stateKey})},onStateSave(e){e.stopPropagation(),this.$emit("onChange",{stateKey:this.stateKey,id:"state.newStateKey",value:this.stateKeyModified}),this.editStateKey=!this.editStateKey},onStateEdit(e){e.stopPropagation(),this.stateKeyModified=this.stateKey,this.editStateKey=!this.editStateKey},onStateRemove(e){e.stopPropagation(),this.expanded=!1,this.deleted=!0,this.$store.commit("editor/removeState",{stateKey:this.stateKey})},onStateRestore(e){e.stopPropagation(),this.deleted=!1,this.$store.commit("editor/restoreState",{stateKey:this.stateKey})},onStateExplorerOpen(e,t,s){s.stopPropagation(),this.stateExplorer=e,this.stateExplorerSelected=t},onStateExplorerClose(){this.stateExplorer=null},onStateExplorerSave({value:e}){this.onChange({id:this.stateExplorer,stateKey:this.stateKey,value:e}),this.stateExplorer=null}},computed:{placeholders(){const e=d["default"][this.deviceFunction]&&d["default"][this.deviceFunction][this.stateKey.toLowerCase()]||{};return{display:JSON.stringify(e.display),stateStyle:JSON.stringify(e.stateStyle),properties:JSON.stringify(e.properties),label:e.label||"",unit:JSON.stringify(e.unit),icon:JSON.stringify(e.icon),iconStyle:JSON.stringify(e.iconStyle),bodyElement:e.bodyElement||"",actionElement:e.actionElement||""}},deviceFunction(){return"other"===this.device.function?"_defaults":this.device.function},sState(){const e=this.$store.state.editor.device.states[this.stateKey];return e.state&&void 0!==e.state.node?e.state.node:e.state||null},sAction(){const e=this.$store.state.editor.device.states[this.stateKey];return e.action&&void 0!==e.action.node?e.action.node:e.action||null},sProperties(){const e=this.$store.state.editor.device.states[this.stateKey];return e.properties||""},sBodyStyle(){const e=this.$store.state.editor.device.states[this.stateKey];return e.bodyStyle||""},sStateStyle(){const e=this.$store.state.editor.device.states[this.stateKey];return e.stateStyle||""},sDisplay(){const e=this.$store.state.editor.device.states[this.stateKey];return e.display||""},sLabel(){const e=this.$store.state.editor.device.states[this.stateKey];return e.label||""},sUnit(){const e=this.$store.state.editor.device.states[this.stateKey];return e.unit||""},sIcon(){const e=this.$store.state.editor.device.states[this.stateKey];return e.icon||""},sIconStyle(){const e=this.$store.state.editor.device.states[this.stateKey];return e.iconStyle||""},sBodyElement(){const e=this.$store.state.editor.device.states[this.stateKey];return e.bodyElement||null!==e.sBodyElement&&this.placeholders.bodyElement||null},sBodyElementComponentValues(){const e=this.$store.state.editor.device.states[this.stateKey];return e[this.sBodyElement+"Config"]||{}},sActionElement(){const e=this.$store.state.editor.device.states[this.stateKey];return e.actionElement||null!==e.actionElement&&this.placeholders.actionElement||null},sShowState(){const e=this.$store.state.editor.device.states[this.stateKey];return void 0!==e.showState&&e.showState},sActionElementComponentValues(){const e=this.$store.state.editor.device.states[this.stateKey];return e[this.sActionElement+"Config"]||{}},sHide(){const e=this.$store.state.editor.device.states[this.stateKey];return void 0!==e.hide&&e.hide}},created(){this.icon=P["d"]}}),B=F,z=s("3b73"),G=s("4074"),M=Object(D["a"])(B,p,u,!1,null,null,null),U=M.exports;q()(M,"components",{QBtn:x["a"],QExpansionItem:z["a"],QItemSection:G["a"],QSeparator:N["a"]});var J=s("b76a"),R=s.n(J),W=s("def5"),H=Object(n["c"])({name:"DevicePage",components:{DeviceState:U,Draggable:R.a},data(){return this.icon=P["d"],{component:null,errors:{},errorNewStateKey:null,newStateKey:""}},methods:{apply(){this.$store.commit("editor/saveDevice")},cancel(){this.$store.commit("editor/discardDevice",{device:null})},onChange(e){if(e.error)this.errors={...this.errors,[e.id]:this.$i18n.t(e.error)};else if(e.id.indexOf("device.")>-1)l["default"].delete(this.errors,e.id),this.$store.commit("editor/set",{[e.id]:e.value});else if(e.id.indexOf("options.")>-1)l["default"].delete(this.errors,e.id),this.$store.commit("editor/set",{"device.options":{...this.device.options||{},[e.id.replace("options.","")]:e.value}});else if(e.id.indexOf("state.")>-1)if(l["default"].delete(this.errors,e.id),"state.newStateKey"===e.id)this.$store.commit("editor/changeStateKey",{stateKey:e.stateKey,stateKeyModified:e.value});else if("state.componentOptions"===e.id){l["default"].delete(this.errors,e.id);const t=this.$store.state.editor.device.states[e.stateKey][e.component+"Config"]||{};this.$store.commit("editor/editState",{deviceId:this.device.id,stateKey:e.stateKey,key:e.component+"Config",val:{...t,...e.value}})}else this.$store.commit("editor/editState",{deviceId:this.device.id,stateKey:e.stateKey,key:e.id.replace("state.",""),val:e.value});else"newStateKey"===e.id&&(this.newStateKey=e.value)},addDefaultStates(){this.getDefaultStates.forEach((e=>"_any"!==e&&this.addStateKey(e)))},addStateKey(e){e="string"===typeof e?e:this.newStateKey,e?this.deviceStateKeys.indexOf(e)>-1?this.errorNewStateKey=this.$i18n.t("State key already used"):(this.$store.commit("editor/newState",{stateKey:e}),this.newStateKey="",this.errorNewStateKey=null):this.errorNewStateKey=this.$i18n.t("Type in a state key / identifier")}},computed:{getDefaultStates(){return"_defaults"===this.device.function?[]:Object.keys(d["default"][this.device.function]||{})},compareStatesToDefaults(){const e=Object.keys(this.device.states||{});return this.getDefaultStates.every((t=>"_any"===t||e.indexOf(t)>-1))},stateList(){const e=c["a"].get("stateList")||[];return e.map((e=>({label:e,value:e})))},functions(){return Object.keys(d["icons"]).map((e=>({label:this.$i18n.t(e),icon:d["icons"][e]?"mdi-"+d["icons"][e].replace("mdi-",""):"",value:e}))).sort(((e,t)=>e.label.toLowerCase()===t.label.toLowerCase()?0:e.label.toLowerCase()>t.label.toLowerCase()?1:-1))},device(){return this.$store.state.editor.device||null},deviceStateKeys(){return Object.keys(this.device.states||{})},deviceStates:{get(){const e=Object.values(this.device.states||{});return e},set(e){const t={};e.forEach((e=>{t[e.stateKey]=e})),this.$store.commit("editor/set",{"device.states":t})}},hasErrors(){return Object.keys(this.errors).length>0}},created(){W["default"].register(this.$i18n,W["default"].translations)}}),V=H,X=Object(D["a"])(V,o,r,!1,null,null,null),Y=X.exports;q()(X,"components",{QDialog:I["a"],QCard:K["a"],QCardSection:L["a"],QSpace:w["a"],QBtn:x["a"],QSeparator:N["a"],QCardActions:Q["a"]});var Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{attrs:{value:e.showImportDevices,persistent:""}},[s("q-card",{staticClass:"column full-height",staticStyle:{width:"1000px","max-width":"80vw"}},[s("q-card-section",{staticClass:"row items-center"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("Import Devices")))]),s("q-space"),s("q-btn",{attrs:{flat:"",round:"",color:"grey",icon:"close"},on:{click:e.onClose}})],1),s("q-separator"),s("q-card-section",{staticClass:"col q-pa-sm scroll body"},[s("div",{staticClass:"text-h6 text-header primary"},[e._v(e._s(e.$t("Adapter")))]),s("q-separator",{staticStyle:{margin:"0 -16px"}}),s("q-field",{staticClass:"q-pa-sm",attrs:{label:e.$t("Search the adapter structure for all devices or only devices added to enums"),"stack-label":"",borderless:""},scopedSlots:e._u([{key:"control",fn:function(){return[s("q-option-group",{attrs:{options:e.adapterStructureOptions,color:"primary",inline:""},model:{value:e.adapterStructure,callback:function(t){e.adapterStructure=t},expression:"adapterStructure"}})]},proxy:!0}])}),s("q-expansion-item",{staticClass:"paper shadow-1 rounded-borders full-width",scopedSlots:e._u([{key:"header",fn:function(){return[s("q-item-section",[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("Adapter List"))+"\n\t\t\t\t\t")]),"loaded"===e.state?s("q-item-section",{attrs:{side:""}},[s("q-chip",{attrs:{color:"secondary","text-color":"white"}},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.$t("Devices"))+": "+e._s(e.importedDevicesLength.all)+"\n\t\t\t\t\t\t")])],1):e._e()]},proxy:!0}]),model:{value:e.expanded["_adapterList"],callback:function(t){e.$set(e.expanded,"_adapterList",t)},expression:"expanded['_adapterList']"}},[s("q-list",{staticStyle:{"margin-bottom":"16px"},attrs:{dense:""}},[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"},on:{click:function(t){return t.preventDefault(),e.toggleAllAdapterListItems.apply(null,arguments)}}},[s("q-item-section",{attrs:{side:""}},[s("q-checkbox",{attrs:{"false-value":0,"true-value":e.adapterList.length,value:e.selectedAdapters.length},on:{input:e.toggleAllAdapterListItems}})],1),s("q-item-section",[s("q-item-label",[s("em",[e._v(e._s(e.$t("(Un)Select all adapters"))+" ("+e._s(e.selectedAdapters.length)+")")])])],1)],1),e._l(e.adapterList,(function(t){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.namespace,attrs:{tag:"label"}},[s("q-item-section",{attrs:{side:""}},[s("q-checkbox",{attrs:{val:t.namespace},model:{value:e.selectedAdapters,callback:function(t){e.selectedAdapters=t},expression:"selectedAdapters"}})],1),s("q-item-section",[s("q-item-label",[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t"),s("icon",{staticClass:"q-ma-xs",staticStyle:{"font-size":"1.4rem"},attrs:{name:"information",color:"primary"}}),s("q-tooltip",{attrs:{"content-class":"bg-grey-8",offset:[4,4]}},[e._v(e._s(e.$t("import#warning").replace("{deviceObjectType}",t.deviceObjectType||"device").replace("{devicePattern}",t.devicePattern)))])],1)],1),s("q-item-section",{attrs:{side:""}},[s("q-item-label",["loaded"===e.state&&e.selectedAdapters.indexOf(t.namespace)>-1?s("q-chip",{attrs:{color:"primary","text-color":"white"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.$t("Devices"))+": "+e._s(t.devices)+"\n\t\t\t\t\t\t\t\t")]):e._e()],1)],1)],1)}))],2)],1),null!==e.state?s("div",{staticStyle:{"margin-bottom":"16px"}},[s("div",{staticClass:"text-h6 text-header primary"},[e._v(e._s(e.$t("Devices")))]),s("q-separator",{staticStyle:{margin:"0 -16px 16px -16px"}}),s("div",{staticClass:"q-pa-sm"},["loading"===e.state?s("q-spinner",{attrs:{color:"primary",size:"md"}}):e._e()],1),"loaded"===e.state?s("div",e._l(e.categories,(function(t,i){return s("q-expansion-item",{key:i,staticClass:"paper shadow-1 rounded-borders full-width",staticStyle:{"margin-bottom":"8px"},attrs:{disable:0===e.importedDevicesLength[i]},scopedSlots:e._u([{key:"header",fn:function(){return[s("q-item-section",[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.$t(t))+"\n\t\t\t\t\t\t\t")]),s("q-item-section",{attrs:{side:""}},[s("q-chip",{attrs:{color:"secondary","text-color":"white"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.importedDevicesLength[i])+"\n\t\t\t\t\t\t\t\t")])],1)]},proxy:!0}],null,!0),model:{value:e.expanded[i],callback:function(t){e.$set(e.expanded,i,t)},expression:"expanded[key]"}},[e.importedDevicesLength[i]>0?s("q-list",{attrs:{dense:""}},["new"===i||"existing"===i?s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[s("q-item-section",{attrs:{side:""}},[s("q-checkbox",{attrs:{value:0!==e.selectedDevices[i].length},nativeOn:{click:function(t){return t.stopPropagation(),e.toggleAllDevicesListItems(i)}}})],1),s("q-item-section",[s("q-item-label",[s("em",[e._v(e._s(e.$t("(Un)Select all devices"))+" ("+e._s(e.selectedDevices[i].length)+")")])])],1)],1):e._e(),e._l(e.importedDevices[i],(function(t){return s("q-expansion-item",{key:t.id,staticClass:"full-width",attrs:{"expand-icon-toggle":"","expand-separator":"",dense:""},scopedSlots:e._u([{key:"header",fn:function(){return[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"full-width",attrs:{tag:"label",disable:"new"!==i&&"existing"!==i}},[s("q-item-section",{attrs:{side:""}},["new"===i||"existing"===i?s("q-checkbox",{attrs:{val:t.id},model:{value:e.selectedDevices[i],callback:function(t){e.$set(e.selectedDevices,i,t)},expression:"selectedDevices[key]"}}):s("div",{staticStyle:{width:"40px"}})],1),s("q-item-section",[s("q-item-label",[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t"),t.attributes&&t.attributes.manufacturer?s("q-chip",{attrs:{color:"accent","text-color":"white"}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.attributes.manufacturer.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]):e._e()],1)],1),s("q-item-section",{attrs:{side:""}},[s("q-item-label",["new"===i?s("q-btn",{attrs:{flat:"",label:e.$t("ignore"),color:"negative"},on:{click:function(s){return e.ignoreDevice(t)}}}):e._e(),"ignored"===i?s("q-btn",{attrs:{flat:"",label:e.$t("restore"),color:"positive"},on:{click:function(s){return e.restoreDevice(t)}}}):e._e()],1)],1)],1)]},proxy:!0}],null,!0)},[s("div",{staticStyle:{"padding-left":"72px"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.$t("Function"))+": "+e._s(e.$t(t.function))+"\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t"),s("ul",{staticClass:"stateList"},e._l(t.states,(function(t,i){return s("li",{key:i},[s("strong",[e._v(e._s(i))]),e._l(t,(function(t,i){return s("ul",{key:i,staticClass:"stateKeyList"},[s("li",[e._v(e._s(e.$t(e.ucFirst(i)))+": "),s("code",[e._v(e._s(t))])])])}))],2)})),0)])])}))],2):e._e()],1)})),1):e._e()],1):e._e()],1),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:e.$t("Cancel"),color:"negative"},on:{click:e.onClose}}),s("q-btn",{attrs:{flat:"",label:e.$t("Read Adapters"),color:"secondary",loading:"loading"===e.state,disable:0===e.selectedAdapters.length},on:{click:e.readAdapters}}),"loaded"===e.state?s("q-btn",{attrs:{flat:"",label:e.$t("Import selected devices")+" ("+e.importDevicesLength+")",color:"primary",disable:0===e.importDevicesLength},on:{click:e.importDevices}}):e._e()],1)],1)],1)},ee=[],te=(s("ddb0"),s("2122")),se=s("705e"),ie=s("0215"),ae=Object(n["c"])({name:"ImportDevices",props:["open"],data(){return this.ucFirst=P["h"],{selectedAdapters:[],adapterStructure:"all",adapterStructureOptions:[{label:this.$i18n.t("Search adapter structure for all devices"),value:"all"},{label:this.$i18n.t("Search only for devices added to enums"),value:"enums"}],categories:{new:"New Devices",existing:"Devices that have been added already",incorrect:"Devices with incorrect configuration (states not found)",ignored:"Devices marked as ignored"},expanded:{_adapterList:!0,new:!0},importedDevices:{all:{},new:{},existing:{},incorrect:{},ignored:{},manufacturer:{}},selectedDevices:{new:[],existing:[],ignored:[]},showImportDevices:!1,state:null}},methods:{importDevices(){this.state=null,this.onClose();const e={},t=[...this.selectedDevices.new,...this.selectedDevices.existing];for(const i of t)e[i]=this.importedDevices.all[i];const s=Object.keys(this.importedDevices.ignored);for(const i of s)e[i]=this.importedDevices.ignored[i],e[i].attributes=e[i].attributes||{},e[i].attributes.ignore=!0;this.$store.commit("editor/addDevices",{devices:e})},onClose(){this.expanded._adapterList=!0,this.showImportDevices=!1,this.$emit("onClose",this.showImportDevices)},readAdapters(){this.state="loading","all"===this.adapterStructure?g["a"].importDevices(this.selectedAdapters).then(this.setImportedDevices).catch((e=>{se["a"]._("ImportDevicesPage","IMPORT_DEVICES: "+e.message,"error")})):g["a"].importEnums("functions",this.selectedAdapters).then(this.setImportedDevices).catch((e=>{se["a"]._("ImportDevicesPage","IMPORT_ENUMS: "+e.message,"error")}))},setImportedDevices(e){this.expanded._adapterList=!1,this.importedDevices={all:{},new:{},existing:{},incorrect:{},ignored:{},manufacturer:{}};const t=this.$store.state.editor.devices||{};e.forEach(((e,s)=>{const i=e.value||e.reason;i.attributes=i.attributes||{};let a="new";"fulfilled"===e.status&&e.value&&e.value.states&&Object.keys(e.value.states).length>0?void 0!==t[i.id]&&(a="existing",t[i.id].attributes&&!0===t[i.id].attributes.ignore&&(a="ignored")):(a="incorrect",i.states=null,i.attributes.note=i.attributes.note||e.reason&&e.reason.error&&e.reason.error.message||this.$i18n.t("No correct defined states found. The device may be unknown. Please help the developer to add support for this device and report to Github.")),this.importedDevices[a][i.id]=i,this.importedDevices.all[i.id]=i,i.attributes.manufacturer&&i.attributes.manufacturer.namespace&&(this.importedDevices.manufacturer[i.attributes.manufacturer.namespace]=this.importedDevices.manufacturer[i.attributes.manufacturer.namespace]||[],this.importedDevices.manufacturer[i.attributes.manufacturer.namespace].push(i.id))})),this.selectedDevices.new=Object.keys(this.importedDevices.new),this.state="loaded"},toggleAllAdapterListItems(){this.selectedAdapters.length>0?this.selectedAdapters=[]:this.selectedAdapters=Object.keys(te["a"])},toggleAllDevicesListItems(e){this.selectedDevices[e].length>0?this.selectedDevices[e]=[]:this.selectedDevices[e]=Object.keys(this.importedDevices[e])},ignoreDevice(e){this.importedDevices.ignored[e.id]=e,this.$delete(this.importedDevices.new,e.id),this.$delete(this.selectedDevices.new,this.selectedDevices.new.indexOf(e.id))},restoreDevice(e){this.importedDevices.new[e.id]=e,this.selectedDevices.new.push(e.id),this.$delete(this.importedDevices.ignored,e.id)}},computed:{importDevicesLength(){return this.selectedDevices.new.length+this.selectedDevices.existing.length},importedDevicesLength(){return{all:Object.keys(this.importedDevices.all).length,new:Object.keys(this.importedDevices.new).length,existing:Object.keys(this.importedDevices.existing).length,incorrect:Object.keys(this.importedDevices.incorrect).length,ignored:Object.keys(this.importedDevices.ignored).length}},adapterList(){const e=Object.values(te["a"]).map((e=>(e.devices=this.importedDevices.manufacturer[e.namespace]?this.importedDevices.manufacturer[e.namespace].length:0,e.name=e.default,e)));return e}},watch:{open(e){this.showImportDevices=e}},created(){this.toggleAllAdapterListItems(),ie["default"].register(this.$i18n,ie["default"].translations)}}),ne=ae,oe=(s("e0df"),s("8572")),re=s("9f0a"),le=s("b047"),ce=s("1c1c"),de=s("66e5"),pe=s("8f8e"),ue=s("0170"),ve=s("0d59"),he=s("714f"),me=Object(D["a"])(ne,Z,ee,!1,null,null,null),fe=me.exports;q()(me,"components",{QDialog:I["a"],QCard:K["a"],QCardSection:L["a"],QSpace:w["a"],QBtn:x["a"],QSeparator:N["a"],QField:oe["a"],QOptionGroup:re["a"],QExpansionItem:z["a"],QItemSection:G["a"],QChip:le["a"],QList:ce["a"],QItem:de["a"],QCheckbox:pe["a"],QItemLabel:ue["a"],QTooltip:_["a"],QSpinner:ve["a"],QCardActions:Q["a"]}),q()(me,"directives",{Ripple:he["a"]});var ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pa-md"},[s("q-table",{attrs:{data:e.devices,columns:e.columns,pagination:e.pagination,"rows-per-page-label":e.$t("Devices per page")},scopedSlots:e._u([{key:"header",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-th",{attrs:{"auto-width":""}}),e._l(t.cols,(function(i){return s("q-th",{key:i.name,attrs:{props:t}},[e._v("\n\t\t\t\t\t\n\t\t\t\t\t"+e._s(i.label)+"\n\t\t\t\t")])})),s("q-th",{attrs:{"auto-width":""}})],2)]}},{key:"body",fn:function(t){return[s("q-tr",{class:{rowDeleted:e.isDeleted(t.row)},attrs:{props:t}},[s("q-td",{attrs:{"auto-width":""}},[!0!==e.isDeleted(t.row)?s("div",[s("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-pencil"},on:{click:function(s){return e.onDeviceEdit(t.row)}}}),s("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-content-copy"},on:{click:function(s){return e.onDeviceCopy(t.row)}}})],1):e._e()]),s("q-td",{style:t.cols[0].style||{}},[s("div",{staticClass:"cursor-pointer",class:{itemDeleted:e.isDeleted(t.row)},on:{click:function(s){return e.copyToClipboard(t.row.id)}}},[s("q-tooltip",[e._v("\n\t\t\t\t\t\t\tID: "+e._s(t.row.id)+" ("+e._s(e.$t("click to copy to clipboard"))+")\n\t\t\t\t\t\t")]),s("span",[e._v(e._s(t.row.name))]),t.row.label?s("span",[e._v(" ("+e._s(t.row.label)+")")]):e._e(),s("icon",{staticStyle:{"margin-left":"4px"},attrs:{name:"clipboard-text-multiple-outline",size:"xs"}})],1)]),s("q-td",{style:t.cols[1].style||{}},[s("div",{class:{itemDeleted:e.isDeleted(t.row)}},[e._v("\n\t\t\t\t\t\t"+e._s(t.cols[1].value)+"\n\t\t\t\t\t")])]),s("q-td",{style:t.cols[2].style||{}},[s("div",{class:{itemDeleted:e.isDeleted(t.row)}},[e._v("\n\t\t\t\t\t\t"+e._s(t.cols[2].value)+"\n\t\t\t\t\t")])]),s("q-td",{style:t.cols[3].style||{}},[s("div",{class:{itemDeleted:e.isDeleted(t.row)}},[e._v("\n\t\t\t\t\t\t"+e._s(t.cols[3].value)+"\n\t\t\t\t\t")])]),s("q-td",{attrs:{"auto-width":""}},[!0!==e.isDeleted(t.row)?s("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-delete",color:"negative"},on:{click:function(s){return e.onDeviceRemove(t.row)}}}):e._e(),e.isDeleted(t.row)?s("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-restore",color:"positive"},on:{click:function(s){return e.onDeviceRestore(t.row)}}}):e._e()],1)],1)]}}])})],1)},ye=[],be=s("cdde"),Se=Object(n["c"])({name:"DevicesTable",props:["devices"],data(){return{pagination:{sortBy:"name",rowsPerPage:15},columns:[{name:"name",label:this.$i18n.t("Name")+" ("+this.$i18n.t("ID")+")",field:"name",align:"left",sortable:!0,style:{width:"20%"}},{name:"function",label:this.$i18n.t("Function"),field:"function",align:"left",sortable:!0,format:e=>this.$i18n.t(e),style:{width:"10%"}},{name:"manufacturer",label:this.$i18n.t("Manufacturer"),field:"manufacturer",align:"left",sortable:!0,format:(e,t)=>t.attributes&&t.attributes.manufacturer?t.attributes.manufacturer.name:"",style:{width:"10%"}},{name:"states",label:this.$i18n.t("States"),field:"states",align:"left",sortable:!0,format:e=>(e=Object.keys(e||"{}").join(", "),e.length>130?e.substr(0,128)+" ...":e),style:{width:"60%"}}]}},methods:{copyToClipboard(e){Object(be["a"])(e).then((()=>{this.$q.notify(this.$t("ID copied"))})).catch((()=>{}))},isDeleted(e){return e.attributes&&!0===e.attributes.deleted},onDeviceEdit(e){this.$store.commit("editor/editDevice",{device:e})},onDeviceCopy(e){this.$store.commit("editor/copyDevice",{device:e})},onDeviceRemove(e){this.$store.commit("editor/removeDevice",{device:e})},onDeviceRestore(e){this.$store.commit("editor/restoreDevice",{device:e})}}}),De=Se,we=s("eaac"),xe=s("bd08"),Ce=s("357e"),_e=s("db86"),ke=Object(D["a"])(De,ge,ye,!1,null,null,null),qe=ke.exports;q()(ke,"components",{QTable:we["a"],QTr:xe["a"],QTh:Ce["a"],QTd:_e["a"],QBtn:x["a"],QTooltip:_["a"]});var $e=s("a54a"),Oe=s("6bed"),Ee=Object(n["c"])({name:"DevicesPage",components:{DevicePage:Y,DevicesTable:qe,ImportDevices:fe,JsonEditor:$e["a"]},data(){const e=[{label:this.$i18n.t("Function"),value:"function"},{label:this.$i18n.t("Manufacturer"),value:"manufacturer"}];return{expanded:{},groupByOptions:e,showImportDevices:!1}},methods:{actionSwapNameWithLabel(){this.$store.commit("editor/actionSwapNameWithLabel")},addDevice(){this.$store.commit("editor/addDevice")},onJsonEditor(e){e._error||this.$store.commit("editor/set",{[e.id]:JSON.parse(e.value)})},onChange({id:e,error:t,value:s}){if(t)this.$store.commit("editor/addError",{key:"settings-"+e,val:t.message||t});else if(s){this.$store.commit("editor/removeError",{key:"settings-"+e});for(const e in s)this.$store.commit("editor/set",{["settings."+e]:s[e]})}}},computed:{pageHeight(){return this.$store.state.jarvis.pageHeight},devicesGroupBy:{get(){var e;return(null===(e=this.$store.state.editor.settings)||void 0===e?void 0:e.configDevicesGroupBy)&&this.groupByOptions.find((e=>e.value===this.$store.state.editor.settings.configDevicesGroupBy))||this.groupByOptions[0]},set({value:e}){this.$store.commit("editor/set",{"settings.configDevicesGroupBy":e})}},devicesFilter:{get(){var e;return(null===(e=this.$store.state.editor.settings)||void 0===e?void 0:e.configDevicesFilter)||""},set(e){this.$store.commit("editor/set",{"settings.configDevicesFilter":e})}},groups(){return this.$store.getters["editor/getGroups"](this.devicesGroupBy.value,this.devicesFilter)},devicesCount(){return this.$store.getters["editor/getDevicesWthoutDeletionsCount"]},json(){return this.$store.state.editor.devices},expertMode(){var e;return null===(e=this.$store.state.editor.settings)||void 0===e?void 0:e.configExpertMode}},beforeCreate(){Oe["default"].register(this.$i18n,Oe["default"].translations)}}),je=Ee,Ie=s("65c6"),Ke=s("6ac5"),Le=s("ddd8"),Ne=s("27f9"),Qe=s("f20b"),Ae=s("0016"),Te=s("7f67"),Pe=Object(D["a"])(je,i,a,!1,null,null,null),Fe=Pe.exports;q()(Pe,"components",{QToolbar:Ie["a"],QToolbarTitle:Ke["a"],QSelect:Le["a"],QInput:Ne["a"],QSpace:w["a"],QBtnDropdown:Qe["a"],QList:ce["a"],QItem:de["a"],QItemSection:G["a"],QIcon:Ae["a"],QItemLabel:ue["a"],QBtn:x["a"],QExpansionItem:z["a"]}),q()(Pe,"directives",{ClosePopup:Te["a"]})},d57e:function(e,t,s){"use strict";s.r(t),t["default"]={"Devices List":"Geräteliste","Import Devices":"Geräte importieren","Add Device":"Gerät hinzufügen","Group by":"Gruppieren nach",Filter:"Filtern","Quick Actions":"Schnell-Aktionen","Swap Device Name and Label":"Geräte-Name und -Label tauschen","without label":"ohne Bezeichner","Devices per page":"Geräte pro Seite"}},def5:function(e,t,s){"use strict";s.r(t);var i=s("0692");t["default"]={translations:Object(i["a"])((e=>s("a7a4")("./"+e))),register:i["c"]}},e0df:function(e,t,s){"use strict";s("b2d7")},e8c8:function(e,t,s){}}]);