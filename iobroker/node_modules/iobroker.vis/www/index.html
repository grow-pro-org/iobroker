<!DOCTYPE html>
<html manifest="cache.manifest" xmlns="http://www.w3.org/1999/html">
<head>
    <!-- vis Version 1.4.5 -->

    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=2, minimum-scale=0.5, user-scalable=yes" />
    <meta name="mobile-web-app-capable" content="yes">

    <!-- cordova settings -->
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self' * 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline' *; img-src 'self' 'unsafe-inline' * data:; media-src 'self' 'unsafe-inline' *; connect-src 'self' 'unsafe-eval' 'unsafe-inline' * ws: wss:; script-src 'self' 'unsafe-eval' 'unsafe-inline' *; frame-src 'self' 'unsafe-eval' 'unsafe-inline' * data: kioskpro:">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">

    <link href="img/favicon.png" rel="shortcut icon" type="image/x-icon" />
    <link href="img/favicon.png" rel="apple-touch-icon" />

    <title>vis</title>

    <link rel="stylesheet" type="text/css" href="lib/css/jquery.multiselect-1.13.css" />

    <link rel="stylesheet" type="text/css" href="css/backgrounds.css" />
    <link rel="stylesheet" type="text/css" href="css/vis.css" />
    <link rel="stylesheet" type="text/css" href="css/vis-common-user.css" />
    <link rel="stylesheet" type="text/css" href="css/app.css" />
    <link rel="stylesheet" type="text/css" href="css/styles.css" />

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="../../lib/js/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="../../lib/js/jquery-ui-1.11.4.full.min.js"></script>
    <script type="text/javascript" src="../../lib/js/socket.io.js"></script>
    <script type="text/javascript" src="lib/js/translate.js"></script>
    <script type="text/javascript" src="js/app.js"></script>

    <script type="text/javascript" src="lib/js/can.custom.min.js"></script>
    <script type="text/javascript" src="lib/js/jquery.ui.touch-punch.min.js"></script>
    <script type="text/javascript" src="lib/js/jquery.multiselect-1.13.min.js"></script>
    <script type="text/javascript" src="lib/js/quo.standalone.js"></script>
    <script type="text/javascript" src="lib/js/loStorage.js"></script>
    <script type="text/javascript" src="lib/js/moment-with-locales.min.js"></script>

    <script type="text/javascript" src="_socket/info.js"></script>
    <script type="text/javascript" src="js/config.js"></script> <!-- this file must be before vis.js -->
    <script type="text/javascript" src="js/conn.js"></script>
    <script type="text/javascript" src="js/visUtils.js"></script>
    <script type="text/javascript" src="js/vis.js"></script>
</head>
<body>
<!-- ---------------------------------------  DO NOT EDIT INSIDE THIS LINE - BEGIN ------------------------------------------- -->
<!-- --------------basic.html--- START -->
<link rel="stylesheet" type="text/css" href="widgets/basic/css/table.css" />
<script type="text/javascript" src="widgets/basic/js/table.js"></script>

<script type="text/javascript">
    'use strict';

    if (vis.editMode) {
        // Add words for basic widgets
        $.extend(true, systemDictionary, {
            // Bars
            "src":              {"en": "Source",                    "de": "Quelle",                 "ru": "Адрес"},
            "refreshInterval":  {"en": "Refresh interval(ms)",      "de": "Updatezeit(ms)",         "ru": "Интервал обновления(ms)"},
            "is_comma":         {"en": "Divider comma",             "de": "Komme als Trennung",     "ru": "Запятая-разделитель"},
            "is_tdp":           {"en": "Use thousands separator",  "de": "Tausender Trennzeichen",  "ru": "Use thousands separator"},
            "digits":           {"en": "Digits after comma",        "de": "Zeichen nach Komma",     "ru": "Знаков после запятой"},
            "oid":              {"en": "Object ID",                 "de": "Object ID",              "ru": "ID Объекта"},
            "html_prepend":     {"en": "Prepend value",             "de": "Voranstellen HTML",      "ru": "Префикс значения"},
            "html_append":      {"en": "Append to value",           "de": "HTML anhängen",          "ru": "Суффикс значения"},
            "html_append_singular": {
                "en": "Append to value (Singular)",
                "de": "HTML anhängen (Singulär)",
                "ru": "Суффикс значения(един.ч.)"
            },
            "html_append_plural": {
                "en": "Append to value (Plural)",
                "de": "HTML anhängen(Plüral)",
                "ru": "Суффикс значения(множ.ч.)"
            },
            "html_prepend_tooltip":    {
                "en": "Write HTML code here that will be placed before,\x0Ae.g. <b> ",
                "de": "HTML Kod, der wird vom dem Wert platziert,\x0Az.B. <b>",
                "ru": "HTML код будет помещён перед значением,\x0Aнапример <b>"
            },
            "html_append_tooltip":     {
                "en": "Write HTML code here that will be placed before,\x0Ae.g. </b>",
                "de": "HTML Kod, der wird vom dem Wert platziert,\x0Az.B. </b>",
                "ru": "HTML код будет помещён после значения,\x0Aнапример </b>"
            },
            "stretch":          {"en": "Stretch",                   "de": "Strecken",               "ru": "Растянуть"},
            "factor":           {"en": "Multiplex factor",          "de": "Multiplikation",         "ru": "Множитеть"},
            "class_true":       {"en": "Class if quality 'true'",   "de": "Klasse bei Qualität 'true'", "ru": "Класс, если качество 'true'"},
            "class_false":      {"en": "Class if quality 'false'",  "de": "Klasse bei Qualität 'false'", "ru": "Класс, если качество 'false'"},
            "test_html":        {"en": "Text for test",             "de": "Testtext",               "ru": "Тестовый текст"},
            "test_html_tooltip": {
                "en": "You can specify the test text if value is now empty to visualise settings.\x0AIt is valid only during edit.",
                "de": "Man kann noch Testtext setzen um die Einstellungen visuell zu sehen.\x0ADas ist nur während Edit gültig.",
                "ru": "Можно задать тестовый текст, что бы видеть настройки визуально.\x0AОн действителен только во время редактирования."
            },
            "html":             {"en": "HTML",                      "de": "HTML",                   "ru": "HTML"},
            "oid-quality":      {"en": "Quality ID",                "de": "Qualität ID",            "ru": "ID-Качество"},
            "oid-quality_tooltip":     {
                "en": "You can set additionally Quality ID to indicate if the value valid or not.",
                "de": "Man kann noch zusätzlich Qualität ID setzetn um zu zeigen ob das Wert aktuell ist.",
                "ru": "Можно дополнительно установить ID-Качества, что бы показать актуальное значение или нет."},
            "title":            {"en": "Title",                     "de": "Titel",                  "ru": "Заголовок"},
            "title_font":       {"en": "Title font name",           "de": "Titelschriftname",       "ru": "Шрифт заголовка"},
            "title_color":      {"en": "Title color",               "de": "Titelfarbe",             "ru": "Цвет заголовка"},
            "title_back":       {"en": "Title backg. color",        "de": "Titelhintergrund",       "ru": "Цвет фона текста"},
            "title_top":        {"en": "Title top padding",         "de": "Titel-Oben-Abstand",     "ru": "Отступ заголовка сверху"},
            "title_left":       {"en": "Title left padding",        "de": "Titel-Links-Abstand",    "ru": "Отступ заголовка слева"},
            "header_height":    {"en": "Header height",             "de": "Kopfhöhe",               "ru": "Высота заголовока"},
            "header_color":     {"en": "Header color",              "de": "Kopffarbe",              "ru": "Цвет фона заголовка"},
            "refreshOnWakeUp":  {"en": "Refresh on wake up",        "de": "Update bei Aufwachen",   "ru": "Обновлять при выходе из сна"},
            "refreshOnViewChange": {"en": "Refresh on view change", "de": "Update bei Viewwechsel", "ru": "Обновлять при смене страницы"},
            "refreshWithNoQuery": {"en": "Do not add anything to URL", "de": "Addiere nichst zu URL", "ru": "Ничего не добавлять к URL"},
            "src_":             {"en": "URL, by value=",            "de": "URL falls Wert=",        "ru": "Адрес при значении "},
            "nav_view":         {"en": "View to navigate",          "de": "View zum Navigieren",    "ru": "Перейти на страницу"},
            "group_effects":    {"en": "Show/Hide Effects",         "de": "Anzeige Effekte",        "ru": "Эффекты появления/исчезновения"},
            "group_extended":   {"en": "Extended settings",         "de": "Erweiterte Eistellungen", "ru": "Расширенные настройки"},
            "body-background":  {"en": "Background color by changing", "de": "Hintegrund by Wechsel", "ru": "Фон при смене страниц"},
            "sync":             {"en": "Hide and show together:",   "de": "Anzeigen und verbergen gleichzeitig", "ru": "Появления и исчезновение вместе"},
            // Effects
            "show":             {"en": "show",                      "de": "show",                   "ru": "show"},
            "blind":            {"en": "blind",                     "de": "blind",                  "ru": "blind"},
            "bounce":           {"en": "bounce",                    "de": "bounce",                 "ru": "bounce"},
            "clip":             {"en": "clip",                      "de": "clip",                   "ru": "clip"},
            "drop":             {"en": "drop",                      "de": "drop",                   "ru": "drop"},
            "explode":          {"en": "explode",                   "de": "explode",                "ru": "explode"},
            "fade":             {"en": "fade",                      "de": "fade",                   "ru": "fade"},
            "fold":             {"en": "fold",                      "de": "fold",                   "ru": "fold"},
            "highlight":        {"en": "highlight",                 "de": "highlight",              "ru": "highlight"},
            "puff":             {"en": "puff",                      "de": "puff",                   "ru": "puff"},
            "pulsate":          {"en": "pulsate",                   "de": "pulsate",                "ru": "pulsate"},
            "scale":            {"en": "scale",                     "de": "scale",                  "ru": "scale"},
            "shake":            {"en": "shake",                     "de": "shake",                  "ru": "shake"},
            "size":             {"en": "size",                      "de": "size",                   "ru": "size"},
            "slide":            {"en": "slide",                     "de": "slide",                  "ru": "slide"},
            "is_milliseconds":  {"en": "Milliseconds",              "de": "Millisekunden",          "ru": "Миллисекунды"},
            "is_milliseconds_tooltip": {
                "en": "Is object is milliseconds from 1970.01.01 00:00:00. Normally no.",
                "de": "Ob das Wert die Milleskunden seit 1970.01.01 00:00:00 ist. Normalerweise nicht.",
                "ru": "Является ли значение объекта миллисекундами с 1970.01.01 00:00:00. Обычно нет."
            },
            "format_date":      {"en": "Dateformat",                "de": "Datumformat",            "ru": "Формат даты"},
            "format_date_tooltip": {
                "en": "Dateformat",
                "de": "Datumformat",
                "ru": "Формат даты"
            },
            "show_interval":    {"en": "As interval",               "de": "Als Intervall",          "ru": "Как интервал"},
            "hide_effect":      {"en": "Hide effect",               "de": "Verbergeneffekt",        "ru": "Эффект скрытия"},
            "hide_duration":    {"en": "Hide duration(ms)",         "de": "Verbergendauer",         "ru": "Длительность скрытия(мс)"},
            "hide_options":     {"en": "Hide options",              "de": "Verbergenoptionen",      "ru": "Опции скрытия"},
            "show_effect":      {"en": "Show effect",               "de": "Anzeigeeffekt",          "ru": "Эффект появления"},
            "show_duration":    {"en": "Show duration(ms)",         "de": "Anzeigedauer",           "ru": "Длительность появления(мс)"},
            "show_options":     {"en": "Show options",              "de": "Anzeigeoptionen",        "ru": "Опции появления"},
            "left":             {"en": "left",                      "de": "links",                  "ru": "лево"},
            "right":            {"en": "right",                     "de": "rechts",                 "ru": "право"},
            "top":              {"en": "top",                       "de": "oben",                   "ru": "верх"},
            "bottom":           {"en": "bottom",                    "de": "unten",                  "ru": "низ"},

            "contains_view":    {"en": "Contains view",             "de": "Viewname",               "ru": "Имя страницы"},
            "persistent":       {"en": "Persistent",                "de": "Bleibend",               "ru": "Постоянно"},
            "persistent_tooltip": {
                "en": "If persistent the view will not be destroyed when inactive, just hide.\nElsewise the view will be destroyed, if inactive.",
                "de": "Falls 'Bleibend', dann wird die View nicht zerstört, sondern nur versteckt wenn inaktive. Sonst wird die View immer wieder kreiert und zerstört.",
                "ru": "Если выбранно 'Постоянно', то страница не будет уничтожаться, если она не активна. В противном случае страница будет создаваться и разрушаться."},
            "notIfInvisible":       {"en": "Only if visible",                "de": "Nur falls sichtbar",               "ru": "Только если видимо"},
            "notIfInvisible_tooltip": {
                "en": "View will be used only if this widget is visible",
                "de": "Die View wird nur benutzt, wenn dieses Widget sichtbar ist",
                "ru": "Страница будет использоваться только в том случае, если виден этот виджет"
            },
            "valuelist":        {"en": "Values list",               "de": "Wertenliste",            "ru": "Список значений"},
            "valuelist_tooltip": {
                "en": "Divide values with semicolon, like 'ok;warning;alram'. Every text accordingly for value 0,1,2 and so on\nTo have ';' in text use §§ instead.",
                "de": "Die Werte mit Semikolon trennen, wie 'ok;Warnung;Alarm'. Jeder Text ist entsprechend für das Wert 0,1,2 usw.\nUm ';' im Text zu haben, schrein '§§'.",
                "ru": "Разделять значения точкой запятой, например 'ok;Внимание;Тревога'. Каждый текст соответственно для значения 0,1,2 итд.\nДля написания ';' в тексте используй '§§'."
            },
            "html_false":       {"en": "HTML by 'false'",           "de": "HTML bei 'false'",       "ru": "HTML если 0"},
            "html_true":        {"en": "HTML by 'true'",            "de": "HTML bei 'true'",        "ru": "HTML если 1"},
            "text_false":       {"en": "Text by 'false'",           "de": "Text bei 'false'",       "ru": "Текст если 0"},
            "text_true":        {"en": "Text by 'true'",            "de": "Text bei 'true'",        "ru": "Текст если 1"},
            "svg_false":        {"en": "SVG by 'false'",            "de": "SVG bei 'false'",        "ru": "SVG если 0"},
            "svg_true":         {"en": "SVG by 'true'",             "de": "SVG bei 'true'",         "ru": "SVG если 1"},
            "svg_opacity":      {"en": "Opacity",                   "de": "Durchsichtigkeit",       "ru": "Прозрачность"},
            "html_closed":      {"en": "HTML by 'closed'",          "de": "HTML bei 'zu'",          "ru": "HTML если закрыто"},
            "html_open":        {"en": "HTML by 'open'",            "de": "HTML bei 'auf'",         "ru": "HTML если открыто"},
            "html_tilt":        {"en": "HTML by 'tilted'",          "de": "HTML bei 'gekippt'",     "ru": "HTML если наклоненно"},
            "html_tilt_tooltip": {
                "en": "0 - Closed, 1 - tilt, 2 - open",
                "de": "0- Zu, 1 - gekippt, 2 - auf",
                "ru": "0 - закрыто, 1 - откинуто, 2 - открыто"
            },
            "color":            {"en": "Color",                     "de": "Farbe",                  "ru": "Цвет"},
            "shadow":           {"en": "Opacity",                   "de": "Durchsichtigkeit",       "ru": "Тень"},
            "shadow_tooltip":   {
                "en": "CSS Shadow, like '10px 10px 5px #888888'",
                "de": "CSS Shatten, wie '10px 10px 5px #888888'",
                "ru": "CSS Тень, как '10px 10px 5px #888888'"
            },
            "reverse":          {"en": "Revers value",              "de": "Wert umkehren",          "ru": "Перевернуть значение"},
            "border":           {"en": "Border",                    "de": "Rand",                   "ru": "Окантовка"},
            "border_tooltip":   {
                "en": "CSS border, like 'green 5px solid'",
                "de": "CSS Rand, wie 'green 5px solid'",
                "ru": "CSS бордюр, как 'green 5px solid'"
            },
            "test_text":        {"en": "Test text",                 "de": "Testtext",               "ru": "Тестовый текст"},
            "max_width":        {"en": "Max. width",                "de": "Maximale Breite",        "ru": "Максимальная ширина"},
            "style":            {"en": "Style for ",                "de": "Stil für ",              "ru": "Стиль для "},
            "style_tooltip":    {
                "en": "Write here css style, like: 'color:red;background:white'",
                "de": "Hier muss CSS Stil stehen, wie 'color:red;background:white'",
                "ru": "CSS Стиль, например: 'color:red;background:white'"},
            "count":            {"en": "Values number to",          "de": "Wertsanzahl bis",        "ru": "Количество значений до"},
            "test_list":        {"en": "Test value",                "de": "Testwert",               "ru": "Тестовое значение"},
            "urlValue":         {"en": "Call URL on click",         "de": "Rufe URL bei click",     "ru": "Вызвать URL при нажатии"},
            "group_ccontrol":   {"en": "Advanced control",          "de": "Extrasteuerung",         "ru": "Продвинутое управление"},
            "urlFalse":         {"en": "URL on false",              "de": "URL bei false",          "ru": "URL при false"},
            "urlTrue":          {"en": "URL on true",               "de": "URL bei true",           "ru": "URL при true"},
            "oidFalse":         {"en": "Object ID on false",        "de": "Objekt ID bei false",    "ru": "ID объекта при false"},
            "oidTrue":          {"en": "Object ID on true",         "de": "Objekt ID bei true",     "ru": "ID объекта при true"},
            "oidTrueValue":     {"en": "Value for OÍD on true",     "de": "Wert für ID bei false",  "ru": "Значение для ID при false"},
            "oidFalseValue":    {"en": "Value for OÍD on false",    "de": "Wert für ID bei true",   "ru": "Значение для ID при true"},
            "square":           {"en": "square",                    "de": "square",                 "ru": "квадрат"},
            "pentagone":        {"en": "pentagone",                 "de": "pentagone",              "ru": "Пятиуголник"},
            "hexagone":         {"en": "hexagone",                  "de": "hexagone",               "ru": "Шестиугольник"},
            "octagone":         {"en": "octagone",                  "de": "octagone",               "ru": "Восьмиугольник"},
            "circle":           {"en": "circle",                    "de": "Kreis",                  "ru": "Круг"},
            "svgType":          {"en": "Type",                      "de": "Typ",                    "ru": "Тип"},
            "strokeColor":      {"en": "Stroke color",              "de": "Liniefarbe",             "ru": "Цвет линии"},
            "fill":             {"en": "Fill color",                "de": "Füllfarbe",              "ru": "Цвет заливки"},
            "strokeWidth":      {"en": "Stroke width",              "de": "Liniebreite",            "ru": "Ширина линии"},
            "rotate":           {"en": "Rotate",                    "de": "Drehen",                 "ru": "Повернуть на"},
            "no_control":       {"en": "Read only",                 "de": "Nur Anzeige",            "ru": "Только показывать"},
            "numeric":          {"en": "Number",                    "de": "Nummer",                 "ru": "Число"},
            "autoSet":          {"en": "Auto set",                  "de": "Auto-setzen",            "ru": "Авто запись"},
            "autoSet_tooltip":  {
                "en": "Without 'Auto set' you must press ENTER,\x0ato write the value.",
                "de": "Ohne 'Auto-setzen' man muss danach ENTER drucken,\x0A um das Wert zu schreiben.",
                "ru": "Без 'Авто записи' нужно нажать ENTER,\x0Aчто бы записать значение."
            },
            "group_views":      {"en": "Views",                     "de": "Views",                  "ru": "Страницы"},
            "group_frames":     {"en": "iFrames",                   "de": "iFrames",                "ru": "iFrames"},
            "horizontal":       {"en": "horizontal",                "de": "horizontal",             "ru": "горизонтально"},
            "vertical":         {"en": "vertical",                  "de": "senkrecht",              "ru": "вертикально"},
            "orientation":      {"en": "Orientation",               "de": "Ausrichtung ",           "ru": "Направление"},
            "noSandbox":        {"en": "No sandbox",                "de": "Kein Sandkasten",        "ru": "Не запускать в песочнице"},
            "scrollX":          {"en": "Scroll X",                  "de": "Scroll X",               "ru": "Scroll X"},
            "scrollY":          {"en": "Scroll Y",                  "de": "Scroll Y",               "ru": "Scroll Y"},
            "seamless":         {"en": "Seamless",                  "de": "Kein Rahmen",            "ru": "Без рамки"},
            "filters":          {"en": "Filters",                   "de": "Filter",                 "ru": "Фильтры"},
            "filters_Tooltip":  {
                "en": "Divided by semicolon,\x0Ae.g: light;control",
                "de": "Geteilt mir Semikolon\x0Az.B.: Licht;Steuerung",
                "ru": "Разделять точкой запятой\x0Aнапример: Свет;Управление"
            },
            "Select ID":        {"en": "Select ID",                 "de": "ID auswählen",           "ru": "Выбрать ID"},
            "redirect_url":     {"en": "Redirect URL",              "de": "Weiterleiten nach Logout", "ru": "Перейти на URL после выхода"},
            "in_app_close":     {"en": "Close mobile APP",          "de": "Mobiles APP schliessen", "ru": "Закрыть мобильное приложение"},
            "en-US":            {"en": "english",                   "de": "Englisch",               "ru": "английский"},
            "ru-RU":            {"en": "russian",                   "de": "Russisch",               "ru": "русский"},
            "continuous":       {"en": "Continuous",                "de": "Immer zuhören",          "ru": "Непрерывно"},
            "keywords":         {"en": "Keywords",                  "de": "Schlüsselworte",         "ru": "Ключевые слова"},
            "noImage":          {"en": "No image",                  "de": "Kein Bild",              "ru": "Без картинки"},
            "imageInactive":    {"en": "Inactive",                  "de": "Inaktiv",                "ru": "Не активно"},
            "imageActive":      {"en": "Active",                    "de": "Aktiv",                  "ru": "Активно"},
            "imageStarted":     {"en": "Started",                   "de": "Gestartet",              "ru": "Запущено"},
            "imageDetected":    {"en": "Detected",                  "de": "Gefunden",               "ru": "Обнаружено"},
            "imageSent":        {"en": "Sent",                      "de": "Gesedet",                "ru": "Отослано"},
            "imageHeightPx":    {"en": "Height (px)",               "de": "Höhe (px)",              "ru": "Высота (px)"},
            "imageWidthPx":     {"en": "Width (px)",                "de": "Breite (px)",            "ru": "Ширина (px)"},
            "noText":           {"en": "No help text",              "de": "Keine Hilfetext",        "ru": "Без текста помощи"},
            "noResults":        {"en": "No results",                "de": "Keine Ergebnise",        "ru": "Без результатов"},
            "keyWordColor":     {"en": "Key word color",            "de": "Schlüsselworte-Farbe",   "ru": "Цвет ключевых слов"},
            "keyWordColor_tooltip": {
                "en": "Text color, if key word found",
                "de": "Textfarbe, wenn im Text Schlüsselwort gefunden ist.",
                "ru": "Цвет текста, когда обнаружено ключевое слово"
            },
            "textSentColor":    {"en": "Text sent color",           "de": "Gesendet-Farbe",         "ru": "Цвет отосланного текста"},
            "textSentColor_tooltip": {
                "en": "Text color, when text sent to processing it",
                "de": "Textfarbe, wenn Text ist für Abarbeitung gesendet.",
                "ru": "Цвет текста, когда текст отослан на обработку"
            },
            "speechMode":       {"en": "Speech mode",               "de": "Sprachmodus",            "ru": "Режим речи"},
            "single":           {"en": "single",                    "de": "Ein mal",                "ru": "Одиночный"},
            "startstop":        {"en": "start/stop",                "de": "Start/Stop",             "ru": "Старт/стоп"},
            "line":             {"en": "line",                      "de": "Linie",                  "ru": "линия"},
            "triangle":         {"en": "triangle",                  "de": "Dreieck",                "ru": "треугольник"},
            "star":             {"en": "star",                      "de": "Stern",                  "ru": "звезда"},
            "arrow":            {"en": "arrow",                     "de": "Pfeil",                  "ru": "стрела"},
            "scaleWidth":       {"en": "Scale width",               "de": "breiten Skala",          "ru": "Масштаб по ширине"},
            "scaleHeight":      {"en": "Scale height",              "de": "höhen Skala",            "ru": "Масштаб по высоте"},
            "autoFocus": {
                "en": "Auto focus",
                "de": "Autofokus",
                "ru": "Автофокус",
                "pt": "Auto-foco",
                "nl": "Autofocus",
                "fr": "Mise au point automatique",
                "it": "Messa a fuoco automatica",
                "es": "Enfoque automático",
                "pl": "Automatyczne ustawianie ostrości",
                "zh-cn": "自动对焦"
            }
        });
    }

    $.extend(true, systemDictionary, {
        "Edit note":    {"en": "Edit note",     "de": "Meldung eingeben",   "ru": "Сообщение"},
        "Clear":        {"en": "Clear",         "de": "Löschen",            "ru": "Очистить"},
        "Ok":           {"en": "Ok",            "de": "Ok",                 "ru": "Ok"},
        "Cancel":       {"en": "Cancel",        "de": "Abbrechen",          "ru": "Отмена"},
        "all":          {"en": "all",           "de": "Alle",               "ru": "Все"},
        "just&nbsp;now":  {"en": "just&nbsp;now", "de": "gerade&nbsp;jetzt", "ru": "только&nbsp;что"},
        "for&nbsp;%s&nbsp;min.":  {"en": "for&nbsp;%s&nbsp;min.", "de": "vor&nbsp;%s&nbsp;Min.", "ru": "%s&nbsp;мин. назад"},
        "for&nbsp;%s&nbsp;hr.&nbsp;and&nbsp;%s&nbsp;min.": {
            "en": "for&nbsp;%s&nbsp;hr.&nbsp;and&nbsp;%s&nbsp;min.",
            "de": "vor&nbsp;%s&nbsp;St.&nbsp;und&nbsp;%s&nbsp;Min.",
            "ru": "%s&nbsp;часов&nbsp;и&nbsp;%s&nbsp;мин. назад"
        },
        "yesterday":              {"en": "yesterday", "de": "gestern", "ru": "вчера"},
        "for&nbsp;%s&nbsp;hours": {"en": "for&nbsp;%s&nbsp;hours", "de": "vor&nbsp;%s&nbsp;Stunden", "ru": "%s&nbsp;часов назад"},
        "click to create":        {"en": "click to create", "de": "klicken um zu erzeugen", "ru": "нажать что бы создать"},
        "This option works only in APP": {
            "en": "This option works only in APP",
            "de": "Funktioniert nur im APP",
            "ru": "Работает только в мобильном приложении"
        },
        "info_start": {
            "en": "Click on the microphone icon and begin speaking.",
            "de": "Klicken Sie das Mikrophon an und sagen Sie etwas.",
            "ru": "Нажмите на микрофон и начинайте говорить."
        },
        "info_speak_now": {
            "en": "Speak now.",
            "de": "Sage etwas.",
            "ru": "Говорите."
        },
        "info_no_speech": {
            "en": "No speech was detected. You may need to adjust your <a href=\"//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892\">microphone settings</a>.",
            "de": "No speech was detected. You may need to adjust your <a href=\"//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892\">microphone settings</a>.",
            "ru": "Речи не обнаружено. Может надо настроить микрофон <a href=\"//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892\">Настройки микрофона</a>."
        },
        "info_no_microphone": {
            "en": "No microphone was found. Ensure that a microphone is installed and that <a href=\"//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892\"> microphone settings</a> are configured correctly.",
            "de": "No microphone was found. Ensure that a microphone is installed and that <a href=\"//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892\"> microphone settings</a> are configured correctly.",
            "ru": "No microphone was found. Ensure that a microphone is installed and that <a href=\"//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892\"> microphone settings</a> are configured correctly."
        },
        "info_allow": {
            "en": "Click the \"Allow\" button above to enable your microphone.",
            "de": "Click the \"Allow\" button above to enable your microphone.",
            "ru": "Нажмите на кнопку \"разрешить\" сверху, что бы активировать микрофон."
        },
        "info_denied": {
            "en": "Permission to use microphone was denied.",
            "de": "Permission to use microphone was denied.",
            "ru": "Доступ к микрофону был запрещён."
        },
        "info_blocked": {
            "en": "Permission to use microphone is blocked. To change, go to chrome://settings/contentExceptions#media-stream",
            "de": "Permission to use microphone is blocked. To change, go to chrome://settings/contentExceptions#media-stream",
            "ru": "Доступ к микрофону блокирован. Что бы изменить настройки идите <a href=\"chrome://settings/contentExceptions#media-stream\">сюда</a>"
        },
        "info_upgrade": {
            "en": "Web Speech API is not supported by this browser. Upgrade to<a href=\"//www.google.com/chrome\">Chrome</a> version 25 or later.",
            "de": "Web Speech API is not supported by this browser. Upgrade to<a href=\"//www.google.com/chrome\">Chrome</a> version 25 or later.",
            "ru": "Web Speech API не поддерживается этим браузером. Обновите до <a href=\"//www.google.com/chrome\">Chrome</a> версии 25 или новее."
        }
    });

    vis.binds.stateful = {
        view: function (el, viewArr, persistent, notIfInvisible) {
            var $this = $(el);
            var oid   = $this.attr('data-oid');
            var timer = null;

            function draw(val) {
                timer = null;
                var view = viewArr[val];
                if (!persistent) {
                    $this.parent().find('div.vis-view').remove();
                } else {
                    $this.parent().find('div.vis-view').hide().appendTo($('#vis_container'));
                }
                if (vis.views[view]) {
                    vis.renderView(view, view, true, function (_view) {
                        var $view = $('#visview_' + _view);
                        $view.show().data('persistent', persistent);
                        if (!$this.find('#visview_' + _view).length) {
                            $view.appendTo($this);
                        }
                    });
                }
                vis.destroyUnusedViews();
            }

            function onChange(e, newVal) {
                if (newVal === 'true'  || newVal === true)  newVal = 1;
                if (newVal === 'false' || newVal === false) newVal = 0;
                if (notIfInvisible && !$this.is(':visible')) {
                    return;
                }

                if (timer) {
                    clearTimeout(timer)
                }
                timer = setTimeout(function () {
                    draw(newVal);
                }, 50);
            }

            if (oid) {
                vis.states.bind(oid + '.val', onChange);

                // remember all ids, that bound
                $this.parent().parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);
            }
        },
        iframe: function (el, srcArr, refreshInterval) {
            var $this = $(el).parent().find('iframe');
            var oid   = $this.attr('data-oid');
            refreshInterval = parseInt(refreshInterval, 10) || 0;

            function onChange (e, newVal) {
                if (newVal === 'true'  || newVal === true)  newVal = 1;
                if (newVal === 'false' || newVal === false) newVal = 0;
                $this.attr('src', srcArr[newVal]);
            }

            if (oid) {
                vis.states.bind(oid + '.val', onChange);

                // remember all ids, that bound
                $this.parent().parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);

                if (vis.states[oid + '.val'] !== undefined) {
                    var val = vis.states[oid + '.val'];
                    if (val === 'true'  || val === true)  val = 1;
                    if (val === 'false' || val === false) val = 0;
                    $this.attr('src', srcArr[val]);
                }

                if (refreshInterval > 0) {
                    setInterval(function () {
                        var val = vis.states[oid + '.val'] || 0;
                        if (val === 'true'  || val === true)  val = 1;
                        if (val === 'false' || val === false) val = 0;
                        var src = srcArr[val];
                        $this.attr('src', src + (src.match(/\?/) ? '&' : '?') + '_vis_refts=' + ((new Date()).getTime()));
                    }, refreshInterval);
                }
            }
        },
        image: function (el, srcArr, refreshInterval) {
            var $this = $(el).parent().find('img');
            var oid = $this.attr('data-oid');
            refreshInterval = parseInt(refreshInterval, 10) || 0;

            function onChange (e, newVal) {
                if (newVal === 'true'  || newVal === true)  newVal = 1;
                if (newVal === 'false' || newVal === false) newVal = 0;
                $this.attr('src', srcArr[newVal]);
            }

            if (oid) {
                vis.states.bind(oid + '.val', onChange);

                // remember all ids, that bound
                $this.parent().parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);

                if (vis.states[oid + '.val'] !== undefined) {
                    var val = vis.states[oid + '.val'];
                    if (val === 'true'  || val === true)  val = 1;
                    if (val === 'false' || val === false) val = 0;
                    $this.attr('src', srcArr[val]);
                }

                if (refreshInterval > 0) {
                    setInterval(function () {
                        var val = vis.states[oid + '.val'] || 0;
                        if (val === 'true'  || val === true)  val = 1;
                        if (val === 'false' || val === false) val = 0;

                        var src = srcArr[val];
                        if (src) $this.attr('src', src + ((src.indexOf('?') !== -1) ? '&' : '?') + '_vis_refts=' + ((new Date()).getTime()));
                    }, refreshInterval);
                }
            }

        },
        value: function (values, oid) {
            if (oid !== 'nothing_selected' && vis.states.attr(oid + '.val') !== undefined) {
                var val = vis.states.attr(oid + '.val');
                if (val === 'true'  || val === true)  val = 1;
                if (val === 'false' || val === false) val = 0;
                return values[val];
            } else {
                return values[0];
            }
        }
    };
    vis.binds.container = function (el, view) {
        var $this = $(el);
        if (vis.views[view]) {
            vis.renderView(view, view, true, function (_view) {
                $('#visview_' + _view).appendTo($this).show();
            });
        }
    };
    vis.binds.basic = {
        isFullScreen: false,
        filterDropdown: function (el, filters, hideEffect, hideDuration, showEffect, showDuration) {
            var $this = $(el);
            if (filters) {
                filters = filters.split(';');
                for (var i = 0; i < filters.length; i++) {
                    $this.find('select').append('<option value="' + filters[i] + '">' + filters[i] + '</option>');
                }
            }

            if (vis.viewsActiveFilter[vis.activeView]) {
                $this.find('select option[value="' + vis.viewsActiveFilter[vis.activeView] + '"]').attr('selected', true);
            }

            $this.find('select').change(function () {
                vis.changeFilter(null, $this.find('select option:selected').val(), hideEffect, hideDuration, showEffect, showDuration);
            });
        },
        state: function (el, oid) {
            var $this = $(el);
            oid = oid ? oid : $this.attr('data-oid');
            var val = $this.attr('data-val');

            if (oid) {
                $this.attr('data-ctrl-oid', oid);
            }

            if (val === 'true')  val = true;
            if (val === 'false') val = false;

            if (!vis.editMode) {
                var moved = false;
                $this.on('click touchend', function (e) {
                    // Protect against two events
                    if (vis.detectBounce(this)) return;

                    if (moved) return;

                    var oid = $(this).attr('data-ctrl-oid');

                    if ($(this).attr('url-value')) {
                        vis.conn.httpGet($(this).attr('url-value'));
                    }

                    if (oid) {
                        var val = $(this).attr('data-val');
                        if (val === undefined || val === null) val = false;
                        if (val === 'true')  val = true;
                        if (val === 'false') val = false;
                        if (parseFloat(val).toString() == val) val = parseFloat(val);

                        if (oid) vis.setValue(oid, val);
                    }
                }).on('touchmove', function () {
                    moved = true;
                }).on('touchstart', function () {
                    moved = false;
                });
            }
        },
        pressed: null,
        pressedNext: null,
        increment: function (el, minmax, delay, interval) {

            function fInterval($that) {
                vis.binds.basic.pressedNext = true;
                vis.binds.basic.pressed = null;
                var oid = $that.attr('data-oid');
                if (!vis.editMode) {
                    var step = parseFloat($that.attr('data-vis-step'));
                    var tmp  = parseFloat(vis.states[oid + '.val']) + step;
                    if (step < 0) {
                        if (tmp >= minmax) {
                            vis.setValue($that.attr('data-oid'), tmp);
                            vis.binds.basic.pressed = _setTimeout(fInterval, interval, $that);
                        }
                    } else {
                        if (tmp <= minmax) {
                            vis.setValue($that.attr('data-oid'), tmp);
                            vis.binds.basic.pressed = _setTimeout(fInterval, interval, $that);
                        }
                    }
                }
            }

            function intervalStart(e) {
                vis.binds.basic.pressedNext = false;
                var $this = $(this);
                var oid = $this.attr('data-oid');

                if (vis.binds.basic.pressed) {
                    clearInterval(vis.binds.basic.pressed);
                    vis.binds.basic.pressed = null;
                }

                vis.binds.basic.pressed = setTimeout(fInterval, delay, $this);
            }

            if (!vis.editMode) {
                var moved = false;
                $(el).on('click touchend', function (e) {
                    // Protect against two events
                    if (vis.detectBounce(this)) return;

                    if (moved) return;

                    if (vis.binds.basic.pressed) {
                        clearInterval(vis.binds.basic.pressed);
                        vis.binds.basic.pressed = null;
                    }

                    if (vis.binds.basic.pressedNext) {
                        vis.binds.basic.pressedNext = false;
                        return;
                    }
                    var $this = $(this);
                    var oid = $this.attr('data-oid');
                    var step = parseFloat($this.attr('data-vis-step'));
                    var tmp  = parseFloat(vis.states[oid + '.val']) + step;
                    if (step < 0) {
                        if (minmax === undefined || tmp >= minmax) {
                            vis.setValue($this.attr('data-oid'), tmp);
                        }
                    } else {
                        if (minmax === undefined || tmp <= minmax) {
                            vis.setValue($this.attr('data-oid'), tmp);
                        }
                    }
                }).on('touchmove', function () {
                    moved = true;
                }).on('touchstart', function () {
                    moved = false;
                });
            }

            if (interval) {
                $(el).on('mousedown', intervalStart)
                    .on('touchstart', intervalStart)
                    .on('touchend', function () {
                        if (vis.binds.basic.pressed) {
                            clearInterval(vis.binds.basic.pressed);
                            vis.binds.basic.pressed = null;
                        }
                    })
                    .on('mouseup', function () {
                        if (vis.binds.basic.pressed) {
                            clearInterval(vis.binds.basic.pressed);
                            vis.binds.basic.pressed = null;
                        }
                    }).data('destroy', function (id, $widget) {
                    $widget && $widget.off('mousedown').off('touchstart').off('touchend').off('mouseup');
                });
            }
        },
        navigation: function (el, options) {
            if (!vis.editMode && options.nav_view) {
                var $this = $(el);
                var moved = false;
                $this.on('click touchend', function (e) {
                    // Protect against two events
                    if (vis.detectBounce(this)) return;

                    if (moved) return;

                    if (options.background) $('body').css({background: options.background});

                    vis.changeView(options.nav_view, options.nav_view, options.hideOptions, options.showOptions, options.sync);
                    //e.preventDefault();
                    //return false;
                }).on('touchmove', function () {
                    moved = true;
                }).on('touchstart', function () {
                    moved = false;
                });
            }
        },
        hideOnFalse: function (el) {
            var $this = $(el);
            var oid   = $this.attr('data-oid');

            function onChange (e, newVal) {
                if (newVal === null || newVal === false || newVal === 0 || newVal === 'false' || !parseInt(newVal, 10)) {
                    if (!vis.editMode) {
                        $this.hide();
                    }
                } else {
                    $this.show();
                }
            }

            if (oid) {
                vis.states.bind(oid + '.val', onChange);

                // remember all ids, that bound
                $this.data('bound', [oid + '.val'])
                // remember bind handler
                    .data('bindHandler', onChange);

                if (!vis.editMode) {
                    var newVal = vis.states.attr(oid + '.val');
                    if (newVal === null || newVal === false || newVal === 0 || newVal === 'false' || parseInt(newVal, 10) === 0) {
                        $this.hide();
                    }
                }
            }

        },
        /*hideOnTrue: function (el) {
            var $this = $(el);
            var oid = $this.attr('data-oid');
            vis.states.bind(oid + '.val', function (e, newVal, oldVal) {
                if (newVal === true || parseFloat(newVal) > 0) {
                    if (!vis.editMode) {
                        $this.hide();
                    }
                } else {
                    $this.show();
                }
            });
            if (!vis.editMode) {
                if (parseFloat(vis.states.attr(oid + '.val')) !== 0 && vis.states.attr(oid + '.val') !== false) {
                    $this.hide();
                }
            }
        },
        showOnValue: function (el, val) {
            var $this = $(el);
            var oid = $this.attr('data-oid');
            vis.states.bind(oid + '.val', function (e, newVal, oldVal) {
                if (newVal != val) {
                    if (!vis.editMode) {
                        $this.hide();
                    }
                } else {
                    $this.show();
                }
            });
            if (!vis.editMode) {
                if (vis.states.attr(oid + '.val') != val) {
                    $this.hide();
                }
            }
        },*/
        _onChange: function (el, oid, wid) {
            var $this = $(el);
            // If still working
            //console.log(oid + ' ' + vis.states.attr(oid + '.val') + ' (' + vis.states.attr(oid + '.ack') + ') - ' + wid + ' ' + vis.states.attr(wid + '.val') + ' (' + vis.states.attr(wid + '.ack') + ')');

            if (wid && (vis.states.attr(wid + '.val') === true)) return;

            var val = vis.states.attr(oid + '.val');

            if (val === 'false') {
                val = false;
            } else if (val === 'true') {
                val = true;
            } else if (typeof val === 'string') {
                var f = parseFloat(val);
                if (f == val) {
                    val = f;
                } else if (val !== '') {
                    val = true;
                } else {
                    val = false;
                }
            }

            if ($this.data('data-numeric')) {
                $this.prop('checked', (val > (($this.data('data-max') - $this.data('data-min')) / 2)));
            } else {
                $this.prop('checked', val);
            }
        },
        checkbox: function (el, numeric, min, max) {
            var $this = $(el);
            var oid   = $this.data('oid'); // Object ID
            var wid   = $this.data('oid-working'); // Work ID

            function onChange() {
                vis.binds.basic._onChange(el, oid, wid);
            }
            if (oid) {
                var bound = [];
                vis.states.bind(oid + '.val', onChange);
                bound.push(oid + '.val');
                if (wid) {
                    vis.states.bind(wid + '.val', onChange);
                    bound.push(wid + '.val');
                }

                // remember all ids, that bound
                $this.closest('.vis-widget')
                    .data('bound', bound)
                    // remember bind handler
                    .data('bindHandler', onChange);
            }

            if (numeric) {
                if (min !== undefined && min !== null && min !== '') {
                    min = parseFloat(min);
                } else {
                    min = 0;
                }

                if (max !== undefined && max !== null && max !== '') {
                    max = parseFloat(max);
                } else {
                    max = 1;
                }
            } else {
                min = false;
                max = true;
            }

            $this.data('min',     min);
            $this.data('max',     max);
            $this.data('numeric', numeric);

            vis.binds.basic._onChange(el, oid, wid);

            if (!vis.editMode) {
                $this.change(function () {
                    var $this_ = $(this);
                    if ($this_.prop('checked')) {
                        vis.setValue($this_.data('oid'), $this_.data('max'));
                    } else {
                        vis.setValue($this_.data('oid'), $this_.data('min'));
                    }
                });
            }
        },
        input: function (el, data) {
            var $this = $(el);
            var oid   = $this.data('oid'); // Object ID
            var wid   = $this.data('oid-working'); // Work ID

            function onChange(e, val) {
                $this.val(val);
            }

            if (oid) {
                var bound = [oid + '.val'];
                vis.states.bind(oid + '.val', onChange);
                if (wid) {
                    bound.push(wid + '.val');
                    vis.states.bind(wid + '.val', onChange);
                }
                // remember all ids, that bound
                $this.closest('.vis-widget')
                    .data('bound', bound)
                    // remember bind handler
                    .data('bindHandler', onChange);
            }

            if (data.numeric) {
                $this.attr('type', 'number');
                if (data.min !== undefined && data.min !== null && data.min !== '') {
                    data.min = parseFloat(data.min);
                } else {
                    data.min = null;
                }

                if (data.max !== undefined && data.max !== null && data.max !== '') {
                    data.max = parseFloat(data.max);
                } else {
                    data.max = null;
                }
            }

            $this.val(vis.states[oid + '.val'] === undefined ? '' : vis.states[oid + '.val']);

            setTimeout(function () {
                $this.css('text-align', $this.parent().parent().css('text-align'));
                $this.css('color', $this.parent().parent().css('color'));
                $this.css('background', $this.parent().parent().css('background'));
                $this.css('border', '0');
                $this.css('text-font', $this.parent().parent().css('text-font'));
            }, 0);

            if (!vis.editMode) {
                $this.change(function () {
                    var $this_ = $(this);
                    if (data.numeric) {
                        var value = parseFloat($this_.val());
                        if (data.min !== null && value < data.min) {
                            value = data.min;
                            $this_.val(value);
                        } else if (data.max !== null && value > data.max) {
                            value = data.max;
                            $this_.val(value);
                        }
                        vis.setValue($this_.data('oid'), value);
                    } else {
                        vis.setValue($this_.data('oid'), $this_.val());
                    }
                });
                if (data.autoSet) {
                    $this.keyup(function(e) {
                        var timer = $this.data('timer');
                        if (timer) clearTimeout(timer);
                        $this.data('timer', setTimeout(function () {
                            $this.trigger('change');
                        }), 1000);
                    });
                }
            }
        },
        select: function (el, invert) {
            var $this = $(el).prev();
            var oid   = $this.attr('data-oid');
            var val   = vis.states[oid + '.val'];

            if (val === 'false') {
                val = false;
            } else if (val === 'true') {
                val = true;
            } else if (typeof val === 'string') {
                var f = parseFloat(val);
                if (f == val) {
                    val = f;
                } else if (val !== '') {
                    val = true;
                } else {
                    val = false;
                }
            }

            if (invert) val = !val;

            $this.val(val ? 1 : 0);

            if (!vis.editMode) {
                if (oid !== 'nothing_selected') {
                    $this.change(function () {
                        var val = $this.find('option:selected').val();
                        if (invert) val = !val;
                        vis.setValue(oid, val);
                    });
                }
            }
            if (oid !== 'nothing_selected') {

            }
            function onChange(e, newVal, oldVal) {
                if (newVal === 'false') {
                    newVal = false;
                } else if (newVal === 'true') {
                    newVal = true;
                } else if (typeof newVal === 'string') {
                    var f = parseFloat(newVal);
                    if (f == newVal) {
                        newVal = f;
                    } else if (newVal !== '') {
                        newVal = true;
                    } else {
                        newVal = false;
                    }
                }
                if (oldVal === 'false') {
                    oldVal = false;
                } else if (oldVal === 'true') {
                    oldVal = true;
                } else if (typeof oldVal === 'string') {
                    var f = parseFloat(oldVal);
                    if (f == oldVal) {
                        oldVal = f;
                    } else if (oldVal !== '') {
                        oldVal = true;
                    } else {
                        oldVal = false;
                    }
                }

                if (newVal == oldVal) return;

                if (newVal === 'false' || newVal === false || parseFloat(newVal) === 0) {
                    if ($this.find('option[value="1"]').prop('selected')) {
                        $this.find('option[value="1"]').prop('selected', false);
                        $this.find('option[value="0"]').prop('selected', true);
                        $this.trigger('change');
                    }
                } else {
                    if ($this.find('option[value="0"]').prop('selected')) {
                        $this.find('option[value="0"]').prop('selected', false);
                        $this.find('option[value="1"]').prop('selected', true);
                        $this.trigger('change');
                    }
                }
            }

            if (oid) {
                vis.states.bind(oid + '.val', onChange);
                // remember all ids, that bound
                $this.closest('.vis-widget')
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);
            }
        },
        pushbutton: function(el, oid) {
            if (!vis.editMode) {
                var $this = $(el);
                oid = oid || $this.data('oid');

                $this.on('mousedown touchstart', function (e) {
                    // Protect against two events
                    if (vis.detectBounce(this)) return;

                    vis.setValue(oid, true);
                });
                $this.on('mouseup touchend touchcancel', function (e) {
                    // Protect against two events
                    if (vis.detectBounce(this, true)) return;

                    vis.setValue(oid, false);
                });
            }
        },
        toggle: function (el, oid) {
            var $this = $(el);
            oid = oid || $this.data('oid');
            var min = $this.data('min');
            var max = $this.data('max');

            var urlTrue     = $this.data('url-true');
            var urlFalse    = $this.data('url-false');
            var oidTrue     = $this.data('oid-true');
            var oidFalse    = $this.data('oid-false');
            var oidTrueVal  = $this.data('oid-true-value');
            var oidFalseVal = $this.data('oid-false-value');
            var readOnly    = $this.data('read-only');

            if (min === '') min = undefined;
            if (max === '') max = undefined;

            if ((oid || oidTrue || urlTrue) && !vis.editMode && !readOnly) {
                var moved = false;
                $this.on('click touchend', function () {
                    // Protect against two events
                    if (vis.detectBounce(this)) return;

                    if (moved) return;

                    var val;

                    if (oidTrue || urlTrue) {
                        if (!oidFalse && oidTrue) oidFalse = oidTrue;
                        if (!urlFalse && urlTrue) urlFalse = urlTrue;

                        if (!oid || oid === 'nothing_selected') {
                            val = !$(this).data('state');
                            // remember state
                            $(this).data('state', val);
                        } else {
                            val = vis.states[oid + '.val'];
                            if (max !== undefined) {
                                if (max === 'true')  max = true;
                                if (max === 'false') max = false;
                                if (val === 'true')  val = true;
                                if (val === 'false') val = false;
                                val = (val == max);
                            } else {
                                val = (val === 1 || val === '1' || val === true || val === 'true');
                            }
                            val = !val; // invert
                        }
                        if (min === undefined || min === 'false' || min === null) min = false;
                        if (max === undefined || max === 'true'  || max === null) max = true;

                        if (oidTrue) {
                            if (val) {
                                if (oidTrueVal === undefined || oidTrueVal === null) oidTrueVal = max;
                                if (oidTrueVal === 'false') oidTrueVal = false;
                                if (oidTrueVal === 'true')  oidTrueVal = true;
                                var f = parseFloat(oidTrueVal);
                                if (f.toString() == oidTrueVal) oidTrueVal = f;
                                vis.setValue(oidTrue,  oidTrueVal);
                            } else {
                                if (oidFalseVal === undefined || oidFalseVal === null) oidFalseVal = min;
                                if (oidFalseVal === 'false') oidFalseVal = false;
                                if (oidFalseVal === 'true')  oidFalseVal = true;
                                var f = parseFloat(oidFalseVal);
                                if (f.toString() == oidFalseVal) oidFalseVal = f;
                                vis.setValue(oidFalse, oidFalseVal);
                            }
                        }

                        if (urlTrue) {
                            if (val) {
                                vis.conn.httpGet(urlTrue)
                            } else {
                                vis.conn.httpGet(urlFalse);
                            }
                        }

                        // show new state
                        if (!oid || oid === 'nothing_selected') {
                            var img = $(this).data('img-class');
                            if (val) {
                                if ($(this).data('as-button')) $(this).addClass('ui-state-active');
                                val = $(this).data('img-true');
                            } else {
                                val = $(this).data('img-false');
                                if ($(this).data('as-button')) $(this).removeClass('ui-state-active');
                            }
                            $(this).find('.' + img).attr('src', val);
                        }
                    } else {
                        var val = vis.states[oid + '.val'];
                        if ((min === undefined && (val === null || val === '' || val === undefined || val === false || val === 'false')) ||
                            (min !== undefined && min == val)) {
                            vis.setValue(oid, max !== undefined ? max : true);
                        } else
                        if ((max === undefined && (val === true || val === 'true')) ||
                            (max !== undefined && val == max))
                        {
                            vis.setValue(oid, min !== undefined ? min : false);
                        } else {
                            val = parseFloat(val);
                            if (min !== undefined && max !== undefined) {
                                if (val >= (max - min) / 2) {
                                    val = min;
                                } else {
                                    val = max;
                                }
                            } else {
                                if (val >= 0.5) {
                                    val = 0;
                                } else {
                                    val = 1;
                                }
                            }
                            vis.setValue(oid, val);
                        }
                    }
                }).on('touchmove', function () {
                    moved = true;
                }).on('touchstart', function () {
                    moved = false;
                }).data('destroy', function (id, $widget) {
                    $widget.off('click touchend').off('touchmove').off('touchstart');
                });
            }
        },
        iframeRefresh: function (el, src, refreshInterval, refreshOnWakeUp, refreshOnViewChange, refreshWithNoQuery) {
            var widgetView;
            if (src && typeof src === 'object') {
                widgetView = refreshInterval;
                refreshInterval     = src.refreshInterval;
                refreshOnWakeUp     = src.refreshOnWakeUp;
                refreshOnViewChange = src.refreshOnViewChange;
                refreshWithNoQuery  = src.refreshWithNoQuery;
                src                 = src.src;
            } else if (refreshInterval && typeof refreshInterval === 'object') {
                widgetView = refreshOnWakeUp;
                refreshInterval     = refreshInterval.refreshInterval;
                refreshOnWakeUp     = refreshInterval.refreshOnWakeUp;
                refreshOnViewChange = refreshInterval.refreshOnViewChange;
                refreshWithNoQuery  = refreshInterval.refreshWithNoQuery;
            }
            refreshOnViewChange = refreshOnViewChange === true || refreshOnViewChange === 'true';
            refreshOnWakeUp     = refreshOnWakeUp     === true || refreshOnWakeUp     === 'true';
            refreshWithNoQuery  = refreshWithNoQuery  === true || refreshWithNoQuery  === 'true';

            if (!vis.editMode && src) {
                var $this = $(el).parent().find('iframe');
                refreshInterval = parseInt(refreshInterval, 10) || 0;

                if (refreshOnViewChange) {
                    widgetView = widgetView || vis.activeView;
                    vis.navChangeCallbacks.push(function (view) {
                        if (view === widgetView) {
                            $this.attr('src', src + (refreshWithNoQuery ? '' : ((src.indexOf('?') !== -1) ? '&' : '?') + '_refts=' + ((new Date()).getTime())));
                        }
                    });
                }
                if (refreshInterval > 0) {
                    setInterval(function () {
                        if ($this.is(':visible')) {
                            var p = $this.parents(':hidden');
                            if (!p.length || p[0].tagName === 'BODY' || p[0].id === 'materialdesign-vuetify-container') {
                                $this.attr('src', src + (refreshWithNoQuery ? '' : ((src.indexOf('?') !== -1) ? '&' : '?') + '_refts=' + ((new Date()).getTime())));
                            }
                        }
                    }, refreshInterval);
                }
                if (refreshOnWakeUp) {
                    vis.onWakeUp(function () {
                        // TODO this does not work. :(
                        $this.attr('src', src + (refreshWithNoQuery ? '' : ((src.indexOf('?') !== -1) ? '&' : '?') + '_refts=' + ((new Date()).getTime())));
                    });
                }
            }
        },
        htmlRefresh: function (el, html, refreshInterval) {
            refreshInterval = parseInt(refreshInterval, 10) || 0;
            if (html && !vis.editMode && refreshInterval > 0) {
                var $this = $(el);
                setInterval(function () {
                    if ($this.is(':visible')) {
                        var p = $this.parents(':hidden');
                        if (!p.length || p[0].tagName === 'BODY' || p[0].id === 'materialdesign-vuetify-container') {
                            $this.html(html);
                        }
                    }
                }, refreshInterval);
            }
        },
        imgRefresh: function (el, src, refreshInterval, refreshOnWakeUp, refreshOnViewChange, refreshWithNoQuery) {
            var widgetView;
            if (src && typeof src === 'object') {
                widgetView = refreshInterval;
                refreshInterval     = src.refreshInterval;
                refreshOnWakeUp     = src.refreshOnWakeUp;
                refreshOnViewChange = src.refreshOnViewChange;
                refreshWithNoQuery  = src.refreshWithNoQuery;
                src                 = src.src;
            } else if (refreshInterval && typeof refreshInterval === 'object') {
                widgetView = refreshOnWakeUp;
                refreshInterval     = refreshInterval.refreshInterval;
                refreshOnWakeUp     = refreshInterval.refreshOnWakeUp;
                refreshOnViewChange = refreshInterval.refreshOnViewChange;
                refreshWithNoQuery  = refreshInterval.refreshWithNoQuery;
            }
            refreshOnViewChange = refreshOnViewChange === true || refreshOnViewChange === 'true';
            refreshOnWakeUp     = refreshOnWakeUp     === true || refreshOnWakeUp     === 'true';
            refreshWithNoQuery  = refreshWithNoQuery  === true || refreshWithNoQuery  === 'true';

            if (!vis.editMode && src) {
                var $this = $(el).parent().find('img');
                refreshInterval = parseInt(refreshInterval, 10) || 0;

                if (refreshOnViewChange) {
                    widgetView = widgetView || vis.activeView;
                    vis.navChangeCallbacks.push(function (view) {
                        if (view === widgetView) {
                            $this.attr('src', src + (refreshWithNoQuery ? '' : ((src.indexOf('?') !== -1) ? '&' : '?') + '_refts=' + ((new Date()).getTime())));
                        }
                    });
                }
                if (refreshInterval > 0) {
                    setInterval(function () {
                        if ($this.is(':visible')) {
                            var p = $this.parents(':hidden');
                            if (!p.length || p[0].tagName === 'BODY' || p[0].id === 'materialdesign-vuetify-container') {
                                $this[0].src = src + (refreshWithNoQuery ? '' : ((src.indexOf('?') !== -1) ? '&' : '?') + '_refts=' + ((new Date()).getTime()));
                            }
                        }
                    }, refreshInterval);
                }
                if (refreshOnWakeUp) {
                    //console.log("refreshOnWakeUp!");
                    vis.onWakeUp(function () {
                        // TODO this does not work. :(
                        //console.log("wakeup refresh!");
                        $this[0].src = src + (refreshWithNoQuery ? '' : ((src.indexOf('?') !== -1) ? '&' : '?') + '_refts=' + ((new Date()).getTime()));
                        //console.log($this.attr('src'));
                    });
                }
            }
        },
        showSvg: function (myClass, view, wid, oid, opacity, svg_false, svg_true, style, no_control) {
            var $wid = $('#' + wid);

            var id = $wid.attr('id');
            if (id && id.match(/_removed$/)) return;

            if (!$wid.length) {
                return setTimeout(function () {
                    vis.binds.basic.showSvg(myClass, view, wid, oid, opacity, svg_false, svg_true, style, no_control);
                }, 100);
            }

            $wid.find('svg').remove();
            var str = vis.states.attr(oid + '.val');
            if (typeof str === 'string') str = str.toLowerCase();
            var val = parseFloat(str);
            var sText = '<svg version="1.1" style="width:100%;height:100%" xmlns="http://www.w3.org/2000/svg" data-oid="' + oid + '">';
            if (vis.editMode) {
                if (opacity === undefined || opacity === null || opacity === '') opacity = 1;

                if (parseFloat(opacity) < 0.2) opacity = 0.2;
            }
            if (val === 0 || str === 'false' || str === '0' || str === 'off' || str === false || str === null || str === undefined) {
                // try to analyse
                sText += svg_false;
            } else {
                sText += svg_true;
            }
            sText += '</svg>';
            $wid.find('.vis-widget-body').append(sText);

            if (style) $wid.css(style);

            var moved = false;

            function onSvgClick() {
                // Protect against two events
                if (vis.detectBounce(this)) return;

                if (moved) return;

                var val = vis.states[oid + '.val'];
                if (val === null || val === '' || val === undefined || val === false || val === "false") {
                    vis.setValue(oid, true);
                } else if (val === true || val === "true") {
                    vis.setValue(oid, false);
                } else {
                    val = parseFloat(val);
                    if (val >= 0.5) {
                        val = 1;
                    } else {
                        val = 0;
                    }
                    vis.setValue(oid, 1 - val);
                }
            }

            function onChange (e, newVal) {
                if (newVal === 'true'  || newVal === true)  newVal = 1;
                if (newVal === 'false' || newVal === false || newVal === '0') newVal = 0;
                var $svg = $('#' + wid).find('svg');

                $svg.html(newVal ? svg_true : svg_false);

                if (!vis.editMode && !no_control) {
                    $svg.children().unbind('click touchend touchmove touchstart').on('click touchend', onSvgClick)
                        .on('touchmove', function () {
                            moved = true;
                        }).on('touchstart', function () {
                        moved = false;
                    });
                } else if (vis.editMode){
                    $svg.children().unbind('click touchstart').on('click touchstart', function () {
                        vis.inspectWidgets([wid]);
                    });
                }
            }

            if (oid) {
                vis.states.bind(oid + '.val', onChange);
                // remember all ids, that bound
                $wid.data('bound', [oid + '.val'])
                // remember bind handler
                    .data('bindHandler', onChange);
            }
            var $svg = $wid.find('svg');
            if (!vis.editMode && !no_control) {
                $svg.children().off('click touchend').on('click touchend', onSvgClick).off('touchmove').on('touchmove', function () {
                    moved = true;
                }).on('touchstart', function () {
                    moved = false;
                });
            } else if (vis.editMode){
                $svg.children().off('click touchstart').on('click touchstart', function () {
                    vis.inspectWidgets([wid]);
                });
            }
            $wid.data('destroy', function (id, $widget) {
                $widget.find('svg').children().off('click touchend').off('touchmove').off('click touchstart');
            });
        },
        editNote: function (wid, max_width, min_width, min_height, oid) {
            if (vis.editMode) return;

            max_width  = max_width  ? parseInt(max_width,  10) : 400;
            min_width  = min_width  ? parseInt(min_width,  10) : 40;
            min_height = min_height ? parseInt(min_height, 10) : 15;

            var $this = $('#div_' + wid);
            $('body').append('<div id="dlg_' + wid + '" title="' + _('Edit note') + '">' +
                '<textarea style="resize: none; width:95%; height:92%" id="text_' + wid + '">' + $this.text().trim() + '</textarea></div>');

            var buttons = {};
            buttons[_('Clear')] = function () {
                $('#text_' + $(this).attr('data-wid')).val("");
            };

            buttons[_('Ok')] = function () {
                var dlg  = $(this);
                var oid  = dlg.attr('data-oid');
                var wid  = dlg.attr('data-wid');
                var text = $('#text_' + wid).val();
                text = text.replace('\n', '<br>\n');

                if (!oid) $('#div_' + wid).html(text);
                /*if (!text) {
                 $('#' + wid).css({width: min_width, height: min_height});
                 }
                 else {
                 $('#' + wid).css({width: max_width, height: 'auto'});
                 }*/

                if (oid) vis.setValue(oid, text);

                dlg.dialog('close');
                dlg.remove();
            };

            buttons[_('Cancel')] = function () {
                $(this).dialog('close');
                $(this).remove();
            };

            $('#dlg_' + wid).attr('data-oid', oid).attr('data-wid', wid).dialog({
                width:   500,
                height:  300,
                modal:   true,
                buttons: buttons
            });
        },
        formatFloat: function (data, val) {
            if (vis.editMode && data.attr('test_html') !== undefined && data.attr('test_html') !== '') {
                val = parseFloat(data.attr('test_html'));
            } else if(val === undefined || val === null){
                val = parseFloat(vis.states.attr(data.oid + '.val'));
            }else {
                val = parseFloat(val);
            }
            if (data.factor !== undefined && data.factor !== '') val = val * parseFloat(data.factor);
            if (data.digits !== undefined && data.digits !== '') val = val.toFixed(parseFloat(data.digits, 10));

            if (data.attr('is_tdp')) {
                val = this.formatValue(val, data.digits ? parseInt(data.digits) : 2, data.attr('is_comma') ? ".," : ",.");
            } else if (data.attr('is_comma')) {
                val = '' + val;
                val = val.replace('.', ',');
            }

            return val;
        },
        extractWidth: function (css, multiplier) {
            // extract from "2px solid #aabbcc" => 2px
            var m = css.match(/([0-9])+(px|em)?/);
            if (m) {
                if (m[1] && m[2]) {
                    return parseInt(m[1], 10) * (multiplier || 1) + m[2];
                } else {
                    return parseInt(m[1], 10) * (multiplier || 1);
                }
            }
        },
        getCalc: function (data, val) {
            var min = (data.min || data.min === 0) ? parseFloat(data.min) : 0;
            var max = (data.max || data.max === 0) ? parseFloat(data.max) : 100;
            val = parseFloat(vis.states.attr(data.oid + '.val')) || 0;
            val = (val - min) / (max - min);
            return (data.border) ? ('calc(' + Math.round(val * 100) + '% - ' + vis.binds.basic.extractWidth(data.border, 2) + ')') : (Math.round(val * 100) + '%');
        },

        formatValue: function formatValue(value, decimals, _format) {
            if (typeof decimals !== 'number') {
                decimals = 2;
                _format = decimals;
            }
            var format = (_format === undefined) ? '.,' : _format;
            if (typeof value !== 'number') value = parseFloat(value);
            return isNaN(value) ? '' : value.toFixed(decimals || 0).replace(format[0], format[1]).replace(/\B(?=(\d{3})+(?!\d))/g, format[0]);
        },

        formatIntervalHelper: function (value, type) {
            var singular;
            var plural;
            var special24;
            if (vis.language === 'de') {
                if (type === 'seconds') {
                    singular = 'Sekunde';
                    plural   = 'Sekunden';
                } else if (type === 'minutes') {
                    singular = 'Minute';
                    plural   = 'Minuten';
                } else if (type === 'hours') {
                    singular = 'Stunde';
                    plural   = 'Stunden';
                } else if (type === 'days') {
                    singular = 'Tag';
                    plural   = 'Tagen';
                }
            } else
            if (vis.language === 'ru') {
                if (type === 'seconds') {
                    singular  = 'секунду';
                    plural    = 'секунд';
                    special24 = 'секунды';
                } else if (type === 'minutes') {
                    singular  = 'минуту';
                    plural    = 'минут';
                    special24 = 'минуты';
                } else if (type === 'hours') {
                    singular  = 'час';
                    plural    = 'часов';
                    special24 = 'часа';
                } else if (type === 'days') {
                    singular  = 'день';
                    plural    = 'дней';
                    special24 = 'дня';
                }
            } else {
                if (type === 'seconds') {
                    singular = 'second';
                    plural   = 'seconds';
                } else if (type === 'minutes') {
                    singular = 'minute';
                    plural   = 'minutes';
                } else if (type === 'hours') {
                    singular = 'hour';
                    plural   = 'hours';
                } else if (type === 'days') {
                    singular = 'day';
                    plural   = 'days';
                }
            }

            if (value === 1) {
                if (vis.language === 'de') {
                    if (type === 'days') {
                        return 'einem ' + singular;
                    } else {
                        return 'einer ' + singular;
                    }
                } else if (vis.language === 'ru') {
                    if (type === 'days' || type === 'hours') {
                        return 'один ' + singular;
                    } else {
                        return 'одну ' + singular;
                    }
                } else {
                    return 'one ' + singular;
                }
            } else {
                if (vis.language === 'de') {
                    return value + ' ' + plural;
                } else if (vis.language === 'ru') {
                    var d = value % 10;
                    if (d === 1 && value !== 11) {
                        return value + ' ' + singular;
                    } else
                    if (d >= 2 && d <= 4 && (value > 20 || value < 10)) {
                        return value + ' ' + special24;
                    } else {
                        return value + ' ' + plural;
                    }
                } else {
                    return value + ' ' + plural;
                }
            }
        },
        formatInterval: function (timestamp, isMomentJs) {
            if (isMomentJs && typeof moment !== 'undefined') {
                return moment(new Date(timestamp)).fromNow();
            }
            var diff = new Date().getTime() - timestamp;
            diff = Math.round(diff / 1000);
            var text;
            if (diff <= 60) {
                if (vis.language === 'de') {
                    text = 'vor ' + vis.binds.basic.formatIntervalHelper(diff, 'seconds');
                } else if (vis.language === 'ru') {
                    text = vis.binds.basic.formatIntervalHelper(diff, 'seconds') + ' назад';
                } else {
                    text = vis.binds.basic.formatIntervalHelper(diff, 'seconds') + ' ago';
                }
            } else if (diff < 3600) {
                var m = Math.floor(diff / 60);
                var s = diff - m * 60;
                text = '';
                if (vis.language === 'de') {
                    text = 'vor ' + vis.binds.basic.formatIntervalHelper(m, 'minutes');
                } else if (vis.language === 'ru') {
                    text = vis.binds.basic.formatIntervalHelper(m, 'minutes');
                } else {
                    text = vis.binds.basic.formatIntervalHelper(m, 'minutes');
                }

                if (m < 5) {
                    // add seconds
                    if (vis.language === 'de') {
                        text += ' und ' + vis.binds.basic.formatIntervalHelper(s, 'seconds');
                    } else if (vis.language === 'ru') {
                        text += ' и ' + vis.binds.basic.formatIntervalHelper(s, 'seconds');
                    } else {
                        text += ' and ' + vis.binds.basic.formatIntervalHelper(s, 'seconds');
                    }
                }

                if (vis.language === 'de') {
                    // nothing
                } else if (vis.language === 'ru') {
                    text += ' назад';
                } else {
                    text += ' ago';
                }
            } else if (diff < 3600 * 24) {
                var h = Math.floor(diff / 3600);
                var m = Math.floor((diff - h * 3600) / 60);
                text = '';
                if (vis.language === 'de') {
                    text = 'vor ' + vis.binds.basic.formatIntervalHelper(h, 'hours');
                } else if (vis.language === 'ru') {
                    text = vis.binds.basic.formatIntervalHelper(h, 'hours');
                } else {
                    text = vis.binds.basic.formatIntervalHelper(h, 'hours');
                }

                if (h < 10) {
                    // add seconds
                    if (vis.language === 'de') {
                        text += ' und ' + vis.binds.basic.formatIntervalHelper(m, 'minutes');
                    } else if (vis.language === 'ru') {
                        text += ' и ' + vis.binds.basic.formatIntervalHelper(m, 'minutes');
                    } else {
                        text += ' and ' + vis.binds.basic.formatIntervalHelper(m, 'minutes');
                    }
                }

                if (vis.language === 'de') {
                    // nothing
                } else if (vis.language === 'ru') {
                    text += ' назад';
                } else {
                    text += ' ago';
                }
            } else {
                var d = Math.floor(diff / (3600 * 24));
                var h = Math.floor((diff - d * (3600 * 24)) / 3600);
                text = '';
                if (vis.language === 'de') {
                    text = 'vor ' + vis.binds.basic.formatIntervalHelper(d, 'days');
                } else if (vis.language === 'ru') {
                    text = vis.binds.basic.formatIntervalHelper(d, 'days');
                } else {
                    text = vis.binds.basic.formatIntervalHelper(d, 'days');
                }

                if (d < 3) {
                    // add seconds
                    if (vis.language === 'de') {
                        text += ' und ' + vis.binds.basic.formatIntervalHelper(h, 'hours');
                    } else if (vis.language === 'ru') {
                        text += ' и ' + vis.binds.basic.formatIntervalHelper(h, 'hours');
                    } else {
                        text += ' and ' + vis.binds.basic.formatIntervalHelper(h, 'hours');
                    }
                }

                if (vis.language === 'de') {
                    // nothing
                } else if (vis.language === 'ru') {
                    text += ' назад';
                } else {
                    text += ' ago';
                }
            }
            return text;
        },
        startUpdateInterval: function () {
            if (vis.binds.basic.updateInterval) return;
            vis.binds.basic.updateInterval = setInterval(function () {
                $('.time-interval').each(function () {
                    $(this).html(vis.binds.basic.formatInterval($(this).data('time'), $(this).data('moment')))
                });
            }, 15000);
        },
        formatDate: function (dateObj, format, interval, isMomentJs) {
            if (typeof format === 'boolean') {
                interval = format;
                format = 'auto';
            }

            if (format === 'auto') format = (vis.dateFormat || 'DD.MM.YYYY') + ' hh:mm:ss';

            format = format || vis.dateFormat || 'DD.MM.YYYY';

            if (!dateObj) return '';
            var text = typeof dateObj;
            if (text === 'string') {
		dateObj = new Date(dateObj);
            }
            if (text !== 'object') {
                var i = parseInt(dateObj, 10);
                if (i == dateObj) {
                    i = dateObj;
                    // if greater than 2000.01.01 00:00:00
                    if (i > 946681200000) {
                        dateObj = new Date(dateObj);
                    } else {
                        dateObj = new Date(dateObj * 1000);
                    }
                } else {
                    dateObj = new Date(dateObj);
                }
            }
            if (interval) {
                vis.binds.basic.startUpdateInterval();
                return '<span class="time-interval" data-time="' + dateObj.getTime() + '" data-moment="' + (isMomentJs || false) + '">' + vis.binds.basic.formatInterval(dateObj.getTime(), isMomentJs) + '</span>';
            }

            var v;

            // Year
            if (format.indexOf('YYYY') !== -1 || format.indexOf('JJJJ') !== -1 || format.indexOf('ГГГГ') !== -1) {
                v = dateObj.getFullYear();
                format = format.replace('YYYY', v);
                format = format.replace('JJJJ', v);
                format = format.replace('ГГГГ', v);
            } else if (format.indexOf('YY') !== -1 || format.indexOf('JJ') !== -1 || format.indexOf('ГГ') !== -1) {
                v = dateObj.getFullYear() % 100;
                format = format.replace('YY', v);
                format = format.replace('JJ', v);
                format = format.replace('ГГ', v);
            }
            // Month
            if (format.indexOf('MM') !== -1 || format.indexOf('ММ') !== -1) {
                v =  dateObj.getMonth() + 1;
                if (v < 10) v = '0' + v;
                format = format.replace('MM', v);
                format = format.replace('ММ', v);
            } else if (format.indexOf('M') !== -1 || format.indexOf('М') !== -1) {
                v =  dateObj.getMonth() + 1;
                format = format.replace('M', v);
                format = format.replace('М', v);
            }

            // Day
            if (format.indexOf('DD') !== -1 || format.indexOf('TT') !== -1 || format.indexOf('ДД') !== -1) {
                v =  dateObj.getDate();
                if (v < 10) v = '0' + v;
                format = format.replace('DD', v);
                format = format.replace('TT', v);
                format = format.replace('ДД', v);
            } else if (format.indexOf('D') !== -1 || format.indexOf('TT') !== -1 || format.indexOf('Д') !== -1) {
                v =  dateObj.getDate();
                format = format.replace('D', v);
                format = format.replace('T', v);
                format = format.replace('Д', v);
            }

            // hours
            if (format.indexOf('hh') !== -1 || format.indexOf('SS') !== -1 || format.indexOf('чч') !== -1) {
                v =  dateObj.getHours();
                if (v < 10) v = '0' + v;
                format = format.replace('hh', v);
                format = format.replace('SS', v);
                format = format.replace('чч', v);
            } else if (format.indexOf('h') !== -1 || format.indexOf('S') !== -1 || format.indexOf('ч') !== -1) {
                v =  dateObj.getHours();
                format = format.replace('h', v);
                format = format.replace('S', v);
                format = format.replace('ч', v);
            }

            // minutes
            if (format.indexOf('mm') !== -1 || format.indexOf('мм') !== -1) {
                v =  dateObj.getMinutes();
                if (v < 10) v = '0' + v;
                format = format.replace('mm', v);
                format = format.replace('мм', v);
            } else if (format.indexOf('m') !== -1 ||  format.indexOf('м') !== -1) {
                v =  dateObj.getMinutes();
                format = format.replace('m', v);
                format = format.replace('v', v);
            }

            // milliseconds
            if (format.indexOf('sss') !== -1 || format.indexOf('ссс') !== -1) {
                v =  dateObj.getMilliseconds();
                if (v < 10) {
                    v = '00' + v;
                } else if (v < 100) {
                    v = '0' + v;
                }
                format = format.replace('sss', v);
                format = format.replace('ссс', v);
            }

            // seconds
            if (format.indexOf('ss') !== -1 || format.indexOf('сс') !== -1) {
                v =  dateObj.getSeconds();
                if (v < 10) v = '0' + v;
                format = format.replace('ss', v);
                format = format.replace('cc', v);
            } else if (format.indexOf('s') !== -1 || format.indexOf('с') !== -1) {
                v =  dateObj.getHours();
                format = format.replace('s', v);
                format = format.replace('с', v);
            }

            return format;
        },
        detectScreen: function (wid) {
            if (vis.navChangeCallbacks.indexOf(vis.binds.basic.detectScreen) === -1) {
                vis.navChangeCallbacks.push(vis.binds.basic.detectScreen);
            }

            function onResize () {
                if (vis.editMode) {
                    $('.vis-resolution-width').html(vis.views[vis.activeView].settings.sizex  || $(window).width());
                    $('.vis-resolution-height').html(vis.views[vis.activeView].settings.sizey || $(window).height());
                    $('.vis-resolution-default-view').html(vis.findNearestResolution(vis.views[vis.activeView].settings.sizex || $(window).width(), vis.views[vis.activeView].settings.sizey || $(window).height()));
                } else {
                    $('.vis-resolution-width').html($(window).width());
                    $('.vis-resolution-height').html($(window).height());
                    $('.vis-resolution-default-view').html(vis.findNearestResolution());
                }
            }

            setTimeout(function () {
                $(window).bind('resize', onResize);
                if (vis.editMode) {
                    $('.vis-resolution-width').html(vis.views[vis.activeView].settings.sizex  || $(window).width());
                    $('.vis-resolution-height').html(vis.views[vis.activeView].settings.sizey || $(window).height());
                    $('.vis-resolution-default-view').html(vis.findNearestResolution(vis.views[vis.activeView].settings.sizex || $(window).width(), vis.views[vis.activeView].settings.sizey || $(window).height()));
                } else {
                    $('.vis-resolution-width').html($(window).width());
                    $('.vis-resolution-height').html($(window).height());
                    $('.vis-resolution-default-view').html(vis.findNearestResolution());
                }
            }, 100);

            if (vis.editMode) {
                $('#' + wid).data('destroy', function () {
                    $(window).unbind('resize', onResize);
                });
            }
        },
        createScreenText: function () {
            setTimeout(function () {
                $('.basic-click-create-instance').unbind('click').click(function () {
                    if (!vis.instance) {
                        vis.generateInstance();
                        if (vis.instance) {
                            $(this).html(vis.instance).removeClass('basic-click-create-instance').css({
                                'font-weight': 'inherit',
                                cursor: 'inherit'
                            });
                        } else {
                            window.alert('Cannot generate!');
                        }
                    }
                });
            }, 500);
            return '<span class="basic-click-create-instance" style="font-weight: bold; cursor: pointer">' + _('click to create') + '</span>';
        },
        isFalse: function (val, min, max) {
            if (min !== undefined && min !== null && min !== '') {
                if (val === 'true') {
                    val = true;
                }
                if (val === 'false') {
                    val = false;
                }
                if (max !== undefined && max !== null && max !== '') {
                    if (max === 'false') {
                        max = false;
                    }
                    if (max === 'true') {
                        max = true;
                    }
                    return val != max;
                } else {
                    if (min === 'false') {
                        min = false;
                    }
                    if (min === 'true') {
                        min = true;
                    }
                    return val == min;
                }
            }
            if (val === undefined || val === null || val === false || val === 'false' || val === 'FALSE' || val === 'False' || val === 'OFF' || val === 'Off' || val === 'off' || val === '') return true;
            if (val === '0' || val === 0) return true;
            var f = parseFloat(val);
            if (f.toString() !== 'NaN') return !f;
            return false;
        },
        circlePoints: function (radius, num, step) {
            var isArray = false;
            if (step === true) {
                isArray = true;
                step = 0;
            }
            step = step || 360 / num;
            var points = [];
            var text = '';
            for (var i = 0; i < num; i++) {
                var point = {x:Math.sin(Math.PI / 180 * (i * step - 180)) * radius, y:Math.cos(Math.PI / 180 * (i * step - 180)) * radius};
                points.push(point);
                text += point.x + ', ' + point.y + ' ';
            }
            if (isArray) return points;
            return text;
        },
        createValueGesture: function (widgetID, view, data, style) {
            var $div = $('#' + widgetID);
            // if nothing found => wait
            if (!$div.length) {
                return setTimeout(function () {
                    vis.binds.basic.createValueGesture(widgetID, view, data, style);
                }, 100);
            }
            var $content = $('#' + widgetID + ' .vis-widget-body');
            function refresh(val, x, y) {
                var text;
                if (val === null){
                    $div.hide();
                    return;
                }
                text = data.html_prepend || '';
                text += vis.binds.basic.formatFloat(data,val);
                text += parseFloat(vis.binds.basic.formatFloat(data,val)) === 1 ? data.html_append_singular || '' : data.html_append_plural || '';
                $content.html(text);
                $div.css({left: parseInt(x)  -$div.width() / 2 + 'px', top: parseInt(y) - $div.height() / 2 + 'px'}).show();
            }
            if (vis.editMode){
                refresh(data.test_html || 0, $div.position().left + $div.width() / 2, $div.position().top + $div.height() / 2);
            } else {
                refresh(null, 0, 0);
            }

            // subscribe top value updates
            $div.on('gestureUpdate', function(event, evData){
                refresh(evData.val, evData.x, evData.y);
            });
        },
        speech2text: function (wid, view, data, style) {
            var $div = $('#' + wid);
            // if nothing found => wait
            if (!$div.length) {
                return setTimeout(function () {
                    vis.binds.basic.speech2text(wid, view, data, style);
                }, 100);
            }

            if (typeof webkitSpeechRecognition === 'undefined') {
                console.error('Browser does not support speech 2 text');
                $div.find('.mic-info-text').html(_('info_upgrade'));
                return;
            }

            var _data ={
                continuous:     data.speechMode === 'continuous' || data.speechMode === 'startstop',
                speechMode:     data.speechMode,
                oid:            data.oid,
                language:       data.language,
                finalTranscript: '',
                lastText:       '',
                recognition:    null,
                ignoreOnEnd:    false,
                timer:          null,
                words:          data.keywords ? data.keywords.toLowerCase().split(/[\s,;]+/g) : null,
                textSentColor:  data.textSentColor,
                keyWordColor:   data.keyWordColor,
                imageInactive:  data.imageInactive,
                imageActive:    data.imageActive    || data.imageInactive,
                imageStarted:   data.imageStarted   || data.imageInactive,
                imageDetected:  data.imageDetected  || data.imageInactive,
                imageSent:      data.imageSent      || data.imageInactive,
                $text:          $div.find('.mic-info-text'),
                $result:        $div.find('.mic-results'),
                $image:         $div.find('.mic-image')
            };
            data = null;

            function findKeyWord(text) {
                var found = false;
                if (_data.words) {
                    found = false;
                    var wwords = text.toLowerCase().split(' ');
                    for (var w = 0; w < _data.words.length; w++) {
                        var pos = wwords.indexOf(_data.words[w]);
                        if (pos !== -1) {
                            var offset = 0;
                            for (var p = 0; p < pos; p++) {
                                offset += wwords[p].length + 1;
                            }
                            text = text.substring(0, offset) + '<b>' + text.substring(offset, offset + wwords[pos].length) + '</b>' + text.substring(offset + wwords[pos].length);
                            found = true;
                            break;
                        }
                    }
                } else {
                    return true;
                }
                return found ? text : false;
            }

            function startRecognition() {
                if (_data.recognition) {
                    if (_data.speechMode === 'startstop') {
                        _data.recognition.onend = null;
                        _data.recognition.stop();
                        _data.recognition = null;
                        _data.$text.html(_('info_start')).show();
                        _data.$image.attr('src', _data.imageInactive);
                        _data.$result.hide();
                    }
                    return;
                }

                _data.recognition                 = new webkitSpeechRecognition();
                _data.recognition.continuous      = _data.continuous;
                _data.recognition.interimResults  = true;
                _data.recognition.maxAlternatives = 1;
                var startTimestamp = new Date();


                _data.recognition.onstart = function() {
                    _data.$text.html(_('info_speak_now')).show();
                    _data.$image.attr('src', _data.imageActive);
                    _data.$result.hide();
                };

                _data.recognition.onerror  = function(event) {
                    _data.$result.hide();
                    _data.$text.show();
                    _data.$image.attr('src', _data.imageInactive);
                    if (event.error === 'no-speech') {
                        _data.$text.html(_('info_no_speech'));
                        //_data.ignoreOnEnd = true;
                    }
                    if (event.error === 'audio-capture') {
                        _data.$text.html(_('info_no_microphone'));
                        _data.ignoreOnEnd = true;
                    }
                    if (event.error === 'not-allowed') {
                        if (event.timeStamp - startTimestamp < 100) {
                            _data.$text.html(_('info_blocked'));
                        } else {
                            _data.$text.html(_('info_denied'));
                        }
                        _data.ignoreOnEnd = true;
                    }
                };

                _data.recognition.onend    = function() {
                    // console.log('onend');
                    _data.recognition.stop();
                    _data.recognition = null;
                    if (!_data.ignoreOnEnd) {
                        setTimeout(function () {
                            _data.$image.attr('src', _data.imageInactive);
                            if (_data.continuous) {
                                _data.$result.hide();
                                _data.$text.html(_('info_speak_now')).show();
                                startRecognition();
                            } else {
                                _data.$result.hide();
                                _data.$text.html(_('info_start')).show();
                            }
                        }, 1000);
                    }
                };

                _data.recognition.onresult = function(event) {
                    var interimTranscript = '';

                    if (typeof event.results === 'undefined') {
                        _data.recognition.onend = null;
                        _data.recognition.stop();
                        return;
                    }

                    for (var i = event.resultIndex; i < event.results.length; ++i) {
                        if (event.results[i].isFinal) {
                            _data.finalTranscript += event.results[i][0].transcript;
                        } else {
                            interimTranscript += event.results[i][0].transcript;
                        }
                    }

                    if (_data.$image.attr('src') === _data.imageActive) _data.$image.attr('src', _data.imageStarted);

                    //final_transcript = capitalize(final_transcript);
                    _data.$text.hide();
                    var text = _data.finalTranscript || interimTranscript;
                    var found = findKeyWord(text);

                    if (!_data.originalColor) _data.originalColor = _data.$result.css('color');

                    if (found) {
                        text = found;
                        if (_data.$image.attr('src') === _data.imageStarted) _data.$image.attr('src', _data.imageDetected);
                        _data.$result.addClass('mic-keyword-found');
                        if (_data.keyWordColor) _data.$result.css({color: _data.keyWordColor});
                    }

                    _data.$result.html(text).show();

                    if (_data.finalTranscript) {
                        if (_data.timer) clearTimeout(_data.timer);

                        if (found) {
                            _data.$image.attr('src', _data.imageSent);
                            if (_data.textSentColor) _data.$result.css({color: _data.textSentColor});
                            _data.$result.addClass('mic-text-sent');
                            vis.setValue(_data.oid, _data.finalTranscript);
                        }

                        _data.finalTranscript = '';
                        _data.lastText = '';

                        setTimeout(function () {
                            _data.$image.attr('src', _data.imageActive);
                            _data.$result.css({color: _data.originalColor});
                            _data.$result.hide().removeClass('mic-keyword-found mic-text-sent');
                            _data.$text.html(_('info_speak_now')).show();
                        }, 1000);
                    } else {
                        _data.lastText = interimTranscript;

                        if (_data.timer) clearTimeout(_data.timer);
                        _data.timer = setTimeout(function () {
                            _data.timer = null;
                            _data.recognition.onend = null;
                            _data.recognition.stop();
                            _data.recognition = null;

                            var found = findKeyWord(_data.lastText);
                            if (found) {
                                _data.$image.attr('src', _data.imageSent);
                                if (_data.textSentColor) _data.$result.css({color: _data.textSentColor});
                                _data.$result.addClass('mic-text-sent');
                                vis.setValue(_data.oid, _data.finalTranscript);
                            }

                            _data.finalTranscript = '';
                            _data.lastText = '';

                            setTimeout(function () {
                                _data.$image.attr('src', _data.imageActive);
                                _data.$result.css({color: _data.originalColor});
                                _data.$result.hide().removeClass('mic-keyword-found mic-text-sent');
                                _data.$text.html(_('info_speak_now')).show();
                                startRecognition();
                            }, 1000);
                        }, 3000);
                    }
                };

                _data.recognition.lang     = _data.language;

                _data.recognition.start();
            }

            if (_data.speechMode === 'continuous') {
                if (!vis.editMode) {
                    startRecognition();
                } else {
                    $div.find('.mic-info-text').html(_('info_start'));
                }
            } else {
                $div.find('.mic-info-text').html(_('info_start'));
                if (!vis.editMode) {
                    $div.click(function () {
                        startRecognition();
                    });
                }
            }
        },
        getTimeInterval: function (oldTime, hoursToShow) {
            var result = '';

            var newTime = new Date ();

            if (!oldTime) return '';
            if (typeof oldTime === 'string') {
                oldTime = new Date(oldTime);
            } else {// 2000.01.01 00:00:00 = 946681200000
                if (typeof oldTime === 'number') oldTime = oldTime > 946681200000 ? new Date(oldTime) : new Date(oldTime * 1000);
            }

            var seconds = (newTime.getTime() - oldTime.getTime()) / 1000;

            if (hoursToShow && (seconds / 3600) > hoursToShow) return '';

            if (seconds < 60) {
                result = _('just&nbsp;now');
            } else
            if (seconds <= 3600)
                result = _('for&nbsp;%s&nbsp;min.', Math.floor (seconds / 60));
            else
            if (seconds <= 3600 * 24)
                result = _('for&nbsp;%s&nbsp;hr.&nbsp;and&nbsp;%s&nbsp;min.', Math.floor (seconds / 3600), (Math.floor (seconds / 60) % 60));
            else
            if (seconds > 3600 * 24 && seconds <= 3600 * 48)
                result = _('yesterday');
            else
            if (seconds > 3600*48) {
                result = _('for&nbsp;%s&nbsp;hours', Math.floor (seconds / 3600));
            }

            return result;
        },
        logout: function (el, data) {
            if (vis.editMode) return;
            var $el = $(el);
            $el.data('redirect', data.redirect_url);
            $el.data('app', data.in_app_close);

            $el.click(function () {
                if ($(this).data('app')) {
                    if (typeof logout === 'function') {
                        logout();
                    } else {
                        vis.showMessage(_('This option works only in APP'));
                    }
                } else if ($(this).data('redirect')) {
                    var redirect = $(this).data('redirect');
                    vis.conn.logout(function() {
                        window.location = redirect;
                    });
                } else {
                    vis.conn.logout(function(){
                        window.location.reload();
                    });
                }
            });
        },
        toggleFullScreen: function (wid, view, data, style) {
            var $div = $('#' + wid);

            var id = $div.attr('id');
            if (id && id.match(/_removed$/)) return;

            // if nothing found => wait
            if (!$div.length) {
                setTimeout(function () {
                    vis.binds.basic.toggleFullScreen(wid, view, data, style);
                }, 100);
                return;
            }

            var svgOn  = '<svg viewBox="0 0 24 24" style="display: inline-block; color: rgba(0, 0, 0, 0.87); fill: currentcolor; height: 24px; width: 24px; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path></svg>';
            var svgOff = '<svg viewBox="0 0 24 24" style="display: inline-block; color: rgba(0, 0, 0, 0.87); fill: currentcolor; height: 24px; width: 24px; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"></path></svg>';

            if (!vis.editMode) {
                $div.unbind('click').click(function () {
                    if (vis.binds.basic.isFullScreen) {
                        vis.binds.basic.isFullScreen = false;
                        if (document.exitFullscreen) {
                            document.exitFullscreen();
                        } else if (document.mozCancelFullScreen) {
                            document.mozCancelFullScreen();
                        } else if (document.webkitExitFullscreen) {
                            document.webkitExitFullscreen();
                        }
                        $('#' + wid).find('.vis-fullscreen-icon').html(svgOn);
                    } else {
                        vis.binds.basic.isFullScreen = true;
                        var element = $('#vis_container')[0];
                        if (element.requestFullscreen) {
                            element.requestFullscreen();
                        } else if (element.mozRequestFullScreen) {
                            element.mozRequestFullScreen();
                        } else if (element.webkitRequestFullscreen) {
                            element.webkitRequestFullscreen();
                        } else if (element.msRequestFullscreen) {
                            element.msRequestFullscreen();
                        }
                        $('#' + wid).find('.vis-fullscreen-icon').html(svgOff);
                    }
                });
            }

            $div.find('.vis-fullscreen-icon').html(svgOn);
        }
    };

    $(document).mouseup(function () {
        if (vis.binds.basic.pressed) {
            clearInterval(vis.binds.basic.pressed);
            vis.binds.basic.pressed = null;
        }
    });

    if (vis.editMode) {
        vis.binds.basic.onOrientation = function (widgetID, view, newId, attr, isCss) {
            var data  = vis.views[view].widgets[widgetID].data;
            var style = vis.views[view].widgets[widgetID].style;
            var h = parseInt(style.height, 10);
            var w = parseInt(style.width, 10);

            if (data[attr] === 'vertical') {
                if (h < w) {
                    var t = style.height;
                    style.height = style.width;
                    style.width = t;
                    setTimeout(function () {
                        vis.showWidgetHelper(widgetID, true);
                    }, 0);
                    return ['width', 'height'];
                }
            } else {
                if (w < h) {
                    var t = style.height;
                    style.height = style.width;
                    style.width = t;
                    setTimeout(function () {
                        vis.showWidgetHelper(widgetID, true);
                    }, 0);
                    return ['width', 'height'];
                }
            }
        };
        vis.binds.basic.onAttrChanged = function (widgetID, view, newId, attr, isCss) {
            if (vis.binds.basic.groupTimer) clearTimeout(vis.binds.basic.groupTimer);
            vis.binds.basic.groupTimer = setTimeout(function () {
                vis.inspectWidgets(vis.activeViewDiv, vis.activeView, this.activeWidgets);
            }, 2000);
        };
    }
</script>

<!-- Basic Widgets -->


<script id="tplHtml"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="static"
        data-vis-prev='<img src="widgets/basic/img/Prev_HTML.png"></img>'
        data-vis-prev1='<div id="prev_tplFrame" style=" position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev vis-widget-lock" style="width: 80px; height: 80px; border: 3px solid rgb(73, 185, 255); border-radius: 20px;"><div style="top: 30px; color: rgb(73, 185, 255); font-size: 20px; text-align: center; padding-top: 32px;">HTML</div></div>'
        data-vis-name="HTML"
        data-vis-attrs="html/text;refreshInterval[0]/slider,0,180000,100">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 200px; height: 130px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body" <%= (el) -> vis.binds.basic.htmlRefresh(el, this.data.attr('html'), data.attr("refreshInterval")) %>>
            <%== this.data.attr('html') %>
        </div>
    </div>
</script>

<script id="tplShapes"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="static"
        data-vis-name="Svg shape"
        data-vis-prev='<div id="prev_tplShapes" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev " style="width: 90px; height: 90px; left: 502px; top: 174px; position: absolute;"> <div class="vis-widget-prev-body"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" style="display: block;width: 100%;height: 100%;fill: rgb(255, 255, 255);stroke: rgb(60, 152, 211); stroke-width: 4px;"> <circle cx="50" cy="50" r="47"></circle></svg></div> </div></div>'
        data-vis-attrs="svgType[circle]/select,line,triangle,square,pentagone,hexagone,octagone,circle,star,arrow;strokeColor[#009cb3]/color;fill[#00b3ac]/color;strokeWidth[5]/slider,0,100,1;rotate/slider,0,360,1;scaleWidth[1]/slider,0,1,0.1;scaleHeight[1]/slider,0,1,0.1">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 100px; height: 100px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="-50 -50 100 100" style="display: block;width:100%; height:100%;fill:<%== this.data.attr('fill') %>;stroke:<%== this.data.attr('strokeColor')%>;stroke-width: <%== this.data.attr('strokeWidth') %>">
                <%
                var svg = '';
                var rotate      = parseFloat(this.data.attr('rotate')) || 0;
                var scaleWidth  = parseFloat(this.data.attr('scaleWidth')) || 1;
                var scaleHeight = parseFloat(this.data.attr('scaleHeight')) || 1;
                var strokeWidth = parseInt(this.data.attr('strokeWidth'), 10) || 0;

                if (this.data.svgType === 'triangle') {
                    svg = '<polygon transform="rotate(' + rotate + ')  scale(' + scaleWidth + ', ' + scaleHeight + ') " ' +
                        'points="' + vis.binds.basic.circlePoints(50 - strokeWidth, 3) + '"/>';
                } else if (this.data.svgType === 'line') {
                    svg = '<line  vector-effect="non-scaling-stroke"  transform="rotate(' + rotate + ')" x1="-50" y1="0" x2="50" y2="0"/>';
                } else if (this.data.svgType === 'circle') {
                    svg = '<circle transform="scale(' + scaleWidth + ', ' + scaleHeight + ') rotate(' + rotate + ')" cx="0" cy="0" r="' + (50 - parseInt(strokeWidth, 10) / 2) + '" />';
                } else if (this.data.svgType === 'pentagone') {
                    svg = '<polygon transform="rotate(' + rotate + ')  scale(' + scaleWidth + ', ' + scaleHeight + ') " ' +
                        'points="' + vis.binds.basic.circlePoints(50 - strokeWidth, 5) + '"/>';
                } else if (this.data.svgType === 'square') {
                    svg = '<polygon transform="rotate(' + rotate + ')  scale(' + scaleWidth + ', ' + scaleHeight + ') " ' +
                        'points="' + vis.binds.basic.circlePoints(50 - strokeWidth, 4) + '"/>';
                } else if (this.data.svgType === 'hexagone') {
                    svg = '<polygon transform="rotate(' + rotate + ')  scale(' + scaleWidth + ', ' + scaleHeight + ') " ' +
                        'points="' + vis.binds.basic.circlePoints(50 - strokeWidth, 6) + '"/>';
                } else if (this.data.svgType === 'octagone') {
                    svg = '<polygon transform="rotate(' + rotate + ')  scale(' + scaleWidth + ', ' + scaleHeight + ') " ' +
                        'points="' + vis.binds.basic.circlePoints(50 - strokeWidth, 8) + '"/>';
                } else if (this.data.svgType === 'star') {
                    svg = '<polygon transform="rotate(' + rotate + ')  scale(' + scaleWidth + ', ' + scaleHeight + ') " ' +
                        'points="' + vis.binds.basic.circlePoints(50 - strokeWidth, 5, 144) + '"/>';
                } else if (this.data.svgType === 'arrow') {
                    var points = vis.binds.basic.circlePoints(50 - strokeWidth * 4, 3, true);
                    var text = '';
                    for (var p = 0; p < points.length; p++) {
                        text += points.x + ',' + points.y;
                        if (points.length === p - 2) {
                            text += '0,0';
                        }
                    }
                    svg = '<polygon transform="rotate(' + rotate + ') translate(0,10)  scale(' + scaleWidth + ', ' + scaleHeight + ') " ' +
                        'points="0, -50 -43.3, 25 0,0 43.3, 25"/>';
                }
                %>
                <%== svg %>
                </g>
            </svg>
        </div>
    </div>
</script>

<script id="tplIFrame"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="static"
        data-vis-prev='<img src="widgets/basic/img/Prev_iFrame.png"></img>'
        data-vis-name="iFrame"
        data-vis-attrs="src;refreshInterval[0]/slider,0,180000,100;noSandbox/checkbox;refreshOnWakeUp/checkbox;refreshOnViewChange/checkbox;refreshWithNoQuery/checkbox;scrollX/checkbox;scrollY/checkbox;seamless[true]/checkbox">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top: 0px; left: 0px; width: 600px; height: 320px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <% if (vis.editMode) { %>
            <div class="editmode-helper" />
            <% } %>
            <iframe src="<%= this.data.attr('src') %>" <%= this.data.attr('noSandbox') ? '' : 'sandbox="allow-modals allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts"' %> style="position: absolute; border: 0; padding: 0; margin: 0; width: 100%; height: 100%;<%= this.data.attr('scrollX') == true ? 'overflow-x: scroll;' : 'overflow-x: hidden;' %><%= this.data.attr('scrollY') == true ? 'overflow-y: scroll;' : 'overflow-y: hidden;' %>" <%= this.data.attr('seamless') == true ? 'seamless' : '' %>></iframe>
            <div <%= (el) -> vis.binds.basic.iframeRefresh(el, data, this.view) %>></div>
        </div>
    </div>
</script>

<script id="tplImage"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="static"
        data-vis-prev='<img src="widgets/basic/img/Prev_Image.png"></img>'
        data-vis-name="Image"
        data-vis-attrs="src/image;stretch/checkbox;refreshInterval[0]/slider,0,180000,100;"
        data-vis-attrs0="refreshOnWakeUp/checkbox;refreshOnViewChange/checkbox;refreshWithNoQuery/checkbox;allowUserInteractions/checkbox;">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 200px; height: 130px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <% if (vis.editMode) { %>
                <div class="editmode-helper" />
            <% } %>
            <img class="<%= this.data.attr('stretch') ? 'vis-image' : '' %> <%= this.data.attr('allowUserInteractions') ? '' : 'vis-no-user-select vis-no-pointer-events' %>" style="top:0; left: 0; position: absolute; width: 100%; <%= this.data.attr('stretch') ? 'height: 100%;' : '' %>" <%= this.data.attr('src') ? 'src="' + this.data.attr('src') + '"' : '' %> />
            <div <%= (el) -> vis.binds.basic.imgRefresh(el, data, this.view) %> />
        </div>
    </div>
</script>

<script id="tplLink"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/basic/img/Prev_tplLink.png"></img>'
        data-vis-set="basic"
        data-vis-type="static"
        data-vis-name="link"
        data-vis-attrs="html;href;target/auto,,_blank,_self,_parent,_top;alt">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 200px; height: 130px; " id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <a href="<%== this.data.attr('href') %>" target="<%== this.data.attr("target") %>" alt="<%== this.data.attr("alt") %>" style="text-decoration:none;width:100%;height:100%"><div style="width:100%;height:100%"><%== this.data.attr("html") %></div></a>
        </div>
    </div>
</script>

<script id="tplFrame"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplFrame" style=" position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev vis-widget-lock" style="width: 80px; height: 80px; border: 3px dashed rgb(60, 152, 211); border-radius: 20px;"><div style="top: 30px; color: rgb(60, 152, 211); font-size: 16px; text-align: center; padding-top: 31px;">BORDER</div></div>'
        data-vis-set="basic"
        data-vis-type="static"
        data-vis-name="Border"
        data-vis-attrs="title['Title'];title_font;title_color[black]/color;title_back/color;title_top[-10]/slider,-20,20,1;title_left[15]/slider,-20,30,1;header_height[0]/slider,0,100,1;header_color[black]/color">
    <div class="vis-widget <%== this.data.attr('class') %>" style="overflow:visible;width:50px;height:50px;border:1px solid #888" id="<%= this.data.attr('wid') %>" >
        <% if (this.data.attr('header_height')) { %>
	    <div style="width:100%;height:<%= this.data.attr('header_height') %>px;background-color:<%= this.data.attr('header_color') %>">
		<% } %>
        <div style="position: absolute;top:<%= this.data.attr('title_top') %>px;left:<%= this.data.attr('title_left') %>px;color:<%== this.data.attr('title_color') %>;background:<%== this.data.attr('title_back') %>;font:<%== this.data.attr('title_font') %>"><%== this.data.attr('title') %></div>
        <% if (this.data.attr('header_height')) { %>
        </div>
		<% } %>
    </div>
</script>

<script id="tplStatefulIFrame8"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_StatefulIFrame8.png"></img>'
        data-vis-type="stateful"
        data-vis-name="iFrame 8"
        data-vis-attrs="oid;refreshInterval[0]/slider,0,180000,100;count[1]/number;group.frames;src_(0-count);noSandbox/checkbox">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top:0px; left: 0px; width: 600px; height: 320px;" id="<%= this.data.attr('wid') %>">
        <% if (vis.editMode) { %>
            <div class="editmode-helper"/>
        <% } %>
        <div class="vis-widget-body">
            <% if (vis.editMode) { %>
                <div class="editmode-helper"/>
            <% } %>
            <%
                var srcArr = [];
                var i = 0;
                while(data.attr('src_' + i) !== undefined) {
                    srcArr.push(data.attr('src_' + i));
                    i++;
                }
            %>
            <iframe class="vis-widget-element" <%= this.data.attr('noSandbox') ? '' : 'sandbox="allow-modals allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts"' %> data-oid="<%= this.data.attr('oid') %>" src="<%== vis.binds.stateful.value(srcArr, data.attr('oid')) %>" style="position: absolute; border: 0; padding: 0; margin: 0; width: 100%; height: 100%;"></iframe>
            <div <%= (el) -> vis.binds.stateful.iframe(el, srcArr, data.attr('refreshInterval')) %> />
        </div>
    </div>
</script>

<!-- basic Container -->
<script id="tplContainerView"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_ContainerView.png"></img>'
        data-vis-type="container"
        data-vis-name="view in widget"
        data-vis-attrs="contains_view/views">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:400px; height: 270px;" id="<%= this.data.attr('wid') %>">
        <% if (vis.editMode) { %>
            <div class="editmode-helper"></div>
        <% } %>
        <div data-vis-contains="<%= this.data.attr('contains_view') %>" class="vis-widget-body vis-view-container">
        </div>
    </div>
</script>

<!-- Stateful Widgets -->
<script id="tplStatefulContainerView8"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_StatefulContainerView8.png"></img>'
        data-vis-type="stateful,container"
        data-vis-name="view in widget 8"
        data-vis-attrs="oid;persistent/checkbox;notIfInvisible/checkbox;count[1]/number;group.views;contains_view_(0-count)/views">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:400px; height: 270px;" id="<%= this.data.attr('wid') %>">
        <% if (vis.editMode) { %>
            <div class="editmode-helper" />
        <% } %>
        <%
            var viewArr = [];
            var i = 0;
            while (data.attr('contains_view_' + i) !== undefined) {
                viewArr.push(data.attr('contains_view_' + i));
                i++;
            }
        %>
        <div class="vis-widget-body">
            <div class="vis-view-container" data-oid="<%= data.attr('oid') %>" data-vis-contains="<%= vis.binds.stateful.value(viewArr, data.attr('oid')) %>" <%= (el) -> vis.binds.stateful.view(el, viewArr, data.attr('persistent'), data.attr('notIfInvisible')) %> />
        </div>
    </div>
</script>

<!-- TODO
<script type="text/ejs" id="tplStatefulIFrame8Persistent" class="vis-tpl" data-vis-set="basic" data-vis-name="stateful - iFrame 8 (persistent)" data-vis-attrs="oid;refreshInterval;src_(0-1)">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top:0px; left: 0px; width: 600px; height: 320px;" id="<%= this.data.attr('wid') %>">
            <% if (vis.editMode) { %>
                <div class="editmode-helper" />
            <% } %>
          <div class="vis-widget-body">
            <% if (vis.editMode) { %>
                <div class="editmode-helper" />
            <% } %>
            <iframe class="vis-widget-element" src="<%= this.data.attr('src_0') %>" style="position: absolute; border:0; padding:0; margin:0; width: 100%; height:100%;"></iframe>
            <iframe class="vis-widget-element" src="<%= this.data.attr('src_1') %>" style="position: absolute; border:0; padding:0; margin:0; width: 100%; height:100%;"></iframe>
            <iframe class="vis-widget-element" src="<%= this.data.attr('src_2') %>" style="position: absolute; border:0; padding:0; margin:0; width: 100%; height:100%;"></iframe>
            <iframe class="vis-widget-element" src="<%= this.data.attr('src_3') %>" style="position: absolute; border:0; padding:0; margin:0; width: 100%; height:100%;"></iframe>
            <iframe class="vis-widget-element" src="<%= this.data.attr('src_4') %>" style="position: absolute; border:0; padding:0; margin:0; width: 100%; height:100%;"></iframe>
            <iframe class="vis-widget-element" src="<%= this.data.attr('src_5') %>" style="position: absolute; border:0; padding:0; margin:0; width: 100%; height:100%;"></iframe>
            <iframe class="vis-widget-element" src="<%= this.data.attr('src_6') %>" style="position: absolute; border:0; padding:0; margin:0; width: 100%; height:100%;"></iframe>
            <iframe class="vis-widget-element" src="<%= this.data.attr('src_7') %>" style="position: absolute; border:0; padding:0; margin:0; width: 100%; height:100%;"></iframe>
            <div <%= (el) -> vis.binds.stateful.iframe(el, [data.attr("src_0"), data.attr("src_1"), data.attr("src_2"), data.attr("src_3"), data.attr("src_4"), data.attr("src_5"), data.attr("src_6"), data.attr("src_7"]), data.attr("refreshInterval")) %> />
        </div>
    </div>
</script>
-->

<script id="tplStatefulImage8"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_StatefulImage.png"></img>'
        data-vis-type="stateful"
        data-vis-name="Image 8"
        data-vis-attrs="oid;refreshInterval[0]/slider,0,180000,100;count[1]/number;group.images;src_(0-count)/image">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 200px; height: 130px;" id="<%= this.data.attr('wid') %>">
        <% if (vis.editMode) { %>
            <div class="editmode-helper" />
        <% } %>
        <div class="vis-widget-body">
            <% if (vis.editMode) { %>
                <div class="editmode-helper" />
            <% } %>
            <%
                var srcArr = [];
                var i = 0;
                while(data.attr("src_" + i) !== undefined) {
                    srcArr.push(this.data.attr("src_" + i));
                    i++;
                }
            %>
            <img class="vis-widget-element" data-oid="<%= this.data.attr('oid') %>" style="position:absolute; width:100%;" src="<%== vis.binds.stateful.value(srcArr, this.data.attr('oid')) %>" />
            <div <%= (el) -> vis.binds.stateful.image(el, srcArr, data.attr('refreshInterval')) %> />
        </div>
    </div>
</script>

<script id="tplHtmlNav"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="static,navigation"
        data-vis-prev='<img src="widgets/basic/img/Prev_HTMLnavigation.png"></img>'
        data-vis-name="HTML navigation"
        data-vis-attrs="html;nav_view;sync/checkbox;body-background/color;group.effects;hide_effect/effect;hide_duration/slider,0,10000,100;hide_options/effect-options;show_effect/effect;show_duration/slider,0,10000,100;show_options/effect-options">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 200px; height: 130px; " id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.basic.navigation(el, {nav_view: data.attr('nav_view'), hideOptions: {effect: data.attr('hide_effect'), options: (data.attr('hide_options') ? data.attr('hide_options') : {}),duration:data.attr('hide_duration')}, showOptions: {effect:data.attr('show_effect'), options: (data.attr('show_options') ? data.attr('show_options') : {}), duration: data.attr('show_duration')}, sync: data.attr('sync'), background: data.attr('body-background')}) %>>
        <div class="vis-widget-body">
            <%== this.data.attr('html') %>
        </div>
    </div>
</script>

<script id="tplFilterDropdown"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/basic/img/Prev_FilterDropdown.png"></img>'
        data-vis-set="basic"
        data-vis-type="filter"
        data-vis-name="filter - dropdown"
        data-vis-attrs="filters;group.effects;hide_effect/effect;hide_duration/slider,0,10000,100;show_effect/effect;show_duration/slider,0,10000,100;"
        data-vis-attrs0="autoFocus/checkbox;"
>
    <div class="vis-widget <%== this.data.attr('class') %>" style="top:0px; left:0px; width: 200px; height: 40px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.basic.filterDropdown(el, data.attr('filters'), data.attr('hide_effect'), data.attr('hide_duration'), data.attr('show_effect'), data.attr('show_duration')) %>>
        <div class="vis-widget-body">
            <select id="" name="" <%= this.data.attr('autoFocus') === true || this.data.attr('autoFocus') === 'true' ? 'autofocus' : '' %> >
                <option value=""><%= _('all') %></option>
            </select>
        </div>
    </div>
</script>

<script id="tplValueFloat"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueFloat.png"></img>'
        data-vis-name="Number"
        data-vis-attrs="oid;html_prepend;html_append_singular;html_append_plural;group.extended;digits;is_comma[true]/checkbox;is_tdp/checkbox;factor[1];oid-quality;class_true;class_false;test_html">
    <div class="vis-widget <%== (vis.states.attr(this.data['oid-quality'] + '.val') === 'true' ||  vis.states.attr(this.data['oid-quality'] + '.val') === true) ? this.data.attr('class_true') : this.data.attr('class_false') %> <%== this.data.attr('class') %>" style="top: 0; left: 0; width: 60px; height: 18px" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <div data-oid="<%= this.data.attr('oid') %>">
                <%== this.data.attr('html_prepend') %><%= vis.binds.basic.formatFloat(this.data) %><%== (parseFloat(vis.binds.basic.formatFloat(this.data)) === 1 ? this.data.attr('html_append_singular') : this.data.attr('html_append_plural')) %>
            </div>
        </div>
    </div>
</script>

<script id="tplValueString"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val"
        data-vis-name="String"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueString.png"></img>'
        data-vis-attrs="oid;html_prepend;html_append;test_html">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top:0px; left: 0px; width: 50px; height: 20px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <div data-oid="<%= this.data.attr('oid') ? ((this.data.attr('oid').indexOf('"') !== -1) ? '' : this.data.attr('oid')) : this.data.attr('oid') %>">
                <%== this.data.attr("html_prepend") %><%= (vis.editMode && this.data.attr('test_html')) ? this.data.attr('test_html') : this.data.attr('oid') ? ((this.data.attr('oid').indexOf('"') !== -1) ? this.data.oid.substring(1, this.data.oid.length - 1) : (vis.states.attr(this.data.oid + '.val'))) : (vis.states.attr(this.data.oid + '.val')) %><%== this.data.attr('html_append') %>
            </div>
        </div>
    </div>
</script>

<script id="tplValueStringRaw"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueStringRaw.png"></img>'
        data-vis-name="String (unescaped)"
        data-vis-attrs="oid;html_prepend;html_append;test_html">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top:0px; left: 0px; width: 50px; height: 20px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <div data-oid="<%= this.data.attr('oid') %>">
                <%== this.data.attr('html_prepend') %><%== (vis.editMode && this.data.attr('test_html')) ? this.data.attr('test_html') : (typeof app !== 'undefined' ? app.replaceFilePathSrc(vis.states.attr(this.data.oid + '.val')) : vis.states.attr(this.data.oid + '.val')) %><%== this.data.attr('html_append') %>
            </div>
        </div>
    </div>
</script>

<script id="tplValueStringImg"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueStringImg.png"></img>'
        data-vis-type="val"
        data-vis-name="String img src"
        data-vis-attrs="oid;html_prepend;html_append;refreshInterval[0]/slider,0,180000,100">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top:0px; left:0px; width:60px; height: 40px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <div data-oid="<%= this.data.attr('oid') %>">
                <%== this.data.attr('html_prepend') %>
                <img src="<%= (typeof app !== 'undefined' ? app.replaceFilePathImg(vis.states.attr(this.data.oid + '.val')) : vis.states.attr(this.data.oid + '.val')) || '' %>" width="100%" />
                 <div <%= (el) -> vis.binds.basic.imgRefresh(el, vis.states.attr(data.oid + '.val' ), data, this.view) %> />
                <%== this.data.attr('html_append') %>
            </div>
        </div>
    </div>
</script>

<script id="tplTimeValue"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val,timestamp"
        data-vis-name="TimesValue"
        data-vis-prev='<img src="widgets/basic/img/Prev_TimeValue.png"></img>'
        data-vis-attrs="oid;show_interval/checkbox;format_date/auto,YYYY.MM.DD hh:mm:ss,DD.MM.YYYY hh:mm:ss,YYYY.MM.DD,DD.MM.YYYY,YYYY/MM/DD hh:mm:ss,YYYY/MM/DD,hh:mm:ss;html_prepend;html_append;test_html">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top: 0px; left: 0px; width: 50px; height: 20px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <div data-oid="<%= this.data.attr('oid') %>">
                <%== this.data.attr('html_prepend') %><%== (vis.editMode && this.data.attr('test_html')) ? this.data.attr('test_html') : vis.binds.basic.formatDate(vis.states.attr(this.data.oid + '.val'), this.data.attr('format_date'), this.data.attr('show_interval')) %><%== this.data.attr('html_append') %>
            </div>
        </div>
    </div>
</script>

<script id="tplValueTimestampValue"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val,timestamp"
        data-vis-name="Timestamp Value"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueTimestamp.png"></img>'
        data-vis-attrs="oid;show_interval/checkbox;format_date/auto,YYYY.MM.DD hh:mm:ss,DD.MM.YYYY hh:mm:ss,YYYY.MM.DD,DD.MM.YYYY,YYYY/MM/DD hh:mm:ss,YYYY/MM/DD,hh:mm:ss;html_prepend;html_append;test_html">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top: 0px; left: 0px; width: 50px; height: 20px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <div data-oid="<%= this.data.attr('oid') %>">
                <%== this.data.attr('html_prepend') %><%== (vis.editMode && this.data.attr('test_html')) ? this.data.attr('test_html') : vis.binds.basic.formatDate(vis.states.attr(this.data.oid + '.val'), this.data.attr('format_date'), this.data.attr('show_interval')) %><%== this.data.attr('html_append') %>
            </div>
        </div>
    </div>
</script>

<script id="tplValueTimestamp"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val,timestamp"
        data-vis-name="Timestamp"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueTimestamp.png"></img>'
        data-vis-attrs="oid;show_interval/checkbox;format_date/auto,YYYY.MM.DD hh:mm:ss,DD.MM.YYYY hh:mm:ss,YYYY.MM.DD,DD.MM.YYYY,YYYY/MM/DD hh:mm:ss,YYYY/MM/DD,hh:mm:ss;html_prepend;html_append;test_html">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top: 0px; left: 0px; width: 50px; height: 20px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <div data-oid="<%= this.data.attr('oid') %>">
                <%== this.data.attr('html_prepend') %><%== (vis.editMode && this.data.attr('test_html')) ? this.data.attr('test_html') : vis.binds.basic.formatDate(vis.states.attr(this.data.oid + '.ts'), this.data.attr('format_date'), this.data.attr('show_interval')) %><%== this.data.attr('html_append') %>
            </div>
        </div>
    </div>
</script>

<script id="tplValueLastchange"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val,timestamp"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueLastchange.png"></img>'
        data-vis-name="Last change Timestamp"
        data-vis-attrs="oid;show_interval/checkbox;format_date/auto,YYYY.MM.DD hh:mm:ss,DD.MM.YYYY hh:mm:ss,YYYY.MM.DD,DD.MM.YYYY,YYYY/MM/DD hh:mm:ss,YYYY/MM/DD,hh:mm:ss;html_prepend;html_append;test_html">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top:0px; left: 0px; width: 50px; height: 20px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <div data-oid="<%= this.data.attr('oid') %>">
                <%== this.data.attr('html_prepend') %><%== (vis.editMode && this.data.attr('test_html')) ? this.data.attr('test_html') : vis.binds.basic.formatDate(vis.states.attr(this.data.oid + '.lc'), this.data.attr('format_date'), this.data.attr('show_interval')) %><%== this.data.attr('html_append') %>
            </div>
        </div>
    </div>
</script>

<script id="tplValueList"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueList.png"></img>'
        data-vis-type="val"
        data-vis-name="ValueList Text"
        data-vis-attrs="oid;html_prepend;html_append;valuelist/text;test_list/nselect,,0,1,2,3,4,5,6,7,8,9,10,11,12">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top:0px;left:0px;width:60px;height:20px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <div data-oid="<%= this.data.attr('oid') %>">
                <%== this.data.attr('html_prepend') %><%= (function (that){var list = (that.data.valuelist ? that.data.valuelist.split(';') : []); var val = list[(vis.editMode && (that.data.attr('test_list') || that.data.attr('test_list') == '0')) ? parseInt(that.data.attr('test_list')) : parseInt(vis.states.attr(that.data.oid + '.val'), 10)]; if (val) val = val.replace('§§', ';'); return val;})(this) %><%== this.data.attr('html_append') %>
            </div>
        </div>
    </div>
</script>

<script id="tplValueListHtml"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueListHtml.png"></img>'
        data-vis-type="val"
        data-vis-name="ValueList HTML"
        data-vis-attrs="oid;html_prepend;html_append;valuelist/text;test_list/nselect,,0,1,2,3,4,5,6,7,8,9,10,11,12">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top:0px;left:0px;width:60px;height:20px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <div data-oid="<%= this.data.attr('oid') %>">
                <%== this.data.attr('html_prepend') %><%== (function (that){var list = (that.data.valuelist ? that.data.valuelist.split(';') : []); var val = list[(vis.editMode && (that.data.attr('test_list') || that.data.attr('test_list') == '0')) ? parseInt(that.data.attr('test_list')) : parseInt(vis.states.attr(that.data.oid + '.val'), 10)]; if (val) val = val.replace('§§', ';'); return val;})(this) %><%== this.data.attr('html_append') %>
            </div>
        </div>
    </div>
</script>

<script id="tplValueListHtml8"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueListHtml8.png"></img>'
        data-vis-type="val"
        data-vis-name="ValueList HTML Style"
        data-vis-attrs="oid;html_prepend;html_append;count[2]/number,0,10,1;value(0-count);style(0-count);test_list/nselect,,0,1,2,3,4,5,6,7,8,9,10,11,12">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 100px; height: 30px;" id="<%= this.data.attr('wid') %>">
        <%
            var slist = [];
            var i = 0;
            while (data['style' + i] !== undefined) {
                slist[i] = data['style' + i]; i++;
            }
        %>
        <div class="vis-widget-body" style="<%== slist[(vis.editMode && (this.data.attr('test_list') || this.data.attr('test_list') == '0')) ? parseInt(this.data.attr('test_list')) : (parseInt((vis.states.attr(this.data.oid + '.val') == true ? 1 : (vis.states.attr(this.data.oid + '.val') == false ? 0 : vis.states.attr(this.data.oid + '.val'))), 10))] %>">
            <div data-oid="<%= this.data.attr('oid') %>">
               <%== this.data.attr('html_prepend') %><%
                   var list = [];
                   var j = 0;
                   while (data['value' + j] !== undefined) {
                        list[j] = data['value' + j];
                        if (list[j]) list[j] = list[j].replace('§§', ';');
                        j++;
                   }
                   %><%== list[(vis.editMode && (this.data.attr('test_list') || this.data.attr('test_list') == '0')) ? parseInt(this.data.attr('test_list')) : (parseInt((vis.states.attr(this.data.oid + '.val') == true ? 1 : (vis.states.attr(this.data.oid + '.val') == false ? 0 : vis.states.attr(this.data.oid + '.val'))), 10))] %><%== this.data.attr('html_append') %>
            </div>
        </div>
    </div>
</script>

<script id="tplValueBool"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueBool.png"></img>'
        data-vis-type="val"
        data-vis-name="Bool HTML"
        data-vis-attrs="oid;html_prepend;html_append;html_false;html_true">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:76px; height:76px;" id="<%= this.data.attr('wid') %>"  data-oid="<%= this.data.attr('oid') %>" >
        <div class="vis-widget-body">
            <%== this.data.attr('html_prepend') %>
            <% if (vis.binds.basic.isFalse(vis.states.attr(this.data.oid + '.val'), this.data.attr('min'), this.data.attr('max'))) { %>
                <%== this.data.attr("html_false") %>
            <% } else { %>
                <%== this.data.attr('html_true') %>
            <% } %>
            <%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplAckBool"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_AckBool.png"></img>'
        data-vis-type="val"
        data-vis-name="AckFlag HTML"
        data-vis-attrs="oid;html_prepend;html_append;html_false;html_true">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:76px; height:76px;" id="<%= this.data.attr('wid') %>"  data-oid="<%= this.data.attr('oid') %>" >
        <div class="vis-widget-body">
            <%== this.data.attr('html_prepend') %>
            <%
            var str = vis.states.attr(this.data.oid + ".ack");
            var val = parseFloat(str);
            var state;
            if (str === false || str === "false" || val == 0) {
            %>
            <%== this.data.attr('html_false') %>
            <% } else { %>
            <%== this.data.attr('html_true') %>
            <% } %>
            <%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplValueBoolCheckbox"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueBoolCheckbox.png"></img>'
        data-vis-set="basic"
        data-vis-type="ctrl"
        data-vis-name="Bool Checkbox"
        data-vis-attrs="oid;html_prepend;html_append;"
        data-vis-attrs0="autoFocus/checkbox;"
>
    <div class="vis-widget <%== this.data.attr('class') %>" style="" id="<%= this.data.attr('wid') %>" >
        <div class="vis-widget-body">
			<%== this.data.attr('html_prepend') %>
			<input
			    type="checkbox"
			    name="<%= this.data.attr('wid') %>_checkbox"
			    <%= this.data.attr('autoFocus') === true || this.data.attr('autoFocus') === 'true' ? 'autofocus' : '' %>
			    id="<%= this.data.attr('wid') %>_checkbox"
			    data-oid="<%= this.data.attr('oid') %>"
			    <%= (el) -> vis.binds.basic.checkbox(el) %>
            />
			<%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplValueInput"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueInput.png"></img>'
        data-vis-type="ctrl"
        data-vis-update-style="true"
        data-vis-name="Input val"
        data-vis-attrs="oid;html_prepend;html_append;numeric/checkbox;min;max;autoSet/checkbox;readOnly/checkbox;"
        data-vis-attrs0="autoFocus/checkbox;"
>
    <div class="vis-widget <%== this.data.attr('class') %>" style="background: white; color: black; border: 2px inset" id="<%= this.data.attr('wid') %>" >
        <div class="vis-widget-body">
			<%== this.data.attr('html_prepend') %>
			<input type="text"
			    <%= (this.data.attr('readOnly') === true || this.data.attr('readOnly') === 'true') ? 'readonly ' : '' %>
			    <%= this.data.attr('autoFocus') === true || this.data.attr('autoFocus') === 'true' ? 'autofocus ' : '' %>
			    data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.basic.input(el, this.data) %> style="width: calc(100% - 5px);"
            />
			<%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplValueBoolSelect"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueBoolSelect.png"></img>'
        data-vis-type="ctrl"
        data-vis-name="Bool Select"
        data-vis-attrs="oid;html_prepend;html_append;text_true;text_false;"
        data-vis-attrs0="autoFocus/checkbox;"
>
    <div class="vis-widget <%== this.data.attr('class') %>" style="overflow:false" id="<%= this.data.attr('wid') %>" >
        <div class="vis-widget-body"  style="overflow:false">
			<%== this.data.attr('html_prepend') %>
			<select id="<%= this.data.attr('wid') %>_select" data-oid="<%= this.data.attr('oid') %>" <%= this.data.attr('autoFocus') === true || this.data.attr('autoFocus') === 'true' ? 'autofocus' : '' %> >
				<option value="0" selected='selected'><%= this.data.attr('text_false') %></option>
				<option value="1"><%= this.data.attr('text_true') %></option>
			</select>
			<div <%= (el) -> vis.binds.basic.select(el) %>></div>
			<%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplValueBoolCtrl"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueBoolCtrl.png"></img>'
        data-vis-type="ctrl"
        data-vis-name="Bool HTML"
        data-vis-attrs="oid;min;max;html_prepend;html_append;html_false;html_true;"
        data-vis-attrs1="group.ccontrol;urlTrue;urlFalse;oidTrue/id;oidFalse/id;">
    <div
        class="vis-widget <%== this.data.attr('class') %>"
        style="width:76px; height:76px;"
        id="<%= this.data.attr('wid') %>"
        data-oid="<%= this.data.attr('oid') %>"
        data-min="<%= this.data.attr('min') %>"
        data-max="<%= this.data.attr('max') %>"
        data-as-button="<%= this.data.attr('asButton') %>"
        data-url-true="<%=  this.data.attr('urlTrue') %>"
        data-url-false="<%= this.data.attr('urlFalse') %>"
        data-oid-true="<%=  this.data.attr('oidTrue') %>"
        data-oid-false="<%= this.data.attr('oidFalse') %>"
        <%= (el) -> vis.binds.basic.toggle(el) %>>
        <div class="vis-widget-body">
			<%== this.data.attr('html_prepend') %>
			<% if (vis.binds.basic.isFalse(vis.states.attr(this.data.oid + '.val'), this.data.attr('min'), this.data.attr('max'))) { %>
			    <%== this.data.attr('html_false') %>
			<% } else { %>
			    <%== this.data.attr('html_true') %>
			<% } %>
			<%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplValueBoolCtrlSvg"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueBoolCtrlSvg.png"></img>'
        data-vis-type="ctrl,state"
        data-vis-name="Bool SVG"
        data-vis-attrs="oid;no_control/checkbox;"
        data-vis-attrs0="svg_false[<polygon points='100,10 40,198 190,78 10,78 160,198' style='fill:lime§ stroke:purple§ stroke-width:5§ fill-rule:nonzero' transform='scale(0.4)'/>]/text;"
        data-vis-attrs1="svg_true[<polygon points='100,10 40,198 190,78 10,78 160,198' style='fill:yellow§ stroke:red§ stroke-width:5§ fill-rule:nonzero' transform='scale(0.4)'/>]/text;"
        data-vis-attrs2="svg_opacity/slider,0,1,0.05">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:76px; height:76px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>">
        <div class="vis-widget-body">
            <% vis.binds.basic.showSvg(this.data.attr('class'), this.view, this.data.attr('wid'), this.data.attr('oid'), this.data.attr('svg_opacity'), this.data.attr('svg_false'), this.data.attr('svg_true'), null, this.data.attr('no_control')) %>
        </div>
    </div>
</script>

<script id="tplBasicState"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/basic/img/Prev_BasicState.png"></img>'
        data-vis-set="basic"
        data-vis-type="ctrl"
        data-vis-name="HTML State"
        data-vis-attrs="oid;html;value;urlValue">
    <div
        class="vis-widget <%== this.data.attr('class') %>"
        style="width:76px; height:76px;"
        id="<%= this.data.attr('wid') %>"
        data-oid="<%= this.data.attr('oid') %>"
        data-url-value="<%= this.data.attr('urlValue') %>"
        data-val="<%= this.data.attr('value') %>"
        <%= (el) -> vis.binds.basic.state(el) %>
        >
        <div class="vis-widget-body">
			<%== this.data.attr("html") %>
        </div>
    </div>
</script>

<script id="tplRedNumber"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val"
        data-vis-name="Red Number"
        data-vis-prev='<img src="widgets/basic/img/Prev_RedNumber.png"></img>'
        data-vis-attrs="oid;type[circle]/select,circle,pin;html_prepend;html_append_singular;html_append_plural">
    <% if (this.data.attr('type') === 'pin') { %>
        <div class="vis-widget <%== this.data.attr('class') %>" style="width: 33px; height: 61px; padding-left: 4px" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.basic.hideOnFalse(el) %>>
            <div class="vis-widget-body" >
                <img src="widgets/basic/img/pin_red5.svg" style="width: 100%; height: 100%">
                <div style="position:absolute; top: 22%; width: 95%; text-align: center">
                    <%== this.data.attr('html_prepend') %><%= parseInt(vis.states.attr(this.data.oid + '.val'), 10) %><%== (parseInt(vis.states.attr(this.data.oid + '.val'), 10) === 1 ? this.data.attr("html_append_singular") : this.data.attr("html_append_plural")) %>
                </div>
            </div>
        </div>
    <% } else { %>
        <div class="vis-widget <%== this.data.attr('class') %>" style="padding: 3px; width: auto; min-width: 21px; height: 21px; border-radius:16px; border: 3px solid white; background-color: rgb(214, 69, 69); color:white; font:normal normal normal 20px/normal Helvetica; text-align: center;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.basic.hideOnFalse(el) %>>
            <div class="vis-widget-body" >
                <%== this.data.attr('html_prepend') %><%= parseInt(vis.states.attr(this.data.oid + '.val'), 10) %><%== (parseInt(vis.states.attr(this.data.oid + '.val'), 10) === 1 ? this.data.attr("html_append_singular") : this.data.attr("html_append_plural")) %>
            </div>
        </div>
    <% } %>
</script>

<script id="tplBulbOnOffCtrl"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/basic/img/Prev_BulbOnOffCtrl.png"></img>'
        data-vis-set="basic"
        data-vis-type="ctrl"
        data-vis-name="Bulb on/off"
        data-vis-attrs="oid;min;max;icon_off[img~bulb_off.png]/image;icon_on[img~bulb_on.png]/image;readOnly/checkbox;"
        data-vis-attrs0="group.ccontrol;urlTrue;urlFalse;oidTrue/id;oidFalse/id;oidTrueValue;oidFalseValue;"
>
    <div
        data-oid="<%= this.data.attr('oid') %>"
        class="vis-widget <%== this.data.attr('class') %>"
        id="<%= this.data.attr('wid') %>"
        style="width: 44px; height: 59px"
        data-read-only="<%=  this.data.attr('readOnly') %>"
        data-min="<%= this.data.attr('min') %>"
        data-max="<%= this.data.attr('max') %>"
        data-url-true="<%=  this.data.attr('urlTrue') %>"
        data-url-false="<%= this.data.attr('urlFalse') %>"
        data-oid-true="<%=  this.data.attr('oidTrue') %>"
        data-oid-false="<%= this.data.attr('oidFalse') %>"
        data-oid-true-value="<%=  this.data.attr('oidTrueValue') %>"
        data-oid-false-value="<%= this.data.attr('oidFalseValue') %>"
        <%= (el) -> vis.binds.basic.toggle(el) %>
        >
        <div class="vis-widget-body">
            <% if (vis.binds.basic.isFalse(vis.states.attr(this.data.oid + '.val'), this.data.attr('min'), this.data.attr('max'))) { %>
                <img src="<%== this.data.attr('icon_off') ? this.data.attr('icon_off') : 'img/bulb_off.png' %>" width="100%"/>
            <% } else { %>
                <img src="<%== this.data.attr('icon_on') ? this.data.attr('icon_on') : 'img/icon_on.png' %>" width="100%"/>
            <% } %>
        </div>
    </div>
</script>

<script id="tplValueFloatBar"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val,bar"
        data-vis-name="Bar"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueFloatBar.png"></img>'
        data-vis-attrs="oid;min[0];max[100];orientation[horizontal]/select,horizontal,vertical/onOrientation;color[blue]/color;border;shadow;reverse/checkbox">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 240px; height: 20px; border: 1px solid #888" id="<%= this.data.attr('wid') %>">
        <div data-oid="<%= this.data.attr('oid') %>" class="vis-widget-body"
        style="<%= (this.data.attr('orientation') === 'vertical') ? ('height: ' + vis.binds.basic.getCalc(this.data) + ';' + ((this.data.border) ? ' width:  calc(100% - ' + vis.binds.basic.extractWidth(this.data.border, 2) + ');' : '') + (this.data.reverse === 'true' || this.data.reverse === true ? 'left: 0px; position: absolute; bottom: 0%;' : '')) : (((this.data.border) ? " height: calc(100% - " + vis.binds.basic.extractWidth(this.data.border, 2) + ');' : '') + 'width: ' + vis.binds.basic.getCalc(this.data) + ';' + (this.data.reverse === 'true' || this.data.reverse === true ? 'float: right; ' : '')) %>background-color:<%= this.data.color %>; border: <%= this.data.border %>; box-shadow: <%= this.data.shadow %>"></div>
    </div>
</script>

<script id="tplNote"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val"
        data-vis-name="Note"
        data-vis-prev='<img src="widgets/basic/img/Prev_Note.png"></img>'
        data-vis-attrs="oid;max_width[300];html_prepend;html_append;test_text">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:50px; height:50px; border:1px solid #888; background: rgba(255,255,105,0.8)" id="<%= this.data.attr('wid') %>" onclick="vis.binds.basic.editNote('<%= this.data.attr('wid') %>', '<%= this.data.attr('max_width') %>', '<%= this.data.attr('min_width') %>', '<%= this.data.attr('min_height') %>', '<%= this.data.attr('oid') %>')">
		<div data-oid="<%= this.data.attr('oid') %>" id="div_<%= this.data.attr('wid') %>" style="padding: 10px">
			<%== this.data.attr('html_prepend') %><%= (this.data.test_text && vis.editMode) ? this.data.test_text : (vis.states.attr(this.data.oid + '.val') == null ? "" : vis.states.attr(this.data.oid + '.val')) %><%== this.data.attr('html_append') %>
		</div>
    </div>
</script>

<script id="tplTableBody"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="json,table"
        data-vis-name="Table"
        data-vis-prev='<img src="widgets/basic/img/Prev_TableBody.png"></img>'
        data-vis-attrs="table_oid/id;"
        data-vis-attrs0="static_value[[{^Title^: ^first^, ^Value^: 1, ^_Description^: ^Value1^}, {^Title^: ^second^, ^Value^: 2, ^_Description^: ^Value2^}]]/text;"
        data-vis-attrs1="event_oid/id;new_on_top/checkbox;ack_oid/id;selected_oid/id;hide_header/checkbox;show_scroll/checkbox;detailed_wid/widget;max_rows/number;"
        data-vis-attrs2="colCount/number;group.header/byindex;colName(1-colCount);colWidth(1-colCount);colAttr(1-colCount);"
        data-vis-attrs-not-used="btn_print;view_for_print/views"
>
    <div class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" style="width: 300px; height: 150px; background: #d3d3d3">
       <% vis.binds.table.showTable(this.view, this.data.attr('wid'), this.data); %>
    </div>
</script>

<script id="tplHtmlLogout"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="tools"
        data-vis-prev='<img src="widgets/basic/img/Prev_HtmlLogout.png"></img>'
        data-vis-name="HTML logout"
        data-vis-attrs="html[<button style=^cursor: pointer^>Logout</button>]/text;redirect_url;in_app_close/checkbox">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 70px; height: 30px; cursor: pointer" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.basic.logout(el, this.data) %> >
        <div class="vis-widget-body">
            <%== this.data.attr('html') %>
        </div>
    </div>
</script>

<!--script id="tplDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="table"
        data-vis-name="Dialog"
        data-vis-attrs="show/checkbox;trigger_id/id;button(1-3);title;text;image/image;width[400]/slider,50,1000,10;height[200]/slider,50,1000,10;modal/checkbox;_no_style[true]/hidden;_no_move[true]/hidden;_no_resize[true]/hidden;margin_left[0]/slider,0,200,1;margin_top[0]/slider,0,200,1"
        >
    <%
        var options =  {
            trigger_id:  this.data.attr('trigger_id'),
            buttons:     [this.data.attr('button1'), this.data.attr('button2'), this.data.attr('button3')],
            image:       this.data.attr('image'),
            title:       this.data.attr('title'),
            text:        this.data.attr('text'),
            width:       this.data.attr('width'),
            height:      this.data.attr('height'),
            show:        this.data.attr('show'),
            modal:       this.data.attr('modal'),
            margin_left: this.data.attr('margin_left'),
            margin_top:  this.data.attr('margin_top')
        };
        vis.binds.table.showDialog(this.view, this.data.attr('wid'), options);
    %>
</script-->

<script id="tplValueGesture"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val,tools"
        data-vis-prev='<img src="widgets/basic/img/Prev_ValueGesture.png"></img>'
        data-vis-name="Gesture indicator"
        data-vis-no-gestures="true"
        data-vis-attrs="html_prepend;html_append_singular;html_append_plural;group.extended;digits[0];is_comma[true]/checkbox;is_tdp/checkbox;factor[1];test_html">
    <div class="vis-widget <%== this.data.attr('class') %>" style="height: 21px; border: 1px solid #c7c7c7; border-radius: 5px; text-align: center; padding-top: 6px; box-shadow: 2px 2px 5px 1px gray; padding-left: 2px; padding-right: 2px; background: lightgray;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <% vis.binds.basic.createValueGesture(this.data.wid, this.view, this.data, this.style); %>
        </div>
    </div>
</script>

<script id="tplSpeech2Text"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-type="val"
        data-vis-prev='<img src="widgets/basic/img/Prev_Speech2Text.png"></img>'
        data-vis-name="Speech to text"
        data-vis-no-gestures="true"
        data-vis-attrs="oid;speechMode[single]/select,single,startstop,continuous;language/select,,en-US,de,ru-RU;keywords;"
        data-vis-attrs0="group.image;noImage/checkbox;imageInactive[widgets~basic~img~micInactive.svg]/image;imageActive[widgets~basic~img~micActive.svg]/image;imageStarted[widgets~basic~img~micStarted.svg]/image;imageDetected[widgets~basic~img~micDetected.svg]/image;imageSent[widgets~basic~img~micSent.svg]/image;imageHeightPx[70]/slider,0,200,1;imageWidthPx[70]/slider,0,200,1;"
        data-vis-attrs1="group.text;noText/checkbox;noResults/checkbox;keyWordColor[#FFB051]/color;textSentColor[#7E88D3]/color;">
    <div class="vis-widget <%== this.data.attr('class') %>" style="height: 77px; width: 500px" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <table style="height: 100%; width: 100%"><tr>
                <td style="<%= this.data.attr('noImage') ? 'display: none' : '' %>"><img class="mic-image" style="height: <%= this.data.attr('imageHeightPx') %>px; width: <%= this.data.attr('imageWidthPx') %>px" src="<%= this.data.attr('imageInactive') %>" /></td>
                <td class="mic-text" style="width: 100%">
                    <div class="mic-info-text" style="<%= this.data.attr('noText')    ? 'display: none' : '' %>"></div>
                    <div class="mic-results"   style="<%= this.data.attr('noResults') ? 'display: none' : '' %>"></div>
                </td>
            </tr></table>
        </div>
    </div>
    <% vis.binds.basic.speech2text(this.data.wid, this.view, this.data, this.style); %>
</script>

<script id="tplFullScreen"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/basic/img/Prev_FullScreen.png"></img>'
        data-vis-set="basic"
        data-vis-type="tools"
        data-vis-name="Full Screen"
        data-vis-attrs="">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:43px; height:43px; background: #AAAAAA; cursor: pointer; opacity: 0.9" id="<%= this.data.attr('wid') %>">
		<div class='vis-fullscreen-icon' style="padding: 10px"></div>
		<%= vis.binds.basic.toggleFullScreen(this.data.wid, this.view, this.data, this.style); %>
    </div>
</script>

<script id="tplScreenResolution"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/basic/img/Prev_ScreenResolution.png"></img>'
        data-vis-set="basic"
        data-vis-type="tools"
        data-vis-name="Screen Resolution"
        data-vis-attrs="">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:170px; height:75px; border: 1px solid #888; font-size: 12px; opacity: 0.8" id="<%= this.data.attr('wid') %>">
		<div id="div_<%= this.data.attr('wid') %>" style="padding: 10px">
			Default view: <span class='vis-resolution-default-view'></span><br>
			Width: <span class='vis-resolution-width'></span><br>
			Height: <span class='vis-resolution-height'></span><br>
			Instance: <span><%== vis.instance ? vis.instance : vis.binds.basic.createScreenText() %></span>
		</div>
		<%= vis.binds.basic.detectScreen(this.data.attr('wid')) %>
    </div>
</script>


<script id="_tplGroup"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="basic"
        data-vis-attrs="group.objects;attrCount[1]/slider,0,20,1;attrName(1-attrCount)//onAttrChanged;attrType(1-attrCount)/select,,id,checkbox,image,color,views,html,widget,history/onAttrChanged;"
>
    <div class="vis-widget <%== this.data.attr('class') %>" style="overflow: visible" id="<%= this.data.attr('wid') %>"></div>
</script>

<!-- --------------basic.html--- END -->
<!-- --------------jqplot.html--- START -->
<link rel="stylesheet" type="text/css" href="widgets/jqplot/css/jquery.jqplot.min.css" />

<script type="text/javascript" src="widgets/jqplot/js/jquery.jqplot.min.js"></script>

<script type="text/javascript">

    if (vis.editMode) {
        // Add words for basic widgets
        $.extend(true, systemDictionary, {
            "background":           {"en": "Background",            "de": "Hintergrund",                    "ru": "Фон"},
            "group_ticks":          {"en": "Ticks",                 "de": "Tick",                           "ru": "Штрихи"},
            "ticks":                {"en": "Ticks-Namen",           "de": "Tick-Beschriftungen",            "ru": "Подписи штрихов"},
            "ticks_tooltip":        {"en": "Divide with semicolon, e.g '10;50;70'", "de": "Mit Semikolon trennen, z.B. '10;50;70'", "ru": "Разделять точкой запятой, например '10;50;70'"},
            "showTickLabels":       {"en": "Show tick labels",      "de": "Zeige Tick-Beschriftungen",      "ru": "Показать подписи"},
            "tickPadding":          {"en": "Tick padding",          "de": "Tick-Abstand",                   "ru": "Отступ штрихов"},
            "group_intervals":      {"en": "Intervals",             "de": "Intervalle",                     "ru": "Интервалы"},
            "intervals":            {"en": "Intervals",             "de": "Intervalle",                     "ru": "Отрезки"},
            "intervals_tooltip":    {"en": "Divide with semicolon, e.g '10;50;70'", "de": "Mit Semikolon trennen, z.B. ''10;50;70'", "ru": "Разделять точкой запятой, например '10;50;70'"},
            "intervalColors":       {"en": "Interval colors",       "de": "Intervallfarben",                "ru": "Цвета интервалов"},
            "intervalColors_tooltip": {"en": "Divide with semicolon, e.g 'green;#0000FF;red'", "de": "Mit Semikolon trennen, z.B. 'green;#0000FF;red'", "ru": "Разделять точкой запятой, например 'green;#0000FF;red'"},
            "intervalInnerRadius":  {"en": "Inner interval raduis", "de": "Intervall-Radius innen",         "ru": "Внутренний радиус интервалов"},
            "intervalOuterRadius":  {"en": "Outer interval radius", "de": "Intervall-Radius außen",         "ru": "Внешний радиус интервалов"},
            "diameter":             {"en": "Diameter",              "de": "Durchmesser",                    "ru": "Диаметер"},
            "padding":              {"en": "Padding",               "de": "Abstand",                        "ru": "Отступ"},
            "group_shadow":         {"en": "Shadow",                "de": "Schatten",                       "ru": "Тень"},
            "shadowOffset":         {"en": "shadowOffset",          "de": "Schatten offset",                "ru": "Сдвиг тени"},
            "shadowAlpha":          {"en": "Shadow transparence",   "de": "Schatten Alpha",                 "ru": "Прозрачость тени"},
            "shadowDepth":          {"en": "Shadow depth",          "de": "Schattentiefe",                  "ru": "Глубина тени"},
            "group_ring":           {"en": "Ring",                  "de": "Rand",                           "ru": "Кайма"},
            "ringColor":            {"en": "Ring color",            "de": "Randfarbe",                      "ru": "Цвет окантовки"},
            "ringWidth":            {"en": "Ring width",            "de": "Randbreite",                     "ru": "Ширина окантовки"},
            "group_needle":         {"en": "Needle",                "de": "Zeiger",                         "ru": "Стрелка"},
            "needleThickness":      {"en": "Needle thickness",      "de": "Zeigerdicke",                    "ru": "Ширина стрелки"},
            "needlePad":            {"en": "Needle pad",            "de": "Zeigeroffset",                   "ru": "Радиус основания"},
            "hubRadius":            {"en": "Hub radius",            "de": "Zeigerbasis-Radius",             "ru": "Основание стрелки"}
        });
    }

    vis.binds.jqplot = {
        gauge: function (el, data) {
            var $this = $(el).find('.jqplot-gauge');

            var id = $(el).attr('id');
            if (id && id.match(/_removed$/)) {
                return;
            }

            if (!$this.length || !$this.is(':visible')) {
                setTimeout(function () {
                    vis.binds.jqplot.gauge(el, data);
                }, 100);
                return;
            }

            if (!data) return;

            var options = {
                title: data.title,
                seriesDefaults: {
                    rendererOptions: {
                        min:            (data.min ? parseFloat(data.min) : undefined),
                        max:            (data.max ? parseFloat(data.max) : undefined),
                        ticks:          (data.ticks ? jQuery.map(data.ticks.split(';'), Number) : undefined),
                        intervals:      (data.intervals ? jQuery.map(data.intervals.split(';'), Number) : undefined),
                        intervalColors: (data.intervalColors ? data.intervalColors.split(';') : undefined),
                        label:          data.label,
                        showTickLabels: ((data.showTickLabels === 'false' || data.showTickLabels === false) ? false : undefined),
                        intervalInnerRadius: (!data.intervalInnerRadius ? undefined : parseInt(data.intervalInnerRadius, 10)),
                        intervalOuterRadius: (!data.intervalOuterRadius ? undefined : parseInt(data.intervalOuterRadius, 10)),
                        diameter:       (!data.diameter ? undefined : parseInt(data.diameter, 10)),
                        padding:        (!data.padding ? undefined : parseInt(data.padding, 10)),
                        shadowOffset:   (!data.shadowOffset ? undefined : parseInt(data.shadowOffset, 10)),
                        shadowAlpha:    (!data.shadowAlpha ? undefined : parseInt(data.shadowAlpha, 10)),
                        shadowDepth:    (!data.shadowDepth ? undefined : parseInt(data.shadowDepth, 10)),
                        background:     data.background, ringColor: data.ringColor,
                        tickColor:      data.tickColor,
                        ringWidth:      (!data.ringWidth ? undefined : parseInt(data.ringWidth, 10)),
                        hubRadius:      (!data.hubRadius ? undefined : parseInt(data.hubRadius, 10)),
                        tickPadding:    (!data.tickPadding ? undefined : parseInt(data.tickPadding, 10)),
                        needleThickness: (!data.needleThickness ? undefined : parseInt(data.needleThickness, 10)),
                        needlePad:      (!data.needlePad ? undefined : parseInt(data.needlePad, 10))
                    }
                }
            };
            if (options.seriesDefaults.rendererOptions.ticks && options.seriesDefaults.rendererOptions.ticks.length === 1) {
                options.seriesDefaults.rendererOptions.ticks[1] = options.seriesDefaults.rendererOptions.ticks[0];
            }

            $(el).data('options', data);
            $this.html('');

            try {
                var jqplotOptions = $.extend(true, {
                    title: {show: false},
                    grid: {
                        background: 'transparent'
                    },
                    seriesDefaults: {
                        renderer: $.jqplot.MeterGaugeRenderer,
                        rendererOptions: {
                            min: 0,
                            max: 100
                        }
                    }
                }, options);

                var oid = $this.attr('data-oid');
                var series;
                if (oid !== 'nothing_selected' && vis.states[oid + '.val'] !== undefined) {
                    series = [[vis.states[oid + '.val']]];
                } else {
                    series = [[1, 0]];
                }

                function onChange(e, newVal/* , oldVal */) {
                    plot.series[0].data = [[1, newVal]];
                    plot.redraw();
                }

                var bound = [];

                if (oid) {
                    vis.states.bind(oid + '.val', onChange);
                    bound.push(oid + '.val');
                }
                var plot = $.jqplot($this.attr('id'), series, jqplotOptions);

                if (bound.length) {
                    // remember all ids, that bound
                    $(el).data('bound', bound);
                    // remember bind handler
                    $(el).data('bindHandler', onChange);
                }
            } catch(e) {
                servConn.logError('Cannot render widget jqplot: ' + e);
            }

            if (vis.editMode) {
                $(el).resize(function () {
                    var timer = $(this).data('timer');
                    if (timer) {
                        clearTimeout(timer);
                    }
                    var that = this;
                    $(this).data('timer', setTimeout(function () {
                        $(that).data('timer', null);
                        $('#' + $(that).attr('id') + '_gauge').html('');
                        vis.binds.jqplot.gauge(that, $(that).data('options'));
                    }, 300));
                });

                $(el).data('destroy', function (id, $widget) {
                    $widget.off('resize');
                });
            }
        }
    };
</script>

<script type="text/ejs"
        id="tplJqplotGauge"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/jqplot/img/Prev_MeterGauge.png"></img>'
        data-vis-set="jqplot"
        data-vis-type="number"
        data-vis-name="MeterGauge"
        data-vis-attrs="oid;title;min/number;max/number;label;background/color;padding/slider,0,50,1;group.ticks;ticks;showTickLabels[true]/checkbox;tickPadding/slider,0,50,1;group.intervals;intervals;intervalColors;intervalInnerRadius/slider,0,550,1;intervalOuterRadius/slider,0,550,1;group.shadow;shadowOffset/slider,0,50,1;shadowAlpha/slider,0,1,0.05;shadowDepth/slider,0,50,1;group.ring;ringColor/color;ringWidth/slider,0,150,1;group.needle;needleThickness/slider,0,50,1;needlePad/slider,0,150,1;hubRadius/slider,0,150,1"
        >
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:460px; height:280px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqplot.gauge(el, data) %>>
        <div class="vis-widget-body" style="width: 100%; height: 100%">
            <div class="jqplot-gauge" id="_<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" style="width: 100%; height: 100%"/>
        </div>
    </div>
</script>

<!-- --------------jqplot.html--- END -->
<!-- --------------jqui.html--- START -->
<link rel="stylesheet" href="lib/css/jquery-ui-timepicker-addon-1.6.3.css" />
<script type="text/javascript" src="lib/js/jquery-ui-timepicker-addon-1.6.3.js"></script>
<style>
    #ui-datepicker-div {
        z-index: 999 !important;
    }
</style>
<script type="text/javascript">
    'use strict';

    if (vis.editMode) {
        $.extend(systemDictionary, {
            "group_dialog":     {"en": 'Dialog',            "de": "Dialog",                 "ru": "Диалог"},
            "buttontext":       {"en": "Button text",       "de": "Knopftext",              "ru": "Надпись на кнопке"},
            "href":             {"en": "Link",              "de": "Link",                   "ru": "Ссылка"},
            "href_tooltip":     {"en": "Like 'http://google.com'", "de": "Wie 'http://google.com'", "ru": "Например 'http://google.com'"},
            "target":           {"en": "target",            "de": "target",                 "ru": "target"},
            "dialog_height":    {"en": "Dialog height",     "de": "Dialoghöhe",             "ru": "Высота окна"},
            "dialog_width":     {"en": "Dialog width",      "de": "Dialogbreite",           "ru": "Ширина окна"},
            "alt":              {"en": "Tooltip (alt)",     "de": "Tooltip (alt)",          "ru": "Всплывающая подсказка (alt)"},
            "text":             {"en": "Text",              "de": "Text",                   "ru": "Текст"},
            "invert_icon":      {"en": "Invert image",      "de": "Invertiere das Bild",    "ru": "Инвертировать картинку"},
            "html_dialog":      {"en": "HTML in dialog",    "de": "HTML im Dialog",         "ru": "HTML в диалоговом окне"},
            "preload":          {"en": "Prerender dialog",  "de": "Prerender Dialog",       "ru": "Рендер содержания в начале"},
            "closeOnClick":     {"en": "Close by click on dialog",  "de": "Anklicken zum Schliessen",       "ru": "Закрыть по нажатию в любом месте"},
            "preload_tooltip":  {
                "en": "If true, the content of dialog will be created at start of view.\x0AIf false, the content will be created during opening of dialog.\x0AWebcams or dynamic content require 'prerender'=false",
                "de": "Falls true, wird Inhalt vom Dialog sofort am Anfang gerendert.\x0AFalls false, erst beim Anzeigen vom Dialog.\x0AWebcams oder dynamischer Inhalt müssen prerender auf false haben",
                "ru": "Если да, то рендер содержания будет в самом начале.\x0AЕсли нет, то при показе диалога.\x0AWebCams или динамическое содержание требуют значение false."
            },
            "persistent":       {"en": "Persistent",        "de": "Dauernd",                "ru": "Существует постоянно"},
            "persistent_tooltip":  {
                "en": "If true, the dialog will be created at start and can\x0Abe shown by external command 'dialogOpen'.",
                "de": "Falls true, wird der Dialog sofort am Anfang erzeugtx0Aund kann mit dem Befehl 'dialogOpen' angezeigt werden.",
                "ru": "Если да, то диалог будет создан в самом начале и\x0Aможет быть вызван внешней командой 'dialogOpen'."
            },
            "src_true":         {"en": "Icon by ON",         "de": "Icon bei AN",           "ru": "Иконка при ВКЛ"},
            "alt_true":         {"en": "Tooltip by ON",      "de": "Tooltip bei AN",        "ru": "Подсказка при ВКЛ"},
            "src_false":        {"en": "Icon by OFF",        "de": "Icon bei AUS",          "ru": "Иконка при ВЫКЛ"},
            "alt_false":        {"en": "Tooltip by OFF",     "de": "Tooltip bei AUS",       "ru": "Подсказка при ВЫКЛ"},
            "timeOnly":         {"en": "Time only",          "de": "Nur Zeit",              "ru": "Только время"},
            "hideSeconds":      {"en": "Hide seconds",       "de": "Keine Sekunden",        "ru": "спрятать секунды"},
            "stepMinute":       {"en": "Step size minutes",  "de": "Schrittweite Minuten",  "ru": "размер шага минуты"},
            "showGrid":         {"en": "Show grid",          "de": "Zeige Raster",          "ru": "показать сетку"},
            "inverted":         {"en": "Inverted value",     "de": "Wert invertiert",       "ru": "Иневртировать значение"},
            "submitmethod":     {"en": "Submit method",      "de": "Sendemethode",          "ru": "Метод"},
            "click_id":         {"en": "Control ID",         "de": "Steuer-ID",             "ru": "Контроль-ID"},
            "click_value":      {"en": "Control value",      "de": "Steuerwert",            "ru": "Контроль-значение"},
            "false_text":       {"en": "Text inactive",      "de": "Inaktiv-Text",          "ru": "Неактивный текст"},
            "true_text":        {"en": "Text active",        "de": "Aktiv-Text",            "ru": "Активный текст"},
            "false_src":        {"en": "Icon inactive",      "de": "Inaktiv-Bild",          "ru": "Неактивная картинка"},
            "true_src":         {"en": "Icon active",        "de": "Aktiv-Bild",            "ru": "Активная картинка"},
            "false_alt":        {"en": "Tooltip inactive",   "de": "Inaktiv-Tooltip",       "ru": "Неактивная подсказка"},
            "true_alt":         {"en": "Tooltip active",     "de": "Aktiv-Tooltip",         "ru": "Активная подсказка"},
            "dialog_top":       {"en": "Top",                "de": "Position oben",         "ru": "Позиция сверху"},
            "dialog_left":      {"en": "Left",               "de": "Position links",        "ru": "Позиция слева"},
            "overflowX":        {"en": "Overflow X",         "de": "Overflow X",            "ru": "Overflow X"},
            "overflowY":        {"en": "Overflow Y",         "de": "Overflow Y",            "ru": "Overflow Y"},
            "noHeader":         {"en": "Hide header",        "de": "Kopfzeile verbergen",   "ru": "Скрыть заголовок"},
            "setId":            {"en": "Set Object ID",      "de": "Setze Objekt-ID",       "ru": "Записать в Объект с ID"},
            "setId_tooltip":    {
                "en": "By opening of dialog the Object ID\x0Awill be set with given value.",
                "de": "Beim Öffnen des Dialogs wird die Object ID\x0Amit dem eingegebenen Wert gesetzt.",
                "ru": "При открытии диалога в объект с этим ID будет записано значение"
            },
            "setValue":         {"en": "Set value",          "de": "Setze Wert",            "ru": "Записываемое значение"},
            "oid-2":            {"en": "OID Range max.",     "de": "OID Bereich max.",      "ru": "ID Объекта макс"},
            "oid-2-working":    {"en": "OID Working max.",   "de": "OID Working max.",      "ru": "ID working макс"},
            "asString":         {"en": "As string",          "de": "Als String",            "ru": "Строковое значение"},
            "values":           {"en": "Values",             "de": "Werte",                 "ru": "Значения"},
            "values_tooltip":   {
                "en": "Values divided by semicolon:\x0A0;1;2",
                "de": "Werte sind mit Semikolon getrennt:\x0A0;1;2",
                "ru": "Значения разделены точкой с запятой:\x0A0;1;2"
            },
            "texts":            {"en": "Texts",             "de": "Texte",                  "ru": "Тексты"},
            "height":           {"en": "Height",            "de": "Höhe",                   "ru": "Высота"},
            "no_style":         {"en": "No jQuery style",   "de": "Ohne jQuery Stil",       "ru": "Без стиля jQuery"},
            "Password":         {"en": "Password",          "de": "Kennwort",               "ru": "Пароль"},
            "imageHeight":      {"en": "Image height %",    "de": "Bildhöhe in %",          "ru": "Высота иконки в %"},
            "autoclose":        {"en": "Auto close (ms)",   "de": "Auto-Zu (ms)",           "ru": "Автозакрытие (мс)"},
            "modal":            {"en": "Modal",             "de": "Modal",                  "ru": "Модальное"},
            "texts_tooltip":   {
                "en": "Texts divided by semicolon:\x0AOn;Off;Auto",
                "de": "Texte sind mit Semikolon getrennt:\x0AAn;Aus;Auto",
                "ru": "Тексты разделены точкой с запятой:\x0AВкл;Выкл;Авто"
            }
        });
    }
    $.extend(systemDictionary, {
        "Password": {"en": "Password", "de": "Kennwort", "ru": "Пароль"}
    });

    vis.navChangeCallbacks.push(function (view) {
        $('.jqui-nav-state').each(function () {
            var $this = $(this);
            if ($this.attr('data-vis-nav') === view) {
                $this.removeClass('ui-state-default');
                $this.addClass('ui-state-active');
            } else {
                $this.addClass('ui-state-default');
                $this.removeClass('ui-state-active');
            }
        });
    });

    vis.binds.jqueryui = {
        navigationActive: function (el, nav_view) {
            var $this = $(el);
            if (window.location.hash.slice(1) === nav_view) {
                $this.removeClass('ui-state-default').addClass('ui-state-active');
            }
        },
        months: {
            "en": ['January', 'February', 'March', 'April',  'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
            "de": ['Januar',  'Februar',  'März',  'April',  'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
            "ru": ['Январь',  'Февраль',  'Март',  'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь',  'Октябрь', 'Ноябрь',   'Декабрь']
        },
        shortMonths: {
            "en": ['Jan', 'Feb', 'Mar',  'Apr', 'May', 'Jun',  'Jul',  'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            "de": ['Jan', 'Feb', 'Mär',  'Apr', 'Mai', 'Jun',  'Jul',  'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
            "ru": ['Янв', 'Фев', 'Март', 'Апр', 'Май', 'Июня', 'Июля', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек']
        },
        weekDays: {
            "en": ['Sunday',      'Monday',      'Tuesday',  'Wednesday', 'Thursday',   'Friday',  'Saturday'],
            "de": ['Sonntag',     'Montag',      'Dienstag', 'Mittwoch',  'Donnerstag', 'Freitag', 'Samstag'],
            "ru": ['Воскресение', 'Понедельник', 'Вторник',  'Среда',     'Четверг',    'Пятница', 'Суббота']
        },
        shortWeekDays: {
            "en": ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
            "de": ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"],
            "ru": ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб']
        },
        currentText: {
            "en": 'Now',
            "de": 'Jetzt',
            "ru": 'Сейчас'
        },
        closeText: {
            "en": 'Close',
            "de": 'Schließen',
            "ru": 'Закрыть'
        },
        timeText: {
            "en": 'Time',
            "de": 'Zeit',
            "ru": 'Время'
        },
        hourText: {
            "en": 'Hour',
            "de": 'Std',
            "ru": 'Час'
        },
        minuteText: {
            "en": 'Min',
            "de": 'Min',
            "ru": 'Мин'
        },
        secondText: {
            "en": 'Sec',
            "de": 'Sek',
            "ru": 'Сек'
        },
        timeOnlyTitle: {
            "en": 'Choose Time',
            "de": 'Zeit auswählen',
            "ru": 'Установите время'
        },
        activeHelper: function ($this, val, min, max, value, reverse) {
            if (val === true  || val === 'true')  val = max;
            if (val === false || val === 'false') val = min;

            if (max === undefined || max === '' || max === null) {
                max = 1;
                min = 0;
                val = (val === 'false' || val === false || val === 0 || val === '0' || val === '' || val === null || val === undefined) ? min : max;
            }

            if (reverse) {
                if (val == max) {
                    val = min;
                } else {
                    val = max;
                }
            }

            if (value === undefined && val > min && val !== true) {
                val = parseFloat(val) || 0;
            }

            if ((value === undefined && val > min) || (value !== undefined && val == value)) {
                $this.addClass('ui-state-active');
            } else {
                $this.removeClass('ui-state-active');
            }
        },
        active: function (el, reverse, _value) {
            var $this = $(el);
            var oid = $this.data('oid');
            var max = $this.data('max') || 1;
            var min = $this.data('min') || 0;

            function onChange(e, newVal) {
                vis.binds.jqueryui.activeHelper($this, newVal, min, max, _value, reverse);
            }

            if (oid) {
                // remember all ids, that bound
                $this.parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);

                vis.states.bind(oid + '.val', onChange);
                vis.binds.jqueryui.activeHelper($this, vis.states.attr(oid + '.val'), min, max, _value, reverse);
            }
        },
        classes: function (el, reverse, _value) {
            var $this = $(el);
            if (!$this.data('no-style')) {
                $this.hover(function () {
                    $this.addClass('ui-state-hover');
                }, function () {
                    $this.removeClass('ui-state-hover');
                });
            } else {
                $this.removeClass('ui-widget ui-corner-all ui-state-default');
            }

            $this.css({position: 'absolute'});
            vis.binds.jqueryui.active(el, reverse, _value);
        },
        dialog: function (el, options, persistent, preload, html, closeOnClick) {
            var $dlg = $(el).parent().find('div.vis-widget-dialog');
            $dlg.data('preload', (!preload || preload === 'false') && !$dlg.html().replace(/\s/g, ''));
            $('[aria-describedby="' + $dlg.attr('id') + '"]').remove();

            options.width     = options.width  || options.dialog_width;
            options.height    = options.height || options.dialog_height;
            options.top       = options.top    || options.dialog_top;
            options.left      = options.left   || options.dialog_left;
            options.minHeight = options.height;
            options.minWidth  = options.width;

            // Show dialog in edit mode too
            if (1 || !vis.editMode) {
                $(el).parent().find('div.vis-widget-body').on('click touchend', function (event) {
                    event.stopPropagation();
                    // Protect against two events
                    if (vis.detectBounce(this)) return;

                    if ($dlg.data('preload')) $dlg.html(html);

                    if (persistent) {
                        if (options.setId) {
                            vis.setValue(options.setId, options.setValue);
                        }
                        $dlg.dialog('open');
                        $dlg.parent().css('z-index', 998);
                        $dlg.parent().find('.ui-widget-header button .ui-button-text').html('');
                        if (options.minHeight)   $dlg.css('min-height', options.minHeight);
                        if (options.minWidth)    $dlg.css('min-width', options.minWidth);
                        if (options.top  || options.top  === 0 || options.top  === '0') $dlg.parent().css('top',  options.top);
                        if (options.left || options.left === 0 || options.left === '0') $dlg.parent().css('left', options.left);
                        if (options.overflowX) $dlg.css('overflow-x', options.overflowX);
                        if (options.overflowY) $dlg.css('overflow-y', options.overflowY);
                        if (options.noHeader) {
                            $dlg.parent().find('.ui-dialog-titlebar').css({background: 'rgba(0,0,0,0)', border: 0, color: 'rgba(0,0,0,0)'});
                            $dlg.parent().find('.ui-dialog-title').html('&nbsp;');
                        }
                        $dlg.parent().find('.ui-state-focus').blur();
                    } else {
                        $dlg.dialog($.extend({
                            autoOpen: true,
                            open: function () {
                                $(this).parent().find('.ui-widget-header button .ui-button-text').html('');
                                if (options.setId) vis.setValue(options.setId, options.setValue);
                                $(this).parent().css('z-index', 998);
                                if (options.minHeight)   $(this).css('min-height', options.minHeight);
                                if (options.minWidth)    $(this).css('min-width', options.minWidth);
                                if (options.top  || options.top  === 0 || options.top  === '0') $(this).parent().css('top',  options.top);
                                if (options.left || options.left === 0 || options.left === '0') $(this).parent().css('left', options.left);
                                if (options.overflowX) $(this).css('overflow-x', options.overflowX);
                                if (options.overflowY) $(this).css('overflow-y', options.overflowY);
                                if (options.noHeader) {
                                    $dlg.parent().find('.ui-dialog-titlebar').css({background: 'rgba(0,0,0,0)', border: 0, color: 'rgba(0,0,0,0)'});
                                    $dlg.parent().find('.ui-dialog-title').html('&nbsp;');
                                }
                                $(this).parent().find('.ui-state-focus').blur();
                                //touchscreen fix
                                var $closeButton = $(this).parent().find('button.ui-dialog-titlebar-close');
                                $closeButton.off('touchend').on('touchend', function (event) {
                                    event.stopPropagation();
                                    $dlg.dialog('close');
                                    return false;
                                });
                            },
                            close: function () {
                                if ($dlg.data('timer')) { clearTimeout($dlg.data('timer')); $dlg.data('timer', null)};
                                $dlg.dialog('destroy');
                                // Destroy content if not preloaded
                                if ($dlg.data('preload')) $dlg.html('');
                            }
                        }, options));

                        $dlg.data('inited', true);

                        if (closeOnClick) {
                            $dlg.off('click touchstart touchend').on('click touchend', function (event) {
                                event.stopPropagation();
                                $dlg.dialog('close');
                                return false;
                            });
                        }
                    }
                    return false;
                });
            }
            if (persistent) {
                $dlg.dialog($.extend({
                    autoOpen: false,
                    open: function () {
                        $dlg.parent().css({'z-index': 1000});
                        if ($dlg.data('preload')) $dlg.html(html);
                        //touchscreen fix
                        var $closeButton = $(this).parent().find('button.ui-dialog-titlebar-close');
                        $closeButton.off('touchend').on('touchend', function (event) {
                            event.stopPropagation();
                            $dlg.dialog('close');
                            return false;
                        });
                    },
                    close: function () {
                        if ($dlg.data('timer')) {
                            clearTimeout($dlg.data('timer'));
                            $dlg.data('timer', null);
                        }
                        // Destroy content if not preloaded
                        if ($dlg.data('preload')) $dlg.html('');
                    }
                }, options));

                $dlg.data('inited', true);

                if (closeOnClick) {
                    $dlg.off('click touchstart touchend').on('click touchend', function (event) {
                        event.stopPropagation();
                        $dlg.dialog('close');
                        return false;
                    });
                }
            }
        },
        dialogContainer: function (el, options, persistent, preload) {
            var $dlg = $(el).parent().find('div.vis-widget-dialog');

            var id = $(el).parent().attr('id');
            if (id && id.match(/_removed$/)) {
                return;
            }

            if (!$dlg.length) {
                setTimeout(function () {
                    vis.binds.jqueryui.dialogContainer(el, options, persistent, preload);
                }, 200);
                return;
            }

            options.width     = options.dialog_width;
            options.height    = options.dialog_height;
            options.top       = options.dialog_top;
            options.left      = options.dialog_left;
            options.minHeight = options.height;
            options.minWidth  = options.width;

            $dlg.dialog($.extend({
                autoOpen: false,
                open: function () {
                    $(this).parent().find('.ui-widget-header button .ui-button-text').html('');
                    $(this).parent().css('z-index', 998);
                    //touchscreen fix
                    $dlg.find('.vis-view-container').each(function () {
                        var cview = $(this).attr('data-vis-contains');
                        if (!vis.views[cview]) {
                            $(this).append('error: view not found.');
                            return false;
                        } else if (cview === vis.activeView) {
                            $(this).append('error: view container recursion.');
                            return false;
                        }
                        var $this = this;
                        vis.renderView(cview, cview, false, function (_view) {
                            $('#visview_' + _view)
                                    .appendTo($this)
                                    .show();
                        });
                    });

                    if (options.setId) vis.setValue(options.setId, options.setValue);
                    var $id =  $(this);
                    if (options.minHeight)   $id.css('min-height', options.minHeight);
                    if (options.minWidth)    $id.css('min-width',  options.minWidth);
                    if (options.top  || options.top  === 0 || options.top  === '0') $id.parent().css('top',  options.top);
                    if (options.left || options.left === 0 || options.left === '0') $id.parent().css('left', options.left);
                    if (options.overflowX) $id.css('overflow-x', options.overflowX);
                    if (options.overflowY) $id.css('overflow-y', options.overflowY);
                    if (options.noHeader) {
                        $id.parent().find('.ui-dialog-titlebar').css({background: 'rgba(0,0,0,0)', border: 0, color: 'rgba(0,0,0,0)'});
                        $id.parent().find('.ui-dialog-title').html('&nbsp;');
                    }
                    $id.parent().find('.ui-state-focus').blur();

                    var $closeButton = $(this).parent().find('button.ui-dialog-titlebar-close');
                    $closeButton.off('touchend').on('touchend', function (event) {
                        event.stopPropagation();
                        $dlg.dialog('close');
                        var $view = $dlg.find('.vis-view');
                        if (!$view.data('persistent')) {
                            vis.destroyView($view.data('view'), $view.data('view'));
                        }
                        return false;
                    });
                },
                close: function () {
                    if ($dlg.data('timer')) {
                        clearTimeout($dlg.data('timer'));
                        $dlg.data('timer', null);
                    }
                    vis.destroyUnusedViews();
                }
            }, options));

            if (persistent) $dlg.find('.vis-view-container').data('persistent', persistent);

            if (!vis.editMode) {
                $(el).parent().find('div.vis-widget-body').on('click touchend', function (event) {
                    event.stopPropagation();
                    // Protect against two events
                    if (vis.detectBounce(this)) return;

                    var $id =  $('#' + $(this).parent().attr('id') + '_dialog');
                    $id.dialog('open');
                    return false;
                });
            } else {
                $(el).parent().find('div.vis-widget-body').show();
            }
        },
        dialogAutoClose: function (el, timeout) {
            if (timeout === true || timeout === 'true') timeout = 10000;
            if (timeout === null || timeout === undefined || timeout === '') return;
            timeout = parseInt(timeout, 10);
            if (timeout < 60) {
                // may be this is seconds
                timeout *= 1000;
            }
            if (!timeout) timeout = 1000;

            var $dialog = $('#' + $(el).parent().attr('id') + '_dialog');

            var id = $(el).parent().attr('id');
            if (id && id.match(/_removed$/)) {
                return;
            }

            if (!$dialog.length) {
                setTimeout(function () {
                    vis.binds.jqueryui.dialogAutoClose(el, timeout);
                }, 200);
                return;
            }

            $dialog.on('dialogopen', function () {
                $dialog.find('input').on('click', function () {
                    var timer = $dialog.data('timer');
                    if (timer) clearTimeout(timer);
                    $dialog.data('timer', setTimeout(function () {
                        $dialog.data('timer', null);
                        $dialog.dialog('close');
                    }, timeout));
                });
                $dialog.data('timer', setTimeout(function () {
                    $dialog.data('timer', null);
                    $dialog.dialog('close');
                }, timeout));
            });
        },
        dialogClose: function (el, options) {
            if (!$(el).data('no-style')) {
                setTimeout(function () {
                    $(el).button({
                        icons: {
                            primary: options.iconClass ? 'ui-icon-' + options.iconClass : null
                        }
                    });
                }, 0);
            }
            $(el).click(function () {
                if (options.dlgName) {
                    $('#' + options.dlgName + '_dialog').dialog('close');
                } else {
                    var $parent = $(this).parent().parent().parent();
                    var $dlg = $parent.find('.vis-widget-dialog');
                    if ($dlg.length) {
                        $dlg.dialog('close');
                        return;
                    }
                    $parent = $parent.parent();
                    $dlg = $parent.find('.vis-widget-dialog');
                    if ($dlg.length) {
                        $dlg.dialog('close');
                        return;
                    }
                    $parent = $parent.parent();
                    $dlg = $parent.find('.vis-widget-dialog');
                    if ($dlg.length) {
                        $dlg.dialog('close');
                        return;
                    }
                    $parent = $parent.parent();
                    $dlg = $parent.find('.vis-widget-dialog');
                    if ($dlg.length) {
                        $dlg.dialog('close');
                        return;
                    }
                }
            });
        },
        input: function (el, options, asString) {
            var $this  = $(el);
            var oid    = $this.attr('data-oid');
            var digits = options;
            asString = asString === 'true' || asString === true;
            if (!$this.data('no-style')) {
                $this.button().addClass('ui-state-default');
            } else {
                $this.removeClass('ui-widget ui-corner-all ui-state-default');
            }
            $this.css({
                'font':       'inherit',
                //'color' :   'inherit',
                'text-align': 'left',
                'outline':    'none',
                'cursor':     'text',
                height:       '50%'
            }).change(function () {
                vis.setValue(oid, $(this).val());
            });

            function onChange(e, newVal) {
                if (!asString && digits && digits !== '') {
                    newVal = parseFloat(newVal).toFixed(digits);
                }

                $this.val(newVal);
            }
            var val = '';
            if (oid) {
                vis.states.bind(oid + '.val', onChange);
                // remember all ids, that bound
                $this.parent().parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);

                val = vis.states[oid + '.val'];
                if (!asString && digits && digits !== '') {
                    val = parseFloat(vis.states[oid + '.val']).toFixed(digits);
                }
            }
            $this.val(val);
        },
        inputDate: function (el, options) {
            var $this = $(el);
            var oid = $this.attr('data-oid');
            var datepickerOptions = $.extend(true, {
                dateFormat:      'yy-mm-dd',
                monthNamesShort: vis.binds.jqueryui.shortMonths[vis.language],
                monthNames:      vis.binds.jqueryui.months[vis.language],
                dayNamesMin:     vis.binds.jqueryui.shortWeekDays[vis.language],
                showAnim:        'fadeIn',
                firstDay: 1,
                currentText:     vis.binds.jqueryui.currentText[vis.language],
                closeText:       vis.binds.jqueryui.closeText[vis.language]

            }, options);

            $this.addClass('ui-widget ui-button ui-corner-all ui-state-default')
                    .css({
                        font:       'inherit',
                        //'color' :   'inherit',
                        'text-align': 'left',
                        outline:    'none',
                        cursor:     'text',
                        height:     '95%'
                    });

            if (!vis.editMode) $this.datepicker(datepickerOptions);

            function onChange(e, newVal) {
                $this.val(newVal);
            }

            if (oid) {
                $this.change(function () {
                    vis.setValue(oid, $(this).val());
                });

                vis.states.bind(oid + '.val', onChange);

                // remember all ids, that bound
                $this.parent().parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);

                $this.val(vis.states.attr(oid + '.val'));
            }
        },
        inputDatetime: function (el, options) {
            var $this = $(el);
            var oid = $this.attr('data-oid');
            var timeFormat = options.showSecond ? 'HH:mm:ss' : 'HH:mm';
            var hourGrid = options.showGrid ? 6 : 0;
            var minuteGrid = options.showGrid ? options.stepMinute : 0;
            if (minuteGrid < 10) {minuteGrid = 10;}
            var secondGrid = options.showGrid ? 15 : 0;
            var timepickerOptions = $.extend(true, {
                dateFormat:      'yy-mm-dd',
                monthNamesShort: vis.binds.jqueryui.shortMonths[vis.language],
                monthNames:      vis.binds.jqueryui.months[vis.language],
                dayNamesMin:     vis.binds.jqueryui.shortWeekDays[vis.language],
                showAnim:        'fadeIn',
                firstDay:        1,
                timeText:        vis.binds.jqueryui.timeText[vis.language],
                hourText:        vis.binds.jqueryui.hourText[vis.language],
                minuteText:      vis.binds.jqueryui.minuteText[vis.language],
                secondText:      vis.binds.jqueryui.secondText[vis.language],
                currentText:     vis.binds.jqueryui.currentText[vis.language],
                closeText:       vis.binds.jqueryui.closeText[vis.language],
                timeOnlyTitle:   vis.binds.jqueryui.timeOnlyTitle[vis.language],
                minuteGrid:      minuteGrid,
                hourGrid:        hourGrid,
                secondGrid:      secondGrid,
                timeOnly:        false,
                showSecond:      true,
                timeFormat:      timeFormat,
                pickerTimeFormat: timeFormat
            }, options);
            $this.addClass('ui-state-default')
                    .css({
                        font:       'inherit',
                        //color:    'inherit',
                        'text-align': 'left',
                        outline:    'none',
                        cursor:     'text',
                        height:     '95%'
                    });
            // Store options
            $this[0].__options = options;

            if (!vis.editMode) {
                $this.datetimepicker(timepickerOptions).button();
            } else {
                $this.addClass('ui-widget ui-button ui-corner-all');
            }


            function onChange(e, newVal) {
                $this.val(newVal);
            }

            if (oid) {
                $this.change(function () {
                    var $this = $(this);
                    var val = $this.val();
                    /*if ($this[0].__options && !$this[0].__options.showSecond) {
                     var vals = val.split(':');
                     if (vals.length === 3) {
                     val = vals[0] + ":" + vals[1];
                     }
                     }*/
                    vis.setValue(oid, val);
                });
                vis.states.bind(oid + '.val', onChange);
                // remember all ids, that bound
                $this.parent().parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);

                $this.val(vis.states.attr(oid + '.val'));
            }
        },
        inputset: function (el, options, asString) {
            var digits    = options;
            var $this     = $(el);
            var input     = '#' + $this.attr('id').slice(0, -3) + 'input';
            var noJsStyle = $(el).data('no-style');
            var oid = $this.attr('data-oid');
            asString = asString === 'true' || asString === true;
            if (!noJsStyle) $this.button();

            $this.css({'padding-left': 5, 'padding-right': 5});

            if (!vis.editMode) {
                $this.on('click touchstart', function () {
                    // Protect against two events
                    if (vis.detectBounce(this)) return;

                    vis.setValue(oid, $(input).val());
                });

                // send text on enter
                setTimeout(function () {
                    $(input).keydown(function (e) {
                        if (e.keyCode === 13) vis.setValue(oid, $(this).val());
                    });
                }, 100);
            }

            if (!noJsStyle) $this.prev().button();

            $this.prev().addClass('ui-state-default')
                    .css({
                        font:            'inherit',
                        'padding-left':  5,
                        'padding-right': 5,
                        //'color' :   'inherit',
                        'text-align':   'left',
                        outline:        'none',
                        cursor:         'text',
                        height:         '95%'
                    });

            function onChange(e, newVal) {
                if (!asString && digits && digits !== '') {
                    newVal = parseFloat(newVal).toFixed(digits);
                }
                $(input).val(newVal);
            }

            if (oid) {
                vis.states.bind(oid + '.val', onChange);
                // remember all ids, that bound
                $this.parent().parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);

                var newVal = vis.states[oid + '.val'];
                if (!asString && digits && digits !== '') newVal = parseFloat(newVal).toFixed(digits);
                $(input).val(newVal);
            }
        },
        multiselect: function (el, options, isOpen) {
            var $this = $(el);
            var oid = $this.attr('data-oid');
            var noJsStyle = $this.attr('data-no-style');
            if (oid) $this.val(vis.states[oid + '.val']);

            if (noJsStyle !== true && noJsStyle !== 'true') {
                $this.multiselect($.extend({
                    minWidth:         $this.parent().parent().width() - 7,
                    multiple:         false,
                    header:           false,
                    noneSelectedText: false,
                    selectedList:     1
                }, options)).change(function () {
                    var val = $this.val();
                    if (parseFloat(val).toString() == val) val = parseFloat(val);
                    if (val === 'true')  val = true;
                    if (val === 'false') val = false;
                    if (!vis.editMode) vis.setValue(oid, val);
                });
            } else {
                $this.change(function () {
                    var val = $this.val();
                    if (parseFloat(val).toString() == val) val = parseFloat(val);
                    if (val === 'true') val = true;
                    if (val === 'false') val = false;
                    if (!vis.editMode) vis.setValue(oid, val);
                });
            }

            $this.val(vis.states[oid + '.val']);
            $this.prop('disabled', vis.editMode);
            if (noJsStyle !== true && noJsStyle !== 'true') {
                $this.multiselect('refresh');
            }
            var id =  $this.attr('id');

            function onChange(e, newVal) {
                var $select = $('#' + id);
                $select.val(newVal);
                if (noJsStyle !== true && noJsStyle !== 'true') {
                    $select.multiselect('refresh');
                }
            }

            if (oid) {
                vis.states.bind(oid + '.val', onChange);
                // remember all ids, that bound
                $this.parent().parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);
            }

            if (vis.editMode) {
                if (noJsStyle !== true && noJsStyle !== 'true' && isOpen) {
                    $this.multiselect('open');
                }

                vis.bindWidgetClick($this.attr('data-view'), $this.attr('id').replace('_multiselect', ''));
                $this.parent().parent().resize(function () {
                    if (noJsStyle !== true && noJsStyle !== 'true') {
                        $('#' + id).multiselect('option', 'minWidth', $(this).width() - 7);
                    }
                }).data('destroy', function (id, $widget) {
                    $widget.off('resize');
                });
            }
        },
        slider: function (el, options) {
            var $this       = $(el);
            var oid         = $this.attr('data-oid');
            var oid2        = $this.attr('data-oid2');
            var oid_val     = 0;
            var oid2_val    = 0;
            var wid         = $this.attr('data-oid-working');
            var wid2        = $this.attr('data-oid2-working');

            var settings    = $.extend({
                range:  !!oid2,
                min:    0,
                max:    100,
                step:   1,
                value:  parseFloat(vis.states.attr(oid + '.val')),
                slide:  function (e, ui) {
                    if (options.submitmethod !== 'stop') {
                      // Slider -> Observable
                      if (oid2) {
                        if (options.inverted) {
                          ui.values[0] = (settings.max - ui.values[0]) + settings.min;
                          ui.values[1] = (settings.max - ui.values[1]) + settings.min;
                        }

                        oid && vis.setValue(oid, ui.values[0]); //.toFixed(6));
                        vis.setValue(oid2, ui.values[1]); //.toFixed(6));
                      } else if (oid) {
                        if (options.inverted) ui.value = (settings.max - ui.value) + settings.min;
                        vis.setValue(oid, ui.value); //.toFixed(6));
                      }
                    }

                },
                stop: function (e, ui) {
                  if (options.submitmethod === 'stop') {
                    if (oid2) {
                      if (options.inverted) {
                        ui.values[0] = (settings.max - ui.values[0]) + settings.min;
                        ui.values[1] = (settings.max - ui.values[1]) + settings.min;
                      }

                      oid && vis.setValue(oid, ui.values[0]); //.toFixed(6));
                      vis.setValue(oid2, ui.values[1]); //.toFixed(6));
                    } else if (oid) {
                      if (options.inverted) ui.value = (settings.max - ui.value) + settings.min;
                      vis.setValue(oid, ui.value); //.toFixed(6));
                    }
                  }
                }
            }, options);

            settings.inverted = (settings.inverted === 'true' || settings.inverted === true);

            if (isNaN(settings.value)) settings.value = 0;
            if (isNaN(settings.min))   settings.min = 0;
            if (isNaN(settings.max))   settings.max = 100;
            if (isNaN(settings.step))  settings.step = (settings.max - settings.min) / 100;

            settings.min = parseFloat(settings.min);
            settings.max = parseFloat(settings.max);
            settings.value = parseFloat(settings.value);

            if (settings.inverted) settings.value = (settings.max - settings.value) + settings.min;

            $this.slider(settings);

            function onChange(e, newVal) {
                // console.log('slider newVal=' + JSON.stringify(newVal));
                // If device not in working state
                if (e.type === oid + '.val') {
                    if (!vis.states.attr(wid + '.val')) {
                        if (settings.inverted) {
                            oid_val = (settings.max - parseFloat(newVal)) + settings.min;
                        } else {
                            oid_val = parseFloat(newVal);
                        }
                        if ($this.slider('instance')) {
                            if (oid2) {
                                $this.slider('values', [oid_val, oid2_val]);
                            } else {
                                $this.slider('value', oid_val);
                            }
                        }
                    }
                } else if (e.type === oid2 + '.val'){
                    // console.log('slider newVal=' + JSON.stringify(newVal));
                    // If device not in working state
                    if (!vis.states.attr(wid2 + '.val')) {
                        oid2_val = parseFloat(newVal);
                        if (settings.inverted) {
                            oid2_val = (settings.max - parseFloat(newVal)) + settings.min;
                        } else {
                            oid2_val = parseFloat(newVal);
                        }
                        if ($this.slider('instance')) {
                            $this.slider('values', [oid_val, oid2_val]);
                        }
                    }
                }
            }
            var bound = [];
            if (oid) {
                vis.states.bind(oid + '.val', onChange);
                bound.push(oid + '.val');
            }

            if (oid2) {
                vis.states.bind(oid2 + '.val', onChange);
                bound.push(oid2 + '.val');

                oid_val  = vis.states.attr(oid + '.val');
                oid2_val = vis.states.attr(oid2 + '.val');

                if (settings.inverted) {
                    oid_val  = (settings.max - oid_val)  + settings.min;
                    oid2_val = (settings.max - oid2_val) + settings.min;
                }
                $this.slider('values', [oid_val, oid2_val]);
            }

            if (bound.length) {
                // remember all ids, that bound
                $this.parent().parent()
                    .data('bound', bound)
                    // remember bind handler
                    .data('bindHandler', onChange);
            }
        },
        button: function (el, value) {
            if ($(el).data('no-style')) return;

            setTimeout(function () {
                $(el).button();
            }, 0);
        },
        buttonDialog: function (el) {
            if ($(el).data('no-style')) return;
            setTimeout(function () {
                $(el).button();
            }, 0);
        },
        buttonLink: function (el, href) {
            if (!$(el).data('no-style')) {
                setTimeout(function () {
                    $(el).button();
                }, 0);
            }
            $(el).click(function () {
                if (!vis.editMode && href) window.location.href = href;
            });
        },
        buttonLinkBlank: function (el, href) {
            if (!$(el).data('no-style')) {
                setTimeout(function () {
                    $(el).button();
                }, 0);
            }
            $(el).click(function () {
                if (!vis.editMode && href) window.open(href);
            });
        },
        radio: function (el, options, process) {
            var $this    = $(el);
            var id = $this.parent().parent().attr('id');
            if (id && id.match(/_removed$/)) {
                return;
            }

            if (!process) {
                setTimeout(function () {
                    vis.binds.jqueryui.radio(el, process, true);
                }, 50);
                return;
            }
            var settings = $.extend({}, options);
            var oid      = $this.attr('data-oid');

            function onChange(e, newVal) {
                $this.find('input').removeAttr('checked');
                if (newVal === true || newVal === 'true') {
                    newVal = 1;
                } else
                if (newVal === false || newVal === 'false') {
                    newVal = 0;
                }
                $this.find('input').prop('checked', false);
                $this.find('input[value="' + newVal + '"]').prop('checked', true);
                $this.find('input').each(function () {
                    if ($(this).button('instance')) $(this).button('refresh');
                });
            }

            // Observable -> Buttonset
            if (oid) {
                vis.states.bind(oid + '.val', onChange);

                // remember all ids, that bound
                $this.parent().parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);

                var val = vis.states.attr(oid + '.val');

                if (val === true  || val === 'true')  {
                    val = 1;
                }
                if (val === false || val === 'false') {
                    val = 0;
                }

                setTimeout(function () {
                    //console.log(val + ' ' + $this.find('input[value="' + val + '"]').length);
                    $this.find('input').prop('checked', false);
                    $this.find('input[value="' + val + '"]').prop('checked', true);
                    $this.buttonset(settings);

                    $this.find('input').each(function () {
                        if ($this.button('instance')) {
                            $(this).button('refresh');
                        }
                    });

                    if (!vis.editMode) {
                        // Buttonset -> Observable
                        $this.find('input').on('click touchstart', function () {
                            // Protect against two events
                            if (vis.detectBounce(this)) return;

                            var val = $(this).val();
                            var f = parseFloat(val);
                            if (f.toString() === val.toString()) {
                                vis.setValue(oid, f);
                            } else {
                                vis.setValue(oid, val);
                            }
                        });
                    }
                }, 50);
            }

        },
        iconHttpGet: function (el, url) {
            if (vis.editMode) return;

            var $this = $(el).parent();
            $this.on('click touchstart', function (e) {
                // Protect against two events
                if (vis.detectBounce(this)) return;

                vis.conn.httpGet(url);
                e.preventDefault();
            });
        },
        hueColormode: function (el, oid) {
            var $hue = $(el).parent().find('.hue-mode-hue');
            var $ct  = $(el).parent().find('.hue-mode-ct');

            function onChange(e, newVal) {
                if (newVal === 'ct') {
                    $hue.hide();
                    $ct.show();
                } else {
                    $ct.hide();
                    $hue.show();
                }
            }

            if (oid) {
                if (vis.states.attr(oid + '.val') === 'ct') {
                    $hue.hide();
                    $ct.show();
                } else {
                    $ct.hide();
                    $hue.show();
                }
                vis.states.bind(oid + '.val', onChange);

                // remember all ids, that bound
                $(el).parent().parent()
                    .data('bound', [oid + '.val'])
                    // remember bind handler
                    .data('bindHandler', onChange);
            } else {
                $ct.hide();
                $hue.show();
            }
        },
        _disable: function () {
            $('.vis-view-container').find('.ui-slider').each(function () {
                if ($(this).slider('instance')) {
                    $(this).slider('disable').removeClass('ui-state-disabled');
                }
            });

            setTimeout(function () {
                $('.vis-view-container').find('select[id$="_multiselect"]').each(function () {
                    if ($(this).css('display') === 'none') {
                        $(this).multiselect('disable').next().removeClass('ui-state-disabled').unbind('click touchstart', false);
                    }
                });
            }, 200);

            setTimeout(function () {
                $('.vis-view-container').find('a[href]').each(function () {
                    $(this).on('click touchstart', function (e) {});
                });
            }, 200);
        },
        itoggle: function (el) {
            var $this = $(el).parent();
            var oid = $this.parent().attr('data-oid');
            if (oid) {
                oid += '.val';
            }
            var val = vis.states.attr(oid);
            var activeVal = $this.parent().data('val');
            if (activeVal === '' || activeVal === undefined) activeVal = null;

            if (activeVal !== null) {
                if (val === null || val === undefined) val = '';
                if (activeVal.toString() === val.toString()) {
                    $this.find('.imgToggleFalse').hide();
                    $this.find('.imgToggleTrue').show();
                }
            } else {
                if (val === 'false') val = false;
                if (val === 'true')  val = true;

                if (typeof val === 'string') {
                    var f = parseFloat(val);
                    if (f == val) {
                        val = f;
                    } else {
                        val = val !== '';
                    }
                }
                if (val > 0) {
                    $this.find('.imgToggleFalse').hide();
                    $this.find('.imgToggleTrue').show();
                }
            }

            function onChange (e, val) {
                if (activeVal !== null) {
                    if (activeVal.toString() === val.toString()) {
                        $this.find('.imgToggleFalse').hide();
                        $this.find('.imgToggleTrue').show();
                    } else {
                        $this.find('.imgToggleTrue').hide();
                        $this.find('.imgToggleFalse').show();
                    }
                } else {
                    if (val === true || val === 'true' || parseFloat(val) > 0) {
                        $this.find('.imgToggleFalse').hide();
                        $this.find('.imgToggleTrue').show();
                    } else {
                        $this.find('.imgToggleTrue').hide();
                        $this.find('.imgToggleFalse').show();
                    }
                }
            }
            if (oid) {
                vis.states.bind(oid, onChange);
                    // remember all ids, that bound
                $this.parent()
                    .data('bound', [oid])
                    // remember bind handler
                    .data('bindHandler', onChange);
            }
        },
        calcValue: function (value, min, max) {
            if (!min) min = 0;
            if (max === null || max === undefined || max === '') max = 100;
            min   = parseFloat(min);
            max   = parseFloat(max);
            value = parseFloat(value);
            return min + value * (max - min);
        },
        calcImage: function (val, min, max, invert) {
            max = (max !== undefined) ? max : 100;
            min = (min !== undefined) ? min : 0;

            val = parseFloat(val);
            if (invert) val = max - val + min;
            var image = '';
            if (val >= max) {
                image = 10;
            } else if (val >= min + (max - min) * 0.9) {
                image = 9;
            } else if (val >= min + (max - min) * 0.8) {
                image = 8;
            } else if (val >= min + (max - min) * 0.7) {
                image = 7;
            } else if (val >= min + (max - min) * 0.6) {
                image = 6;
            } else if (val >= min + (max - min) * 0.5) {
                image = 5;
            } else if (val >= min + (max - min) * 0.4) {
                image = 4;
            } else if (val >= min + (max - min) * 0.3) {
                image = 3;
            } else if (val >= min + (max - min) * 0.2) {
                image = 2;
            } else if (val >= min + (max - min) * 0.1) {
                image = 1;
            } else {
                image = 0;
            }
            return image;
        },
        setSvgColor: function (el, color) {
            setTimeout(function () {
                el.parent().find('svg').remove();
                var $that = el;
                var imgURL = $that.attr('src');
                $.get(imgURL, function (data) {
                    // Get the SVG tag, ignore the rest
                    var $svg = $(data).find('svg');

                    // Remove any invalid XML tags as per http://validator.w3.org
                    $svg = $svg.removeAttr('xmlns:a');
                    $svg = $svg.attr('width',  '100%');
                    $svg = $svg.attr('height', '100%');
                    $svg.find('*').each(function () {
                        var style = $(this).attr('style');
                        if (style) {
                            style = style.replace(/#FFFFFF/g, color);
                            $(this).attr('style', style);
                        }
                    });

                    // Replace image with new SVG
                    $that.replaceWith($svg);
                }, 'xml');
            }, 0);
        },
        navigationPw: function (el, data) {
            var $this = $(el);
            if (!$this.data('no-style')) {
                setTimeout(function () {
                    $($this).button();
                }, 100);
            }

            $($this).click(function () {
                $('body').append('<div id="NavPwDialog" style="text-align: center"><input  type="password"  id="inp_NavPw"><input style="width: 100px; margin-top: 20px" id="btn_navPwOk" value="' + _('Ok') + '"><input id="btn_navPwcancel" value="' + _('Cancel') + '" style="width: 100px; margin-top: 20px"></div>');

                $('#inp_NavPw').change(function () {
                    check_pw();
                });
                $('#btn_navPwOk').button().click(function () {
                    check_pw();
                });

                function check_pw() {
                    var $inputPass = $('#inp_NavPw');
                    if (data._data.Password === $inputPass.val()) {
                        $('#NavPwDialog').remove();
                        vis.changeView(data.attr('nav_view'), data.attr('nav_view'), {
                                    effect: data.attr('hide_effect'),
                                    options: {},
                                    duration: data.attr('hide_duration')
                                }, {
                                    effect: data.attr('show_effect'),
                                    options: {},
                                    duration: data.attr('show_duration')
                                },
                                data.attr('sync'));
                    } else {
                        $inputPass.val('');
                        var bg = $inputPass.data('bg');
                        if (!bg) {
                            bg = $inputPass.css('background-color');
                            $inputPass.data('bg', bg);
                        }
                        $inputPass.css('background-color', '#FF0000').animate({'background-color': bg}, 500);
                    }
                }

                $('#btn_navPwcancel').button().click(function () {
                    $('#NavPwDialog').remove();
                });

                $('#NavPwDialog').dialog({
                    title: _('Password'),
                    modal: true
                });
            })
        }
    };
</script>

<script id="tplJquiButtonLink"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiButtonLink" style=" position: relative; text-align: initial;"><div class="vis-widget_prev ui-selectee ui-selected" style="height: 30px"> <div class="vis-widget-prev-body"> <input type="button" value=" Button " class="ui-button ui-widget ui-state-default ui-corner-all" role="button"> </div> </div>'
        data-vis-set="jqui"
        data-vis-type="static"
        data-vis-name="Button Link"
        data-vis-attrs="buttontext[Text];href;html_prepend/html;html_append/html;padding[5]/slider,0,100,1;no_style/checkbox">
    <div class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body" >
            <%== this.data.attr('html_prepend') %>
            <button style="width: 100%; height: 100%" data-no-style="<%= this.data.attr('no_style') %>" data-vis-link="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.jqueryui.buttonLink(el, data.attr('href')); %> style="padding: <%= this.data.attr('padding') %>px"><%== this.data.attr('buttontext') %></button>
            <%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplJquiButtonLinkBlank"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiButtonLinkBlank" style=" position: relative; text-align: initial;padding: 4px;height: 30px"><div  style="height: 30px" class="vis-widget_prev ui-selectee ui-selected ui-draggable-handle" data-vis-resizable="{"disabled":true, "handles":"e"}"> <div class="vis-widget-prev-body"> <input type="button" value=" Link " data-vis-link="" class="ui-button ui-widget ui-state-default ui-corner-all" role="button"> </div> </div>'
        data-vis-set="jqui"
        data-vis-type="static"
        data-vis-name="Button Link _blank"
        data-vis-attrs="buttontext[Text];href;html_prepend/html;html_append/html;padding[5]/slider,0,100,1;no_style/checkbox">
    <div class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" >
        <div class="vis-widget-body" >
            <%== this.data.attr('html_prepend') %>
            <button style="width: 100%; height: 100%" data-no-style="<%= this.data.attr('no_style') %>" data-vis-link="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.jqueryui.buttonLinkBlank(el, data.attr('href')); %> style="padding: <%= this.data.attr('padding') %>px"><%== this.data.attr('buttontext') %></button>
            <%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplIconLink"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<div id="prev_tplIconLink" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default " style="width: 119px; height: 30px;"> <div class="vis-widget-prev-body"> <a class="widget-link" href="" target="" style="white-space:no-wrap; text-decoration: none; text-align: left; width:100%;height:100%;"> <img src="widgets/jqui/img/internet-web-browser-2.png" style=" vertical-align: middle; height: 100%;" alt=""> Icon link </a> </div> </div></div>'
        data-vis-type="static"
        data-vis-name="Icon link"
        data-vis-attrs="src/image;imageHeight/slider,0,200,1;href;target/auto,,_blank,_self,_parent,_top;alt;text;invert_icon/checkbox">
    <%
    var styles = '';
    if (this.data.invert_icon === 'true' || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }
    %>
    <div class="vis-widget ui-widget ui-button ui-corner-all ui-state-default <%== this.data.attr('class') %>" style="width: 76px; height: 32px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div class="vis-widget-body">
            <a class="widget-link" href="<%== this.data.attr('href') %>" target="<%== this.data.attr('target') %>" style="white-space:no-wrap; text-decoration: none; text-align: left; width:100%; height:100%;">
                <img <%= this.data.attr('src') ? 'src="' +  this.data.attr('src') + '"' : '' %> style="<%= styles %> vertical-align: middle; height: <%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('alt') %>" />
                <%== this.data.attr('text') %>
            </a>
        </div>
    </div>
</script>

<script id="tplIconHttpGet"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<div id="prev_tplIconHttpGet" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default " style="width: 97px; height: 38px; " > <div class="vis-widget-prev-body"> <a class="widget-link" style="white-space:no-wrap; text-decoration:none;text-align:left;width:100%;height:100%;"><img style="vertical-align:middle;height:100%;">URL GET</a></div></div></div>'
        data-vis-type="static"
        data-vis-name="Icon HTTP GET"
        data-vis-attrs="url;src/image;imageHeight/slider,0,200,1;alt;text">
    <%
    var styles = '';
    if (this.data.invert_icon === 'true' || this.data.invert_icon === true) {
    styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }
    %>
    <div class="vis-widget ui-widget ui-button ui-corner-all ui-state-default <%== this.data.attr('class') %>" style="width: 76px; height: 76px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div class="vis-widget-body">
            <img <%= this.data.attr('src') ? 'src="' +  this.data.attr('src') + '"' : '' %> style="<%= styles %> vertical-align: middle; height: <%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('alt') %>" /><%== this.data.attr('text') %>
            <div <%= (el) -> vis.binds.jqueryui.iconHttpGet(el, data.attr('url')) %> />
        </div>
    </div>
</script>

<script id="tplJquiDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-type="static,dialog"
        data-vis-prev='<img src="widgets/jqui/img/Prev_JquiDialog.png"></img>'
        data-vis-name="HTML - Dialog"
        data-vis-attrs="html/text;setId/id;setValue;"
        data-vis-attrs0="group.dialog;html_dialog/text;title;noHeader/checkbox;autoclose/slider,0,30000,100;modal/checkbox;dialog_width;dialog_height;persistent/checkbox;preload/checkbox;closeOnClick/checkbox;dialog_top;dialog_left;overflowX/nselect,,visible,hidden,scroll,auto,initial,inherit;overflowY/nselect,,visible,hidden,scroll,auto,initial,inherit">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 200px; height: 130px; border: 1px solid #000; background: #fff; cursor: pointer" id="<%= this.data.attr('wid') %>" data-no-style="<%= this.data.attr('no_style') %>" >
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <%== this.data.attr('html') %>
        </div>
        <div id="<%= this.data.attr('wid') %>_dialog" class="vis-widget-dialog" title="<%= this.data.attr('title') %>">
            <%== this.data.attr('preload') ? this.data.attr('html_dialog') : '' %>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, data, data.attr('persistent'), data.attr('preload'), data.attr('html_dialog'), data.attr('closeOnClick')) %> />
    </div>
</script>

<script id="tplJquiIconDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<img src="widgets/jqui/img/Prev_JquiIconDialog.png"></img>'
        data-vis-type="static,dialog"
        data-vis-name="Icon - Dialog"
        data-vis-attrs="src/image;imageHeight/slider,0,200,1;alt;text;invert_icon/checkbox;setId/id;setValue;"
        data-vis-attrs0="group.dialog;html_dialog/text;title;noHeader/checkbox;autoclose/slider,0,30000,100;modal/checkbox;dialog_width;dialog_height;persistent/checkbox;preload/checkbox;closeOnClick/checkbox;dialog_top;dialog_left;overflowX/nselect,,visible,hidden,scroll,auto,initial,inherit;overflowY/nselect,,visible,hidden,scroll,auto,initial,inherit">
    <%
    var styles = '';
    if (this.data.invert_icon === 'true' || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }
    %>
    <div class="vis-widget ui-widget ui-button ui-corner-all ui-state-default <%== this.data.attr('class') %>" style="width: 76px; height: 76px; cursor: pointer" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <img <%= this.data.attr('src') ? 'src="' +  this.data.attr('src') + '"' : '' %> style="<%= styles %> vertical-align: middle; height: <%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('alt') %>" /><%== this.data.attr('text') %>
        </div>
        <div id="<%= this.data.attr('wid') %>_dialog" class="vis-widget-dialog" title="<%= this.data.attr('title') %>">
            <%== this.data.attr('preload') ? this.data.attr('html_dialog') : '' %>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialog(el, data, data.attr('persistent'), data.attr('preload'), data.attr('html_dialog'), data.attr('closeOnClick')) %> />
    </div>
</script>

<script id="tplContainerDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<img src="widgets/jqui/img/Prev_ContainerDialog.png"></img>'
        data-vis-type="container,dialog"
        data-vis-name="container - HTML - view in jqui Dialog"
        data-vis-attrs="html/text;contains_view/views;setId/id;setValue;"
        data-vis-attrs0="group.dialog;title;noHeader/checkbox;autoclose/slider,0,30000,100;modal/checkbox;dialog_width;dialog_height;dialog_top;dialog_left;overflowX/nselect,,visible,hidden,scroll,auto,initial,inherit;overflowY/nselect,,visible,hidden,scroll,auto,initial,inherit">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 200px; height: 130px; border: 1px solid #000; background: #fff; cursor: pointer" id="<%= this.data.attr('wid') %>">
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <%== this.data.attr('html') %>
        </div>
        <div id="<%= this.data.attr('wid') %>_dialog" style="display: none" class="vis-widget-dialog" title="<%= this.data.attr('title') %>">
            <div data-vis-contains="<%= this.data.attr('contains_view') %>" class="vis-widget-body vis-view-container"></div>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialogContainer(el, data) %> />
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialogAutoClose(el, data.attr('autoclose')) %> />
    </div>
</script>

<script id="tplContainerDialogExternal"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-type="container,dialog"
        data-vis-prev='<img src="widgets/jqui/img/Prev_ContainerDialogExternal.png"></img>'
        data-vis-name="container - ext cmd - view in jqui Dialog"
        data-vis-attrs="html/text;contains_view/views;setId/id;setValue;"
        data-vis-attrs0="group.dialog;title;noHeader/checkbox;autoclose/slider,0,30000,100;modal/checkbox;dialog_width;dialog_height;dialog_top;dialog_left;overflowX/nselect,,visible,hidden,scroll,auto,initial,inherit;overflowY/nselect,,visible,hidden,scroll,auto,initial,inherit">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 194px; height: 68px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body" style="display:none; width: 190px; height: 64px; background-color: #333; color: #eee; cursor: pointer; border: 2px dashed red; opacity:0.8;">
            <b>External Container Dialog</b><br/>
            view: <%= this.data.attr('contains_view') %><br/>
            id: <%= this.data.attr('wid') %>
        </div>
        <div id="<%= this.data.attr('wid') %>_dialog" style="display:none" class="vis-widget-dialog" title="<%= this.data.attr('title') %>">
            <div data-vis-contains="<%= this.data.attr('contains_view') %>" class="vis-widget-body vis-view-container">
            </div>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialogContainer(el, data) %> />
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialogAutoClose(el, data.attr('autoclose')) %> />
    </div>
</script>

<script id="tplContainerIconDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-type="container,dialog"
        data-vis-set="jqui"
        data-vis-prev='<img src="widgets/jqui/img/Prev_ContainerIconDialog.png"></img>'
        data-vis-name="container - Icon - view in jqui Dialog"
        data-vis-attrs="src/image;imageHeight/slider,0,200,1;alt;text;setId/id;setValue;"
        data-vis-attrs0="group.dialog;contains_view/views;title;noHeader/checkbox;autoclose/slider,0,30000,100;modal/checkbox;dialog_width;dialog_height;invert_icon/checkbox;dialog_top;dialog_left;overflowX/nselect,,visible,hidden,scroll,auto,initial,inherit;overflowY/nselect,,visible,hidden,scroll,auto,initial,inherit">
    <%
    var styles = '';
    if (this.data.invert_icon === 'true' || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }
    %>

    <div class="vis-widget ui-widget ui-button ui-corner-all ui-state-default <%== this.data.attr('class') %>" style="width: 76px; height: 76px; cursor: pointer" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.jqueryui.classes(el) %>>
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <img <%= this.data.attr('src') ? 'src="' +  this.data.attr('src') + '"' : '' %> style="<%= styles %> vertical-align: middle; height: <%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('alt') %>" /><%== this.data.attr('text') %>
        </div>
        <div id="<%= this.data.attr('wid') %>_dialog" style="display:none" class="vis-widget-dialog" title="<%= this.data.attr('title') %>">
            <div data-vis-contains="<%= this.data.attr('contains_view') %>" class="vis-widget-body vis-view-container"></div>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialogContainer(el, data) %> />
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialogAutoClose(el, data.attr('autoclose')) %> />
    </div>
</script>

<script id="tplContainerButtonDialog"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-type="container,dialog"
        data-vis-prev='<img src="widgets/jqui/img/Prev_ContainerButtonDialog.png"></img>'
        data-vis-name="container - Button - view in jqui Dialog"
        data-vis-attrs="html_prepend/text;html_append/text;buttontext[Text];setId/id;setValue;no_style/checkbox;"
        data-vis-attrs0="group.dialog;contains_view/views;title;noHeader/checkbox;autoclose/slider,0,30000,100;modal/checkbox;dialog_width;dialog_height;padding[5]/slider,0,100,1;dialog_top;dialog_left;overflowX/nselect,,visible,hidden,scroll,auto,initial,inherit;overflowY/nselect,,visible,hidden,scroll,auto,initial,inherit">
    <div class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>">
        <div id="<%= this.data.attr('wid') %>_body" class="vis-widget-body">
            <%== this.data.attr('html_prepend') %>
            <button id="<%= this.data.attr('wid') %>_button" name="<%= this.data.attr('wid') %>_button" data-no-style="<%= this.data.attr('no_style') %>" data-oid="<%= this.data.attr('oid') %>" data-val="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.jqueryui.buttonDialog(el); %> style="padding: <%= this.data.attr('padding') %>px"><%== this.data.attr('buttontext') %></button>
            <%== this.data.attr('html_append') %>
        </div>
        <div id="<%= this.data.attr('wid') %>_dialog" style="display:none" class="vis-widget-dialog" title="<%= this.data.attr('title') %>">
            <div data-vis-contains="<%= this.data.attr('contains_view') %>" class="vis-widget-body vis-view-container"></div>
        </div>
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialogContainer(el, data) %> />
        <div class="popup-helper" <%= (el) -> vis.binds.jqueryui.dialogAutoClose(el, data.attr('autoclose')) %> />
    </div>
</script>

<script id="tplJquiButtonDialogClose"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiButtonDialogClose" style=" position: relative; text-align: initial;padding: 4px;height: 30px"><div class="vis-widget_prev ui-selectee ui-draggable-handle "> <div class="vis-widget-prev-body"> <input type="button" value=" Dialog close " class="ui-button ui-widget ui-state-default ui-corner-all" role="button"> </div> '
        data-vis-set="jqui"
        data-vis-type="dialog"
        data-vis-name="Button dialog close"
        data-vis-attrs="html_prepend/text;html_append/text;buttontext[Close];iconClass[close];dlgName;hide_effect;hide_duration;show_effect;show_duration;no_style/checkbox">
    <div class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <%== this.data.attr('html_prepend') %>
            <button style="width:100%; height:100%" data-no-style="<%= this.data.attr('no_style') %>" <%= (el) -> vis.binds.jqueryui.dialogClose(el, {hideOptions: {effect: data.attr('hide_effect'), options:{}, duration: data.attr('hide_duration')}, iconClass: data.attr('iconClass'), dlgName: data.attr('dlgName')}) %>><%== this.data.attr('buttontext') %></button>
            <%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplJquiButtonNav"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiButtonNav" style=" position: relative; text-align: initial;padding: 4px;height: 30px"><div class="vis-widget_prev ui-selectee ui-draggable-handle " style="left: 167px; top: 129px;" > <div class="vis-widget-prev-body"> <input type="button" value=" Nav Button " class="ui-button ui-widget ui-state-default ui-corner-all" role="button"> </div> '
        data-vis-set="jqui"
        data-vis-type="navigation"
        data-vis-name="Button"
        data-vis-attrs="html_prepend/text;html_append/text;buttontext[Text];nav_view;hide_effect;hide_duration;show_effect;show_duration;no_style/checkbox">
    <div class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <%== this.data.attr('html_prepend') %>
            <button style="width: 100%; height: 100%" data-no-style="<%= this.data.attr('no_style') %>" <%= (el) -> vis.binds.jqueryui.button(el); vis.binds.jqueryui.navigationActive(el, data.attr('nav_view')); vis.binds.basic.navigation(el, {nav_view:data.attr('nav_view'),hideOptions:{effect:data.attr('hide_effect'),options:{},duration:data.attr('hide_duration')},showOptions:{effect:data.attr('show_effect'),options:{},duration:data.attr('show_duration')}}) %> ><%== this.data.attr('buttontext') %></button>
            <%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplJquiIconNav"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<div id="prev_tplJquiIconNav" style="position: relative; text-align: initial;padding: 4px "><div data-vis-nav="" class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default jqui-nav-state " style="width: 100px; height: 28px;"> <div class="vis-widget-prev-body"> <img src="/vis/widgets/jqui/img/internet-web-browser-2.png" style="vertical-align:middle;height:100%;">&nbsp;Nav</div></div></div>'
        data-vis-name="navigation - Icon"
        data-vis-attrs="src/image;imageHeight/slider,0,200,1;alt;text;nav_view;hide_effect;hide_duration;show_effect;show_duration">
    <div
        data-vis-nav="<%= this.data.attr('nav_view') %>"
        class="vis-widget ui-widget ui-button ui-corner-all ui-state-default jqui-nav-state <%== this.data.attr('class') %>"
        style="width: 76px; height: 76px;"
        id="<%= this.data.attr('wid') %>"
        <%= (el) -> vis.binds.jqueryui.classes(el); vis.binds.jqueryui.navigationActive(el, data.attr('nav_view')); vis.binds.basic.navigation(el, {nav_view: data.attr('nav_view'), hideOptions: {effect: data.attr('hide_effect'), options: {}, duration: data.attr('hide_duration')}, showOptions: {effect: data.attr('show_effect'), options: {}, duration: data.attr('show_duration')}}) %>
    >
        <div class="vis-widget-body">
            <img <%= this.data.attr('src') ? 'src="' +  this.data.attr('src') + '"' : '' %> style="vertical-align: middle; height: <%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('alt') %>" /><%== this.data.attr('text') %>
        </div>
    </div>
</script>

<script id="tplJquiNavPw"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<div id="prev_tplJquiNavPw" style=" position: relative; text-align: initial;padding: 4px " class="wid_prev_content"><div class="vis-widget_prev ui-selectee ui-draggable-handle " style="top: 445px; left: 314px; width: 116px; height: 35px;"> <div class="vis-widget-prev-body" style="text-align: center"> <label style=" display: none;">Input</label><input type="text" value="Nav button Pw" size="10" data-o="" class="ui-button ui-widget ui-state-default ui-corner-all" role="button" style="height: 20px;font-family: inherit; font-size: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; text-align: left; outline: none; cursor: text;"> </div> </div></div>'
        data-vis-name="navigation - Pw"
        data-vis-attrs="buttontext[Text];Password;nav_view;hide_effect;hide_duration;show_effect;show_duration;sync/checkbox;no_style/checkbox">
       <div class="vis-widget <%== this.data.attr('class') %>" style="width:76px;height:30px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <button style="width:100%; height:100%" data-no-style="<%= this.data.attr('no_style') %>" <%= (el) -> vis.binds.jqueryui.navigationPw(el, data)%> ><%== this.data.attr('buttontext') %></button>
        </div>
    </div>
</script>

<script id="tplJquiInput"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiInput" style=" position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-selectee ui-draggable-handle " style="top: 445px; left: 314px; width: 116px; height: 30px;" > <div class="vis-widget-prev-body" style="text-align: center"> <label style=" display: none;">Input</label><input type="text" value=" Input" size="10" data-o class="ui-button ui-widget ui-state-default ui-corner-all" role="button" style="font-family: inherit; font-size: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; text-align: left; outline: none; cursor: text;"> </div> '
        data-vis-set="jqui"
        data-vis-type="ctrl"
        data-vis-name="Input"
        data-vis-attrs="label[Input];oid;asString/checkbox;digits[0]/slider,0,10,1;size[10]/slider,10,100,1;"
        data-vis-attrs0="autoFocus/checkbox;"
>
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:275px;height:44px;" id="<%= this.data.attr('wid') %>" data-no-style="<%= this.data.attr('no_style') %>" >
        <div class="vis-widget-body">
            <label for="<%= this.data.attr('wid') %>_input"><%= ((this.data.attr('label') === undefined || this.data.attr('label') === null) ? '' : this.data.attr('label')) %></label>
            <input
                type="text"
                name="<%= this.data.attr('wid') %>_input"
                id="<%= this.data.attr('wid') %>_input"
                value=""
                size="<%= this.data.attr('size') %>"
                data-oid="<%= this.data.attr('oid') %>"
                <%= (el) -> vis.binds.jqueryui.input(el, data.digits, data.asString); %>
			    <%= this.data.attr('autoFocus') === true || this.data.attr('autoFocus') === 'true' ? ' autofocus ' : '' %>
            />
        </div>
    </div>
</script>

<script id="tplJquiBool"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-type="ctrl"
        data-vis-prev='<div id="prev_tplJquiBool" style="position: relative; text-align: initial;padding: 4px "><div class="ui-widget ui-corner-all ui-state-default vis-widget_prev " style="width: 79px; height: 25px;"> <div class="vis-widget-prev-body" style="text-align: center;padding-top: 5px;"> true/false</div> </div></div>'
        data-vis-name="Html Bool"
        data-vis-attrs="oid;html_true;html_false">

    <div class="ui-widget ui-corner-all ui-state-default vis-widget <%== this.data.attr('class') %>" style="width:76px; height:76px" id="<%= this.data.attr('wid') %>"  data-no-style="<%= this.data.attr('no_style') %>"  data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.basic.toggle(el); vis.binds.jqueryui.classes(el) %>>
        <div class="vis-widget-body">
            <div>
                <% if (vis.binds.basic.isFalse(vis.states.attr(this.data.oid + '.val'))) { %>
                    <%== this.data.attr('html_false') %>
                <% } else { %>
                    <%== this.data.attr('html_true') %>
                <% } %>
            </div>
        </div>
    </div>
</script>

<script id="tplJquiToogle"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiToogle" style="position: relative; text-align: initial;padding: 4px "><div class="ui-widget ui-corner-all ui-state-default vis-widget_prev" style="width: 90px; height: 19px; padding: 10px;"> <div class="vis-widget-prev-body"><label>&nbsp;Toggle&nbsp;</label><img class="imgToggleFalse" src="/vis/icon/add.png" style=" vertical-align:middle; height:100%"></div></div></div>'
        data-vis-set="jqui"
        data-vis-type="ctrl,state"
        data-vis-name="Icon Toggle"
        data-vis-attrs="label;oid;src_true/image;imageHeight/slider,0,200,1;alt_true;src_false/image;alt_false;invert_icon/checkbox">

    <div class="ui-widget ui-corner-all ui-state-default vis-widget <%== this.data.attr('class') %>" style="width:76px; height:76px" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.basic.toggle(el); vis.binds.jqueryui.classes(el) %> >
        <div class="vis-widget-body">
            <%
            var styles = '';
            if (this.data.invert_icon === 'true' || this.data.invert_icon === true) {
                styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
            %>
            <label style="margin: 0" for="<%= this.data.attr('wid') %>_input"><%== this.data.attr('label') %></label>
            <img class="imgToggleFalse" <%= this.data.attr('src_false') ? 'src="' +  this.data.attr('src_false') + '"' : '' %> style="<%= styles %> vertical-align: middle; height:<%= this.data.attr('imageHeight') || 100 %>%"               alt="<%== this.data.attr('alt_false') %>" />
            <img class="imgToggleTrue"  <%= this.data.attr('src_true')  ? 'src="' +  this.data.attr('src_true')  + '"' : '' %> style="<%= styles %> vertical-align: middle; height:<%= this.data.attr('imageHeight') || 100 %>%; display:none" alt="<%== this.data.attr('alt_true')  %>" />
            <div <%= (el) -> vis.binds.jqueryui.itoggle(el) %>></div>
        </div>
    </div>
</script>

<script id="tplJquiInputDate"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<div id="prev_tplJquiInputDate" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev " style="width: 110px; height: 25px; overflow: visible; "> <div class="vis-widget-prev-body"> <input type="text" value="2015-09-20" size="10" class="ui-widget ui-button ui-corner-all ui-state-default" style="font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; text-align: left; outline: none; cursor: text;text-align:center;"></div> </div></div>'
        data-vis-name="ctrl - Input Date"
        data-vis-attrs="oid/id;size[10]/slider,1,50,1;"
        data-vis-attrs0="autoFocus/checkbox;"
>
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:200px;height:40px;overflow: visible;text-align:center;" id="<%= this.data.attr('wid') %>">
        <% if (vis.editMode) { %>
			<div class="editmode-helper" />
		<% } %>
        <div class="vis-widget-body">
            <input
                type="text"
                style="text-align: center; padding-left: 5px"
                name="<%= this.data.attr('wid') %>_input"
                id="<%= this.data.attr('wid') %>_input"
                value=""
                size="<%= this.data.attr('size') %>"
                data-oid="<%= this.data.attr('oid') %>"
                <%= (el) -> vis.binds.jqueryui.inputDate(el); %>
			    <%= this.data.attr('autoFocus') === true || this.data.attr('autoFocus') === 'true' ? 'autofocus' : '' %>
            />
        </div>
    </div>
</script>

<script id="tplJquiInputDatetime"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<div id="prev_tplJquiInputDatetime" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev " style="width: 110px; height: 39px; overflow: visible; text-align: center;"> <div class="vis-widget-prev-body"> <input type="text" style="text-align: left; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; outline: none; cursor: text; " value="18:00:00" size="5" class="ui-state-default ui-widget ui-button ui-corner-all"> </div> </div></div>'
        data-vis-name="ctrl - Input Datetime"
        data-vis-attrs="oid;size/slider,1,50,1;timeOnly/checkbox;hideSeconds/checkbox;stepMinute/slider,1,30,1;showGrid/checkbox;"
        data-vis-attrs0="autoFocus/checkbox;"
>
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:200px;height:40px;overflow: visible;text-align:center;" id="<%= this.data.attr('wid') %>">
        <% if (vis.editMode) { %>
			<div class="editmode-helper" />
		<% } %>
        <div class="vis-widget-body">
            <input
                type="text"
                style="text-align: center; padding-left: 5px"
                name="<%= this.data.attr('wid') %>_input"
                id="<%= this.data.attr('wid') %>_input"
                value=""
                size="<%= this.data.attr('size') %>"
                data-oid="<%= this.data.attr('oid') %>"
                <%= (el) -> vis.binds.jqueryui.inputDatetime(el, {timeOnly: data.attr('timeOnly'), showSecond: !data.attr('hideSeconds'), stepMinute: data.attr('stepMinute'), showGrid: data.attr('showGrid')}); %>
			    <%= this.data.attr('autoFocus') === true || this.data.attr('autoFocus') === 'true' ? 'autofocus' : '' %>
            />
        </div>
    </div>
</script>

<script id="tplJquiInputSet"
        type="text/ejs" class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<div id="prev_tplJquiInputSet" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev " style="width: 90px; height: 32px; overflow: visible;"> <div class="vis-widget-prev-body"> <label></label> <input type="text" value="Input" size="2" style="font-size: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; font-family: inherit; padding-left: 5px; padding-right: 5px; text-align: left; outline: none; cursor: text;height:14px" class="ui-button ui-widget ui-state-default ui-corner-all" role="button"> <input type="button" style="padding-left: 5px; padding-right: 5px;" value="Set" class="ui-button ui-widget ui-state-default ui-corner-all" role="button"> </div> </div></div>'
        data-vis-name="ctrl - Input + Set-Button"
        data-vis-attrs="title;buttontext[Text];oid;unit;asString/checkbox;digits/slider,0,10,1;size/slider,1,50,1;"
        data-vis-attrs0="autoFocus/checkbox;"
>
    <div class="vis-widget <%== this.data.attr('class') %>" style="width:300px;height:44px;overflow:visible" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <label for="<%= this.data.attr('wid') %>_input"><%== this.data.attr('title') %></label>
            <input
                type="text"
                name="<%= this.data.attr('wid') %>_input"
                id="<%= this.data.attr('wid') %>_input"
                data-no-style="<%= this.data.attr('no_style') %>"
                size="<%= this.data.attr('size') %>"
                style="font-size: 1.1em !important; padding: 0 0"
                <%= this.data.attr('autoFocus') === true || this.data.attr('autoFocus') === 'true' ? 'autofocus' : '' %>
            />
            <%== this.data.attr('unit') %>
            <input type="button" style="height: 100%" data-oid="<%= this.data.attr('oid') %>" name="<%= this.data.attr('wid') %>_set" id="<%= this.data.attr('wid') %>_set" value="<%== this.data.attr('buttontext') %>"  data-no-style="<%= this.data.attr('no_style') %>" <%= (el) -> vis.binds.jqueryui.inputset(el, data.digits, data.asString); %>/>
        </div>
    </div>
</script>

<script id="tplJquiButtonState"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiButtonState" style=" position: relative; text-align: initial;padding: 4px; height: 30px "><div style="left: 384px; top: 470px;" class="vis-widget_prev ui-selectee ui-draggable-handle" data-vis-resizable="{"disabled":true, "handles":"e"}"> <div class="vis-widget-prev-body"> <input type="button" value=" Button " data-o data-val="" class="ui-button ui-widget ui-state-default ui-corner-all" role="button"> </div> </div>'
        data-vis-set="jqui"
        data-vis-type="ctrl"
        data-vis-name="Button State"
        data-vis-attrs="oid;html_prepend/html;html_append/html;buttontext[Text];value;no_style/checkbox">
    <div class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body" >
            <%== this.data.attr('html_prepend') %>
            <button style="width:100%; height:100%" data-oid="<%= this.data.attr('oid') %>"  data-no-style="<%= this.data.attr('no_style') %>" data-val="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.jqueryui.button(el, data.value); vis.binds.basic.state(el); %>><%== this.data.attr('buttontext') %></button>
            <%== this.data.attr('html_append') %>
        </div>
    </div>
</script>

<script id="tplJquiRadio"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiRadio" style=" position: relative; text-align: initial;padding: 4px;height: 30px"><div style="top: 243px; left: 348px; font-size: 9px;" class="vis-widget_prev ui-selectee ui-selected ui-draggable-handle" data-vis-resizable="{"disabled":true, "handles":""}"> <div class="vis-widget-prev-body"> <div data-o class="ui-buttonset"> <input type="radio" value="0" class="ui-helper-hidden-accessible"><label class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-left" role="button" aria-pressed="false"><span class="ui-button-text">OFF</span></label> <input type="radio" value="1" class="ui-helper-hidden-accessible"><label class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-right ui-state-active" role="button" aria-pressed="true"><span class="ui-button-text">ON</span></label> </div> </div> </div>'
        data-vis-set="jqui"
        data-vis-type="ctrl"
        data-vis-name="Radiobuttons on/off"
        data-vis-attrs="off_text[OFF];on_text[ON];oid;padding[5]/slider,0,100,1">
    <div class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" data-vis-resizable='{"disabled":true, "handles":""}' >
        <div class="vis-widget-body" >
            <div id="<%= this.data.attr('wid') %>_radio" data-oid="<%= this.data.attr('oid') %>" style="display: flex" <%= (el) -> vis.binds.jqueryui.radio(el); %> >
                <input type="radio" id="<%= this.data.attr('wid') %>_radio0" name="<%= this.data.attr('wid') %>_radio" value="0" checked='checked'/><label for="<%= this.data.attr('wid') %>_radio0" style="padding: <%= this.data.attr('padding') %>px"><%= this.data.off_text %></label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio1" name="<%= this.data.attr('wid') %>_radio" value="1"/><label for="<%= this.data.attr('wid') %>_radio1" style="padding: <%= this.data.attr('padding') %>px"><%= this.data.on_text %></label>
            </div>
        </div>
    </div>
</script>

<script id="tplJquiRadioList"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiRadioList" style=" position: relative; text-align: initial;padding: 4px "><div style="font-size: 8px;overflow:visible;height:20px" class="vis-widget_prev ui-selectee ui-selected ui-draggable-handle"> <div class="vis-widget-prev-body"> <div data-o class="ui-buttonset"> <input type="radio" value="0" class="ui-helper-hidden-accessible"><label class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-left" role="button" aria-pressed="false"><span class="ui-button-text">OFF</span></label> <input type="radio" value="1" class="ui-helper-hidden-accessible"><label class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-right" role="button" aria-pressed="false"><span class="ui-button-text">AUTO</span></label> </div> </div> </div>'
        data-vis-set="jqui"
        data-vis-type="ctrl"
        data-vis-name="Radiobuttons ValueList"
        data-vis-attrs="oid;values[0§1§2];texts[OFF§ON§AUTO]">
    <div style=" width:250px; height:41px;overflow: visible" class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" data-vis-resizable='{"disabled":true, "handles":""}' >
        <div class="vis-widget-body" >
            <table id="<%= this.data.attr('wid') %>_radio" data-oid="<%= this.data.attr('oid') %>" style="display: flex" <%= (el) -> setTimeout(function () {vis.binds.jqueryui.radio(el)}, 100) %> class="vis-no-spaces"><tr class="vis-no-spaces">
                <%
                var values = (data.attr('values') ? data.attr('values').split(';') : []);
                var texts  = (data.attr('texts') ? data.attr('texts').split(';'): []);
                var wid = data.attr('wid');
                for (var val in values) {
                %>
                    <td class="vis-no-spaces"><input type="radio" id="<%= wid %>_radio<%= val %>" name="<%= wid %>_radio" value="<%== values[val] %>" /><label style="float: left" for="<%= wid %>_radio<%= val %>"><%= texts[val] %></label></td>
                <%
                }
                %>
            </tr></table>
        </div>
    </div>
</script>

<script id="tplJquiSelectList"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiSelectList" style=" position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-selectee ui-draggable-handle" data-vis-resizable="{"disabled":true, "handles":""}" style="left: 336px; top: 323px;"> <div class="vis-widget-prev-body"> <select data-o disabled="" style="display: none;"> <option value="0">OFF</option> <option value="1">ON</option> <option value="2">AUTO</option> </select><button type="button" class="ui-multiselect ui-widget ui-state-default ui-corner-all" aria-haspopup="true" style="width: 86px;"><span class="ui-icon ui-icon-triangle-2-n-s"></span><span>OFF</span></button> </div> </div>'
        data-vis-set="jqui"
        data-vis-type="ctrl"
        data-vis-name="Select ValueList"
        data-vis-attrs="oid;values[0§1§2]/text;texts[OFF§ON§AUTO]/text;height[100]/slider,15,500,1;open/checkbox;no_style/checkbox">
    <div class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" >
        <div class="vis-widget-body" >
            <select id="<%= this.data.attr('wid') %>_multiselect" data-no-style="<%= this.data.attr('no_style') %>" data-oid="<%= this.data.attr('oid') %>" data-view="<%= this.view %>" <%= (el) -> setTimeout(function (el_) { vis.binds.jqueryui.multiselect(el_, {height: (data.height || 220)}, data.open)}, 250, el); %> >
            <%
				var values = (data.attr('values') ? data.attr('values').split(';') : []);
				var texts  = (data.attr('texts')  ? data.attr('texts').split(';')  : []);
				for (var val in values) {
					%>
					<option value="<%= values[val] %>"><%= texts[val] %></option>
					<%
				}
            %>
            </select >
        </div>
    </div>
</script>

<script id="tplJquiRadioSteps"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiRadioSteps" style="zoom: 0.99; position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-selectee ui-draggable-handle" data-vis-resizable="{"disabled":true, "handles":"e"}" style="left: 85px; top: 258px; font-size: 5px;"> <div class="vis-widget-prev-body"> <div data-o class="ui-buttonset"> <input type="radio" value="0" class="ui-helper-hidden-accessible"><label class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-left" role="button" aria-pressed="false"><span class="ui-button-text">aus</span></label> <input type="radio" value="0.25" class="ui-helper-hidden-accessible"><label class="ui-button ui-widget ui-state-default ui-button-text-only" role="button" aria-pressed="false"><span class="ui-button-text">25%</span></label> <input type="radio" value="0.5" class="ui-helper-hidden-accessible"><label class="ui-button ui-widget ui-state-default ui-button-text-only" role="button" aria-pressed="false"><span class="ui-button-text">50%</span></label> <input type="radio" value="0.75" class="ui-helper-hidden-accessible"><label class="ui-button ui-widget ui-state-default ui-button-text-only ui-state-active" role="button" aria-pressed="true"><span class="ui-button-text">75%</span></label> <input type="radio" value="1" class="ui-helper-hidden-accessible"><label class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-right" role="button" aria-pressed="false"><span class="ui-button-text">100%</span></label> </div> </div> </div>'
        data-vis-set="jqui"
        data-vis-type="ctrl"
        data-vis-name="Radiobuttons 25%"
        data-vis-attrs="oid;min;max">
    <div class="vis-widget <%== this.data.attr('class') %>" id="<%= this.data.attr('wid') %>" data-vis-resizable='{"disabled": true, "handles": "e"}' >
        <div class="vis-widget-body" >
            <div id="<%= this.data.attr('wid') %>_radio"  data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.jqueryui.radio(el); %> >
                <input type="radio" id="<%= this.data.attr('wid') %>_radio0" name="<%= this.data.attr('wid') %>_radio" value="<%= vis.binds.jqueryui.calcValue(0,    this.data.attr('min'), this.data.attr('max')) %>" checked='checked'/><label for="<%= this.data.attr('wid') %>_radio0">aus</label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio1" name="<%= this.data.attr('wid') %>_radio" value="<%= vis.binds.jqueryui.calcValue(0.25, this.data.attr('min'), this.data.attr('max')) %>" checked='checked'/><label for="<%= this.data.attr('wid') %>_radio1">25%</label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio2" name="<%= this.data.attr('wid') %>_radio" value="<%= vis.binds.jqueryui.calcValue(0.5,  this.data.attr('min'), this.data.attr('max')) %>" checked='checked'/><label for="<%= this.data.attr('wid') %>_radio2">50%</label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio3" name="<%= this.data.attr('wid') %>_radio" value="<%= vis.binds.jqueryui.calcValue(0.75, this.data.attr('min'), this.data.attr('max')) %>" checked='checked'/><label for="<%= this.data.attr('wid') %>_radio3">75%</label>
                <input type="radio" id="<%= this.data.attr('wid') %>_radio4" name="<%= this.data.attr('wid') %>_radio" value="<%= vis.binds.jqueryui.calcValue(1,    this.data.attr('min'), this.data.attr('max')) %>"/><label for="<%= this.data.attr('wid') %>_radio4">100%</label>
            </div>
        </div>
    </div>
</script>

<script id="tplJquiSliderVertical"
        type="text/ejs"
        data-vis-attrs="oid;oid-2;oid-working;oid-2-working;min;max;step;inverted/checkbox;submitmethod/nselect,scroll,stop"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiSliderVertical" style="position: relative; text-align: initial;padding: 4px;overflow:visible;height:50px"><div class="vis-widget_prev " style="width: 23px; height: 30px; overflow: visible !important;"> <div class="vis-widget-prev-body " style="width: 100%; padding: 4px; "> <div class="sliderJQUI ui-slider ui-slider-vertical ui-widget ui-widget-content ui-corner-all" id="19vlqqb6r_slider" data-oid="nothing_selected" data-oid-working="" style="height:100%"><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="bottom: 0%;"></span></div></div> </div></div>'
        data-vis-set="jqui"
        data-vis-type="ctrl"
        data-vis-name="Slider vertical">
    <div id="<%= this.data.attr('wid') %>" data-vis-resizable='{"minWidth":23, "maxWidth":23}' class="vis-widget" style="width:23px; height:160px; overflow:visible !important;">
        <div class="vis-widget-body <%== this.data.attr('class') %>" style="width: 100%; padding: 4px; ">
            <div class="sliderJQUI" id="<%= this.data.attr('wid') %>_slider" data-oid="<%= this.data.attr('oid') %>" data-oid2="<%= this.data.attr('oid-2') %>" data-oid-working="<%= this.data.attr('oid-working') %>"  data-oid2-working="<%= this.data.attr('oid-2-working') %>"<%= (el) -> vis.binds.jqueryui.slider(el, {min: parseFloat(data.min), max: parseFloat(data.max), step: parseFloat(data.step), orientation:"vertical", inverted: data.inverted, submitmethod: data.submitmethod}) %> style="height:100%"/></div>
        </div>
    </div>
</script>

<script id="tplJquiSlider"
        type="text/ejs"
        data-vis-attrs="oid;oid-2;oid-working;oid-2-working;min;max;step;inverted/checkbox;submitmethod/nselect,scroll,stop"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplJquiSlider" style="position: relative; text-align: initial;padding: 4px;overflow:visible"><div class="vis-widget_prev " style="width: 80px; overflow: visible !important; left: 475px; top: 188px; position: absolute; height: 23px;"> <div class="vis-widget-prev-body " style="padding: 4px;"> <div class="sliderJQUI ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" id="19vlqppi9_slider" data-oid="nothing_selected" data-oid-working=""><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span></div></div> </div></div>'
        data-vis-set="jqui"
        data-vis-type="ctrl"
        data-vis-name="Slider horizontal">
    <div id="<%= this.data.attr('wid') %>" data-vis-resizable='{"minHeight":23, "maxHeight":23}' class="vis-widget" style="height:23; width:160px; overflow:visible !important;">
        <div class="vis-widget-body <%== this.data.attr('class') %>" style="padding: 4px;">
            <div class="sliderJQUI" id="<%= this.data.attr('wid') %>_slider" data-oid="<%= this.data.attr('oid') %>" data-oid2="<%= this.data.attr('oid-2') %>" data-oid-working="<%= this.data.attr('oid-working') %>"  data-oid2-working="<%= this.data.attr('oid-2-working') %>"<%= (el) -> vis.binds.jqueryui.slider(el, {min:parseFloat(data.min),max:parseFloat(data.max),step:parseFloat(data.step), inverted: data.inverted, submitmethod: data.submitmethod}) %> /></div>
        </div>
    </div>
</script>

<script id="tplIconState"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplIconState" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default " style="width: 122.4px; height: 32.4px; position: absolute; left: 237px; top: 201px;" id="19vlr5eto" data-oid="dev1" data-val="value"> <div class="vis-widget-prev-body"> <img src="/vis/widgets/jqui/img/internet-web-browser-2.png" style=" vertical-align:middle;height:100%;" alt="">set value </div> </div></div>'
        data-vis-set="jqui"
        data-vis-name="ctrl - Icon State"
        data-vis-attrs="oid;value;text;src/image;imageHeight/slider,0,200,1;alt;invert_icon/checkbox">
    <%
    var styles = '';
    if (this.data.invert_icon === 'true' || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }
    %>
    <div class="vis-widget ui-widget ui-button ui-corner-all ui-state-default <%== this.data.attr('class') %>" style="width: 100px; height: 35px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" data-val="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.basic.state(el); vis.binds.jqueryui.classes(el, null, data.value) %>>
        <div class="vis-widget-body">
            <img <%= this.data.attr('src') ? 'src="' +  this.data.attr('src') + '"' : '' %> style="<%= styles %> vertical-align: middle; height:<%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('alt') %>" /><%== this.data.attr('text') %>
        </div>
    </div>
</script>

<script id="tplIconStateBool"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<div id="prev_tplIconStateBool" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default " style="width: 100px; height: 25px;" > <div class="vis-widget-prev-body"> <img class="tplImgFalse" src="/vis/img/bulb_on.png" style=" vertical-align:middle;height:100%;" alt="">set value </div> </div></div>'
        data-vis-name="ctrl - Icon State / val - Icon Bool"
        data-vis-attrs="oid;click_id/id;click_value;false_text;true_text;false_src/image;true_src/image;imageHeight/slider,0,200,1;false_alt;true_alt;invert_icon/checkbox">
    <%
    var styles = '';
    if (this.data.invert_icon === 'true' || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }
    %>
    <div class="vis-widget ui-widget ui-button ui-corner-all ui-state-default <%== this.data.attr('class') %>" style="width: 100px; height: 35px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" data-val="<%= this.data.attr('click_value') %>" <%= (el) -> vis.binds.basic.state(el, this.data.attr('click_id')); vis.binds.jqueryui.classes(el, null, data.click_value) %>>
        <div class="vis-widget-body">
            <img class="imgToggleFalse" <%= this.data.attr('false_src') ? 'src="' +  this.data.attr('false_src') + '"' : '' %> style="               <%= styles %> vertical-align: middle; height: <%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('false_alt') %>"/ ><span class="imgToggleFalse"><%= this.data.attr('false_text') %></span>
            <img class="imgToggleTrue"  <%= this.data.attr('true_src')  ? 'src="' +  this.data.attr('true_src')  + '"' : '' %> style="display: none; <%= styles %> vertical-align: middle; height: <%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('true_alt')  %>" /><span class="imgToggleTrue" style="display: none"><%= this.data.attr('true_text')  %></span>
            <div <%= (el) -> vis.binds.jqueryui.itoggle(el) %>></div>
        </div>
    </div>
</script>

<script id="tplIconStatePushButton"
        type="text/ejs"
        class="vis-tpl"
        data-vis-set="jqui"
        data-vis-prev='<div id="prev_tplIconStateBool" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default " style="width: 100px; height: 25px;" > <div class="vis-widget-prev-body"> <img class="tplImgFalse" src="/vis/img/bulb_on.png" style=" vertical-align:middle;height:100%;" alt="">set value </div> </div></div>'
        data-vis-name="ctrl - Icon PushButton / val - Icon Bool"
        data-vis-attrs="oid;click_id/id;false_text;true_text;false_src/image;true_src/image;imageHeight/slider,0,200,1;false_alt;true_alt;invert_icon/checkbox">
    <%
    var styles = '';
    if (this.data.invert_icon === 'true' || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }
    %>
    <div class="vis-widget ui-widget ui-button ui-corner-all ui-state-default <%== this.data.attr('class') %>" style="width: 100px; height: 35px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.basic.pushbutton(el, this.data.attr('click_id')); vis.binds.jqueryui.classes(el, null, data.click_value) %>>
        <div class="vis-widget-body">
            <img class="imgToggleFalse" <%= this.data.attr('false_src') ? 'src="' +  this.data.attr('false_src') + '"' : '' %> style="               <%= styles %> vertical-align: middle; height: <%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('false_alt') %>"/ ><span class="imgToggleFalse"><%= this.data.attr('false_text') %></span>
            <img class="imgToggleTrue"  <%= this.data.attr('true_src')  ? 'src="' +  this.data.attr('true_src')  + '"' : '' %> style="display: none; <%= styles %> vertical-align: middle; height: <%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('true_alt')  %>" /><span class="imgToggleTrue" style="display: none"><%= this.data.attr('true_text')  %></span>
            <div <%= (el) -> vis.binds.jqueryui.itoggle(el) %>></div>
        </div>
    </div>
</script>

<script id="tplIconInc"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplIconInc" style="position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-widget ui-button ui-corner-all ui-state-default ui-state-active " style="width: 44px; height: 20px;" data-vis-step="1" data-val=""> <div class="vis-widget-prev-body"> <img style=" vertical-align:middle;height:100%;">+1 </div> </div></div>'
        data-vis-set="jqui"
        data-vis-name="ctrl - Icon Increment"
        data-vis-attrs="oid;step[1];minmax[100];text[+1];src/image;imageHeight/slider,0,200,1;alt;repeat_delay[800];repeat_interval[800];invert_icon/checkbox">
    <%
    var styles = '';
    if (this.data.invert_icon === 'true' || this.data.invert_icon === true) {
        styles = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
    }
    %>
    <div class="vis-widget ui-widget ui-button ui-corner-all ui-state-default <%== this.data.attr('class') %>" style="width: 100px; height: 35px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" data-vis-step="<%= this.data.attr('step') %>" data-val="<%= this.data.attr('active_value') %>" <%= (el) -> vis.binds.basic.increment(el,data.minmax,data.repeat_delay,data.repeat_interval); vis.binds.jqueryui.classes(el, null, data.minmax) %>>
        <div class="vis-widget-body">
            <img <%= this.data.attr('src') ? 'src="' +  this.data.attr('src') + '"' : '' %> style="<%= styles %> vertical-align: middle; height: <%= this.data.attr('imageHeight') || 100 %>%;" alt="<%== this.data.attr('alt') %>" /><%== this.data.attr('text') %>
        </div>
    </div>
</script>

<!-- --------------jqui.html--- END -->
<!-- --------------swipe.html--- START -->
<style>
    .roundabout-holder {
        list-style: none;
        position: absolute;
        left:100px;
        top:10px;
        right: 0;
        margin: 0;
        overflow: visible;
        height: calc(100% - 20px);
        width: calc(100% - 200px);
    }

    .roundabout-moveable-item {
        text-align: center;
    }

    .li_carousel {
        background-color: rgba(0, 0, 0, 0);
        text-align: center;
        position: relative;
    }

    .carousel_blocking {
        position: relative;
        z-index: 149;
        width: 100%;
        height: 100%;
    }

    .roundabout-in-focus{
        z-index: 1000;
    }
</style>

<script type="text/javascript">
    if (vis.editMode) {
        // Add words for basic widgets
        $.extend(true, systemDictionary, {
            "group_left":           {"en": "Swipe to left",     "de": "Swipe nach links",   "ru": "Сдвиг влево"},
            "left_nav_view":        {"en": "View name",         "de": "Viewname",           "ru": "Имя страницы"},
            "left_in_effect":       {"en": "In effect",         "de": "In-Effekt",          "ru": "In эффект"},
            "left_in_eff_opt":      {"en": "In options",        "de": "In-Optionen",        "ru": "In опции"},
            "left_out_effect":      {"en": "Out effect",        "de": "Out-Effekt",         "ru": "Out эффект"},
            "left_out_eff_opt":     {"en": "Out options",       "de": "Out-Optionen",       "ru": "Out опции"},
            "group_right":          {"en": "Swipe to right",    "de": "Swipe nach rechts",  "ru": "Сдвиг вправо"},
            "right_nav_view":       {"en": "View name",         "de": "Viewname",           "ru": "Имя страницы"},
            "right_in_effect":      {"en": "In effect",         "de": "In-Effekt",          "ru": "In эффект"},
            "right_in_eff_opt":     {"en": "In options",        "de": "In-Optionen",        "ru": "In опции"},
            "right_out_effect":     {"en": "Out effect",        "de": "Out-Effekt",         "ru": "Out эффект"},
            "right_out_eff_opt":    {"en": "Out options",       "de": "Out-Optionen",       "ru": "Out опции"},
            "Swipe Navigation":     {"en": "Swipe Navigation",  "de": "Swipe Navigation",   "ru": "Swipe навигация"}
        });
    }
    
    vis.binds.swipe = {
        loadedSwipe: false,
        loadedRound: false,
        loadSwipeScripts: function (cb) {
            if (vis.binds.swipe.loadedSwipe) {
                cb && cb();
            } else {
                vis.binds.swipe.loadedSwipe = true;
                $.ajax({
                    url: 'widgets/swipe/js/jquery.touchSwipe.min.js',
                    dataType: 'script',
                    success: function () {
                        cb && cb();
                    },
                    async: false
                });
            }
        },
        loadRoundScripts: function (cb) {
            if (vis.binds.swipe.loadedRound) {
                cb && cb();
            } else {
                vis.binds.swipe.loadedRound = true;
                $.ajax({
                    url: 'widgets/swipe/js/jquery.roundabout.min.js',
                    dataType: 'script',
                    success: function () {
                        jQuery.ajax({
                            url: 'widgets/swipe/js/jquery.roundabout-shapes.js',
                            dataType: 'script',
                            success: function () {
                                cb && cb();
                            },
                            async: false
                        });
                    },
                    async: false
                });
            }
        },
        swipeNav: function (wid, view, data, style) {
            var $div = $('#' + wid);
            // if nothing found => wait
            if (!$div.length) {
                setTimeout(function () {
                    vis.binds.swipe.swipeNav(wid, view, data, style);
                }, 100);
                return;
            }
            
            if (vis.editMode) {
                $div.show()
                    .find('.translate-it')
                        .each(function () {
                            $(this).html(_($(this).text()));
                        });
            }

            var $view = $('#visview_' + view);

            if (!vis.editMode) {
                vis.binds.swipe.loadSwipeScripts(function () {
                    $view.swipe({
                        swipeLeft: function () {
                            vis.changeView(data['left_nav_view'], data['left_nav_view'], {
                                effect: data['left_out_effect'],
                                options: {
                                    direction: data['left_out_eff_opt'],
                                    queue: false
                                }, duration: $div.attr('duration')
                            }, {
                                effect: data['left_in_effect'],
                                options: {direction: data['left_in_eff_opt'], queue: false},
                                duration: $div.attr('duration')
                            }, true)
                        },
                        swipeRight: function () {
                            vis.changeView(data['right_nav_view'], data['right_nav_view'], {
                                effect: data['right_out_effect'],
                                options: {direction: data['right_out_eff_opt'], queue: false},
                                duration: $div.attr('duration')
                            }, {
                                effect: data['right_in_effect'],
                                options: {direction: data['right_in_eff_opt'], queue: false},
                                duration: $div.attr('duration')
                            }, true)
                        }
                    });
                });
            }
        },
        applyCarousel: function ($div, childView) {
            var $childView = $div.find('#visview_' + childView);
            var count = $div.data('count');
            count = count || 0;

            if (!$childView.length) {
                count++;
                if (count > 20) {
                    return;
                }
                $div.data('count', count);
                setTimeout(function () {
                    vis.binds.swipe.applyCarousel($div, childView);
                }, 100);
                return;
            }
            var $all = $div.find('.vis-widget');
            $all.each(function () {
                var $id = $(this);
                var id = $id.attr('id');
                var idOldPos = $id.position();

                var $idAndChilds = $childView.children('[id^=' + id + ']');

                if ($idAndChilds.length === 1) {
                    $id.css({top: 0, left: 0});

                    $idAndChilds.wrapAll('<li id="li_' + id + '" class="li_carousel" ></li>');
                    $('#li_' + id).css({height: $id.css('height'), width: $id.css('width')});
                } else {
                    $idAndChilds.wrapAll('<div id="wrap_' + id + '" style="position: absolute; height: 50px; width: 50px; left: ' + (idOldPos.left * -1) + 'px; top:' + (idOldPos.top * -1) + 'px"></div>');
                    $('#wrap_' + id).wrap('<li id="li_' + id + '" class="li_carousel"></li>');
                    $('#li_' + id).css({height: $id.css('height'), width: $id.css('width')});
                }
            });

            $childView.children('.li_carousel').append('<div class="carousel_blocking"></div>');
            $childView.children('.li_carousel').wrapAll('<ul class="parent_carousel"></ul>');

            $childView.find('.parent_carousel')
                .bind('ready', function () {
                    var child = $('.roundabout-in-focus').children();
                    $(child[1]).removeClass('carousel_blocking');
                })
                .roundabout({
                    clickToFocus: true,
                    enableDrag: true,
                    dragFactor: 2,
                    minZ: 1,
                    maxZ: 100,
                    tilt: -4,
                    minOpacity: 0.2,
                    minScale: 1,
                    childSelector: '.li_carousel',
                    triggerFocusEvents: true,
                    triggerBlurEvents: true
                });

            $childView.find('.li_carousel')
                .bind('focus', function () {
                    var child = $(this).children();
                    $(child[1]).removeClass('carousel_blocking');
                    $(this).removeClass('roundabout-moveable-item')
                })
                .bind('blur', function () {
                    var child = $(this).children();
                    $(child[1]).addClass('carousel_blocking');
                    $(this).addClass('roundabout-moveable-item')
                });
        },
        carousel: function (wid, view, data, style) {
            var $div = $('#' + wid);
            var childView = data.contains_view;
            
            // if nothing found => wait
            if (!$div.length) {
                setTimeout(function () {
                    vis.binds.swipe.carousel(wid, view, data, style);
                }, 100);
                return;
            }

            if (view === data.contains_view) {
                $div.find('.vis-widget-body').attr('data-vis-contains', '');
                $div.html('<div style="color: red">' + _('Cannot show itself') + '</div>');
                return;
            }

            if (vis.editMode) return;

            vis.binds.swipe.loadRoundScripts(function () {
                vis.binds.swipe.applyCarousel($div, childView);
            });
        }
    };
</script>

<script id="tplSwipe"
        type="text/ejs"
        class="vis-tpl" 
        data-vis-set="swipe"
        data-vis-prev='<img src="widgets/swipe/img/Prev_Swipe.png"></img>'
        data-vis-name="swipe Navigation"
        data-vis-attrs="duration;"
        data-vis-attrs0="group.left;left_nav_view;left_in_effect[slide];left_in_eff_opt[right];left_out_effect[slide];left_out_eff_opt[left];"
        data-vis-attrs1="group.right;right_nav_view;right_in_effect[slide];right_in_eff_opt[left];right_out_effect[slide];right_out_eff_opt[right];">
    <div class="vis-widget <%== this.data.attr('class') %>" style="display: none; width: 160px; height: 64px; background-color: #333; color: #eee; border: 2px dashed red; opacity:0.8;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.swipe.swipeNav(this.data.wid, this.view, this.data, this.style) %>>
        <div class="vis-widget-body">
            <div style="font-weight: bold" class="translate-it">Swipe Navigation</div>
            <table>
                <tr><td style="width: 40px" class="translate-it">left</td><td style="width: 20px">&gt;</td><td><%= this.data.attr('left_nav_view') %></td></tr>
                <tr><td style="width: 40px" class="translate-it">right</td><td style="width: 20px">&lt;</td><td><%= this.data.attr('right_nav_view') %></td></tr>
            </table>
        </div>
    </div>
</script>


<script id="tplCarousel" 
        type="text/ejs"
        class="vis-tpl" 
        data-vis-set="swipe"
        data-vis-prev='<img src="widgets/swipe/img/Prev_Carousel.png"></img>'
        data-vis-name="Carousel"
        data-vis-attrs="contains_view/views">
    <div class="vis-widget <%== this.data.attr('class') %>" style="width: 300px; height: 100px;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.swipe.carousel(this.data.wid, this.view, this.data, this.style) %>>
        <% if (vis.editMode) { %>
            <div class="editmode-helper" />
        <% } %>
        <div data-vis-contains="<%= this.data.attr('contains_view') %>" class="vis-widget-body vis-view-container"></div>
    </div>
</script>
<!-- --------------swipe.html--- END -->
<!-- --------------tabs.html--- START -->
<link rel="stylesheet" href="widgets/tabs/styles/jquery.sliderTabs.css">
<script src="widgets/tabs/jquery.sliderTabs.js"></script>
<script type="text/javascript">
    if (vis.editMode) {
        // Add words for widgets
        $.extend(true, systemDictionary, {
            "show_tabs":        {"en": "Tabs count",    "de": "Tabs-Anzahl",    "ru": "Количество закладок"},
            "title_tab_":       {"en": "Tab title",     "de": "Tab-Titel",      "ru": "Заголовок закладки"},
            "contains_view_":   {"en": "Contains view", "de": "View für Tab",   "ru": "Имя страницы"}
        });
    }

    vis.binds.tabs = {
        stabs: function (view, wid, data) {
            var $wid = $('#' + wid);
            var id = $wid.attr('id');
            if (id && id.match(/_removed$/)) {
                return;
            }

            if (!$wid.length) {
                return setTimeout(function () {
                    vis.binds.tabs.stabs(view, wid, data);
                }, 100);
            }
            // wait till widget will be visible
            if (!$wid.is(':visible')) {
                return setTimeout(function () {
                    vis.binds.tabs.stabs(view, wid, data);
                }, 1000);
            }

            $wid.find('.tabs-container').remove();
            var i;
            var text = '<span style="width: 100%; height: 100%" class="tabs-container">\n';
            text += '<ul>\n';

            data.show_tabs = parseInt(data.show_tabs, 10) || 1;

            for (i = 1; i <= data.show_tabs; i++) {
                text += '<li><a href="#' + wid + '_st' + i + '">' + (data['title_tab_' + i] || '') + '</a></li>';
            }
            text += '</ul>';

            for (i = 1; i <= data.show_tabs; i++) {
                text += '<div id="' + wid + '_st' + i + '" style="padding-left:0; height:100%">\n';
                if (vis.editMode) text += '    <div class="editmode-helper" />\n';
                text += '    <div data-vis-contains="' + (data['contains_view_' + i] || '') + '" class="vis-widget-body vis-view-container"></div>\n';
                text += '</div>\n';
            }
            text += '</span>';
            $wid.html(text);
            $wid.find('.tabs-container').sliderTabs({
                height: $wid.height() - 5
            });

            vis.updateContainers(view, view);

            if (vis.editMode && vis.activeWidgets.indexOf(wid) !== -1) {
                $wid.resizable('destroy');
                vis.resizable(vis.activeViewDiv, vis.activeView, $wid);
            }

            $wid.data('destroy', function (id, $widget) {
                try {
                    $widget.resizable('destroy');
                } catch (e) {

                }
            });
        }
    };
</script>

<script type="text/ejs" 
        id="tplSTab" 
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplSTab" style=" position: relative; text-align: initial;padding: 4px "><div class="vis-widget_prev ui-selectee" style="top: 76px; left: 23px; width: 138px; height: 121px; position: absolute;" > <div class="vis-widget-prev-body"> <span style="width:100%;height:100%" class="ui-slider-tabs"> <!-- Unordered list representing the tabs --> <div class="ui-slider-tabs-list-wrapper"><div class="ui-slider-tabs-list-container" style="margin: 0px 35px;"><ul class="ui-slider-tabs-list" style="margin-left: 0px; width: 166px;"> <li class="selected" style="height: 32px;"><a href="#w00016_st1" style="height: 32px;">Tab</a></li><li style="height: 32px;"><a href="#w00016_st2" style="height: 32px;">Tab</a></li><li style="height: 32px;"><a href="#w00016_st3" style="height: 32px;">Tab</a></li></ul><a href="#" class="ui-slider-left-arrow edge" style="width: 35px; height: 32px;"><div></div></a><a href="#" class="ui-slider-right-arrow" style="width: 35px; height: 32px;"><div></div></a></div></div><div class="ui-slider-tabs-content-container" style="height: 86px;"><div style="padding-left: 0px; height: 100%; display: block; left: 0px; width: 126px;" class="ui-slider-tab-content selected"> <div class="editmode-helper"></div> <div data-vis-contains="hallo" class="vis-widget-body vis-view-container"></div> </div><div style="padding-left: 0px; height: 100%; left: 138px; width: 126px;" class="ui-slider-tab-content"> <div class="editmode-helper"></div> <div data-vis-contains="" class="vis-widget-body vis-view-container"></div> </div><div style="padding-left: 0px; height: 100%; left: 138px; width: 126px;" class="ui-slider-tab-content"> <div class="editmode-helper"></div> <div data-vis-contains="" class="vis-widget-body vis-view-container"></div> </div></div></span> </div> </div>'
        data-vis-set="tabs"
        data-vis-update-style="true"
        data-vis-name="SliderTabs" 
        data-vis-attrs="height[100]/slider,20,1000,1;show_tabs[1]/slider,1,8,1;title_tab_(1-show_tabs)[Tab];contains_view_(1-show_tabs)/views">
    <div class="vis-widget <%== this.data.attr('class') %>" style="top:0px; left: 0px; width: 250px; height: 250px;" id="<%= this.data.attr('wid') %>">
        <div class="vis-widget-body">
            <% vis.binds.tabs.stabs(this.view, this.data.attr('wid'), data) %>
        </div>
    </div>
</script>

<!-- --------------tabs.html--- END -->
<!-- --------------vis-inventwo.html--- START -->
<!--
	ioBroker.vis vis-inventwo Widget-Set
	version: "3.x.x"
	Copyright 2021 jkvarel jkvarel@inventwo.com
-->

<link rel="stylesheet" href="widgets/vis-inventwo/css/style.css"/>
<script type="text/javascript" src="widgets/vis-inventwo/js/vis-inventwo.js"></script>
<!--iText-GridSettings/custom,vis-inventwo.infoText,emptyText;
						 iGridId;
 						 iGridColumn/number,1,100,1;
 						 iGridRow/number,1,100,1;
 						 iGridColumnSpan[1]/number,1,100,1;
 						 iGridRowSpan[1]/number,1,100,1;"-->
<script id="i-vis-universal"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Universal.gif">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						iUniversalWidgetTypeInfo/custom,vis-inventwo.infoText,universalTypeInfo;
						iUniversalWidgetType[Switch]/select,Switch,State,Navigation,Background,IncreaseDecreaseValue,ViewInPopup/updateUniversalDataFields();
						nav_view;
						oid/id;
						iValueType[boolean]/nselect,boolean,value;
						iValueTypeInfo/custom,vis-inventwo.infoText,valueType;
						iValueComparison[equal]/select,equal,greater,lower,not,greaterEqual,lowerEqual;
						iValueFalse/text;
						iValueTrue/text;
						value/text;
						iTextFalse/html;
						iTextTrue/html;
						iImageFalse/image;
						iImageTrue/image;
						iStateResponseTime[0]/slider,0,2000,100;
						iStateResetValueTime[0]/slider,0,2000,100;
						iNavWait[100]/number;

						iText-ViewPopUpSettings/custom,vis-inventwo.infoText,emptyText;
						iPopUpBackground[#666666]/color;
						iPopUpPreventClickOutside[]/checkbox;
						iPopUpShowTitle[true]/checkbox;
						iPopUpTitle[]/html;
						iPopUpTitleColor[#ffffff]/color;
						iPopUpCloseBtnColor[#dc2e2e]/color;
						iPopUpWidth[800px];
						iPopUpHeight[500px];
						iPopUpHeightTitle[50]/slider,0,100,1;
						iPopUpTitleSize[28]/slider,0,100,1;
						iPopUpPosition[center]/nselect,left,right,top,bottom,center,custom;
						iPopUpPositionX[0];
						iPopUpPositionY[0];
						iPopUpCloseAfterSeconds[0]/slider,1,3600,1;
						iPopUpCloseDp-oid/id;
						iPopUpCloseDpValue/text;
						iPopUpOpenDpValue/text;

						iText-ViewPopUpCornersSettings/custom,vis-inventwo.infoText,emptyText;
						iPopUpCornerRadiusUL[12]/slider,0,50,1;
						iPopUpCornerRadiusUR[0]/slider,0,50,1;
						iPopUpCornerRadiusLR[12]/slider,0,50,1;
						iPopUpCornerRadiusLL[0]/slider,0,50,1;

 						iText-ViewPopUpShadowSettings/custom,vis-inventwo.infoText,emptyText;
						iPopUpShadowXOffset[2]/slider,0,20,1;
						iPopUpShadowYOffset[2]/slider,0,20,1;
						iPopUpShadowBlur[2]/slider,0,20,1;
						iPopUpShadowSpread[1]/slider,0,20,1;
						iPopUpShadowColor[#111111]/color;"
		data-vis-attrs0="group.i-css;
						 iText-BackgroundSettings/custom,vis-inventwo.infoText,emptyText;
						 iButtonCol[#333333]/color;
						 iButtonActive[#455618]/color;
						 iButtonColHover[]/color;
						 iOpacityBack[1]/slider,0,1,0.1;

						 iText-CornerSettings/custom,vis-inventwo.infoText,emptyText;
						 iCornerRadiusUL[12]/slider,0,50,1;
						 iCornerRadiusUR[0]/slider,0,50,1;
						 iCornerRadiusLR[12]/slider,0,50,1;
						 iCornerRadiusLL[0]/slider,0,50,1;

						 iText-ContentSettings/custom,vis-inventwo.infoText,emptyText;
						 iContentFlexDirection[vertical]/select,horizontal,vertical;
						 iContentVertAlign[iSpace-between]/select,iStart,iCenter,iEnd,iSpace-between;
						 iContentOrder[orderImgText]/select,orderTextImg,orderImgText;
						 iOpacityCtn[1]/slider,0,1,0.1;
						 iContentType[image]/select,image,clock_analog,clock_digital,html_text/updateUniversalDataFields();

						 iText-TextSettings/custom,vis-inventwo.infoText,emptyText;
						 iTextColor[#ffffff]/color;
						 iTextColorActive[#ffffff]/color;
						 iTextSize[12]/slider,0,50,1;
						 iTextAlign[iStart]/select,iStart,iCenter,iEnd;
						 iTextSpaceTop[0]/slider,0,50,1;
						 iTextSpaceBottom[0]/slider,0,50,1;
						 iTextSpaceLeft[0]/slider,0,50,1;
						 iTextSpaceRight[0]/slider,0,50,1;

						 iText-ImageSettings/custom,vis-inventwo.infoText,emptyText;
						 iText-ClockSettings/custom,vis-inventwo.infoText,emptyText;
						 iText-HtmlTextSettings/custom,vis-inventwo.infoText,emptyText;
						 iIconSize[35]/slider,0,200,1;
						 iImgAlign[iCenter]/select,iStart,iCenter,iEnd;
						 iImgSpaceTop[5]/slider,0,50,1;
						 iImgSpaceBottom[0]/slider,0,50,1;
						 iImgSpaceLeft[0]/slider,0,50,1;
						 iImgSpaceRight[0]/slider,0,50,1;
						 iImgRotation[0]/slider,0,180,1;
						 iFlipImage/checkbox;
						 iImgBlinkFalse[0]/slider,0,2000,100;
						 iImgBlinkTrue[0]/slider,0,2000,100;
						 iImgColorFalse[]/color;
						 iImgColorTrue[]/color;
						 iImgColorInvertFalse/checkbox;
						 iImgColorInvertTrue/checkbox;
						 iImgClockFace[01]/nselect,01,02,03,04,05;
						 iImgClockHands[01]/nselect,01,02,03,04,05;
						 iImgClockShowBorder[1]/checkbox;
						 iImgColorClockFace[#ffffff]/color;
						 iImgColorHands[#ffffff]/color;
						 iImgColorHandSecond[#ff0000]/color;
						 iClockShowSeconds[]/checkbox;
						 iClockTimezone[Europe/Berlin]/text;
						 iHtmlTextFieldFalse[]/html;
						 iHtmlTextFieldTrue[]/html;

						 iText-ShadowSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowXOffset[2]/slider,0,20,1;
						 iShadowYOffset[2]/slider,0,20,1;
						 iShadowBlur[2]/slider,0,20,1;
						 iShadowSpread[1]/slider,0,20,1;
						 iShadowColor[#111111]/color;
						 iShadowColorActive[#111111]/color;
						 iShadowColorHover[]/color;

						 iText-ShadowInnerSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowInnerXOffset[0]/slider,0,20,1;
						 iShadowInnerYOffset[0]/slider,0,20,1;
						 iShadowInnerBlur[0]/slider,0,20,1;
						 iShadowInnerSpread[0]/slider,0,20,1;
						 iShadowInnerColor[#111111]/color;
						 iShadowInnerColorActive[#111111]/color;
						 iShadowInnerColorHover[]/color;

						 iText-TextShadowSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowTextXOffset[0]/slider,0,20,1;
						 iShadowTextYOffset[0]/slider,0,20,1;
						 iShadowTextBlur[0]/slider,0,20,1;
						 iShadowTextColor[#111111]/color;
						 iShadowTextColorActive[#111111]/color;

						 iText-BorderSettings/custom,vis-inventwo.infoText,emptyText;
						 iBorderSize[0]/slider,0,20,1;
						 iBorderStyle[none]/nselect,dotted,dashed,solid,double,groove,ridge,inset,outset,none;
						 iBorderColor[#ffffff]/color;
						 iBorderColorActive[#ffffff]/color;
						 iBorderColorHover[]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Universal<br>
						<span style='color:#888888;'>Switch - State/Button - Navigation - Background</span>">

	<div class="vis-widget waves-effect waves-light vis-inventwo-universal-widget" style="width:110px; height:110px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>">
		<%= (el) -> vis.binds['vis-inventwo'].universalButton2(el, this.data,'universal') %>
		<%= (el) -> vis.binds['vis-inventwo'].hideImgFilterFields(el) %>
	</div>
</script>



<!--iText-GridSettings/custom,vis-inventwo.infoText,emptyText;
 iGridColumn/number,1,100,1;
 iGridRow/number,1,100,1;
 iGridColumnSpan[1]/number,1,100,1;
 iGridRowSpan[1]/number,1,100,1;"-->
<script id="i-vis-multi"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Multi.gif">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						iUniversalWidgetTypeInfo/custom,vis-inventwo.infoText,universalTypeInfo;
						iUniversalWidgetType[Switch]/select,Switch,State,Navigation,Background,IncreaseDecreaseValue,ViewInPopup/updateUniversalDataFields();
						nav_view;
						oid/id;
						iValueType[boolean]/select,boolean,value;
						iValueTypeInfo/custom,vis-inventwo.infoText,valueType;
						iValueFalse/text;
						iValueTrue/text;
						value/text;
						iTextFalse/html;
						iImageFalse/image;
						iStateResponseTime[0]/slider,0,2000,100;
						iStateResetValueTime[0]/slider,0,2000,100;
						iNavWait[100]/number;

						iText-ViewPopUpSettings/custom,vis-inventwo.infoText,emptyText;
						iPopUpBackground[#666666]/color;
						iPopUpPreventClickOutside[]/checkbox;
						iPopUpShowTitle[true]/checkbox;
						iPopUpTitle[]/html;
						iPopUpTitleColor[#ffffff]/color;
						iPopUpCloseBtnColor[#dc2e2e]/color;
						iPopUpWidth[800];
						iPopUpHeight[500];
						iPopUpHeightTitle[50]/slider,0,100,1;
						iPopUpTitleSize[28]/slider,0,100,1;
						iPopUpPosition[center]/nselect,left,right,top,bottom,center,custom;
						iPopUpPositionX[0];
						iPopUpPositionY[0];
						iPopUpCloseAfterSeconds[0]/slider,1,3600,1;
						iPopUpCloseDp-oid/id;
						iPopUpCloseDpValue/text;
						iPopUpOpenDpValue/text;

						iText-ViewPopUpCornersSettings/custom,vis-inventwo.infoText,emptyText;
						iPopUpCornerRadiusUL[12]/slider,0,50,1;
						iPopUpCornerRadiusUR[0]/slider,0,50,1;
						iPopUpCornerRadiusLR[12]/slider,0,50,1;
						iPopUpCornerRadiusLL[0]/slider,0,50,1;

 						iText-ViewPopUpShadowSettings/custom,vis-inventwo.infoText,emptyText;
						iPopUpShadowXOffset[2]/slider,0,20,1;
						iPopUpShadowYOffset[2]/slider,0,20,1;
						iPopUpShadowBlur[2]/slider,0,20,1;
						iPopUpShadowSpread[1]/slider,0,20,1;
						iPopUpShadowColor[#111111]/color;"
		data-vis-attrs0="iUniversalValueCount[1]/number,1,20,1/updateUniversalDataFields();group.iUniversalValues/byindex;

						 iCheckType(1-iUniversalValueCount)[iCheckDefault]/select,iCheckDefault,iCheckDpValue,iCheckView;
						 oid(1-iUniversalValueCount)/id;
						 iValueComparison(1-iUniversalValueCount)[equal]/select,equal,greater,lower,not,greaterEqual,lowerEqual;
						 iValue(1-iUniversalValueCount)/text;
						 iView(1-iUniversalValueCount)/views;
						 iTextTrue(1-iUniversalValueCount)/html;

						 iText-BackgroundSettings(1-iUniversalValueCount)/custom,vis-inventwo.infoText,emptyText;
						 iButtonActiveM(1-iUniversalValueCount)[#455618]/color;

						 iText-TextSettings(1-iUniversalValueCount)/custom,vis-inventwo.infoText,emptyText;
						 iTextColorActive(1-iUniversalValueCount)[#ffffff]/color;

						 iText-ShadowSettings(1-iUniversalValueCount)/custom,vis-inventwo.infoText,emptyText;
						 iShadowColorActiveM(1-iUniversalValueCount)[#111111]/color;

						 iText-ShadowInnerSettings(1-iUniversalValueCount)/custom,vis-inventwo.infoText,emptyText;
						 iShadowInnerColorActiveM(1-iUniversalValueCount)[#111111]/color;

						 iText-TextShadowSettings(1-iUniversalValueCount)/custom,vis-inventwo.infoText,emptyText;
						 iShadowTextColorActiveM(1-iUniversalValueCount)[#111111]/color;

						 iText-BorderSettings(1-iUniversalValueCount)/custom,vis-inventwo.infoText,emptyText;
						 iBorderColorActiveM(1-iUniversalValueCount)[#ffffff]/color;

						 iText-ImageSettings(1-iUniversalValueCount)/custom,vis-inventwo.infoText,emptyText;
						 iText-HtmlTextSettings(1-iUniversalValueCount)/custom,vis-inventwo.infoText,emptyText;
						 iImageTrue(1-iUniversalValueCount)/image;
						 iImgBlinkTrue(1-iUniversalValueCount)[0]/slider,0,2000,100;
						 iImgColorTrue(1-iUniversalValueCount)[]/color;
						 iImgColorInvert(1-iUniversalValueCount)/checkbox;
						 iHtmlTextFieldTrue(1-iUniversalValueCount)[]/html;"
		data-vis-attrs1="group.i-css;
						 iText-BackgroundSettings/custom,vis-inventwo.infoText,emptyText;
						 iButtonCol[#333333]/color;
						 iButtonColHover[]/color;
						 iOpacityBack[1]/slider,0,1,0.1;

						 iText-CornerSettings/custom,vis-inventwo.infoText,emptyText;
						 iCornerRadiusUL[12]/slider,0,50,1;
						 iCornerRadiusUR[0]/slider,0,50,1;
						 iCornerRadiusLR[12]/slider,0,50,1;
						 iCornerRadiusLL[0]/slider,0,50,1;

						 iText-ContentSettings/custom,vis-inventwo.infoText,emptyText;
						 iContentFlexDirection[vertical]/select,horizontal,vertical;
						 iContentVertAlign[iSpace-between]/select,iStart,iCenter,iEnd,iSpace-between;
						 iContentOrder[orderImgText]/select,orderTextImg,orderImgText;
						 iOpacityCtn[1]/slider,0,1,0.1;
						 iContentType[image]/select,image,clock_analog,clock_digital,html_text/updateUniversalDataFields();

						 iText-TextSettings/custom,vis-inventwo.infoText,emptyText;
						 iTextColor[#ffffff]/color;
						 iTextColorActive[#ffffff]/color;
						 iTextSize[12]/slider,0,50,1;
						 iTextAlign[iStart]/select,iStart,iCenter,iEnd;
						 iTextSpaceTop[0]/slider,0,50,1;
						 iTextSpaceBottom[0]/slider,0,50,1;
						 iTextSpaceLeft[0]/slider,0,50,1;
						 iTextSpaceRight[0]/slider,0,50,1;

						 iText-ImageSettings/custom,vis-inventwo.infoText,emptyText;
						 iText-ClockSettings/custom,vis-inventwo.infoText,emptyText;
						 iText-HtmlTextSettings/custom,vis-inventwo.infoText,emptyText;
						 iIconSize[35]/slider,0,200,1;
						 iImgAlign[iCenter]/select,iStart,iCenter,iEnd;
						 iImgRotation[0]/slider,0,180,1;
						 iImgSpaceTop[5]/slider,0,50,1;
						 iImgSpaceBottom[0]/slider,0,50,1;
						 iImgSpaceLeft[0]/slider,0,50,1;
						 iImgSpaceRight[0]/slider,0,50,1;
						 iFlipImage/checkbox;
						 iImgBlinkFalse[0]/slider,0,2000,100;
						 iImgColorFalse[]/color;
						 iImgColorInvert/checkbox;
						 iImgClockFace[01]/nselect,01,02,03,04,05;
						 iImgClockHands[01]/nselect,01,02,03,04,05;
						 iImgClockShowBorder[true]/checkbox;
						 iImgColorClockFace[#ffffff]/color;
						 iImgColorHands[#ffffff]/color;
						 iImgColorHandSecond[#ff0000]/color;
						 iClockShowSeconds[]/checkbox;
						 iClockTimezone[Europe/Berlin]/text;
						 iHtmlTextFieldFalse[]/html;

						 iText-ShadowSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowXOffset[2]/slider,0,20,1;
						 iShadowYOffset[2]/slider,0,20,1;
						 iShadowBlur[2]/slider,0,20,1;
						 iShadowSpread[1]/slider,0,20,1;
						 iShadowColor[#111111]/color;

						 iText-ShadowInnerSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowInnerXOffset[0]/slider,0,20,1;
						 iShadowInnerYOffset[0]/slider,0,20,1;
						 iShadowInnerBlur[0]/slider,0,20,1;
						 iShadowInnerSpread[0]/slider,0,20,1;
						 iShadowInnerColor[#111111]/color;

						 iText-TextShadowSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowTextXOffset[0]/slider,0,20,1;
						 iShadowTextYOffset[0]/slider,0,20,1;
						 iShadowTextBlur[0]/slider,0,20,1;
						 iShadowTextColor[#111111]/color;

						 iText-BorderSettings/custom,vis-inventwo.infoText,emptyText;
						 iBorderSize[0]/slider,0,20,1;
						 iBorderStyle[none]/nselect,dotted,dashed,solid,double,groove,ridge,inset,outset,none;
						 iBorderColor[#ffffff]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Multi<br>
						<span style='color:#888888;'>Switch - State/Button - Navigation - Background</span>">

	<div class="vis-widget waves-effect waves-light vis-inventwo-multi-widget" style="width:110px; height:110px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>">
		<%= (el) -> vis.binds['vis-inventwo'].universalButton2(el, this.data,'multi') %>
		<%= (el) -> vis.binds['vis-inventwo'].hideImgFilterFields(el) %>
	</div>


</script>

<script id="i-vis-slider-simple"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Slider1.gif">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						oid/id;
						iMinVal[1];
						iMaxVal[100];
						iStepVal[1]/slider,0,100,0.1;
						iSliderRotation[0]/slider,-45,45,1;
						iSliderLabel/text;
						iValuePreText/text;
						iValueAfterText/text;
						iShowMinMax/checkbox;
						iShowValue/checkbox;
						iChangeOnRelease/checkbox;
						iInvertMinMax/checkbox;"
		data-vis-attrs0="group.i-css;
						 iText-SliderBarSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderHeight[10]/slider,1,200,1;
						 iSliderColor[#ffffff]/color;
						 iSliderCorners[100]/slider,0,100,1;

						 iText-SliderKnobSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderKnobSize[20]/slider,1,200,1;
						 iSliderKnobColor[#455618]/color;
						 iSliderKnobCorners[100]/slider,0,100,1;

						 iText-TextSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderTextColor[#ffffff]/color;
						 iValueTextColor[#455618]/color;
						 iTextSize[12]/slider,0,50,1;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Simple Slider horizontal">

	<%

		let dataNew = Object.assign({},this.data);
		if(vis.editMode){
			dataNew = vis.binds['vis-inventwo'].getDatapointsValues(dataNew);
		}

		let elHeight;
		let topSpace = 0;
		if((dataNew.iSliderKnobSize < dataNew.iTextSize) && dataNew.iShowMinMax){
			elHeight = elHeight = parseInt(dataNew.iTextSize) * 2 + 15;
			topSpace = parseInt(dataNew.iTextSize) / 2;
		}
		else{
			elHeight = parseInt(dataNew.iSliderKnobSize) + parseInt(dataNew.iTextSize) + 15;
			topSpace = parseInt(dataNew.iSliderKnobSize) / 2;
		}

	%>

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" id="<%= this.data.attr('wid') %>"
		style="width:200px; height:<%= elHeight%>px; overflow:visible; cursor:pointer;font-size:<%= dataNew.iTextSize %>px;color:<%= dataNew.iSliderTextColor %>;z-index:1" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %> " style="position:relative; height: auto; display:flex;align-items:center;flex-wrap:wrap; top:<%= topSpace%>px;">

			<% if(dataNew.iShowMinMax){ %>
				<div style="margin-right: <%= (parseInt(dataNew.iSliderKnobSize) / 2) + 5 %>px">
					<% if (!dataNew.iInvertMinMax) { %>
						<%= dataNew.iMinVal %>
					<% } else { %>
						<%= dataNew.iMaxVal %>
					<% } %>
				</div>

				<div style="top:50%;flex-grow:1; border: 0px; border-radius: <%= dataNew.iSliderCorners %>px;background: <%= dataNew.iSliderColor %>; height: <%= dataNew.iSliderHeight %>px;"
					<%= (el) -> vis.binds['vis-inventwo'].handleSlider(el, dataNew,{orientation:"horizontal"},"normal") %> ></div>

				<div style="margin-left: <%= (parseInt(dataNew.iSliderKnobSize) / 2) + 5 %>px">
					<% if (!dataNew.iInvertMinMax) { %>
						<%= dataNew.iMaxVal %>
					<% } else { %>
						<%= dataNew.iMinVal %>
					<% } %>
				</div>

			<% } else { %>
				<div style="top:50%;flex-grow:1; border: 0px; border-radius: <%= dataNew.iSliderCorners %>px;background: <%= dataNew.iSliderColor %>; height: <%= dataNew.iSliderHeight %>px; margin: 0 <%= dataNew.iShowMinMax %>px;"
					<%= (el) -> vis.binds['vis-inventwo'].handleSlider(el, dataNew,{orientation:"horizontal"}, "normal") %> ></div>

			<% } %>

		</div>

		<div style="position:absolute; left:0px; bottom:0px;"><%= dataNew.iSliderLabel %></div>
		<% if(dataNew.iShowValue){ %>
			<div style="position:absolute; right:0px; bottom:0px;color:<%= dataNew.iValueTextColor%>">
				<%== dataNew.iValuePreText%>
				<span class="vis-inventwo-slider-currentvalue"><%= vis.states.attr(this.data.oid + '.val') %></span>
				<%== dataNew.iValueAfterText%>
			</div>
		<% } %>

	</div>

	<%
		vis.states.bind(this.data.oid + ".val", function (e, newVal, oldVal) {
			if(newVal != oldVal)
				$('#' + dataNew.wid + ' .vis-inventwo-slider-currentvalue').html(newVal);
		});
	%>

</script>

<script id="i-vis-slider-simple-2"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Slider2.gif">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						oid/id;
						iMinVal[1];
						iMaxVal[100];
						iStepVal[1]/slider,0,100,0.1;
						iSliderRotation[0]/slider,-45,45,1;
						iSliderLabel/text;
						iValuePreText/text;
						iValueAfterText/text;
						iShowMinMax/checkbox;
						iShowValue/checkbox;
						iChangeOnRelease/checkbox;
						iInvertMinMax/checkbox;"
		data-vis-attrs0="group.i-css;
						 iText-SliderBarSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderHeight[10]/slider,1,200,1;
						 iSliderColor[#ffffff]/color;
						 iSliderCorners[100]/slider,0,100,1;

						 iText-SliderKnobSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderKnobSize[20]/slider,1,200,1;
						 iSliderKnobColor[#455618]/color;
						 iSliderKnobCorners[100]/slider,0,100,1;

						 iText-TextSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderTextColor[#ffffff]/color;
						 iValueTextColor[#455618]/color;
						 iTextSize[12]/slider,0,50,1;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Simple Slider vertical">

	<%

		let dataNew = Object.assign({},this.data);
		if(vis.editMode){
			dataNew = vis.binds['vis-inventwo'].getDatapointsValues(dataNew);
		}

	%>
	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" id="<%= this.data.attr('wid') %>"
		style="height:200px; width:<%= dataNew.iSliderHeight%>px; overflow:visible; cursor:pointer;font-size:<%= dataNew.iTextSize %>px;color:<%= dataNew.iSliderTextColor %>;z-index:1" >

		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %> " style="position:relative; height: 100%;display: flex;flex-direction: column;align-items: center;">

			<% if(dataNew.iShowMinMax){ %>
				<% if(dataNew.iShowValue){ %>
					<div><span style="color:<%= dataNew.iValueTextColor%>"><%== dataNew.iValuePreText%></span></div>
					<div>
						<span class="vis-inventwo-slider-currentvalue" style="color:<%= dataNew.iValueTextColor%>"><%= vis.states.attr(this.data.oid + '.val') %></span> / <%= dataNew.iMaxVal %>
					</div>
					<div style="margin-bottom: <%= (parseInt(dataNew.iSliderKnobSize) / 2) + 5 %>px">
						<span style="color:<%= dataNew.iValueTextColor%>"><%== dataNew.iValueAfterText%></span>
					</div>
				<% } else { %>
					<div style="margin-bottom: <%= (parseInt(dataNew.iSliderKnobSize) / 2) + 5 %>px"><%= dataNew.iMaxVal %></div>
				<% } %>

				<div style="border: 0px; border-radius: <%= dataNew.iSliderCorners %>px;background: <%= dataNew.iSliderColor %>; width: <%= dataNew.iSliderHeight %>px;flex-grow:1"
					<%= (el) -> vis.binds['vis-inventwo'].handleSlider(el, dataNew,{orientation:"vertical"}, "normal") %> ></div>

				<div style="margin-top: <%= (parseInt(dataNew.iSliderKnobSize) / 2) + 5 %>px"><%= dataNew.iMinVal %></div>
				<div><%= dataNew.iSliderLabel %></div>

			<% } else { %>
				<div style="border: 0px; border-radius: <%= dataNew.iSliderCorners %>px;background: <%= dataNew.iSliderColor %>; width: <%= dataNew.iSliderHeight %>px;flex-grow:1"
					<%= (el) -> vis.binds['vis-inventwo'].handleSlider(el, dataNew,{orientation:"vertical"}, "normal") %> ></div>

				<div style="margin-top: <%= (parseInt(dataNew.iSliderKnobSize) / 2) + 5 %>px"><%= dataNew.iSliderLabel %></div>

			<% } %>



		</div>


	</div>

		<%
		vis.states.bind(this.data.oid + ".val", function (e, newVal, oldVal) {
			if(newVal != oldVal)
				$('#' + dataNew.wid + ' .vis-inventwo-slider-currentvalue').html(newVal);
		});
	%>


</script>

<script id="i-vis-slider-color-hor"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/ColorSliderHor.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						oid/id;
						iIdRed-oid/id;
						iIdGreen-oid/id;
						iIdBlue-oid/id;
						iSliderRotation[0]/slider,-45,45,1;
						iSliderLabel/text;
						iChangeOnRelease/checkbox;
						iColorSliderType[HEX]/nselect,HEX,RGB,CIE/updateColorSliderFields;"
		data-vis-attrs0="group.i-css;
						 iText-SliderBarSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderHeight[10]/slider,1,200,1;
						 iSliderCorners[100]/slider,0,100,1;

						 iText-SliderKnobSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderKnobSize[20]/slider,1,200,1;
						 iSliderKnobCorners[100]/slider,0,100,1;

                         iText-TextSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderTextColor[#ffffff]/color;
						 iTextSize[12]/slider,0,50,1;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Color Slider horizontal">

	<%

		let dataNew = Object.assign({},this.data);
		if(vis.editMode){
			dataNew = vis.binds['vis-inventwo'].getDatapointsValues(dataNew);
		}

		let elHeight;
		let topSpace = 0;
		if((dataNew.iSliderKnobSize < dataNew.iTextSize) && dataNew.iShowMinMax){
			elHeight = elHeight = parseInt(dataNew.iTextSize) * 2 + 15;
			topSpace = parseInt(dataNew.iTextSize) / 2;
		}
		else{
			elHeight = parseInt(dataNew.iSliderKnobSize) + parseInt(dataNew.iTextSize) + 15;
			topSpace = parseInt(dataNew.iSliderKnobSize) / 2;
		}

	%>

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" id="<%= this.data.attr('wid') %>"
		style="width:200px; height:<%= elHeight%>px; overflow:visible; cursor:pointer;font-size:<%= dataNew.iTextSize %>px;color:<%= dataNew.iSliderTextColor %>;z-index:1" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %> " style="position:relative; height: auto; display:flex;align-items:center;flex-wrap:wrap; top:<%= topSpace%>px;">

				<div style="top:50%;flex-grow:1; border: 0px; border-radius: <%= dataNew.iSliderCorners %>px; height: <%= dataNew.iSliderHeight %>px; margin: 0 <%= dataNew.iShowMinMax %>px; background: linear-gradient(90deg, rgba(255,0,0,1) 0%, rgba(255,255,0,1) 16%, rgba(0,255,0,1) 33%, rgba(0,255,255,1) 50%, rgba(0,0,158,1) 66%, rgba(255,0,255,1) 83%, rgba(255,0,0,1) 100%);"
					<%= (el) -> vis.binds['vis-inventwo'].handleSlider(el, dataNew,{orientation:"horizontal"}, "rgb") %> ></div>

		</div>

		<div style="position:absolute; left:0px; bottom:0px;"><%= dataNew.iSliderLabel %></div>
		<% if(dataNew.iShowValue){ %>
			<div style="position:absolute; right:0px; bottom:0px;color:<%= dataNew.iValueTextColor%>"><%== dataNew.iValuePreText%><%= vis.states.attr(this.data.oid + '.val') %></div>
		<% } %>

		<%= (el) -> vis.binds['vis-inventwo'].updateColorSliderFieldsClick(el) %>
	</div>

	<%
	if(vis.editMode){
		vis.binds['vis-inventwo'].updateColorSliderFields();
		if (vis.editMode) {
			setTimeout(function () {
				vis.binds["vis-inventwo"].updateColorSliderFields();
			}, 100);
		}
		}

	%>
</script>


<script id="i-vis-slider-color-vert"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/ColorSliderVert.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						oid/id;
						iIdRed-oid/id;
						iIdGreen-oid/id;
						iIdBlue-oid/id;
						iSliderRotation[0]/slider,-45,45,1;
						iSliderLabel/text;
						iChangeOnRelease/checkbox;
						iColorSliderType[HEX]/nselect,HEX,RGB,CIE/updateColorSliderFields;"
		data-vis-attrs0="group.i-css;
						 iText-SliderBarSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderHeight[10]/slider,1,200,1;
						 iSliderCorners[100]/slider,0,100,1;

						 iText-SliderKnobSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderKnobSize[20]/slider,1,200,1;
						 iSliderKnobCorners[100]/slider,0,100,1;

                         iText-TextSettings/custom,vis-inventwo.infoText,emptyText;
						 iSliderTextColor[#ffffff]/color;
						 iTextSize[12]/slider,0,50,1;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Color Slider vertical">

	<%
		let dataNew = Object.assign({},this.data);
		if(vis.editMode){
			dataNew = vis.binds['vis-inventwo'].getDatapointsValues(dataNew);
		}

	%>
	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" id="<%= this.data.attr('wid') %>"
		style="height:200px; width:<%= dataNew.iSliderHeight%>px; overflow:visible; cursor:pointer;font-size:<%= dataNew.iTextSize %>px;color:<%= dataNew.iSliderTextColor %>;z-index:1" >

		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %> " style="position:relative; height: 100%;display: flex;flex-direction: column;align-items: center;">

		    <div style="border: 0px; border-radius: <%= dataNew.iSliderCorners %>px;background: linear-gradient(0deg, rgba(255,0,0,1) 0%, rgba(255,255,0,1) 16%, rgba(0,255,0,1) 33%, rgba(0,255,255,1) 50%, rgba(0,0,158,1) 66%, rgba(255,0,255,1) 83%, rgba(255,0,0,1) 100%); width: <%= dataNew.iSliderHeight %>px;flex-grow:1"
		    	<%= (el) -> vis.binds['vis-inventwo'].handleSlider(el, dataNew,{orientation:"vertical"}, "rgb") %> ></div>

		    <div style="margin-top: <%= (parseInt(dataNew.iSliderKnobSize) / 2) + 5 %>px"><%= dataNew.iSliderLabel %></div>

		</div>
		<%= (el) -> vis.binds['vis-inventwo'].updateColorSliderFieldsClick(el) %>
	</div>

	<%
		if(vis.editMode){
		vis.binds['vis-inventwo'].updateColorSliderFields();
		if (vis.editMode) {
			setTimeout(function () {
				vis.binds["vis-inventwo"].updateColorSliderFields();
			}, 100);
		}
		}

	%>
</script>

<script id="i-vis-image-new"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Image.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						oid/id;
						iValue/text;
						iImageFalse/image;
						iImageTrue/image;
						iPointerEvents/checkbox;"
		data-vis-attrs0="group.i-css;
						 iText-CornerSettings/custom,vis-inventwo.infoText,emptyText;
						 iCornerRadiusUL[0]/slider,0,50,1;
						 iCornerRadiusUR[0]/slider,0,50,1;
						 iCornerRadiusLR[0]/slider,0,50,1;
						 iCornerRadiusLL[0]/slider,0,50,1;

						 iText-ImageSettings/custom,vis-inventwo.infoText,emptyText;
						 iImgRotation[0]/slider,0,180,1;
						 iFlipImage/checkbox;
						 iOpacityCtn[1]/slider,0,1,0.1;
						 iImgBlinkFalse[0]/slider,0,2000,100;
						 iImgBlinkTrue[0]/slider,0,2000,100;
						 iImgColorFalse[]/color;
						 iImgColorTrue[]/color;
						 iImgColorInvertFalse/checkbox;
						 iImgColorInvertTrue/checkbox;
						 iImgScaleType[Normal]/select,Normal,iRepeat,iStretch;
						 iImgTileSize[]/slider,1,100,1;

						 iText-ShadowSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowSpread[0]/slider,0,50,1;
						 iShadowSpreadInner[0]/slider,0,50,1;
						 iShadowBlur[0]/slider,0,50,1;
						 iShadowColor[#111111]/color;
						 iShadowColorActive[#111111]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="static,val"
		data-vis-name="Image">

	<%
	let pointer_event = "auto";
	if(this.data.iPointerEvents == true && !vis.editMode){
		pointer_event = "none";
	}

	%>

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light"
		 style="width:110px; height:110px; overflow:visible; cursor:default; z-index:1; pointer-events:<%== pointer_event %>;"
		 id="<%= this.data.attr('wid') %>" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %>">

			<%
				let d = this.data;
				let imgColorFilter = "";
				let wid = "";
				let invertCol = "";

				function create(){

					let dataNew = Object.assign({},d);
					if(vis.editMode){
						dataNew = vis.binds['vis-inventwo'].getDatapointsValues(dataNew);
					}

					wid = dataNew.wid;

					let cssData = {};

					cssData.flip = 1;
            		if(dataNew.iFlipImage){
            			cssData.flip = -1;
            		}

            		let imgBlink;
            		let img = "";
            		let shadow = "";

            		let val = vis.binds["vis-inventwo"].convertValue(dataNew.iValue);

            		if(dataNew.oid != undefined && vis.states.attr(dataNew.oid + '.val') == val) {
            			imgBlink = dataNew.iImgBlinkTrue / 1000;

						imgColorFilter = dataNew.iImgColorTrue;

            			img = dataNew.iImageTrue;
            			shadow = "box-shadow: 0px 0px " + dataNew.iShadowBlur + "px " + dataNew.iShadowSpread + "px " + dataNew.iShadowColorActive;

						if(dataNew.iImgColorInvertTrue == true){
							invertCol = " filter: invert(1);";
						}
            		}
            		else{
            			imgBlink = dataNew.iImgBlinkFalse / 1000;

            			imgColorFilter = dataNew.iImgColorFalse;

            			img = dataNew.iImageFalse;
            			shadow = "box-shadow: 0px 0px " + dataNew.iShadowBlur + "px " + dataNew.iShadowSpread + "px " + dataNew.iShadowColor;

            			if(dataNew.iImgColorInvertFalse == true){
							invertCol = " filter: invert(1);";
						}
            		}

            		let scaleTypeCss = "";
            		switch(dataNew.iImgScaleType){
            			case "iRepeat":
            				scaleTypeCss = "background-repeat: repeat;";
            				scaleTypeCss += "background-size: " + dataNew.iImgTileSize + "%;";
            				break;
            			case "iStretch":
            				scaleTypeCss = "background-size: 100% 100%;";
            				break;
            		}

            		changeFilter();

            		return `
            		<div class="vis-inventwo-button-imageContainer"
            			 style="align-self: center;
            			 		display: flex;
    							justify-content: center;
    							align-items: center;
    							width:100%; height:100%;
    							opacity: ` + dataNew.iOpacityCtn + `;">

            			<div style="width: ` + dataNew.iShadowSpreadInner + `px; height: ` + dataNew.iShadowSpreadInner+
            			 			`px; position: absolute; background:` + dataNew.iShadowColor+ `; border-radius: 100%; ` + shadow + `;"></div>
            		    <div class='vis-inventwo-img'
            		    	 style="transform: scaleX(` + cssData.flip + `) rotateZ(` + dataNew.iImgRotation + `deg);
            		    	 		border-radius: ` + dataNew.iCornerRadiusUL + `px ` + data.iCornerRadiusUR+ `px ` + data.iCornerRadiusLR+ `px ` + data.iCornerRadiusLL+ `px;
            		    	 		animation:blink ` + imgBlink + `s infinite; ` + invertCol + `background-image: url('` + img + `');
            		    	 		width: 100%; height: 100%;` + scaleTypeCss + `"></div>

					</div>
            		`;

            	}

            	function changeFilter(){
            		setTimeout(function(){
            			vis.binds["vis-inventwo"].getImgColorFilter(imgColorFilter, wid, null, invertCol != '');
            		}, 10);

            	}
			%>

            <div class="vis-inventwo-button-new" style="width:100%; height:100%;">
            	<div style="width:100%; height:100%;">
            		<%== create() %>
            	</div>
            </div>


		</div>

	</div>


</script>

<script id="i-vis-jsontable"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Table.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						oid/id;
						iTblShowHead/checkbox;
						iTblFixedHead/checkbox;
						iTblRowLimit[1]/number;
						iVertScroll/checkbox;
						iHorScroll/checkbox;
						iTableRefreshRate[0]/number,0,3600,1;
						iTblDummyRow/html;"
		data-vis-attrs0="iColCount[1]/number,0,100,1;group.iTableCol/byindex;
						 iColShow(1-iColCount)[true]/checkbox;
						 iColName(1-iColCount)/text;
						 iColAttr(1-iColCount)/text;
						 iTblCellPlaceholder(1-iColCount)/text;
						 iColWidth(1-iColCount)/text;
						 iColPreText(1-iColCount)/html;
						 iColAfterText(1-iColCount)/html;

						 iTblTextAlign(1-iColCount)[left]/nselect,left,center,right;

						 iTblCellFormat(1-iColCount)[normal]/nselect,normal,datetime,image,boolean,number/updateJsonTableFields();

						 iTblCellDatetimeFormat(1-iColCount)/text;
						 iTblCellDatetimeFormatInfo(1-iColCount)/custom,vis-inventwo.infoText,tblDateInfo;

						 iTblCellImageSize(1-iColCount)[200]/slider,0,1000,1;

						 iTblCellBooleanCheckbox(1-iColCount)[false]/checkbox;
						 iTblCellBooleanColorFalse(1-iColCount)[#ff0000]/color;
						 iTblCellBooleanColorTrue(1-iColCount)[#00ff00]/color;

						 iTblCellNumberDecimals(1-iColCount)[2]/number;
						 iTblCellNumberDecimalSeperator(1-iColCount)[.]/text;
						 iTblCellNumberThousandSeperator(1-iColCount)[,]/text;
						 iTblCellThresholdsDp(1-iColCount)[]/id;
						 iTblCellThresholdsText(1-iColCount)[]/html;"
		data-vis-attrs1="group.i-css;
						 iText-BackgroundSettings/custom,vis-inventwo.infoText,emptyText;
						 iOpacityAll[1]/slider,0,1,0.1;
						 iTblRowEvenColor[#333333]/color;
						 iTblRowUnevenColor[#455618]/color;
						 iTblHeaderColor[#333333]/color;

						 iText-ContentSettings/custom,vis-inventwo.infoText,emptyText;
						 iRowSpacing[10]/slider,0,50,0.1;

						 iText-TextSettings/custom,vis-inventwo.infoText,emptyText;
						 iTblRowEvenTextColor[#ffffff]/color;
						 iTblRowUnevenTextColor[#ffffff]/color;
						 iTblHeaderTextColor[#ffffff]/color;

						 iText-BorderSettings/custom,vis-inventwo.infoText,emptyText;
						 iBorderSize[0]/slider,0,20,1;
						 iBorderStyleLeft[none]/nselect,dotted,dashed,solid,double,groove,ridge,inset,outset,none;
						 iBorderStyleRight[none]/nselect,dotted,dashed,solid,double,groove,ridge,inset,outset,none;
						 iBorderStyleUp[none]/nselect,dotted,dashed,solid,double,groove,ridge,inset,outset,none;
						 iBorderStyleDown[none]/nselect,dotted,dashed,solid,double,groove,ridge,inset,outset,none;
						 iBorderRemoveDouble/checkbox;
						 iBorderColor[#ffffff]/color;"

		data-vis-set="vis-inventwo"
		data-vis-type="table"
		data-vis-name="JSON Table">

		<%
			let dataNew = Object.assign({},this.data);
			if(vis.editMode){
				dataNew = vis.binds['vis-inventwo'].getDatapointsValues(dataNew);
			}
		%>

		<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:auto; height:auto; overflow:hidden;z-index:1" id="<%= this.data.attr('wid') %>" >

        		<%= (el) -> vis.binds['vis-inventwo'].jsontable(el, dataNew) %>

		</div>



</script>
<!--iText-GridSettings/custom,vis-inventwo.infoText,emptyText;
 						 iGridColumn/number,1,100,1;
 						 iGridRow/number,1,100,1;
 						 iGridColumnSpan[1]/number,1,100,1;
 						 iGridRowSpan[1]/number,1,100,1;"-->
<script id="i-vis-radiobutton-list"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Radio.gif">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						oid/id;
						iRadiobtnWidth[100]/slider,50,200,1;
						iRadiobtnHeight[50]/slider,10,200,1;
						iRadiobtnSpace[10]/slider,0,100,1;
						iRadiobtnAlign[horizontal]/select,vertical,horizontal;"
		data-vis-attrs0="iRadiobtnsCount[1]/number,0,100,1;group.iRadioBtns/byindex;
						 iTextFalse(1-iRadiobtnsCount)/html;
						 iTextTrue(1-iRadiobtnsCount)/html;
						 iValue(1-iRadiobtnsCount)/text;
						 iText-BackgroundSettings(1-iRadiobtnsCount)/custom,vis-inventwo.infoText,emptyText;
						 iText-BackColorRadioInfo/custom,vis-inventwo.infoText,radioBtnBackColInfoText;
						 iButtonBackM(1-iRadiobtnsCount)/color;
						 iButtonBackActiveM(1-iRadiobtnsCount)/color;
						 iText-ImgSettings(1-iRadiobtnsCount)/custom,vis-inventwo.infoText,emptyText;
						 iImageFalse(1-iRadiobtnsCount)/image;
						 iImageTrue(1-iRadiobtnsCount)/image;
						 iImgColorFalse(1-iRadiobtnsCount)[]/color;
						 iImgColorTrue(1-iRadiobtnsCount)[]/color;
						 iImgColorInvert(1-iRadiobtnsCount)/checkbox;"
		data-vis-attrs1="group.i-css;
						 iText-BackgroundSettings/custom,vis-inventwo.infoText,emptyText;
						 iButtonCol[#333333]/color;
						 iButtonActive[#455618]/color;
						 iButtonColHover[]/color;
						 iOpacityBack[1]/slider,0,1,0.1;

						 iText-CornerSettings/custom,vis-inventwo.infoText,emptyText;
						 iCornerRadiusUL[12]/slider,0,50,1;
						 iCornerRadiusUR[0]/slider,0,50,1;
						 iCornerRadiusLR[12]/slider,0,50,1;
						 iCornerRadiusLL[0]/slider,0,50,1;

						 iText-ContentSettings/custom,vis-inventwo.infoText,emptyText;
						 iContentFlexDirection[vertical]/select,horizontal,vertical;
						 iContentVertAlign[iSpace-between]/select,iStart,iCenter,iEnd,iSpace-between;
						 iContentOrder[orderImgText]/select,orderTextImg,orderImgText;
						 iOpacityCtn[1]/slider,0,1,0.1;

						 iText-TextSettings/custom,vis-inventwo.infoText,emptyText;
						 iTextColor[#ffffff]/color;
						 iTextSize[12]/slider,0,50,1;
						 iTextAlign[iStart]/select,iStart,iCenter,iEnd;
						 iTextSpaceTop[0]/slider,0,50,1;
						 iTextSpaceBottom[0]/slider,0,50,1;
						 iTextSpaceLeft[0]/slider,0,50,1;
						 iTextSpaceRight[0]/slider,0,50,1;

						 iText-ImageSettings/custom,vis-inventwo.infoText,emptyText;
						 iIconSize[35]/slider,0,200,1;
						 iImgAlign[iCenter]/select,iStart,iCenter,iEnd;
						 iImgRotation[0]/slider,0,180,1;
						 iImgSpaceTop[0]/slider,0,50,1;
						 iImgSpaceBottom[0]/slider,0,50,1;
						 iImgSpaceLeft[0]/slider,0,50,1;
						 iImgSpaceRight[0]/slider,0,50,1;
						 iFlipImage/checkbox;

						 iText-ShadowSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowXOffset[2]/slider,0,20,1;
						 iShadowYOffset[2]/slider,0,20,1;
						 iShadowBlur[2]/slider,0,20,1;
						 iShadowSpread[1]/slider,0,20,1;
						 iShadowColor[#111111]/color;
						 iShadowColor[#111111]/color;
						 iShadowColorActive[#111111]/color;

						 iText-ShadowInnerSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowInnerXOffset[0]/slider,0,20,1;
						 iShadowInnerYOffset[0]/slider,0,20,1;
						 iShadowInnerBlur[0]/slider,0,20,1;
						 iShadowInnerSpread[0]/slider,0,20,1;
						 iShadowInnerColor[#111111]/color;
						 iShadowInnerColorActive[#111111]/color;

						 iText-BorderSettings/custom,vis-inventwo.infoText,emptyText;
						 iBorderSize[0]/slider,0,20,1;
						 iBorderStyle[none]/nselect,dotted,dashed,solid,double,groove,ridge,inset,outset,none;
						 iBorderColor[#ffffff]/color;
						 iBorderColorActive[#ffffff]/color;"

		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Radiobutton List">

	<%
		let dataNew = Object.assign({},this.data);
		if(vis.editMode){
			dataNew = vis.binds['vis-inventwo'].getDatapointsValues(dataNew);
		}

		let classes = "";
		let styles = [];

<!--		if(dataNew.iGridColumn && dataNew.iGridRow){-->
<!--			classes = classes + ' vis-inventwo-grid-element';-->
<!--			styles.push('grid-column: ' + dataNew.iGridColumn + "/ span " + dataNew.iGridColumnSpan);-->
<!--			styles.push('grid-row: ' + dataNew.iGridRow + "/ span " + dataNew.iGridRowSpan);-->
<!--		}-->

		styles = styles.join('; ');

	%>

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light <%= classes %>" style="width:auto; height:auto; overflow:visible; cursor:pointer;z-index:1; <%= styles%>" id="<%= this.data.attr('wid') %>">

		<%
			let cssData = {};

			if(dataNew.iRadiobtnAlign == 'vertical'){
				cssData.align = "column";
				cssData.marginDir = "bottom";
			}
			else if(dataNew.iRadiobtnAlign == 'horizontal'){
				cssData.align = "row";
				cssData.marginDir = "right";
			}
		%>

		<div class="vis-inventwo-class vis-widget-body vis-inventwo-radiobtnlist-body <%== this.data.attr('class') %>" style="flex-direction: <%= cssData.align %>">

			<%

				let flip = 1;
            	if(dataNew.iFlipImage){
            		cssData.flip = -1;
            	}

				//Vertikale Inhaltsausrichtung
            	let vertTextAlign = "";
				if(dataNew.iContentVertAlign == 'iStart')
					cssData.vertTextAlign = "flex-start";
				else if(dataNew.iContentVertAlign == 'iCenter')
					cssData.vertTextAlign = "center";
				else if(dataNew.iContentVertAlign == 'iEnd')
					cssData.vertTextAlign = "flex-end";
				else if(dataNew.iContentVertAlign == 'iSpace-between')
					cssData.vertTextAlign = "space-between";

				//Inhaltsausrichtung (Reihe oder Spalte)
				let contFlexDir = "";
				if(dataNew.iContentFlexDirection == "vertical")
					cssData.contFlexDir = "column";
				else if(dataNew.iContentFlexDirection == "horizontal")
					cssData.contFlexDir = "row";

				//Inhaltsreihenfolge (Erst Bild dann Text oder erst Text dann Bild)
				let orderContent = "";
				if(dataNew.iContentOrder == 'orderTextImg')
					cssData.orderContent = 2;
				else
					cssData.orderContent = 0;

				//
				let imgAlign = "";
				if(dataNew.iImgAlign == 'iStart')
					cssData.imgAlign = "flex-start";
				else if(dataNew.iImgAlign == 'iCenter')
					cssData.imgAlign = "center";
				else if(dataNew.iImgAlign == 'iEnd')
					cssData.imgAlign = "flex-end";

				//
				let textAlign = "";
				if(dataNew.iTextAlign == 'iStart')
					cssData.textAlign = "flex-start";
				else if(dataNew.iTextAlign == 'iCenter')
					cssData.textAlign = "center";
				else if(dataNew.iTextAlign == 'iEnd')
					cssData.textAlign = "flex-end";

				let colorFilters = [];
			%>

			<% for(let val = 1; val <= dataNew.iRadiobtnsCount; val++){ %>

			<div class="vis-inventwo-radiobutton"
				 style="width: <%= dataNew.iRadiobtnWidth %>px;
						height: <%= dataNew.iRadiobtnHeight %>px;
						position: relative;
						margin-<%= cssData.marginDir %>: <%= dataNew.iRadiobtnSpace %>px;" id="<%=dataNew.wid%>_<%= val %>">

			<div>

			<%

				let backCol = "";
				let imgColorFilter = "";
				let value = vis.binds["vis-inventwo"].convertValue(dataNew['iValue' + val]);
				if(vis.states.attr(this.data.oid + '.val') == value){
					if(dataNew['iButtonBackActiveM' + val] != undefined && dataNew['iButtonBackActiveM' + val] != ''){
						backCol = dataNew['iButtonBackActiveM' + val];
					}
					else{
						backCol = dataNew.iButtonActive;
					}
					imgColorFilter = dataNew["iImgColorTrue" + val];
				}
				else{
					if(dataNew['iButtonBackM' + val] != undefined && dataNew['iButtonBackM' + val] != ''){
						backCol = dataNew['iButtonBackM' + val];
					}
					else{
						backCol = dataNew.iButtonCol;
					}
					imgColorFilter = dataNew["iImgColorFalse" + val];
				}
				let invertCol = "";
				if(dataNew["iImgColorInvert" + val] == true){
					invertCol = " filter: invert(1);";
				}
				colorFilters.push({color: imgColorFilter, wid: dataNew.wid + '_' + val});
			%>
            <div class="vis-inventwo-button-new"
            	<% if(vis.states.attr(this.data.oid + '.val') == dataNew['iValue' + val]) { %>
                 style="background: <%= backCol%>;
                 		opacity: <%= dataNew.iOpacityBack %>;
            	     	border-radius: <%= dataNew.iCornerRadiusUL %>px <%= dataNew.iCornerRadiusUR %>px <%= dataNew.iCornerRadiusLR %>px <%= dataNew.iCornerRadiusLL %>px;
            	     	box-shadow: <%= dataNew.iShadowXOffset + 'px ' + dataNew.iShadowYOffset + 'px ' + dataNew.iShadowBlur + 'px ' + dataNew.iShadowSpread + 'px ' + dataNew.iShadowColorActive%>,
            	     				inset <%= dataNew.iShadowInnerXOffset + 'px ' + dataNew.iShadowInnerYOffset + 'px ' + dataNew.iShadowInnerBlur + 'px ' + dataNew.iShadowInnerSpread + 'px ' + dataNew.iShadowInnerColorActive %>;
            	     	border: <%= dataNew.iBorderSize + 'px ' + dataNew.iBorderStyle + ' ' + dataNew.iBorderColorActive%>;"
            	<% } else { %>
				 style="background: <%= backCol%>;
				 		opacity: <%= dataNew.iOpacityBack %>;
            	     	border-radius: <%= dataNew.iCornerRadiusUL %>px <%= dataNew.iCornerRadiusUR %>px <%= dataNew.iCornerRadiusLR %>px <%= dataNew.iCornerRadiusLL %>px;
            	     	box-shadow: <%= dataNew.iShadowXOffset + 'px ' + dataNew.iShadowYOffset + 'px ' + dataNew.iShadowBlur + 'px ' + dataNew.iShadowSpread + 'px ' + dataNew.iShadowColor%>,
            	     				inset <%= dataNew.iShadowInnerXOffset + 'px ' + dataNew.iShadowInnerYOffset + 'px ' + dataNew.iShadowInnerBlur + 'px ' + dataNew.iShadowInnerSpread + 'px ' + dataNew.iShadowInnerColor%>;
            	     	border: <%= dataNew.iBorderSize + 'px ' + dataNew.iBorderStyle + ' ' + dataNew.iBorderColor %>;"
            	<% } %> ></div>
            	<div class="vis-inventwo-button-content"
            		 style="opacity: <%=dataNew.iOpacityCtn %>;
            		 		justify-content: <%= cssData.vertTextAlign %>;
            		 		flex-direction: <%= cssData.contFlexDir %>;
            		 		">
            		<div style="order: <%= cssData.orderContent %>;
            			 		align-self: <%= cssData.imgAlign %>;
            			 		margin: <%= dataNew.iImgSpaceTop + 'px ' + dataNew.iImgSpaceRight + 'px ' + dataNew.iImgSpaceBottom + 'px ' + dataNew.iImgSpaceLeft + 'px' %>;">
            			<% if(vis.states.attr(this.data.oid + '.val') == dataNew['iValue' + val]) { %>
            		    	<img src='<%= dataNew['iImageTrue' + val] %>' width="<%= dataNew.iIconSize %>" class='vis-inventwo-img'
            		    		 style="<%= imgColorFilter %>
            		    		 		transform: scaleX(<%= flip %>) rotateZ(<%= dataNew.iImgRotation %>deg); <%= invertCol %>" >
            		    <% } else if(dataNew['iImageFalse' + val] != ""){ %>
            		    	<img src='<%= dataNew['iImageFalse' + val] %>' width="<%= dataNew.iIconSize %>" class='vis-inventwo-img'
            		    	 style="transform: scaleX(<%= flip %>) rotateZ(<%= dataNew.iImgRotation %>deg); <%= invertCol %>" >
            		    <% } %>
            		</div>
            		<div style="font-size: <%= dataNew.iTextSize %>px;
            			 		color:<%= dataNew.iTextColor %>;
            			 		margin: <%= dataNew.iTextSpaceTop + 'px ' + dataNew.iTextSpaceRight + 'px ' + dataNew.iTextSpaceBottom + 'px ' + dataNew.iTextSpaceLeft + 'px' %>;
            			 		align-self: <%= cssData.textAlign %>;">
            			<% if(vis.states.attr(this.data.oid + '.val') == dataNew['iValue' + val]) { %>
            		    	<%== dataNew['iTextTrue' + val] %>
            		    <% } else { %>
            		    	<%== dataNew['iTextFalse' + val] %>
            		    <% } %>
		    		</div>
            	</div>
            </div>
            <%= (el) -> vis.binds['vis-inventwo'].radiobutton(el, this.data.attr('oid'),dataNew['iValue' + val], dataNew) %>
            </div>
            <%
            	colorFilters.forEach(c => {
            		vis.binds["vis-inventwo"].getImgColorFilter(c.color, c.wid);
            	});
            } %>

		</div>

		<%= (el) -> vis.binds['vis-inventwo'].hideImgFilterFields(el) %>

	</div>

</script>

<script id="i-vis-valuelist"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/List.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						iValueListInfo/custom,vis-inventwo.infoText,valueListInfoText;
						oid/id;
						iValueListText/html;
						iValueListDelimiter/text;
						iValueListStyle[disc]/nselect,none,lower-alpha,upper-alpha,square,circle,decimal, decimal-leading-zero,disc;
						iValueListEntryDistance[0]/slider,0,50,1;"
		data-vis-attrs0="group.i-css;
						 iText-TextSettings/custom,vis-inventwo.infoText,emptyText;
						 iTextColor[#ffffff]/color;
						 iTextSize[12]/slider,0,50,1;"
		data-vis-set="vis-inventwo"
		data-vis-type="table"
		data-vis-name="Value List">

	<%
		let pointer_event = "auto";
		if(this.data.iPointerEvents == true && !vis.editMode){
			pointer_event = "none";
		}
	%>

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light"
		 style="width:110px; height:110px; overflow:visible; cursor:default; z-index:1; pointer-events:<%== pointer_event %>;"
		 id="<%= this.data.attr('wid') %>" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %>">

			<%= (el) -> vis.binds['vis-inventwo'].valueList(el, this.data) %>

		</div>
	</div>


</script>

<script id="i-vis-marquee"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Marquee.gif">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						iValueListInfo/custom,vis-inventwo.infoText,valueListInfoText;
						oid/id;
						iMarqueeText[Lauftext]/html;
						iMarqueeDirection[left]/nselect,left,right,up,down;
						iMarqueeSpeed[20]/slider,1,50,1;"
		data-vis-attrs0="group.i-css;
						 iText-TextSettings/custom,vis-inventwo.infoText,emptyText;
						 iTextColor[#ffffff]/color;
						 iTextSize[12]/slider,0,50,1;"
		data-vis-set="vis-inventwo"
		data-vis-type="static,val"
		data-vis-name="Marquee<br><span style='color:red;'>Funktioniert nicht in allen Browsern! Neues Widget ist in arbeit</span>">

	<%
		let pointer_event = "auto";
		if(this.data.iPointerEvents == true && !vis.editMode){
			pointer_event = "none";
		}
	%>

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light"
		 style="width:110px; height:20px; overflow:visible; cursor:default; z-index:1; pointer-events:<%== pointer_event %>;"
		 id="<%= this.data.attr('wid') %>" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %>">

			<marquee
				style="color: <%= this.data.iTextColor %>;
					   font-size: <%= this.data.iTextSize %>px;
					   height: 100%; widht: 100%;"
				direction="<%= this.data.iMarqueeDirection %>"
				scrollamount="<%= this.data.iMarqueeSpeed %>">

				<%== this.data.iMarqueeText %>
			</marquee>

		</div>
	</div>



</script>

<script id="i-vis-switch-1"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Toggle.gif">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;
						oid/id;
						iValueFalse/text;
						iValueTrue/text;
						iSwitchOrientation[vertical]/select,horizontal,vertical;"
		data-vis-attrs0="group.i-css;
						 iText-ToggleSwitchSettings/custom,vis-inventwo.infoText,emptyText;
						 iOpacityBack[1]/slider,0,1,0.1;
						 iSwitchSize[110]/slider,10,200,1;
						 iFlipImage/checkbox;
						 iSwitchColOn[#333333]/color;
						 iSwitchColOnActive[#00ff00]/color;
						 iSwitchColOff[#333333]/color;
						 iSwitchColOffActive[#ff0000]/color;
						 iSwitchColor[white]/select,black,grey,white;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Switch<br>
						<span style='color:#888888;'>Simple toggle switch</span>">

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:auto; height: auto; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>">

		<%= (el) -> vis.binds['vis-inventwo'].createSwitchWidget(el, this.data, this.style) %>
		<%= (el) -> vis.binds['vis-inventwo'].hideImgFilterFields(el) %>

	</div>




</script>


<script id="i-vis-switch-basic"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Switch.gif">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;"
		data-vis-attrs0="iSwitchCount[1]/number,1,20,1;group.iBasicSwitchSwitches/byindex;
						 oid(1-iSwitchCount)/id;
						 iValueFalse(1-iSwitchCount)/text;
						 iValueTrue(1-iSwitchCount)/text;
						 iTextFalse(1-iSwitchCount)/html;
						 iTextTrue(1-iSwitchCount)/html;"
		data-vis-attrs1="group.i-css;
						 iSwitchOrientation[vertical]/select,vertical,horizontal;
						 iSwitchSpacing[20]/slider,1,200,1;
						 iSwitchTextSpacing[5]/slider,1,200,1;
						 iText-BasicSwitchBackgroundSettings/custom,vis-inventwo.infoText,emptyText;
						 iBackgroundColor[#333333]/color;
						 iBackgroundColorActive[#7e9640]/color;
						 iBarWidth[20]/slider,1,200,1;
						 iBorderRadius[20]/slider,0,100,1;

						 iText-BasicSwitchKnobSettings/custom,vis-inventwo.infoText,emptyText;
						 iKnobWidth[30]/slider,1,200,1;
						 iKnobHeight[30]/slider,1,200,1;
						 iKnobBorderRadius[30]/slider,0,100,1;
						 iKnobOffset[30]/slider,1,200,1;
						 iKnobBackgroundColor[#455618]/color;
						 iKnobBackgroundColorActive[#455618]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Basic Switch<br>
						<span style='color:#888888;'>Simple toggle switch</span>">

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:100px; height: auto; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>">
		<%= (el) -> vis.binds['vis-inventwo'].createBasicSwitchWidget(el, this.data, this.style) %>
	</div>
</script>

<script id="i-vis-checkbox"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/Check.gif">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;"
		data-vis-attrs0="iCheckboxCount[1]/number,1,20,1;group.iCheckboxBox/byindex;
						 oid(1-iCheckboxCount)/id;
						 iValueFalse(1-iCheckboxCount)/text;
						 iValueTrue(1-iCheckboxCount)/text;
						 iText(1-iCheckboxCount)/html;"
		data-vis-attrs1="group.i-css;
						 iCheckboxOrientation[vertical]/select,vertical,horizontal;
						 iCheckboxSpacing[20]/slider,1,200,1;
						 iCheckboxIcon[iIconCheck]/select,iIconCheck,iIconCross,iIconDot;
						 iText-CheckboxBoxSettings/custom,vis-inventwo.infoText,emptyText;
						 iWidth[30]/slider,1,200,1;
						 iHeight[30]/slider,1,200,1;
						 iBackgroundColor[#ffffff]/color;
						 iBackgroundColorActive[#ffffff]/color;
						 iColorIcon[#000000]/color;

						 iText-CornerSettings/custom,vis-inventwo.infoText,emptyText;
						 iCornerRadiusUL[4]/slider,0,50,1;
						 iCornerRadiusUR[4]/slider,0,50,1;
						 iCornerRadiusLR[4]/slider,0,50,1;
						 iCornerRadiusLL[4]/slider,0,50,1;

						 iText-BorderSettings/custom,vis-inventwo.infoText,emptyText;
						 iBorderSize[0]/slider,0,20,1;
						 iBorderStyle[none]/nselect,dotted,dashed,solid,double,groove,ridge,inset,outset,none;
						 iBorderColor[#ffffff]/color;
						 iBorderColorActive[#ffffff]/color;

						 iText-ShadowSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowXOffset[2]/slider,0,20,1;
						 iShadowYOffset[2]/slider,0,20,1;
						 iShadowBlur[2]/slider,0,20,1;
						 iShadowSpread[0]/slider,0,20,1;
						 iShadowColor[#111111]/color;
						 iShadowColorActive[#111111]/color;

						 iText-ShadowInnerSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowInnerXOffset[0]/slider,0,20,1;
						 iShadowInnerYOffset[0]/slider,0,20,1;
						 iShadowInnerBlur[0]/slider,0,20,1;
						 iShadowInnerSpread[0]/slider,0,20,1;
						 iShadowInnerColor[#111111]/color;
						 iShadowInnerColorActive[#111111]/color;

						 iText-TextShadowSettings/custom,vis-inventwo.infoText,emptyText;
						 iShadowTextXOffset[0]/slider,0,20,1;
						 iShadowTextYOffset[0]/slider,0,20,1;
						 iShadowTextBlur[0]/slider,0,20,1;
						 iShadowTextColor[#111111]/color;
						 iShadowTextColorActive[#111111]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Checkbox/Radiobutton">

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:150px; height: auto; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>">
		<%= (el) -> vis.binds['vis-inventwo'].createCheckbox(el, this.data, this.style) %>
	</div>


</script>


<!--<script id="i-vis-grid"-->
<!--		type="text/ejs"-->
<!--		class="vis-tpl"-->
<!--		data-vis-prev='<img src="widgets/vis-inventwo/img/Universal.gif">'-->
<!--		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;-->

<!--						iText-GridSettings/custom,vis-inventwo.infoText,emptyText;-->
<!--						iGridShow[true]/checkbox;-->
<!--						iGridColWidth[100];-->
<!--						iGridRowHeight[100];-->
<!--						iGridGap[10];-->
<!--						iGridPadding[10];"-->
<!--		data-vis-set="vis-inventwo"-->
<!--		data-vis-type="ctrl"-->
<!--		data-vis-name="Grid">-->

<!--	<%-->

<!--		let styles = [];-->
<!--		let classes = [];-->

<!--		styles.push("grid-auto-columns: " + this.data.iGridColWidth + "px");-->
<!--		styles.push("grid-auto-rows: " + this.data.iGridRowHeight + "px");-->
<!--		styles.push("grid-gap: " + this.data.iGridGap + "px");-->
<!--		styles.push("padding: " + this.data.iGridPadding + "px");-->

<!--		classes.push("show-grid");-->

<!--		styles = styles.join("; ");-->
<!--		classes = classes.join(" ");-->


<!--	%>-->

<!--	<div class="vis-widget <%== this.data.attr('class') %> vis-inventwo-grid <%= classes %>"-->
<!--		 style="width:110px; height:110px; overflow:visible; z-index:0 ;<%= styles %>" id="<%= this.data.attr('wid') %>">-->

<!--		<% vis.binds['vis-inventwo'].gridWidget(this.data.wid, this.data); %>-->
<!--	</div>-->
<!--</script>-->




<!-- BEKOMMEN KEINE NEUEN FEATURES -->
<script id="i-vis-switch"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/0_Switch.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;oid/id;iTextFalse/html;iTextTrue/html;iTextSize[12]/slider,0,50,1;iImageFalse/image;iImageTrue/image;iIconSize[60]/slider,0,200,1;iInvertImageCol/checkbox;iFlipImage/checkbox;iValueType[boolean]/select,boolean,value;iValueTypeInfo/custom,vis-inventwo.infoText,valueType;iValueFalse/text;iValueTrue/text;"
		data-vis-attrs0="group.i-css;iButtonCol[#333333]/color;iButtonActive[#455618]/color;
		iCornerRadiusUL[12]/slider,0,50,1;iCornerRadiusUR[0]/slider,0,50,1;iCornerRadiusLR[12]/slider,0,50,1;iCornerRadiusLL[0]/slider,0,50,1;
		iOpacity[1]/slider,0,1,0.1;iOpacityCtn[1]/slider,0,1,0.1;iTextColor[#ffffff]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Switch<br><span style='color:red;'>WARNING! Widget won't get any new features! Please use new widgets</span>">

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:110px; height:110px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %>">

            <div class="vis-inventwo-button"
                <% if((vis.states.attr(this.data.oid + '.val') && this.data.iValueType == 'boolean') || (vis.states.attr(this.data.oid + '.val') == this.data.iValueTrue && this.data.iValueType == 'value')) { %>
                    style="background: <%= this.data.attr('iButtonActive') %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
                <% } else { %>
                    style="background: <%= this.data.attr('iButtonCol') %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
                <% } %>
            >
		    </div>

            <div class="vis-inventwo-button-content" style="opacity: <%= this.data.attr('iOpacityCtn') %>;">

            	<%

            		let flip = 1;
            		if(this.data.attr('iFlipImage')){
            			flip = -1;
            		}

            	%>


                <% if((vis.states.attr(this.data.oid + '.val') && this.data.iValueType == 'boolean') || (vis.states.attr(this.data.oid + '.val') == this.data.iValueTrue && this.data.iValueType == 'value')) { %>
                    <div class="vis-inventwo-button-imageContainer">
                        <img src='<%= this.data.iImageTrue %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);" >
                    </div>
                    <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;color:<%= this.data.iTextColor %>;">
                        <%== this.data.iTextTrue %>
		            </div>
                <% } else { %>
                    <div class="vis-inventwo-button-imageContainer">
                        <img src='<%= this.data.iImageFalse %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);" >
                    </div>
                    <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;color:<%= this.data.iTextColor %>;">
                        <%== this.data.iTextFalse %>
		            </div>
                <% } %>

            </div>
            <%= (el) -> vis.binds['vis-inventwo'].handleToggle(el, this.data) %>
		</div>

	</div>


</script>
<script id="i-vis-switch-small"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/0_Switch1.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;oid/id;iTextFalse/text;iTextTrue/text;iTextSize[12]/slider,0,50,1;iImageFalse/image;iImageTrue/image;iIconSize[35]/slider,0,200,1;iInvertImageCol/checkbox;iFlipImage/checkbox;iValueType[boolean]/select,boolean,value;iValueTypeInfo/custom,vis-inventwo.infoText,valueType;iValueFalse/text;iValueTrue/text;"
		data-vis-attrs0="group.i-css;iButtonCol[#333333]/color;iButtonActive[#455618]/color;
		iCornerRadiusUL[12]/slider,0,50,1;iCornerRadiusUR[0]/slider,0,50,1;iCornerRadiusLR[12]/slider,0,50,1;iCornerRadiusLL[0]/slider,0,50,1;
		iOpacity[1]/slider,0,1,0.1;iOpacityCtn[1]/slider,0,1,0.1;iTextColor[#ffffff]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Switch Small<br><span style='color:red;'>WARNING! Widget won't get any new features! Please use new widgets</span>">

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:110px; height:50px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %>">

            <div class="vis-inventwo-button"
                <% if((vis.states.attr(this.data.oid + '.val') && this.data.iValueType == 'boolean') || (vis.states.attr(this.data.oid + '.val') == this.data.iValueTrue && this.data.iValueType == 'value')) { %>
                    style="background: <%= this.data.attr('iButtonActive') %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
                <% } else { %>
                    style="background: <%= this.data.attr('iButtonCol') %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
                <% } %>
            >
		    </div>

            <div class="vis-inventwo-button-content-small" style="opacity: <%= this.data.attr('iOpacityCtn') %>">

			<%

            		let flip = 1;
            		if(this.data.attr('iFlipImage')){
            			flip = -1;
            		}

            	%>

            <% if((vis.states.attr(this.data.oid + '.val') && this.data.iValueType == 'boolean') || (vis.states.attr(this.data.oid + '.val') == this.data.iValueTrue && this.data.iValueType == 'value')) { %>
                <div style="order:2; position:relative;">
                    <img src='<%= this.data.iImageTrue %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);">
                </div>
                <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;display:table-cell;color:<%= this.data.iTextColor %>">
                    <%== this.data.iTextTrue %>
		        </div>
            <% } else { %>
                <div style="order:2; position:relative;">
                    <img src='<%= this.data.iImageFalse %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);">
                </div>
                <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;display:table-cell;color:<%= this.data.iTextColor %>">
                    <%== this.data.iTextFalse %>
		        </div>
            <% } %>

            </div>
            <%= (el) -> vis.binds['vis-inventwo'].handleToggle(el, this.data) %>
		</div>

	</div>


</script>

<script id="i-vis-button"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/0_Button.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;oid/id;value;iText/text;iTextSize[12]/slider,0,50,1;iImage/image;iIconSize[60]/slider,0,200,1;iInvertImageCol/checkbox;iFlipImage/checkbox;"
		data-vis-attrs0="group.i-css;iButtonCol[#333333]/color;
		iCornerRadiusUL[12]/slider,0,50,1;iCornerRadiusUR[0]/slider,0,50,1;iCornerRadiusLR[12]/slider,0,50,1;iCornerRadiusLL[0]/slider,0,50,1;
		iOpacity[1]/slider,0,1,0.1;iOpacityCtn[1]/slider,0,1,0.1;iTextColor[#ffffff]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Button<br><span style='color:red;'>WARNING! Widget won't get any new features! Please use new widgets</span>">

		<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:110px; height:110px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %> ">

            <div class="vis-inventwo-button"
                    style="background: <%= this.data.attr('iButtonCol') %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
            >
		    </div>
			<%

            		let flip = 1;
            		if(this.data.attr('iFlipImage')){
            			flip = -1;
            		}

            	%>
            <div class="vis-inventwo-button-content" style="opacity: <%= this.data.attr('iOpacityCtn') %>;">
                <div class="vis-inventwo-button-imageContainer">
                    <img src='<%= this.data.iImage %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);">
                </div>
                <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;color:<%= this.data.iTextColor %>">
                    <%== this.data.iText %>
		        </div>
            </div>
		</div>
        <%= (el) -> vis.binds['vis-inventwo'].state(el, this.data) %>
	</div>


</script>
<script id="i-vis-button-small"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/0_Button1.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;oid/id;value;iText/text;iTextSize[12]/slider,0,50,1;iImage/image;iIconSize[35]/slider,0,200,1;iInvertImageCol/checkbox;iFlipImage/checkbox;"
		data-vis-attrs0="group.i-css;iButtonCol[#333333]/color;
		iCornerRadiusUL[12]/slider,0,50,1;iCornerRadiusUR[0]/slider,0,50,1;iCornerRadiusLR[12]/slider,0,50,1;iCornerRadiusLL[0]/slider,0,50,1;
		iOpacity[1]/slider,0,1,0.1;iOpacityCtn[1]/slider,0,1,0.1;iTextColor[#ffffff]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Button Small<br><span style='color:red;'>WARNING! Widget won't get any new features! Please use new widgets</span>">

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:110px; height:50px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %> ">

            <div class="vis-inventwo-button"
                    style="background: <%= this.data.attr('iButtonCol') %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
            >
		    </div>
			<%

            		let flip = 1;
            		if(this.data.attr('iFlipImage')){
            			flip = -1;
            		}

            	%>
            <div class="vis-inventwo-button-content-small" style="opacity: <%= this.data.attr('iOpacityCtn') %>">

                <div style="order:2; position:relative;">
                    <img src='<%= this.data.iImage %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);">
                </div>
                <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;display:table-cell;color:<%= this.data.iTextColor %>">
                    <%== this.data.iText %>
		        </div>

            </div>
            <%= (el) -> vis.binds['vis-inventwo'].state(el, this.data) %>
		</div>

	</div>


</script>

<script id="i-vis-navigation"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/0_Nav.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;nav_view;iText/text;iTextSize[12]/slider,0,50,1;iImage/image;iIconSize[60]/slider,0,200,1;iInvertImageCol/checkbox;iFlipImage/checkbox;iNavWait[100]/number;oid/id;iNavValue/text;"
		data-vis-attrs0="group.i-css;iButtonCol[#333333]/color;iButtonActive[#455618]/color;
		iCornerRadiusUL[12]/slider,0,50,1;iCornerRadiusUR[0]/slider,0,50,1;iCornerRadiusLR[12]/slider,0,50,1;iCornerRadiusLL[0]/slider,0,50,1;
		iOpacity[1]/slider,0,1,0.1;iOpacityCtn[1]/slider,0,1,0.1;iTextColor[#ffffff]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Navigation<br><span style='color:red;'>WARNING! Widget won't get any new features! Please use new widgets</span>">

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:110px; height:110px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>">
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %> ">

			<%
				let backgroundcol = this.data.iButtonCol;
				if(this.data.nav_view === vis.activeView){
					backgroundcol = this.data.iButtonActive;
				}
			%>

            <div class="vis-inventwo-button vis-inventwo-nav" data-inventwo-nav="<%= this.data.nav_view%>" data-activeCol="<%= this.data.iButtonActive%>" data-col="<%= this.data.iButtonCol%>"
                    style="background: <%= backgroundcol %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
            >
		    </div>
			<%

            		let flip = 1;
            		if(this.data.attr('iFlipImage')){
            			flip = -1;
            		}

            	%>
            <div class="vis-inventwo-button-content" style="opacity: <%= this.data.attr('iOpacityCtn') %>;">
                <div class="vis-inventwo-button-imageContainer">

                        <img src='<%= this.data.iImage %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);">

                </div>
                <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;color:<%= this.data.iTextColor %>">
                    <%== this.data.iText %>
		        </div>
            </div>
            <%= (el) -> vis.binds['vis-inventwo'].handleNavigation(el, this.data) %>
		</div>

	</div>


</script>
<script id="i-vis-navigation-small"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/0_Nav1.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;nav_view;iText/text;iTextSize[12]/slider,0,50,1;iImage/image;iIconSize[35]/slider,0,200,1;iInvertImageCol/checkbox;iFlipImage/checkbox;iNavWait[100]/number;oid/id;iNavValue/text;"
		data-vis-attrs0="group.i-css;iButtonCol[#333333]/color;iButtonActive[#455618]/color;
		iCornerRadiusUL[12]/slider,0,50,1;iCornerRadiusUR[0]/slider,0,50,1;iCornerRadiusLR[12]/slider,0,50,1;iCornerRadiusLL[0]/slider,0,50,1;
		iOpacity[1]/slider,0,1,0.1;iOpacityCtn[1]/slider,0,1,0.1;iTextColor[#ffffff]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="ctrl"
		data-vis-name="Navigation Small<br><span style='color:red;'>WARNING! Widget won't get any new features! Please use new widgets</span>">

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:110px; height:50px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>">
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %> ">

			<%
				let backgroundcol = this.data.iButtonCol;
				if(this.data.nav_view === vis.activeView){
					backgroundcol = this.data.iButtonActive;
				}
			%>

            <div class="vis-inventwo-button vis-inventwo-nav" data-inventwo-nav="<%= this.data.nav_view%>" data-activeCol="<%= this.data.iButtonActive%>" data-col="<%= this.data.iButtonCol%>"
                    style="background:  <%= backgroundcol %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
            >
		    </div>
			<%

            		let flip = 1;
            		if(this.data.attr('iFlipImage')){
            			flip = -1;
            		}

            	%>
            <div class="vis-inventwo-button-content-small" style="opacity: <%= this.data.attr('iOpacityCtn') %>">

                <div style="order:2; position:relative;">
                    <img src='<%= this.data.iImage %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);">
                </div>
                <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;display:table-cell;color:<%= this.data.iTextColor %>">
                    <%== this.data.iText %>
		        </div>

            </div>
            <%= (el) -> vis.binds['vis-inventwo'].handleNavigation(el, this.data) %>
		</div>

	</div>


</script>

<script id="i-vis-background"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/0_Background.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;oid/id;iTextFalse/html;iTextTrue/html;iTextSize[12]/slider,0,50,1;iImageFalse/image;iImageTrue/image;iIconSize[60]/slider,0,200,1;iInvertImageCol/checkbox;iFlipImage/checkbox;iValueType[boolean]/select,boolean,value;iValueTypeInfo/custom,vis-inventwo.infoText,valueType;iValueFalse/text;iValueTrue/text;"
		data-vis-attrs0="group.i-css;iButtonCol[#333333]/color;iButtonActive[#455618]/color;
		iCornerRadiusUL[12]/slider,0,50,1;iCornerRadiusUR[0]/slider,0,50,1;iCornerRadiusLR[12]/slider,0,50,1;iCornerRadiusLL[0]/slider,0,50,1;
		iOpacity[1]/slider,0,1,0.1;iOpacityCtn[1]/slider,0,1,0.1;iTextColor[#ffffff]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="val"
		data-vis-name="Background<br><span style='color:red;'>WARNING! Widget won't get any new features! Please use new widgets</span>">

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:110px; height:110px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %>">

            <div class="vis-inventwo-button"
                <% if((vis.states.attr(this.data.oid + '.val') && this.data.iValueType == 'boolean') || (vis.states.attr(this.data.oid + '.val') == this.data.iValueTrue && this.data.iValueType == 'value')) { %>
                    style="background: <%= this.data.attr('iButtonActive') %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
                <% } else { %>
                    style="background: <%= this.data.attr('iButtonCol') %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
                <% } %>
            >
		    </div>

            <div class="vis-inventwo-button-content" style="opacity: <%= this.data.attr('iOpacityCtn') %>;">

            	<%

            		let flip = 1;
            		if(this.data.attr('iFlipImage')){
            			flip = -1;
            		}

            	%>


                <% if((vis.states.attr(this.data.oid + '.val') && this.data.iValueType == 'boolean') || (vis.states.attr(this.data.oid + '.val') == this.data.iValueTrue && this.data.iValueType == 'value')) { %>
                    <div class="vis-inventwo-button-imageContainer">
                        <img src='<%= this.data.iImageTrue %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);" >
                    </div>
                    <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;color:<%= this.data.iTextColor %>;">
                        <%== this.data.iTextTrue %>
		            </div>
                <% } else { %>
                    <div class="vis-inventwo-button-imageContainer">
                        <img src='<%= this.data.iImageFalse %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);" >
                    </div>
                    <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;color:<%= this.data.iTextColor %>;">
                        <%== this.data.iTextFalse %>
		            </div>
                <% } %>

            </div>
		</div>

	</div>


</script>
<script id="i-vis-background-small"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/0_Background1.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;oid/id;iTextFalse/text;iTextTrue/text;iTextSize[12]/slider,0,50,1;iImageFalse/image;iImageTrue/image;iIconSize[35]/slider,0,200,1;iInvertImageCol/checkbox;iFlipImage/checkbox;iValueType[boolean]/select,boolean,value;iValueTypeInfo/custom,vis-inventwo.infoText,valueType;iValueFalse/text;iValueTrue/text;"
		data-vis-attrs0="group.i-css;iButtonCol[#333333]/color;iButtonActive[#455618]/color;
		iCornerRadiusUL[12]/slider,0,50,1;iCornerRadiusUR[0]/slider,0,50,1;iCornerRadiusLR[12]/slider,0,50,1;iCornerRadiusLL[0]/slider,0,50,1;
		iOpacity[1]/slider,0,1,0.1;iOpacityCtn[1]/slider,0,1,0.1;iTextColor[#ffffff]/color;"
		data-vis-set="vis-inventwo"
		data-vis-type="val"
		data-vis-name="Background Small<br><span style='color:red;'>WARNING! Widget won't get any new features! Please use new widgets</span>">

	<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:110px; height:50px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %>">

            <div class="vis-inventwo-button"
                <% if((vis.states.attr(this.data.oid + '.val') && this.data.iValueType == 'boolean') || (vis.states.attr(this.data.oid + '.val') == this.data.iValueTrue && this.data.iValueType == 'value')) { %>
                    style="background: <%= this.data.attr('iButtonActive') %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
                <% } else { %>
                    style="background: <%= this.data.attr('iButtonCol') %>;
                    border-radius: <%= this.data.attr('iCornerRadiusUL') %>px <%= this.data.attr('iCornerRadiusUR') %>px <%= this.data.attr('iCornerRadiusLR') %>px <%= this.data.attr('iCornerRadiusLL') %>px;
                    opacity:<%= this.data.attr('iOpacity')%>;"
                <% } %>
            >
		    </div>

            <div class="vis-inventwo-button-content-small" style="opacity: <%= this.data.attr('iOpacityCtn') %>">

			<%

            		let flip = 1;
            		if(this.data.attr('iFlipImage')){
            			flip = -1;
            		}

            	%>

            <% if((vis.states.attr(this.data.oid + '.val') && this.data.iValueType == 'boolean') || (vis.states.attr(this.data.oid + '.val') == this.data.iValueTrue && this.data.iValueType == 'value')) { %>
                <div style="order:2; position:relative;">
                    <img src='<%= this.data.iImageTrue %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);">
                </div>
                <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;display:table-cell;color:<%= this.data.iTextColor %>">
                    <%== this.data.iTextTrue %>
		        </div>
            <% } else { %>
                <div style="order:2; position:relative;">
                    <img src='<%= this.data.iImageFalse %>' width="<%= this.data.iIconSize %>" style="filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);">
                </div>
                <div class="vis-inventwo-button-text" style="font-size: <%= this.data.iTextSize %>px;display:table-cell;color:<%= this.data.iTextColor %>">
                    <%== this.data.iTextFalse %>
		        </div>
            <% } %>

            </div>
		</div>

	</div>


</script>

<script id="i-vis-image"
		type="text/ejs"
		class="vis-tpl"
		data-vis-prev='<img src="widgets/vis-inventwo/img/0_Image.png">'
		data-vis-attrs="iWiki/custom,vis-inventwo.externalLinks,wiki;iImage/image;iInvertImageCol/checkbox;iFlipImage/checkbox;"
		data-vis-attrs0="group.i-css;iOpacityImg[1]/slider,0,1,0.1;"
		data-vis-set="vis-inventwo"
		data-vis-type="static"
		data-vis-name="Image<br><span style='color:red;'>WARNING! Widget won't get any new features! Please use new widgets</span>">

		<div class="vis-widget <%== this.data.attr('class') %> waves-effect waves-light" style="width:110px; height:110px; overflow:visible; cursor:pointer;z-index:1" id="<%= this.data.attr('wid') %>" >
		<div class="vis-inventwo-class vis-widget-body <%== this.data.attr('class') %> ">

			<%

            		let flip = 1;
            		if(this.data.attr('iFlipImage')){
            			flip = -1;
            		}

            	%>
            <div class="vis-inventwo-button-content" style="opacity: <%= this.data.attr('iOpacityImg') %>;">
                <div class="vis-inventwo-button-imageContainer">
                    <img src='<%= this.data.iImage %>' style="width:100%; filter: invert(<%= Number(this.data.attr('iInvertImageCol')) %>);transform: scaleX(<%= flip %>);">
                </div>
            </div>
		</div>
	</div>


</script>
<!-- --------------vis-inventwo.html--- END -->

<!-- ---------------------------------------  DO NOT EDIT INSIDE THIS LINE - END   ------------------------------------------- -->

<div id='waitScreen' class='vis-wait-screen'><div id='waitDialog' class='waitDialog'><div class='vis-progressbar '></div><div class='vis-wait-text' id='waitText'></div></div></div>
<div id="vis_container" style="position: absolute; top: 0; left: 0; height: 100%; width: 100%"></div>
<div id="vis_license" style="position: absolute; top: 0; left: 0; height: 100%; width: 100%; font-size: 60px; color: #f4706c; display: none; text-align: center; background: rgba(0,0,0,0.5); z-index: 1">
    <div style="position: absolute; top: calc(50% - 30px); left: 0; width: 100%" class="vis-license-text">No valid license found!</div>
</div>
<div id="server-disconnect" class="disconnect-light">
    <div class="splash-screen-text">...</div>
    <div class="splash-screen-circle-outer"></div>
    <div class="splash-screen-circle-inner"></div>
</div>
<div id="dialog-message" title="Message" style="display: none">
    <p>
        <span id="dialog-message-icon" class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
        <span id="dialog-message-text"></span>
    </p>
</div>
</body>
</html>
