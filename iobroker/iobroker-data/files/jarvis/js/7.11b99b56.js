(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"48e3":function(e,t,s){"use strict";s.r(t),t["default"]={"Support by buying":["I hope you enjoy jarvis and it enriches your smarthome.","If you are missing a certain functionality or you found a bug, please [do not hesitate to create an issue on Github](https://github.com/Zefau/ioBroker.jarvis/issues).","If you are facing problems or having questions, [please see the Wiki](https://github.com/Zefau/ioBroker.jarvis/wiki) or [ask in the forum](https://forum.iobroker.net/topic/49776).","With v3 the possibility of a subscription is introduced, which enables Pro-Features. An [overview of the Pro-Features can be found on Github](https://github.com/Zefau/ioBroker.jarvis/discussions/891). The subscription can be quit any time and in that case the licence validity will last until the subscribed period end. In case of difficulties, please feel free to write me via [ioBroker.jarvis@mailbox.org](mailto:ioBroker.jarvis@mailbox.org).","The subscription of the private licence costs 12,00 EUR in a year.","Please understand this not only as a payment, but also as an award and support for the development of this adapter.","**Thanks in advanced for your support!**"],Disclaimer:["The use of the application is only for private purposes. Commercial usage is not allowed. For a commercial usage please contact me via [ioBroker.jarvis@mailbox.org](mailto:ioBroker.jarvis@mailbox.org) for a pricing.","Die Versorgung mit Patches - insbesondere sicherheitsrelevante Patches - erfolgt bezogen auf die jarvis Major Version (X.y.z, siehe [Semver](https://semver.org/lang/de/)) für mindestens 12 Monate ab Release-Zeitpunkt im Stable Repository von ioBroker. Ein Recht zur Versorgung mit Updates für neue Features besteht nicht.","The usage is at own risk. Security relevant settings of ioBroker as well as the local user-specific server instance have to be taken care of by the user himself.","Die Haftung und insbesondere ein möglicher Schadensersatz ist ausdrücklich ausgeschlossen. Der Verkauf erfolgt unter Ausschluss jeglicher Gewährleistung. Die Haftung auf Schadenersatz wegen Verletzungen von Gesundheit, Körper oder Leben und grob fahrlässiger und/oder vorsätzlicher Verletzungen meiner Pflichten als Verkäufer bleibt uneingeschränkt."]}},c6c5:function(e,t,s){"use strict";s.r(t);var i=s("0692");t["default"]={translations:Object(i["a"])((e=>s("f0cb")("./"+e))),register:i["c"]}},d0e0:function(e,t,s){"use strict";s.r(t),t["default"]={"Account & ioBroker Installations":"Account & ioBroker Installationen",Buy:"Kaufen",Subscribe:"Abonnieren",User:"Benutzer","Sign In":"Anmelden","Licence valid for following installation":"Lizenz gültig für folgende Installation",Bills:"Rechnungen","Login first to buy & subscribe":"Bitte zunächst Anmelden, um zu kaufen","buy now":"jarvis Pro Abonnement für 12,00 EUR / Jahr zahlungspflichtig bestellen, jedezeit kündbar","Legal Remarks":"Rechtliche Hinweise","Support by buying":["Ich hoffe, euch gefällt jarvis und der Adapter bereichert euer Smarthome.","Sofern euch Funktionen fehlen, ihr euch Features wünscht oder auf Bugs gestoßen seid, dann [scheut bitte nicht einen Issue auf Github zu erstellen](https://github.com/Zefau/ioBroker.jarvis/issues). Nur, wenn ich davon erfahre, kann ich es umsetzen.","Sofern ihr Probleme oder Fragestellungen habt, schaut [gerne ins Wiki](https://github.com/Zefau/ioBroker.jarvis/wiki) oder [meldet euch im Forum](https://forum.iobroker.net/topic/49776).","Mit der in v3 eingeführten Möglichkeit des Abonnements könnt ihr diverse Pro-Features aktivieren und nutzen. Eine [Übersicht der Features findet ihr auf Github](https://github.com/Zefau/ioBroker.jarvis/discussions/891). Das Abo ist jederzeit kündbar und läuft bei Kündigung bis zum bezahlten Ende fort. Sofern es Schwierigkeiten gibt, meldet euch gerne bei mir via [ioBroker.jarvis@mailbox.org](mailto:ioBroker.jarvis@mailbox.org).","Die Abo-Kosten für die private Lizenz betragen 12,00 EUR im Jahr.","Bitte versteht die eingeführte Möglichkeit des Abonnements nicht nur als reine Bezahlung, sondern auch als Unterstützung zur Weiterentwicklung des Adapters.","**Vielen Dank für euren Support!**"],Disclaimer:["Der Gebrauch ist ausschließlich privat und nicht zu kommerziellen / gewerblichen Zwecken gestattet. Für eine kommerzielle Nutzung bitte via [ioBroker.jarvis@mailbox.org](mailto:ioBroker.jarvis@mailbox.org) schriftlich eine Preisanfrage stellen.","Die Versorgung mit Patches - insbesondere sicherheitsrelevante Patches - erfolgt bezogen auf die jarvis Major Version (X.y.z, siehe [Semver](https://semver.org/lang/de/)) für mindestens 12 Monate ab Release-Zeitpunkt im Stable Repository von ioBroker. Ein Recht zur Versorgung mit Updates für neue Features besteht nicht.","Die Nutzung erfolgt grundsätzlich auf eigene Gefahr! Sicherheitsrelevante Einstellungen für die ioBroker bzw. lokale benutzer-seitige Server-Umgebung liegen in der Eigenverantwortung des Benutzers, siehe insbesondere die [Hinweise zu den Gefahren durch Port-Freischaltungen](https://forum.iobroker.net/topic/17258/hinweis-gefahren-durch-port-freischaltungen).","Die Haftung und insbesondere ein möglicher Schadensersatz ist ausdrücklich ausgeschlossen. Der Verkauf erfolgt unter Ausschluss jeglicher Gewährleistung. Die Haftung auf Schadenersatz wegen Verletzungen von Gesundheit, Körper oder Leben und grob fahrlässiger und/oder vorsätzlicher Verletzungen meiner Pflichten als Verkäufer bleibt uneingeschränkt."]}},f0cb:function(e,t,s){var i={"./":"c6c5","./de":"d0e0","./de.js":"d0e0","./en":"48e3","./en.js":"48e3","./index":"c6c5","./index.js":"c6c5"};function n(e){var t=r(e);return s(t)}function r(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=r,e.exports=n,n.id="f0cb"},ff43:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return q}));var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"row q-px-sm"},[s("div",{staticClass:"col"},[s("alert",[e._v(e._s(e.error))])],1)]),s("div",{staticClass:"row q-pa-md"},[s("div",{staticClass:"col-5"},[s("q-card",[s("q-card-section",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[e._v(e._s(!0===e.login?e.$t("User")+" ID":e.$t("Sign In")))]),s("div",{staticClass:"text-subtitle2"})]),s("q-card-section",[s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.login,expression:"login === null"}],staticClass:"text-center"},[s("q-spinner",{attrs:{color:"primary",size:"3em"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.login,expression:"login === true"}]},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("inputs",{attrs:{standout:"",value:e.userId,label:"User",disable:""}})],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.login,expression:"login === false"}],staticClass:"text-center"},[s("div",{attrs:{id:"paypal-button-login"}})])])],1),s("q-card",{directives:[{name:"show",rawName:"v-show",value:e.invoices.length>0,expression:"invoices.length > 0"}],staticClass:"q-mt-md"},[s("q-card-section",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("Bills")))]),s("div",{staticClass:"text-subtitle2"})]),s("q-card-section",[s("q-list",[e._l(e.invoices,(function(t){return[s("q-item",{key:"item-"+t.invoiceId,class:{"bg-positive":t.expires>e.now}},[s("q-item-section",[s("q-item-label",[e._v(e._s(t.date)+", #"+e._s(t.invoiceId))]),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("valid to"))+" "+e._s(e.format(1e3*t.expires,"dd. MMM yyyy, HH:mm")))])],1)],1),s("q-separator",{key:"separator-"+t.invoiceId})]}))],2)],1)],1)],1),s("div",{staticClass:"col-2 items-center"},[s("q-separator",{staticStyle:{margin:"auto",height:"100%"},attrs:{vertical:""}})],1),s("div",{staticClass:"col-5"},[s("q-card",[s("q-card-section",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("Buy"))+" & "+e._s(e.$t("Subscribe")))]),s("div",{staticClass:"text-subtitle2"})]),s("q-card-section",e._l(e.$t("Support by buying"),(function(t){return s("p",{key:t},[s("span",{domProps:{innerHTML:e._s(e.md.render(t))}})])})),0),s("q-separator"),s("q-card-section",[s("strong",[e._v(e._s(e.$t("Legal Remarks")))]),e._l(e.$t("Disclaimer"),(function(t){return s("p",{key:t},[s("span",{domProps:{innerHTML:e._s(e.md.render(t))}})])}))],2),s("q-separator"),s("q-card-section",{directives:[{name:"show",rawName:"v-show",value:!1===e.login,expression:"login === false"}],staticClass:"text-center"},[e._v("\n\t\t\t\t\t"+e._s(e.$t("Login first to buy & subscribe"))+".\n\t\t\t\t")]),s("q-card-section",{directives:[{name:"show",rawName:"v-show",value:!0===e.login&&e.userId,expression:"login === true && userId"}],staticClass:"text-center"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.paying,expression:"paying === false"}]},[s("div",{attrs:{id:"paypal-button-subscribe"}}),s("em",[e._v(e._s(e.$t("buy now")))]),s("q-separator",{staticClass:"q-mt-sm"})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.paying,expression:"paying === true"}]},[s("q-spinner",{attrs:{color:"primary",size:"3em"}})],1)])],1)],1)])])},n=[],r=s("ed09"),a=s("ec26"),o=s("7ead"),l=s("9ea4"),c=s("853a"),u=s("e580"),d=s("c6c5");const h=s("d4cd")();var p=Object(r["c"])({name:"AccountPage",data(){return{error:null,login:null,paying:!1,userId:null,invoices:[],installations:[],selectedInstallation:null}},computed:{now(){return Math.ceil(Date.now()/1e3)}},methods:{selectInstallation(){console.warn(this.selectedInstallation)},mountPaypalAPI(){window.paypal?window.paypal.use(["login"],(e=>{const t=this.$store.state.jarvis.iobroker.uuid,s=this.$store.state.jarvis.iobroker.system,i=c["a"]._systemId;e.render({appid:"Ad8Db5feNlBy6SdFa7O0fpJ2QYIcyFO9SGSg4tNpxOgOlLyWTkN6JmOFBV58ItTpdUwfBGW2L8WuoIAn",scopes:"openid",containerid:"paypal-button-login",responseType:"code",locale:"de-de",buttonType:"LWP",buttonShape:"pill",buttonSize:"lg",fullPage:"true",state:btoa(this.sessionId+"|"+t+"|"+i+"|"+JSON.stringify(s)+"|"+window.location.href),returnurl:"https://www.zefau.net/jarvis/user/paypal_login.php"})})):setTimeout((()=>this.mountPaypalAPI()),100)},mountPaypalSDK(){const e=document.querySelector("#paypal-button-subscribe");if(window.paypal_sdk&&e){const e={style:{shape:"rect",color:"blue",layout:"horizontal",label:"buynow",tagline:!1},createSubscription:(e,t)=>t.subscription.create({plan_id:"P-8EY03930L1769123MMEFPZPI"}),onApprove:(e,t)=>{this.paying=!0,l["a"].post("user/invoice",{action:"assignUserToInvoice",userId:this.userId,subscriptionId:e.subscriptionID}).then((t=>c["a"].setToken(t,e.subscriptionID,this.selectedInstallation.value))).catch((e=>console.error(e))).finally((()=>{this.paying="done",window.location.reload()}))}};this.button=window.paypal_sdk.Buttons(e),this.button.render("#paypal-button-subscribe")}else setTimeout((()=>this.mountPaypalSDK()),100)}},beforeCreate(){d["default"].register(this.$i18n,d["default"].translations),this.format=u["a"],this.md=h;const e="Ad8Db5feNlBy6SdFa7O0fpJ2QYIcyFO9SGSg4tNpxOgOlLyWTkN6JmOFBV58ItTpdUwfBGW2L8WuoIAn",t=document.createElement("script");t.setAttribute("src","https://www.paypal.com/sdk/js?client-id="+e+"&components=buttons&currency=EUR&vault=true&intent=subscription"),t.setAttribute("data-namespace","paypal_sdk"),document.body.appendChild(t),this.sessionId=o["a"].get("sessionId")||Object(a["a"])(),o["a"].set("sessionId",this.sessionId),l["a"].post("user/details",{action:"getLoginBySessionId",sessionId:this.sessionId}).then((e=>{if(!e)throw new Error("User not signed in!");this.login=!0,this.userId=e,o["a"].set("userId",e),console.log("User signed-in: "+e),l["a"].post("user/invoice",{action:"getInvoicesByUserId",userId:e}).then((e=>{this.invoices=e})).catch((e=>{console.warn(e.message)})),l["a"].post("user/details",{action:"getInstallations",userId:e}).then((e=>{this.installations=e.map((e=>{const t=JSON.parse(e.system),s={value:e.ioBrokerId,label:"System: "+t.hostname+" ("+t.platform+"), ID: "+e.ioBrokerId};return"1"===e.selected&&(this.selectedInstallation=s),s}))})).catch((e=>{console.warn(e.message)}))})).catch((e=>{console.warn(e.message),this.error=e.message,this.login=!1}))},mounted(){this.mountPaypalSDK(),this.mountPaypalAPI()},beforeDestroy(){this.button&&this.button.close&&this.button.close(),Object.keys(window).forEach((e=>{/paypal|zoid|post_robot/.test(e)&&delete window[e]}))}}),g=p,b=s("2877"),m=s("f09f"),v=s("a370"),f=s("0d59"),w=s("ddd8"),y=s("9c40"),k=s("eb85"),I=s("1c1c"),z=s("66e5"),S=s("4074"),B=s("0170"),j=s("eebe"),x=s.n(j),_=Object(b["a"])(g,i,n,!1,null,null,null),q=_.exports;x()(_,"components",{QCard:m["a"],QCardSection:v["a"],QSpinner:f["a"],QSelect:w["a"],QBtn:y["a"],QSeparator:k["a"],QList:I["a"],QItem:z["a"],QItemSection:S["a"],QItemLabel:B["a"]})}}]);