{"version":3,"sources":["utils/flotConverter.js","Components/ColorPicker/transformers.js","Components/ColorPicker/components/PickerDialog.js","Components/ColorPicker/components/ColorPicker.js","Components/ColorPicker/index.js","Components/Fields.js","Components/Line.js","Components/Mark.js","Components/DefaultPreset.js","Components/PresetTabs.js","SettingsEditor.js","Components/ChartSettings.js","Components/ChartFrame.js","MainChart.js","Components/PresetsTree.js","Components/ChartsTree.js","MenuList.js","App.js","utils/getUrlQuery.js","serviceWorker.js","index.js"],"names":["_executeWriteTasks","socket","tasks","_resolve","Promise","resolve","length","obj","shift","getObject","_id","catch","then","exists","console","log","setTimeout","setObject","_flot2echarts","flotObj","instance","echartsObj","replace","common","name","expert","native","type","endsWith","Math","round","random","data","config","lines","l","_ids","ids","split","colors","_colors","names","_names","units","_units","i","push","id","offset","aggregate","color","thickness","strokeWidth","shadowsize","min","max","unit","aggregateType","aggregateSpan","relativeEnd","j","art","yOffset","parseFloat","validTime","m","marks","lineId","parseInt","toString","upperValueOrId","v","lowerValueOrId","vl","c","fill","f","ol","t","os","s","text","d","textPosition","p","textOffset","py","textColor","fc","textSize","fs","undefined","width","height","timeFormat","useComma","zoom","export","grid_hideX","grid_hideY","hoverDetail","noLoader","noedit","animation","afterComma","timeType","normalizeConfig","params","coerce","coerceTypes","forEach","val","param","key","decodeURIComponent","keys","keysLast","test","concat","isNaN","cur","Object","prototype","call","hasOwnProperty","deParam","url","module","exports","instanceObj","convertDone","reject","getRawSocket","emit","startkey","endkey","err","res","charts","rows","value","_readFlotSettings","map","e","error","converters","rgba","rgb","r","g","b","a","hex","rgba_rgb","rgba_hex","PickerDialog","onClick","onChange","className","style","position","zIndex","top","right","bottom","left","ColorPicker","convert","hintText","placeholder","floatingLabelText","label","TextFieldProps","showPicker","setShowPicker","internalValue","setValue","pickerClassName","custom","TextField","target","InputProps","newValue","defaultProps","MakedColorPicker","compose","withState","defaultValue","makeColorPicker","styles","theme","fieldContainer","paddingTop","whiteSpace","checkBoxLabel","fontSize","objectContainer","display","objectField","flex","objectButton","marginTop","paddingLeft","colorPicker","sliderContainer","sliderLabel","sliderRoot","paddingBottom","spacing","IOSelect","props","I18n","clsx","classes","FormControl","minWidth","InputLabel","shrink","Select","disabled","formData","updateValue","renderValue","displayEmpty","options","MenuItem","noTranslate","withStyles","IOCheckbox","FormControlLabel","control","Checkbox","checked","IOTextField","InputLabelProps","inputProps","title","startAdornment","helperLink","IconButton","size","window","open","endAdornment","IODateTimeField","date","IOObjectField","useState","state","setState","fullWidth","showDialog","dialogName","customFilter","selected","onOk","onClose","IOColorPicker","variant","backgroundColor","IOSlider","Typography","Slider","root","step","valueLabelDisplay","WIDTHS","chartType","dataType","buttons","Line","updateField","line","JSON","parse","stringify","Utils","getObjectNameFromObj","language","getLanguage","_name","updateLine","index","idWidth","visible","windowWidth","this","padding","lineClosed","provided","dragHandleProps","emptyDrag","onPaste","lineOpenToggle","result","instances","shortInstanceField","paste","systemConfig","defaultHistory","shortIdField","auto","scatterplot","steps","stepsStart","spline","shortChartTypeField","minmax","average","total","onchange","shortDataTypeField","renderColorField","shortColorField","shortNameField","deleteButton","deleteLine","onUpdate","noPadding","isUseBright","onSelectColor","getColor","stopPropagation","xAxisOptions","maxLines","presetData","commonYAxis","ownYAxis","deleteButtonFull","copyButtonFull","onCopy","shortFields","chapterMain","points","legend","chapterTexts","chapterLine","chapterAxis","off","leftColor","rightColor","chapterOther","Card","card","cardPaste","background","snapshot","isDragging","palette","secondary","light","CardContent","cardContent","opened","renderOpenedLine","renderClosedLine","React","Component","borderStyle","borderWidth","marginBottom","borderColor","grey","overflow","opacity","margin","paddingRight","borderBottom","lineHeight","marginLeft","marginRight","shortFieldsLast","LINE_HEIGHT","verticalAlign","shortButtonsField","float","Mark","mark","updateMark","lineClosedContainer","markOpenToggle","shortLineIdField","shortUpperValueOrIdField","shortLowerValueOrIdField","shortFillField","shortTextField","deleteMark","renderOpenedCard","flexFlow","flexDirection","DEFAULT_PRESET","range","live","ticks","noBorder","window_bg","bg_custom","x_labels_color","y_labels_color","border_color","grid_color","border_width","barColor","barLabels","barWidth","barFontSize","barFontColor","titlePos","titleColor","titleSize","legColumns","legBgOpacity","legBg","legendDirection","getDefaultLine","systemSettings","isBoolean","trim","symbolSize","yaxe","yticks","getDefaultPreset","preset","isFloatComma","dateFormat","PREDEFINED_COLORS_MARKS","PresetTabs","linesOpened","localStorage","setItem","marksOpened","time","markData","lineData","expandAllLines","collapseAllLines","expandAllMarks","collapseAllMarks","splice","copiedObject","sessionStorage","getItem","DefaultPreset","selectedTab","deleteLineDialog","deleteMarkDialog","showColorDialog","colorDialogValue","webInstances","toast","getAdapterInstances","pop","link","secure","bind","location","hostname","port","colorPickerCb","len","xaxe","Dialog","DialogTitle","DialogActions","alignRight","buttonsContainer","Button","autoFocus","startIcon","cb","anyClosed","find","anyOpened","droppableId","droppableProps","ref","innerRef","isDraggingOver","dark","minHeight","TabPanel","tabContent","Fab","addLine","buttonAdd","buttonExpandAll","buttonCollapseAll","draggableId","draggableProps","draggableStyle","userSelect","showColorPicker","noContent","dragHint","addMark","group","timeFormatCustom","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","ContentProps","message","action","close","buttonCopyLink","protocol","host","selectedId","copyToClipboard","noBackground","Grid","item","sm","xs","TabContext","AppBar","tabsContainer","selectedPresetChanged","autoSave","onAutoSave","noPaddingOnSide","buttonSave","savePreset","TabList","event","scrollButtons","Tab","tabsBody","renderTabLines","renderTabMarkings","renderTabTime","renderTabOptions","renderTabTitle","renderTabAppearance","renderDeleteLineDialog","renderDeleteMarkDialog","renderColorDialog","renderToast","overflowY","fontStyle","SettingsEditor","logBox","logBoxInner","toolbox","boxShadow","iconButtons","layoutIcon","borderRadius","IconAggregate","viewBox","xmlns","stroke","transform","RefreshSelect","rangeOptions","relativeEndOptions","liveOptions","CHART_TYPES","AGGREGATES","ChartSettings","timeSpanOpened","aggregateOpened","refreshOpened","Toolbar","mainDiv","settingsButton","start","start_time","end","end_time","Popover","popOver","anchorEl","document","getElementById","transformOrigin","fieldsContainer","aggregateIcon","refreshSelect","refreshSelectButtonTitle","grow1","hintButton","onCreatePreset","buttonIcon","textTransform","flexGrow","ChartFrame","onReceiveMessage","ready","lastPresetData","refIframe","contentWindow","postMessage","createRef","addEventListener","removeEventListener","Paper","iframe","el","src","darkBackground","border","primary","main","MainChart","enablePresetMode","parentId","historyInstance","stateId","URL","search","includes","heightWithoutToolbar","height100","container","renderToolbar","getChartFrame","toolbar","mixins","toolbarButtons","editorDiv","textButton","tabIcon","hintIcon","tabMenuButton","tabChanged","tabText","maxWidth","textOverflow","tabChangedIcon","closeButton","cursor","notRunning","tabButton","tabButtonWrapper","menuIcon","HIDDEN_FOLDER","hideFolder","getFolderList","folder","values","subFolders","subFolder","Droppable","onDrop","useDrop","accept","drop","isOver","collect","monitor","shallow","isOverAny","children","Draggable","useDrag","drag","FORBIDDEN_CHARS","MenuList","presetsOpened","onPresetChange","startsWith","presets","changed","emptyFolders","getEmptyFolders","newState","changingPreset","presetFolders","buildPresetTree","informAboutSubFolders","addPresetToFolderPrefix","folderPrefix","noRefresh","oldId","presetId","adapterName","delObject","refreshData","onError","deletePresetDialog","movePresetDialog","newPresetFolder","addPresetFolderDialog","addPresetFolderName","editPresetFolderDialog","editPresetFolderName","scrollToSelect","refSelected","getAllPresets","nextProps","nextContext","current","scrollIntoView","behavior","block","inline","subscribeObject","unsubscribeObject","onShowReorder","_path","_result","__path","join","presetObj","level","anySubFolders","depthPx","reorder","listItem","ListItem","gutters","noGutters","button","onSelectedChanged","ListItemIcon","itemIconRoot","itemIconPreset","itemIcon","ListItemText","listItemTitle","listItemSubTitle","ListItemSecondaryAction","CircularProgress","renameDialog","renamePresetDialogTitle","onCopyPreset","iconCopy","parent","prefix","reactChildren","sort","filter","renderPresetsTree","renderTreePreset","folderItem","width100","folderIconPreset","togglePresetsFolder","itemIconFolder","editFolderDialogTitleOrigin","onDragFinish","newName","newSelectedId","pos","indexOf","promises","all","parts","currentFolder","findFolder","parentFolder","_parentFolder","allowedId","onClosePresetFolderDialog","DialogContent","onKeyPress","which","addFolder","isUnique","renamePresetFolder","newId","isIdUnique","comment","onShowError","source","onKeyDown","keyCode","isNameUnique","renamePreset","ok","cancel","suppressQuestionMinutes","isYes","deletePreset","showAddStateDialog","showToast","enabled","inst","enabledDP","newTitle","backend","HTML5Backend","List","scroll","mainList","renderAddFolderDialog","renderRenameFolderDialog","renderDeleteDialog","renderMoveDialog","renderRenameDialog","withWidth","content","withTheme","sortObj","aid","bid","ChartsTree","chartsOpened","toggleChartFolder","adapterPromises","getAllEnums","getAllCharts","getEnums","enums","members","groupId","instanceId","icon","img","getObjectIcon","channelID","getParentId","deviceID","adapterID","getAdapterIcon","_socket","objs","getObjects","substring","_instances","iconPromises","statesEnums","types","icons","eID","getEnumsForId","getChartIcon","funcIds","roomIds","insts","otherFuncs","otherRooms","selectedChartId","ins","onShowToast","dragging","getIcon","multiple","chartsList","Switch","edge","onChangeList","enumId","renderContext","gIndex","LEVEL_PADDING","isDragDisabled","renderListItem","renderSelectIdDialog","isDropDisabled","groupBy","renderListItems","adapterIcon","alt","showSearch","showReorder","isIFrame","self","chartList","mainToolbar","textInput","href","secondaryColors","FormGroup","row","smallMargin","mainListDiv","renderListToolbar","heightMinusToolbar","PresetsTree","isFromCurrentSelection","renderFooter","loadChartParam","parseHash","hash","App","settings","query","getUrlQuery","translations","require","getUniqueId","loadChartOrPreset","getNewPresetName","template","showError","originalPresetData","onDragEnd","destination","newLine","removed","addPresetDialog","progress","discardChangesConfirmDialog","resizing","menuOpened","menuSelectId","logHorzLayout","settingsSize","menuSize","objects","getSystemConfig","flotConverter","entry","getHistory","_count","results","first","iFirst","k","confirmCB","menuOpenCloseButton","primaryMinSize","secondaryInitialSize","onDragStart","onSecondaryPaneSizeChange","innerWidth","verticalLayout","onLayoutChange","toggleLogLayout","connection","Fragment","primaryIndex","secondaryMinSize","customClassName","splitterDivs","menuDivWithoutMenu","removedLine","it","confirmed","renderMain","renderError","themeType","GenericApp","default","fontFamily","menuDiv","Boolean","match","themeName","getThemeName","version","Sentry","dsn","release","integrations","SentryIntegrations","beforeSend","hint","ignore","exception","build","ReactDOM","render","onThemeChange","_theme","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.a66d0019.chunk.js","sourcesContent":["function deParam(params, coerce) {\n    const obj = {};\n    const coerceTypes = {'true': true, 'false': false, 'null': null};\n\n    // Iterate over all name=value pairs.\n    params.replace(/\\+/g, ' ').split('&').forEach(v => {\n        const param = v.split('=');\n        let key = decodeURIComponent(param[0]);\n        let val;\n        let i = 0;\n\n        // If key is more complex than 'foo', like 'a[]' or 'a[b][c]', split it\n        // into its component parts.\n        let keys = key.split('][');\n        let keysLast = keys.length - 1;\n\n        // If the first keys part contains [ and the last ends with ], then []\n        // are correctly balanced.\n        if (/\\[/.test(keys[0]) && /]$/.test(keys[keysLast])) {\n            // Remove the trailing ] from the last keys part.\n            keys[keysLast] = keys[keysLast].replace(/]$/, '');\n\n            // Split first keys part into two parts on the [ and add them back onto\n            // the beginning of the keys array.\n            keys = keys.shift().split('[').concat(keys);\n\n            keysLast = keys.length - 1;\n        } else {\n            // Basic 'foo' style key.\n            keysLast = 0;\n        }\n\n        // Are we dealing with a name=value pair, or just a name?\n        if (param.length === 2) {\n            val = decodeURIComponent(param[1]);\n\n            // Coerce values.\n            if (coerce) {\n                val = val && !isNaN(val) && ((+val + '') === val) ? +val        // number\n                    : val === 'undefined' ? undefined         // undefined\n                        : coerceTypes[val] !== undefined ? coerceTypes[val] // true, false, null\n                            : val;                                                          // string\n            }\n\n            if (keysLast) {\n                let cur = obj;\n                // Complex key, build deep object structure based on a few rules:\n                // * The 'cur' pointer starts at the object top-level.\n                // * [] = array push (n is set to array length), [n] = array if n is\n                //   numeric, otherwise object.\n                // * If at the last keys part, set the value.\n                // * For each keys part, if the current level is undefined create an\n                //   object or array based on the type of the next keys part.\n                // * Move the 'cur' pointer to the next level.\n                // * Rinse & repeat.\n                for (; i <= keysLast; i++) {\n                    key = keys[i] === '' ? cur.length : keys[i];\n                    cur = cur[key] = i < keysLast\n                        ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : [])\n                        : val;\n                }\n\n            } else {\n                // Simple key, even simpler rules, since only scalars and shallow\n                // arrays are allowed.\n\n                if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\n                    // val is already an array, so push on the next value.\n                    obj[key].push(val);\n                } else if ({}.hasOwnProperty.call(obj, key)) {\n                    // val isn't an array, but since a second value has been specified,\n                    // convert val into an array.\n                    obj[key] = [obj[key], val];\n                } else {\n                    // val is a scalar.\n                    obj[key] = val;\n                }\n            }\n        } else if (key) {\n            // No value was defined, so set something meaningful.\n            obj[key] = coerce\n                ? undefined\n                : '';\n        }\n    });\n\n    return obj;\n}\n\nfunction normalizeConfig(config) {\n    if (config.lines) {\n        config.l = config.lines;\n        delete config.lines;\n    }\n\n    // BF (2020.11.27): it is very old and can be deleted\n    if (config._ids) {\n        const ids    = config._ids    ? config._ids.split(';')    : [];\n        const colors = config._colors ? config._colors.split(';') : [];\n        const names  = config._names  ? config._names.split(';')  : [];\n        const units  = config._units  ? config._units.split(';')  : [];\n        config.l = [];\n        for (let i = 0; i < ids.length; i++) {\n            config.l.push({\n                id:         ids[i],\n                offset:     0,\n                name:       names[i] || '',\n                aggregate:  'onchange',\n                color:      colors[i] || 'blue',\n                thickness:  config.strokeWidth || 1,\n                shadowsize: config.strokeWidth || 1,\n                min:        config.min || '',\n                max:        config.max || '',\n                unit:       units[i]   || ''\n            });\n        }\n        config.aggregateType = 'step';\n        config.aggregateSpan = 300;\n        config.relativeEnd   = 'now';\n    }\n\n    // convert art to aggregate (from flot)\n    if (config.l) {\n        for (let j = 0; j < config.l.length; j++) {\n            // BF (2020.11.27): it is very old and can be deleted\n            if (config.l[j].art) {\n                config.l[j].aggregate = config.l[j].art;\n                delete config.l[j].art;\n            }\n            if (config.instance && !config.l[j].instance) {\n                config.l[j].instance = config.instance || '';\n            }\n            config.l[j].yOffset   = parseFloat(config.l[j].yOffset)   || 0;\n            config.l[j].offset    = parseFloat(config.l[j].offset)    || 0;\n            config.l[j].validTime = parseFloat(config.l[j].validTime) || 0;\n        }\n    }\n\n    config.l = config.l || [];\n\n    // convert marks\n    if (config.m) {\n        config.marks = [];\n        for (let j = 0; j < config.m.length; j++) {\n            config.marks[j] = {\n                lineId:         parseInt(config.m[j].l, 10).toString(),\n                upperValueOrId: config.m[j].v,\n                lowerValueOrId: config.m[j].vl,\n                color:          config.m[j].c,\n                fill:           parseFloat(config.m[j].f) || 0.2,\n                ol:             parseInt(config.m[j].t, 10) || 1,\n                os:             parseInt(config.m[j].s, 10) || 0,\n                text:           config.m[j].d,\n                textPosition:   config.m[j].p,\n                textOffset:     parseFloat(config.m[j].py) || 0,\n                textColor:      config.m[j].fc || '',\n                textSize:       parseInt(config.m[j].fs, 10) || undefined,\n            };\n        }\n        delete config.m;\n    }\n\n    config.marks = config.marks || [];\n\n    if (!config.l.length) {\n        config.l.push({id: '', unit: ''});\n    }\n\n    // Set default values\n    config.width        = config.width                   || '100%';\n    config.height       = config.height                  || '100%';\n    config.timeFormat   = config.timeFormat              || '';\n    config.useComma     = config.useComma    === 'true'  || config.useComma    === true;\n    config.zoom         = config.zoom        === 'true'  || config.zoom        === true;\n    config.export       = config.export      === 'true'  || config.export      === true;\n    config.grid_hideX   = config.grid_hideX  === 'true'  || config.grid_hideX  === true;\n    config.grid_hideY   = config.grid_hideY  === 'true'  || config.grid_hideY  === true;\n    config.hoverDetail  = config.hoverDetail === 'true'  || config.hoverDetail === true;\n    config.noLoader     = config.noLoader    === 'true'  || config.noLoader    === true;\n    config.noedit       = config.noedit      === 'true'  || config.noedit      === true;\n    config.animation    = parseInt(config.animation)     || 0;\n    config.afterComma   = config.afterComma === undefined ? 2 : parseInt(config.afterComma, 10);\n    config.timeType     = config.timeType || 'relative';\n    return config;\n}\n\nfunction _readFlotSettings(socket) {\n    return new Promise((resolve, reject) =>\n        socket.getRawSocket().emit('getObjectView', 'chart', 'chart', {\n            startkey: 'flot.',\n            endkey: 'flot.\\u9999'\n        }, (err, res) => {\n            if (err) {\n                reject(err);\n            } else {\n                const charts = [];\n                res && res.rows && res.rows.forEach(obj => charts.push(obj.value));\n                resolve(charts);\n            }\n        }));\n}\n\nfunction _executeWriteTasks(socket, tasks, _resolve) {\n    if (!_resolve) {\n        return new Promise(resolve => _executeWriteTasks(socket, tasks, resolve));\n    } else if (!tasks || !tasks.length) {\n        _resolve();\n    } else {\n        const obj = tasks.shift();\n        if (obj) {\n            socket.getObject(obj._id)\n                .catch(() => null)\n                .then(exists => {\n                    if (!exists) {\n                        socket.setObject(obj._id, obj)\n                            .then(() => setTimeout(() => _executeWriteTasks(socket, tasks, _resolve), 50));\n                    } else {\n                        console.log(`Object ${obj._id} already exists and will not be converted`);\n                        setTimeout(() => _executeWriteTasks(socket, tasks, _resolve), 50);\n                    }\n                });\n        } else {\n            setTimeout(() => _executeWriteTasks(socket, tasks, _resolve), 50);\n        }\n    }\n}\n\nfunction _flot2echarts(flotObj, instance) {\n    // convert name\n    const echartsObj = {\n        _id: flotObj._id.replace(/^flot.\\d+/, 'echarts.' + instance),\n        common: {\n            name: flotObj.common.name,\n            expert: true,\n        },\n        native: {\n\n        },\n        type: 'chart',\n    };\n\n    if (echartsObj._id.endsWith('.')) {\n        echartsObj._id = 'empty_' + Math.round(Math.random() * 10000);\n    }\n\n    /*\n    {\n          \"l\": [\n            {\n              \"id\": \"javascript.0.dimmer\",\n              \"offset\": \"0\",\n              \"aggregate\": \"minmax\",\n              \"color\": \"#FF0000\",\n              \"thickness\": \"3\",\n              \"shadowsize\": \"3\",\n              \"fill\": \"0.9\"\n            }\n          ],\n          \"timeType\": \"relative\",\n          \"relativeEnd\": \"now\",\n          \"range\": \"10\",\n          \"aggregateType\": \"count\",\n          \"aggregateSpan\": \"300\",\n          \"hoverDetail\": \"false\",\n          \"useComma\": \"false\",\n          \"zoom\": \"false\",\n          \"noedit\": \"false\",\n          \"animation\": \"0\",\n          \"m\": [\n            {\n              \"l\": \"0\",\n              \"v\": \"0\",\n              \"f\": \"false\",\n              \"c\": \"#FF0000\",\n              \"t\": \"3\",\n              \"s\": \"3\",\n              \"d\": \"\",\n              \"p\": \"l\",\n              \"py\": \"0\",\n              \"fc\": \"#FF0000\",\n              \"fs\": \"\",\n              \"vl\": \"100\"\n            },\n            {\n              \"l\": \"0\",\n              \"v\": \"0\",\n              \"f\": \"false\",\n              \"c\": \"#00FF00\",\n              \"t\": \"3\",\n              \"s\": \"3\",\n              \"d\": \"\",\n              \"p\": \"l\",\n              \"py\": \"0\",\n              \"fc\": \"#00FF00\",\n              \"fs\": \"\",\n              \"vl\": \"50\"\n            }\n          ]\n        }\n     */\n\n    const data = normalizeConfig(deParam(flotObj.native.url));\n\n    if (!data.lines) {\n        data.lines = data.l;\n        delete data.l;\n    }\n\n    echartsObj.native.data = data;\n\n    console.log(`Convert ${flotObj._id} => ${echartsObj._id}`);\n    return echartsObj;\n}\n\n\nfunction flotConverter(socket, instance) {\n    instance = instance || 0;\n\n    let instanceObj;\n\n    return socket.getObject('system.adapter.echarts.' + instance)\n        .then(obj => {\n            instanceObj = obj;\n            if (obj && obj.native && !obj.native.convertDone) {\n                return _readFlotSettings(socket);\n            } else {\n                return Promise.resolve([]);\n            }\n        })\n        .then(charts =>\n            // convert every chart\n            _executeWriteTasks(socket, charts.map(obj => _flot2echarts(obj, instance)))\n        )\n        .then(() => {\n            if (!instanceObj.native.convertDone) {\n                instanceObj.native.convertDone = true;\n                return socket.setObject(instanceObj._id, instanceObj);\n            } else {\n                return Promise.resolve();\n            }\n        })\n        .catch(e => {\n            console.error(`Cannot convert flot: ${e}`);\n            return Promise.resolve();\n        });\n}\n\nmodule.exports = flotConverter;","export const DEFAULT_CONVERTER = 'rgba_hex';\nexport const converters = {\n  rgba: c => `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`,\n  rgb: c => `rgb(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b})`,\n  hex: c => c.hex,\n\n  rgba_rgb: c => c.rgb.a === 1 ? converters.rgb(c) : converters.rgba(c),\n  rgba_hex: c => c.rgb.a === 1 ? converters.hex(c) : converters.rgba(c)\n};\n\nexport default converters;\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { ChromePicker } from 'react-color'\n\nconst PickerDialog = ({\n  value,\n  onClick,\n  onChange,\n  className\n}) => (\n  <div style={{ position: 'relative' }}>\n    <div style={{ position: 'absolute', zIndex: '2' }}>\n      <div\n        style={{ position: 'fixed', top: '0px', right: '0px', bottom: '0px', left: '0px' }}\n        onClick={onClick}\n      />\n      <ChromePicker\n        color={value}\n        onChange={onChange}\n        className={className}\n      />\n    </div>\n  </div>\n);\n\nPickerDialog.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n  onClick: PropTypes.func,\n  className: PropTypes.any\n};\n\nexport default PickerDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport compose from 'recompose/compose'\nimport withState from 'recompose/withState'\n\nimport TextField from '@material-ui/core/TextField'\n\nimport { DEFAULT_CONVERTER, converters } from '../transformers'\nimport PickerDialog from './PickerDialog'\n\nconst ColorPicker = ({\n  // ColorPicker\n  onChange,\n  convert,\n\n  // Text field\n  name,\n  id,\n  hintText,\n  placeholder,\n  floatingLabelText,\n  label,\n  TextFieldProps,\n  value,\n\n  // State\n  showPicker,\n  setShowPicker,\n  internalValue,\n  setValue,\n  pickerClassName,\n\n  ...custom\n}) => (\n  <>\n    <TextField\n      name={name}\n      id={id}\n      label={floatingLabelText || label}\n      placeholder={hintText || placeholder}\n      onClick={() => setShowPicker(true)}\n      onChange={e => {\n        setValue(e.target.value);\n        onChange(e.target.value)\n      }}\n      InputProps={{ style: { color: value === undefined ? internalValue : value } }}\n      {...TextFieldProps}\n      {...custom}\n    />\n    {showPicker && (\n      <PickerDialog\n        value={value === undefined ? internalValue : value}\n        onClick={() => {\n          setShowPicker(false);\n          onChange(value)\n        }}\n        onChange={c => {\n          const newValue = converters[convert](c);\n          setValue(newValue);\n          onChange(newValue)\n        }}\n        className={pickerClassName}\n      />\n    )}\n  </>\n);\n\nColorPicker.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n  convert: PropTypes.oneOf(Object.keys(converters)),\n  name: PropTypes.string,\n  id: PropTypes.string,\n  hintText: PropTypes.string,\n  placeholder: PropTypes.string,\n  label: PropTypes.string,\n  floatingLabelText: PropTypes.string,\n  TextFieldProps: PropTypes.shape(TextField.propTypes),\n  showPicker: PropTypes.bool,\n  setShowPicker: PropTypes.func,\n  internalValue: PropTypes.string,\n  setValue: PropTypes.func,\n  pickerClassName: PropTypes.any\n};\n\nColorPicker.defaultProps = {\n  convert: DEFAULT_CONVERTER\n};\n\nconst makeColorPicker = compose(\n  withState('showPicker', 'setShowPicker', false),\n  withState('internalValue', 'setValue', ({ defaultValue }) => defaultValue)\n);\n\nconst MakedColorPicker = makeColorPicker(ColorPicker);\n\nconst ColorPickerField = ({ input: { value, onChange, ...restInput }, meta: { touched, error }, ...restProps }) => (\n  <MakedColorPicker\n    value={value}\n    onChange={onChange}\n    errorText={touched && error}\n    {...restInput}\n    {...restProps}\n  />\n);\n\nColorPickerField.propTypes = {\n  input: PropTypes.object,\n  meta: PropTypes.object\n};\n\nexport default MakedColorPicker\n\nexport {\n  ColorPickerField\n}\n","import ColorPicker from './components/ColorPicker'\nexport default ColorPicker\n","import React, {useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport IconSelectID from '@material-ui/icons/Subject';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\n\r\nimport ColorPicker from './ColorPicker';\r\n\r\nconst styles = theme => ({\r\n    fieldContainer: {\r\n        paddingTop: 10,\r\n        whiteSpace: 'nowrap'\r\n    },\r\n    checkBoxLabel: {\r\n        fontSize: '0.8rem'\r\n    },\r\n    objectContainer: {display: 'flex'},\r\n    objectField: {flex: 1},\r\n    objectButton: {\r\n        marginTop: 'auto',\r\n        paddingLeft: 0\r\n    },\r\n    colorPicker: {\r\n        left: -200,\r\n        top: 60,\r\n        position: 'relative'\r\n    },\r\n    sliderContainer: {\r\n        position: 'relative',\r\n        //height: theme.spacing(3),\r\n    },\r\n    sliderLabel: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        fontSize: 'small'\r\n    },\r\n    sliderRoot: {\r\n        paddingBottom: 0,\r\n        paddingTop: theme.spacing(2),\r\n    }\r\n});\r\n\r\nlet IOSelect = function (props) {\r\n    const label = I18n.t(props.label);\r\n    return <div className={clsx(props.classes.fieldContainer, props.className)}>\r\n        <FormControl style={{minWidth: props.minWidth || 200, width: props.width}}>\r\n            <InputLabel shrink={true}>{ label }</InputLabel>\r\n            <Select\r\n                disabled={!!props.disabled}\r\n                label={label}\r\n                style={{color: props.colors ? props.colors[props.formData[props.name]] || undefined : undefined}}\r\n                onChange={e => props.updateValue(props.name, e.target.value)}\r\n                value={props.formData[props.name] || ''}\r\n                renderValue={props.renderValue}\r\n                displayEmpty\r\n            >{\r\n                props.options ?\r\n                    Object.keys(props.options).map(key =>\r\n                        <MenuItem key={key} value={key} style={{color: props.colors ? props.colors[key] || undefined : undefined}}>{\r\n                            props.noTranslate ? props.options[key] : (props.options[key] !== '' && props.options[key] !== null && props.options[key] !== undefined? I18n.t(props.options[key]) : '')\r\n                        }</MenuItem>)\r\n                     : null\r\n            }\r\n            </Select>\r\n        </FormControl>\r\n    </div>;\r\n};\r\nIOSelect.propTypes = {\r\n    disabled: PropTypes.bool,\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    options: PropTypes.object,\r\n    colors: PropTypes.object,\r\n};\r\nIOSelect = withStyles(styles)(IOSelect);\r\nexport {IOSelect};\r\n\r\nlet IOCheckbox = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <FormControlLabel style={{paddingTop: 10}} label={<span className={props.classes.checkBoxLabel}>{I18n.t(props.label)}</span>} control={\r\n            <Checkbox\r\n                disabled={!!props.disabled}\r\n                onChange={e => {\r\n                    props.updateValue(props.name, e.target.checked)\r\n                }}\r\n                checked={props.formData[props.name] || false}\r\n            />\r\n        }/>\r\n    </div>;\r\n};\r\nIOCheckbox.propTypes = {\r\n    disabled: PropTypes.bool,\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIOCheckbox = withStyles(styles)(IOCheckbox);\r\nexport {IOCheckbox};\r\n\r\nlet IOTextField = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <TextField\r\n            disabled={!!props.disabled}\r\n            style={{width: props.formData[props.name] ? (props.width ? props.width - 30 : 'calc(100% - 30px)') : (props.width || '100%')}}\r\n            label={I18n.t(props.label)}\r\n            InputLabelProps={{shrink: true}}\r\n            inputProps={{min: props.min, max: props.max}}\r\n            onChange={e => props.updateValue(props.name, e.target.value)}\r\n            value={props.formData[props.name] || ''}\r\n            type={props.type}\r\n            title={props.title || ''}\r\n            InputProps={{\r\n                startAdornment: !props.disabled && props.helperLink ? <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => window.open(props.helperLink,'_blank')}>\r\n                    <HelpIcon />\r\n                </IconButton> : undefined,\r\n\r\n                endAdornment: !props.disabled && props.formData[props.name] ?\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => props.updateValue(props.name, '')}>\r\n                        <ClearIcon />\r\n                    </IconButton>\r\n                    : undefined,\r\n            }}\r\n        />\r\n    </div>;\r\n};\r\nIOTextField.propTypes = {\r\n    disabled: PropTypes.bool,\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    type: PropTypes.string,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    helperLink: PropTypes.string,\r\n    width: PropTypes.number,\r\n};\r\nIOTextField = withStyles(styles)(IOTextField);\r\nexport {IOTextField};\r\n\r\nlet IODateTimeField = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <TextField type=\"datetime-local\" label={I18n.t(props.label)} InputLabelProps={{shrink: true}} onChange={e => {\r\n            let date = e.target.value.split('T');\r\n            props.updateValue(props.name, date[0], date[1]);\r\n        }} value={props.formData[props.name] ? props.formData[props.name] + 'T' + props.formData[props.name + '_time'] : ''}/>\r\n    </div>;\r\n};\r\nIODateTimeField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIODateTimeField = withStyles(styles)(IODateTimeField);\r\nexport {IODateTimeField};\r\n\r\nlet IOObjectField = function (props) {\r\n    let [state, setState] = useState({});\r\n\r\n    return <div className={props.classes.fieldContainer} style={{width: props.width}}>\r\n        <div className={props.classes.objectContainer}>\r\n            <TextField\r\n                disabled={!!props.disabled}\r\n                className={props.classes.objectField}\r\n                label={I18n.t(props.label)}\r\n                fullWidth={true}\r\n                InputLabelProps={{shrink: true}}\r\n                value={props.formData[props.name] || ''}\r\n                onChange={e => props.updateValue(props.name, e.target.value)}\r\n            />\r\n            <IconButton\r\n                disabled={!!props.disabled}\r\n                size=\"small\"\r\n                onClick={() => setState({showDialog: true})}\r\n                className={props.classes.objectButton}\r\n            >\r\n                <IconSelectID/>\r\n            </IconButton>\r\n        </div>\r\n        {state.showDialog ? <DialogSelectID\r\n                key={'selectDialog_' + props.name}\r\n                socket={ props.socket }\r\n                dialogName={props.name}\r\n                customFilter={props.customFilter}\r\n                title={ I18n.t('Select for ') + props.label}\r\n                selected={ props.formData[props.name] }\r\n                onOk={e => {\r\n                    props.updateValue(props.name, e);\r\n                    setState({showDialog: false});\r\n                } }\r\n                onClose={ () => setState({showDialog: false}) }\r\n            /> : null\r\n        }\r\n    </div>;\r\n};\r\nIOObjectField.propTypes = {\r\n    disabled: PropTypes.bool,\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    customFilter: PropTypes.object,\r\n};\r\nIOObjectField = withStyles(styles)(IOObjectField);\r\nexport {IOObjectField};\r\n\r\nlet IOColorPicker = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <ColorPicker\r\n            disabled={!!props.disabled}\r\n            variant=\"standard\"\r\n            label={I18n.t(props.label)}\r\n            pickerClassName={props.classes.colorPicker}\r\n            inputProps={{\r\n                style: {backgroundColor: props.formData[props.name]}\r\n            }}\r\n            InputProps={{\r\n                endAdornment: !props.disabled && props.formData[props.name] ?\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => props.updateValue(props.name, '')}>\r\n                        <ClearIcon />\r\n                    </IconButton>\r\n                    : undefined,\r\n            }}\r\n            onChange={color => props.updateValue(props.name, color)}\r\n            InputLabelProps={{shrink: true}}\r\n            value={props.formData[props.name] || ''}\r\n        />\r\n    </div>;\r\n};\r\nIOColorPicker.propTypes = {\r\n    disabled: PropTypes.bool,\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIOColorPicker = withStyles(styles)(IOColorPicker);\r\nexport {IOColorPicker};\r\n\r\nlet IOSlider = function (props) {\r\n    return <div className={clsx(props.classes.fieldContainer, props.classes.sliderContainer)}>\r\n        <Typography className={props.classes.sliderLabel}>{props.label}</Typography>\r\n        <Slider\r\n            disabled={!!props.disabled}\r\n            classes={{root: props.classes.sliderRoot}}\r\n            value={parseFloat(props.formData[props.name] || props.min || 0) || 0}\r\n            //getAriaValueText={(props.formData[props.name] || '').toString()}\r\n            step={parseFloat(props.step || (((props.max || 1) - (props.min || 0)) / 10)) || 0.1}\r\n            marks\r\n            onChange={(e, value) => props.updateValue(props.name, value)}\r\n            min={parseFloat(props.min || 0)}\r\n            max={parseFloat(props.max || 1)}\r\n            valueLabelDisplay=\"auto\"\r\n        />\r\n    </div>;\r\n};\r\nIOSlider.propTypes = {\r\n    disabled: PropTypes.bool,\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    step: PropTypes.number,\r\n    formData: PropTypes.object,\r\n};\r\nIOSlider = withStyles(styles)(IOSlider);\r\nexport {IOSlider};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\n\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {MdContentCopy as IconCopy} from 'react-icons/md';\r\nimport {MdMenu as IconDrag} from 'react-icons/md';\r\nimport {MdContentPaste as IconPaste} from 'react-icons/md';\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/fa';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/fa';\r\n\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\n\r\nimport {IOTextField, IOCheckbox, IOSelect, IOObjectField, IOSlider} from './Fields';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\n\r\nconst WIDTHS = {\r\n    instance: 100,\r\n    id: 200,\r\n    chartType: 120,\r\n    dataType: 110,\r\n    color: 100,\r\n    name: 200,\r\n    buttons: 50 + 50 + 16\r\n};\r\n\r\nconst LINE_HEIGHT = 48;\r\n\r\nlet styles = theme => ({\r\n    card: {\r\n        borderStyle: 'dashed',\r\n        borderWidth: 1,\r\n        marginBottom: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        borderColor: theme.palette.grey['600'],\r\n        overflow: 'initial'\r\n    },\r\n    cardPaste: {\r\n        borderColor: theme.type === 'dark' ? theme.palette.grey['400'] : theme.palette.grey['800'],\r\n        backgroundColor: 'rgba(0,0,0,0)',\r\n        opacity: 0.8,\r\n    },\r\n    cardContent: {\r\n        padding: 0,\r\n        margin: 0,\r\n        '&:last-child': {\r\n            padding: 0,\r\n        }\r\n    },\r\n    shortFields: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200,\r\n        },\r\n        position: 'relative',\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 10,\r\n    },\r\n    shortFieldsLast: {\r\n        borderBottom: '0px',\r\n        paddingBottom: 0,\r\n    },\r\n    shortInstanceField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.instance,\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortIdField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.id,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortDataTypeField: {\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.dataType,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        verticalAlign: 'top',\r\n    },\r\n    shortChartTypeField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.chartType,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortColorField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.color,\r\n        width: WIDTHS.color,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortNameField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.name,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortButtonsField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.buttons,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    deleteButton: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    deleteButtonFull: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    copyButtonFull: {\r\n        float: 'right',\r\n        marginRight: 0\r\n    },\r\n    fullWidth: {\r\n        width: '100%',\r\n        minWidth: 200\r\n    },\r\n    paste: {\r\n        opacity: 0.3\r\n    },\r\n    emptyDrag: {\r\n        display: 'inline-block',\r\n        width: 16,\r\n    },\r\n\r\n    chapterMain: {\r\n        backgroundColor: 'rgba(3,104,255,0.1)',\r\n    },\r\n    chapterTexts: {\r\n        backgroundColor: 'rgba(101,253,0,0.1)',\r\n    },\r\n    chapterLine: {\r\n        backgroundColor: 'rgba(255,20,0,0.1)',\r\n    },\r\n    chapterAxis: {\r\n        backgroundColor: 'rgba(179,2,255,0.1)',\r\n    },\r\n    chapterOther: {\r\n        backgroundColor: 'rgba(255,146,0,0.1)',\r\n    },\r\n});\r\n\r\nclass Line extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            width: this.props.width\r\n        };\r\n    }\r\n\r\n    updateField = (name, value) => {\r\n        let line = JSON.parse(JSON.stringify(this.props.line));\r\n        line[name] = value;\r\n\r\n        if (name === 'id') {\r\n            // If ID changed => read unit and name\r\n            if (this.props.line.id !== value) {\r\n                return this.props.socket.getObject(value)\r\n                    .then(obj => {\r\n                        if (obj && obj.common && obj.common.name) {\r\n                            name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n                        } else {\r\n                            let _name = value.split('.');\r\n                            name = _name.length ? _name[_name.length - 1] : '';\r\n                        }\r\n                        if (obj && obj.common && obj.common.unit) {\r\n                            line.unit = obj.common.unit;\r\n                        }\r\n                        if (obj && obj.common && (obj.common.type === 'boolean' || obj.common.type === 'number')) {\r\n                            line.chartType = 'auto';\r\n                            line.aggregate = '';\r\n                        }\r\n                    })\r\n                    .catch(e => {\r\n                        console.error(e);\r\n                        let _name = value.split('.');\r\n                        name = _name.length ? _name[_name.length - 1] : '';\r\n                    })\r\n                    .then(() => {\r\n                        line.name = name;\r\n                        this.props.updateLine(this.props.index, line);\r\n                    });\r\n            }\r\n        }\r\n        if (name === 'fill' && value < 0.01 && !parseFloat(line.thickness)) {\r\n            line.thickness = 1;\r\n        }\r\n\r\n        this.props.updateLine(this.props.index, line);\r\n    };\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.width !== state.width) {\r\n            return {width: props.width};\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderClosedLine() {\r\n        const visible = {};\r\n\r\n        const windowWidth = this.props.width - 95;\r\n        const padding = 8;\r\n\r\n        let idWidth;\r\n        if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.name + WIDTHS.buttons + padding * 6) {\r\n            idWidth = `calc(100% - ${WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.name + WIDTHS.buttons + padding * 6}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n            visible.color = true;\r\n            visible.name = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.buttons + padding * 5) {\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + padding * 5}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n            visible.color = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.buttons + padding * 4) {\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + padding * 4}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.buttons + padding * 3) {\r\n            // nothing visible\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + padding * 3}px)`;\r\n            visible.chartType = true;\r\n        } else {\r\n            // nothing visible\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + padding * 2}px)`;\r\n        }\r\n\r\n        return <div className={this.props.classes.lineClosed}>\r\n            {this.props.provided ? <span title={ I18n.t('Drag me') } {...this.props.provided.dragHandleProps}><IconDrag/></span> : <div className={this.props.classes.emptyDrag}/> }\r\n            {this.props.onPaste && this.props.onPaste ?\r\n                <IconButton\r\n                    title={I18n.t('Paste')}\r\n                    onClick={() => this.props.onPaste()}>\r\n                    <IconPaste/>\r\n                </IconButton>\r\n                :\r\n                <IconButton\r\n                    title={I18n.t('Edit')}\r\n                    onClick={() => this.props.lineOpenToggle(this.props.index)}>\r\n                    <IconFolderClosed/>\r\n                </IconButton>\r\n            }\r\n            <IOSelect\r\n                disabled={!!this.props.onPaste}\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"instance\"\r\n                label=\"Instance\"\r\n                noTranslate={true}\r\n                options={(() => {\r\n                    let result = {'': I18n.t('standard')};\r\n                    this.props.instances.forEach(instance => result[instance._id] = instance._id.replace('system.adapter.', ''));\r\n                    return result;\r\n                })()}\r\n                minWidth={WIDTHS.instance}\r\n                classes={{fieldContainer: clsx(this.props.classes.shortInstanceField, this.props.onPaste && this.props.classes.paste)}}\r\n            />\r\n            <IOObjectField\r\n                disabled={!!this.props.onPaste}\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"id\"\r\n                width={idWidth}\r\n                label=\"ID\"\r\n                customFilter={{common: {custom: this.props.line.instance ? this.props.line.instance.replace('system.adapter.', '') : this.props.systemConfig.common.defaultHistory || true}}}\r\n                classes={{fieldContainer: clsx(this.props.classes.shortIdField, this.props.onPaste && this.props.classes.paste)}}\r\n                socket={this.props.socket}\r\n            />\r\n            {visible.chartType ? <IOSelect\r\n                disabled={!!this.props.onPaste}\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                minWidth={WIDTHS.chartType}\r\n                name=\"chartType\"\r\n                label=\"Chart type\"\r\n                options={{\r\n                    auto: 'Auto',\r\n                    line: 'Line',\r\n                    //bar: 'Bar',\r\n                    scatterplot: 'Scatter plot',\r\n                    steps: 'Steps',\r\n                    stepsStart: 'Steps on start',\r\n                    spline: 'Spline',\r\n                }}\r\n                classes={{fieldContainer: clsx(this.props.classes.shortChartTypeField, this.props.onPaste && this.props.classes.paste)}}\r\n            /> : null}\r\n            {visible.dataType && this.props.line.chartType !== 'auto' ? <IOSelect\r\n                disabled={!!this.props.onPaste}\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                minWidth={WIDTHS.dataType}\r\n                name=\"aggregate\"\r\n                label=\"Type\"\r\n                options={{\r\n                    minmax: 'minmax',\r\n                    average: 'average',\r\n                    min: 'min',\r\n                    max: 'max',\r\n                    total: 'total',\r\n                    onchange: 'raw',\r\n                }}\r\n                classes={{fieldContainer: clsx(this.props.classes.shortDataTypeField, this.props.onPaste && this.props.classes.paste)}}\r\n            /> : null}\r\n            {visible.color ? this.renderColorField(this.props.line, this.updateField, 'Color', 'color', WIDTHS.color, clsx(this.props.classes.shortColorField, this.props.onPaste && this.props.classes.paste), true) : null}\r\n            {visible.name ? <IOTextField\r\n                disabled={!!this.props.onPaste}\r\n                width={WIDTHS.name}\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"name\"\r\n                label=\"Name\"\r\n                classes={{fieldContainer: clsx(this.props.classes.shortNameField, this.props.onPaste && this.props.classes.paste)}}\r\n            /> : null}\r\n            <IconButton\r\n                className={this.props.classes.deleteButton}\r\n                aria-label=\"Delete\"\r\n                title={I18n.t('Delete')}\r\n                onClick={() => this.props.deleteLine(this.props.index)}>\r\n                <IconDelete/>\r\n            </IconButton>\r\n        </div>;\r\n    }\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className, noPadding) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n        return <div className={className}>\r\n            <TextField\r\n                disabled={!!this.props.onPaste}\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name] || ''}\r\n                onClick={() =>\r\n                    !this.props.onPaste && this.setState({['_' + name]: formData[name]}, () =>\r\n                        this.props.onSelectColor(this.state['_' + name], color =>\r\n                            this.setState({['_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))\r\n                }\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: noPadding ? 0 : 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            disabled={!!this.props.onPaste}\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderOpenedLine() {\r\n        const xAxisOptions = {\r\n            '': I18n.t('own axis')\r\n        };\r\n        for (let i = 0; i < this.props.maxLines; i++) {\r\n            if (i !== this.props.index) {\r\n                if (this.props.presetData.lines[i].commonYAxis === undefined || this.props.presetData.lines[i].commonYAxis === '') {\r\n                    xAxisOptions[i] = I18n.t('From line %s', i + 1);\r\n                }\r\n            }\r\n        }\r\n        const ownYAxis = this.props.line.commonYAxis === '' || this.props.line.commonYAxis === undefined;\r\n        return <>\r\n            <div>\r\n                {this.props.provided ? <span title={ I18n.t('Drag me') } {...this.props.provided.dragHandleProps}><IconDrag/></span> : null }\r\n                <IconButton title={ I18n.t('Edit') }\r\n                            onClick={() => this.props.lineOpenToggle(this.props.index)\r\n                            }><IconFolderOpened/></IconButton>\r\n                {I18n.t('Line')} {this.props.index + 1}{this.props.line.name ? ' - ' + this.props.line.name : ''}\r\n                <IconButton\r\n                    className={this.props.classes.deleteButtonFull}\r\n                    aria-label=\"Delete\"\r\n                    title={I18n.t('Delete')}\r\n                    onClick={() => this.props.deleteLine(this.props.index)}>\r\n                    <IconDelete/>\r\n                </IconButton>\r\n                <IconButton\r\n                    className={this.props.classes.copyButtonFull}\r\n                    aria-label=\"Copy\"\r\n                    title={I18n.t('Copy')}\r\n                    onClick={() => this.props.onCopy(this.props.line)}>\r\n                    <IconCopy/>\r\n                </IconButton>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <IOSelect\r\n                    formData={this.props.line}\r\n                    updateValue={this.updateField}\r\n                    name=\"instance\"\r\n                    label=\"Instance\"\r\n                    noTranslate={true}\r\n                    options={(() => {\r\n                        let result = {};\r\n                        this.props.instances.forEach(instance => result[instance._id] = instance._id.replace('system.adapter.', ''));\r\n                        return result;\r\n                    })()}\r\n                />\r\n                <IOObjectField\r\n                    formData={this.props.line}\r\n                    classes={{objectContainer: this.props.classes.fullWidth}}\r\n                    updateValue={this.updateField}\r\n                    name=\"id\"\r\n                    label=\"ID\"\r\n                    width=\"calc(100% - 250px)\"\r\n                    customFilter={{common: {custom: this.props.line.instance ? this.props.line.instance.replace('system.adapter.', '') : this.props.systemConfig.common.defaultHistory || true}}}\r\n                    socket={this.props.socket}/>\r\n            </div>\r\n            <div className={clsx(this.props.classes.shortFields, this.props.classes.chapterMain)}>\r\n                <p className={this.props.classes.title}>{I18n.t('Main')}</p>\r\n                {this.renderColorField(this.props.line, this.updateField, 'Color', 'color')}\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"chartType\" label=\"Chart type\" options={{\r\n                    auto: 'Auto (Line or Steps)',\r\n                    line: 'Line',\r\n                    //bar: 'Bar',\r\n                    scatterplot: 'Scatter plot',\r\n                    steps: 'Steps',\r\n                    stepsStart: 'Steps on start',\r\n                    spline: 'Spline',\r\n                }}/>\r\n                {this.props.line.chartType !== 'auto' ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"aggregate\" label=\"Type\" options={{\r\n                    minmax: 'minmax',\r\n                    average: 'average',\r\n                    min: 'min',\r\n                    max: 'max',\r\n                    total: 'total',\r\n                    onchange: 'raw',\r\n                }}/> : null }\r\n                {(this.props.line.chartType !== 'auto' && this.props.line.chartType === 'scatterplot') || this.props.line.points ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"symbolSize\" label=\"Point size\" min={1} type=\"number\"/> : null }\r\n                {this.props.line.chartType !== 'scatterplot' ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"validTime\" label=\"Valid time (sec)\" min={0} type=\"number\" title={I18n.t('If the current value is not older than X seconds, assume it is still the same.')}/> : null }\r\n                {this.props.presetData.legend ? <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"hide\" label=\"Show only in legend\"/> : null}\r\n            </div>\r\n            <div className={clsx(this.props.classes.shortFields, this.props.classes.chapterTexts)}>\r\n                <p className={this.props.classes.title}>{I18n.t('Texts')}</p>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"name\" label=\"Name\"/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"unit\" label=\"Unit\" />\r\n            </div>\r\n            {this.props.line.chartType !== 'scatterplot' ? <div className={clsx(this.props.classes.shortFields, this.props.classes.chapterLine)}>\r\n                <p className={this.props.classes.title}>{I18n.t('Line and area')}</p>\r\n                <IOSlider formData={this.props.line} updateValue={this.updateField} name=\"fill\" label=\"Fill (from 0 to 1)\"/>\r\n                <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"points\" label=\"Show points\"/>\r\n                {this.props.line.points ?\r\n                    <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"symbolSize\" label=\"Point size\" min={1} type=\"number\"/> : null}\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"thickness\" label=\"ØL - Line thickness\" min={this.props.line.fill > 0.01 ? 0 : 1} type=\"number\"/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"shadowsize\" label=\"ØS - Shadow size\" min={0} type=\"number\"/>\r\n            </div> : null}\r\n            <div className={clsx(this.props.classes.shortFields, this.props.classes.chapterAxis)}>\r\n                <p className={this.props.classes.title}>{I18n.t('Axis')}</p>\r\n                {!this.props.index ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"xaxe\" label=\"X Axis position\" options={{\r\n                    '': 'bottom',\r\n                    'top': 'top',\r\n                    'off': 'off',\r\n                    /*off: 'off',\r\n                    left: 'left',\r\n                    right: 'right',\r\n                    topColor: 'top colored',\r\n                    bottomColor: 'bottom colored',*/\r\n                }}/> : null }\r\n                {!this.props.index ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"xticks\" label=\"X-Axis ticks\" type=\"number\"/> : null }\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"offset\" label=\"X-Offset\" options={{\r\n                    '0': '0 seconds',\r\n                    '10': '10 seconds',\r\n                    '30': '30 seconds',\r\n                    '60': '60 seconds',\r\n                    '120': '2 minutes',\r\n                    '180': '3 minutes',\r\n                    '240': '4 minutes',\r\n                    '300': '5 minutes',\r\n                    '600': '10 minutes',\r\n                    '900': '15 minutes',\r\n                    '1800': '30 minutes',\r\n                    '2700': '45 minutes',\r\n                    '3600': '1 hour',\r\n                    '7200': '2 hours',\r\n                    '21600': '6 hours',\r\n                    '43200': '12 hours',\r\n                    '86400': '1 day',\r\n                    '172800': '2 days',\r\n                    '259200': '3 days',\r\n                    '345600': '4 days',\r\n                    '604800': '1 week',\r\n                    '1209600': '2 weeks',\r\n                    '1m': '1 month',\r\n                    '2m': '2 months',\r\n                    '3m': '3 months',\r\n                    '6m': '6 months',\r\n                    '1y': '1 year',\r\n                    '2y': '2 years',\r\n                }}/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"yOffset\" label=\"Y-Offset\" type=\"number\"/>\r\n\r\n                <br/>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"commonYAxis\" label=\"Common Y Axis\" noTranslate={true} options={xAxisOptions}/>\r\n\r\n                {ownYAxis ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"yaxe\" label=\"Y Axis position\" options={{\r\n                    '': '',\r\n                    off: 'off',\r\n                    left: 'left',\r\n                    right: 'right',\r\n                    leftColor: 'left colored',\r\n                    rightColor: 'right colored',\r\n                }}/> : null}\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"min\" label=\"Min\" /> : null }\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"max\" label=\"Max\" /> : null }\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"yticks\" label=\"Y-Axis ticks\" type=\"number\"/> : null }\r\n            </div>\r\n            <div className={clsx(this.props.classes.shortFields, this.props.classes.chapterOther)}>\r\n                <p className={this.props.classes.title}>{I18n.t('Others')}</p>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"ignoreNull\" label=\"NULL as\" options={{\r\n                    'false': 'default',\r\n                    'true': 'ignore null values',\r\n                    '0': 'use 0 instead of null values',\r\n                }}/>\r\n                {/*<IOTextField formData={this.props.line} updateValue={this.updateField} name=\"smoothing\" label=\"Smoothing\" type=\"number\" min={0}/>*/}\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"afterComma\" label=\"Digits after comma\" type=\"number\" min={0}/>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"lineStyle\" label=\"Line style\" options={{\r\n                    'solid': 'solid',\r\n                    'dashed': 'dashed',\r\n                    'dotted': 'dotted',\r\n                }}/>\r\n            </div>\r\n            {/*<div className={clsx(this.props.classes.shortFields, this.props.classes.shortFieldsLast)}>\r\n                            <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"dashes\" label=\"Dashes\"/>\r\n                            {this.props.line.dashes ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"dashLength\" label=\"Dashes length\" min={1} type=\"number\"/> : null}\r\n                            {this.props.line.dashes ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"spaceLength\" label=\"Space length\" min={1} type=\"number\"/> : null}\r\n                        </div>*/}\r\n        </>\r\n    }\r\n\r\n    render() {\r\n        return <Card\r\n            className={clsx(this.props.classes.card, this.props.onPaste && this.props.classes.cardPaste)}\r\n            style={{background: this.props.snapshot && this.props.snapshot.isDragging ? this.props.theme.palette.secondary.light : undefined}}\r\n        >\r\n            <CardContent className={this.props.classes.cardContent}>\r\n                { this.props.opened && !this.props.onPaste ? this.renderOpenedLine() : this.renderClosedLine()}\r\n            </CardContent>\r\n        </Card>;\r\n    }\r\n}\r\n\r\nLine.propTypes = {\r\n    line: PropTypes.object,\r\n    maxLines: PropTypes.number,\r\n    socket: PropTypes.object,\r\n    updateLine: PropTypes.func,\r\n    provided: PropTypes.object,\r\n    snapshot: PropTypes.object,\r\n    index: PropTypes.number,\r\n    opened: PropTypes.bool,\r\n    instances: PropTypes.array,\r\n    lineOpenToggle: PropTypes.func,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    presetData: PropTypes.object,\r\n    onSelectColor: PropTypes.func,\r\n    systemConfig: PropTypes.object.isRequired,\r\n    onCopy: PropTypes.func,\r\n    onPaste: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(Line);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IOTextField, IOSelect, IOObjectField, IOSlider} from './Fields';\r\n\r\nimport {MdContentCopy as IconCopy, MdContentPaste as IconPaste, MdDelete as IconDelete} from 'react-icons/md';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\n\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nconst WIDTHS = {\r\n    lineId: 100,\r\n    upperValueOrId: 100,\r\n    lowerValueOrId: 100,\r\n    color: 100,\r\n    fill: 100,\r\n    text: 200,\r\n    buttons: 100\r\n};\r\n\r\nconst LINE_HEIGHT = 48;\r\n\r\nlet styles = theme => ({\r\n    card: {\r\n        borderStyle: 'dashed',\r\n        borderWidth: 1,\r\n        marginBottom: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        borderColor: theme.palette.grey['600'],\r\n        overflow: 'initial'\r\n    },\r\n    cardPaste: {\r\n        borderColor: theme.type === 'dark' ? theme.palette.grey['400'] : theme.palette.grey['800'],\r\n        backgroundColor: 'rgba(0,0,0,0)',\r\n        opacity: 0.8,\r\n    },\r\n    cardContent: {\r\n        padding: 0,\r\n        margin: 0,\r\n        '&:last-child': {\r\n            padding: 0,\r\n            paddingRight: 20\r\n        },\r\n        paddingRight: 20\r\n    },\r\n    shortFields: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200\r\n        },\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    shortFieldsLast: {\r\n        borderBottom: 0,\r\n        paddingBottom: 0,\r\n        position: 'relaitve',\r\n    },\r\n    shortLineIdField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.lineId,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortUpperValueOrIdField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.upperValueOrId,\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortLowerValueOrIdField: {\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.lowerValueOrId,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortColorField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.color,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortFillField: {\r\n        display: 'inline-flex',\r\n        width: WIDTHS.fill,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    sliderRoot: {\r\n        marginTop: 10,\r\n    },\r\n    shortTextField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.text,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortButtonsField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.buttons,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    lineClosed: {\r\n        display: 'inline-flex',\r\n        flexFlow: 'column wrap',\r\n        overflow: 'hidden',\r\n        flexDirection: 'row',\r\n        flex: 1,\r\n        height: LINE_HEIGHT\r\n    },\r\n    lineClosedContainer: {\r\n        display: 'flex'\r\n    },\r\n    deleteButton: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    deleteButtonFull: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    copyButtonFull: {\r\n        float: 'right',\r\n        marginRight: 0\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 40,\r\n    },\r\n});\r\n\r\nclass Mark extends React.Component {\r\n    state = {\r\n        /*\r\n            'lineId':'0',\r\n            'upperValueOrId':'20',\r\n            'fill':'1',\r\n            'color':'#FF0000',\r\n            'ol':'1',\r\n            'os':'0',\r\n            'text':'11',\r\n            'textPosition':'l',\r\n            'textOffset':'2',\r\n            'textColor':'#FF0000',\r\n            'textSize':'2',\r\n            'lowerValueOrId':'20'\r\n        */\r\n      };\r\n\r\n    updateField = (name, value) => {\r\n        const mark = JSON.parse(JSON.stringify(this.props.mark));\r\n        mark[name] = value;\r\n        this.props.updateMark(this.props.index, mark);\r\n    };\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n\r\n        return <div className={className}>\r\n            <TextField\r\n                disabled={!!this.props.onPaste}\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name]}\r\n                onClick={() =>\r\n                    !this.props.onPaste && this.setState({['_' + name]: formData[name]}, () =>\r\n                        this.props.onSelectColor(this.state['_' + name], color =>\r\n                            this.setState({['_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))\r\n                }\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: !this.props.onPaste && formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderClosedLine(lines, colors) {\r\n        return <div className={this.props.classes.lineClosedContainer}>\r\n            <div className={this.props.classes.lineClosed}>\r\n                {this.props.onPaste && this.props.onPaste ?\r\n                    <IconButton\r\n                        title={I18n.t('Paste')}\r\n                        onClick={() => this.props.onPaste()}>\r\n                        <IconPaste/>\r\n                    </IconButton>\r\n                    :\r\n                    <IconButton\r\n                        title={ I18n.t('Edit') }\r\n                        onClick={() => this.props.markOpenToggle(this.props.index)}>\r\n                        <IconFolderClosed/>\r\n                    </IconButton>\r\n                }\r\n                <IOSelect\r\n                    disabled={!!this.props.onPaste}\r\n                    noTranslate={true}\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"lineId\"\r\n                    label=\"Line ID\"\r\n                    options={lines}\r\n                    colors={colors}\r\n                    classes={{fieldContainer: this.props.classes.shortLineIdField}}\r\n                    minWidth={WIDTHS.lineId}\r\n                />\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' ?\r\n                    <IOObjectField\r\n                        disabled={!!this.props.onPaste}\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"upperValueOrId\"\r\n                        label=\"Upper value or ID\"\r\n                        socket={this.props.socket}\r\n                        classes={{fieldContainer: this.props.classes.shortUpperValueOrIdField}}\r\n                        minWidth={WIDTHS.upperValueOrId}\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOObjectField\r\n                        disabled={!!this.props.onPaste}\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"lowerValueOrId\"\r\n                        label=\"Lower value or ID\"\r\n                        socket={this.props.socket}\r\n                        classes={{fieldContainer: this.props.classes.shortLowerValueOrIdField}}\r\n                        minWidth={WIDTHS.lowerValueOrId}\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    this.renderColorField(this.props.mark, this.updateField, 'Color', 'color', WIDTHS.color, this.props.classes.shortColorField) : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== ''  &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' &&\r\n                 this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== ''?\r\n                    <IOSlider\r\n                        disabled={!!this.props.onPaste}\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        minWidth={WIDTHS.dataType}\r\n                        classes={{fieldContainer: this.props.classes.shortFillField, sliderRoot: this.props.classes.sliderRoot}}\r\n                        name=\"fill\"\r\n                        label=\"Fill (from 0 to 1)\"\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOTextField\r\n                        disabled={!!this.props.onPaste}\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"text\"\r\n                        label=\"Text\"\r\n                        classes={{fieldContainer: this.props.classes.shortTextField}}\r\n                        minWidth={WIDTHS.fill}\r\n                    /> : null}\r\n            </div>\r\n            <IconButton\r\n                style={{ marginLeft: 5 }} aria-label=\"Delete\" title={I18n.t('Delete')}\r\n                onClick={() => this.props.deleteMark(this.props.index)}>\r\n                <IconDelete/>\r\n            </IconButton>\r\n        </div>\r\n    }\r\n\r\n    renderOpenedCard(lines, colors) {\r\n        return <>\r\n            <div>\r\n                <IconButton title={ I18n.t('Edit') }\r\n                            onClick={() => this.props.markOpenToggle(this.props.index)\r\n                            }><IconFolderOpened/></IconButton>\r\n                {I18n.t('Mark')} {this.props.index + 1}{this.props.mark.text ? ' - ' + this.props.mark.text : ''}\r\n                <IconButton\r\n                    className={this.props.classes.deleteButtonFull}\r\n                    aria-label=\"Delete\"\r\n                    title={I18n.t('Delete')}\r\n                    onClick={() => this.props.deleteMark(this.props.index)}>\r\n                    <IconDelete/>\r\n                </IconButton>\r\n                <IconButton\r\n                    className={this.props.classes.copyButtonFull}\r\n                    aria-label=\"Copy\"\r\n                    title={I18n.t('Copy')}\r\n                    onClick={() => this.props.onCopy(this.props.mark)}>\r\n                    <IconCopy/>\r\n                </IconButton>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Limits')}</p>\r\n                <IOSelect\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"lineId\"\r\n                    noTranslate={true}\r\n                    label=\"Line ID\"\r\n                    options={lines}\r\n                    colors={colors}\r\n                />\r\n\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' ?\r\n                    <IOObjectField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"upperValueOrId\"\r\n                        label=\"Upper value or ID\"\r\n                        socket={this.props.socket}\r\n                    /> : null }\r\n\r\n                {this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOObjectField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"lowerValueOrId\"\r\n                        label=\"Lower value or ID\"\r\n                        socket={this.props.socket}\r\n                    /> : null }\r\n            </div>\r\n\r\n            {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') ||\r\n            (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                <div className={this.props.classes.shortFields}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Style')}</p>\r\n                    {this.renderColorField(this.props.mark, this.updateField, 'Color', 'color')}\r\n\r\n                    <IOTextField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField} name=\"ol\" label=\"ØL Line thickness\" type=\"number\"/>\r\n\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"os\" label=\"ØS Shadow size\" type=\"number\"/>\r\n\r\n                    <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"lineStyle\" label=\"Line style\" options={{\r\n                        'solid': 'solid',\r\n                        'dashed': 'dashed',\r\n                        'dotted': 'dotted',\r\n                    }}/>\r\n\r\n                    {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') &&\r\n                    (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                        <IOSlider formData={this.props.mark} updateValue={this.updateField} name=\"fill\" label=\"Fill (from 0 to 1)\"/> : null}\r\n                </div> : null}\r\n\r\n            {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') ||\r\n            (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                <div className={clsx(this.props.classes.shortFields, this.props.classes.shortFieldsLast)}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Label')}</p>\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"text\" label=\"Text\"/>\r\n                    {this.props.mark.text ?\r\n                        <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"textPosition\" label=\"Text position\" options={{\r\n                            'l': 'Left',\r\n                            'r': 'Right',\r\n                        }}/> : null}\r\n                    {this.props.mark.text ? <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"textOffset\" label=\"Text offset\" type=\"number\"/> : null}\r\n                    {this.props.mark.text ? <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"textSize\" label=\"Text size\" type=\"number\"/> : null}\r\n                    {this.props.mark.text ? this.renderColorField(this.props.mark, this.updateField, 'Text color', 'textColor') : null}\r\n                </div> : null }\r\n        </>;\r\n    }\r\n\r\n    render() {\r\n        let lines = {};\r\n        let colors = {};\r\n        this.props.presetData && this.props.presetData.lines.forEach((line, index) => {\r\n            lines[index] = index + ' - ' + (line.id || I18n.t('No ID yet'));\r\n            colors[index] = line.color;\r\n        });\r\n        return <Card className={clsx(this.props.classes.card, this.props.onPaste && this.props.classes.cardPaste)}>\r\n            <CardContent className={this.props.classes.cardContent}>\r\n                { this.props.opened && !this.props.onPaste ? this.renderOpenedCard(lines, colors) : this.renderClosedLine(lines, colors)}\r\n            </CardContent>\r\n        </Card>\r\n    }\r\n}\r\n\r\nMark.propTypes = {\r\n    mark: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    updateMark: PropTypes.func,\r\n    index: PropTypes.number,\r\n    opened: PropTypes.bool,\r\n    instances: PropTypes.array,\r\n    markOpenToggle: PropTypes.func,\r\n    onSelectColor: PropTypes.func,\r\n    onCopy: PropTypes.func,\r\n    onPaste: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(Mark);","import Utils from \"@iobroker/adapter-react/Components/Utils\";\n\nconst DEFAULT_PRESET = {\n    lines:[\n        /*\n        {\n            'id':'system.adapter.admin.0.cpu',\n            'offset':'0',\n            'aggregate':'minmax',\n            'color':'#FF0000',\n            'thickness':'3',\n            'shadowsize':'3',\n            'name':'Line 1',\n            'xaxe':'off',\n            'ignoreNull':'false',\n            'afterComma':'2',\n            'dashes':'true',\n            'dashLength':'10',\n            'spaceLength':'10',\n            'min':'-0.1',\n            'max':'1',\n            'points':'true',\n            'fill':'4',\n            'unit':'2',\n            'yaxe':'left',\n            'yOffset':'1',\n            'xticks':'2',\n            'yticks':'3',\n            'smoothing':'4'\n        },\n        {\n            'id':'system.adapter.admin.0.memHeapTotal',\n            'offset':'0',\n            'aggregate':'minmax',\n            'color':'#00FF00',\n            'thickness':'3',\n            'shadowsize':'3',\n            'min':'-0.1',\n            'points':'false'\n        },\n        {\n            'id':'system.adapter.admin.0.memRss',\n            'offset':'0',\n            'aggregate':'minmax',\n            'color':'#0000FF',\n            'thickness':'3',\n            'shadowsize':'3',\n            'xaxe':'off',\n            'min':'-0.1'\n        }\n        */\n    ],\n    marks: [\n        /*\n        {\n            'lineId':'0',\n            'upperValueOrId':'20',\n            'fill':'1',\n            'color':'#FF0000',\n            'ol':'1',\n            'os':'0',\n            'text':'11',\n            'textPosition':'l',\n            'textOffset':'2',\n            'textColor':'#FF0000',\n            'textSize':'2',\n            'lowerValueOrId':'20'\n        }\n        */\n    ],\n    timeType: 'relative',\n    relativeEnd: '30minutes',\n    range: '120',\n    aggregateType: 'count',\n    aggregateSpan: 300,\n    legend: 'ne',\n    hoverDetail: true,\n    zoom: true,\n    animation: 0,\n    live: '15',\n    ticks: '',\n    width: '100%',\n    height: '100%',\n    noBorder: 'noborder',\n    window_bg: '',\n    bg_custom: '',\n    x_labels_color: '',\n    y_labels_color: '',\n    border_color: '',\n    grid_color: '',\n    grid_hideX: false,\n    grid_hideY: false,\n    border_width: '',\n    barColor: '',\n    barLabels: 'topover',\n    barWidth: '',\n    barFontSize: '',\n    barFontColor: '',\n    title: '',\n    titlePos: '',\n    titleColor: '',\n    titleSize: '',\n    legColumns: '',\n    legBgOpacity: '',\n    legBg: '',\n    timeFormat: '',\n    export: true,\n    legendDirection: '', // '' - horizontal, 'vertical' - vertical\n};\n\nfunction getDefaultLine(systemSettings, instance, obj, language) {\n    const isBoolean = obj && obj.common && obj.common.type === 'boolean';\n\n    const line = {\n        name:       ((obj && obj.common && obj.common.name && Utils.getObjectNameFromObj(obj, null, {language})) || '').trim(),\n        id:         obj ? obj._id : '',\n        instance:   instance === systemSettings.common.defaultHistory ? '' : instance || '',\n        thickness:  2,\n        chartType:  isBoolean ? 'steps'    : 'line',\n        aggregate:  isBoolean ? 'onchange' : 'minmax',\n        isBoolean:  isBoolean,\n        symbolSize: 3,\n        validTime:  35, // 35 seconds\n    };\n\n    if (obj && obj.common && obj.common.color) {\n        line.color = obj.common.color;\n    }\n    if (obj && obj.common && obj.common.unit) {\n        line.unit = obj.common.unit;\n    }\n    if (isBoolean) {\n        line.yaxe = 'off';\n        line.min = '0';\n        line.yticks = 1;\n        line.fill = 0.3;\n        line.symbolSize = 1;\n    }\n\n    return line;\n}\n\nfunction getDefaultPreset(systemSettings, instance, obj, language) {\n    const preset = JSON.parse(JSON.stringify(DEFAULT_PRESET));\n\n    preset.useComma = systemSettings.common.isFloatComma || false;\n\n    if (systemSettings.common.dateFormat) {\n        //preset.timeFormat = 'HH:mm:ss ' + systemSettings.common.dateFormat;\n    }\n\n    preset.lines.push(getDefaultLine(systemSettings, instance, obj, language));\n\n    return preset;\n}\n\n// eslint-disable-next-line\nexport default {\n    getDefaultPreset,\n    getDefaultLine\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { ChromePicker } from 'react-color'\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TabList from '@material-ui/lab/TabList';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport TabPanel from '@material-ui/lab/TabPanel';\r\nimport TabContext from '@material-ui/lab/TabContext';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\n\r\nimport {MdAdd as IconAdd, MdClose as IconCancel} from 'react-icons/md';\r\nimport {MdSave as IconSave} from 'react-icons/md';\r\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\r\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\r\nimport IconClear from '@material-ui/icons/Close';\r\nimport {MdFullscreen as IconNewWindow} from 'react-icons/md';\r\nimport IconClose from '@material-ui/icons/Close';\r\nimport IconDelete from '@material-ui/icons/Delete';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport IconCopy from '@iobroker/adapter-react/icons/IconCopy';\r\n\r\nimport {IOTextField, IOCheckbox, IOSelect, IODateTimeField} from './Fields';\r\nimport Line from './Line';\r\nimport Mark from './Mark';\r\nimport DefaultPreset from './DefaultPreset';\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\n\r\nconst styles = theme => ({\r\n    tabsBody: {\r\n        overflowY: 'auto',\r\n        flex: 1\r\n    },\r\n    tabsContainer: {\r\n        flexDirection: 'row'\r\n    },\r\n    tabContent: {\r\n        paddingTop: theme.spacing(1),\r\n        position: 'relative',\r\n        minHeight: 'calc(100% - 32px)'\r\n    },\r\n    buttonAdd: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1),\r\n        right: theme.spacing(1),\r\n        zIndex: 3,\r\n    },\r\n    buttonExpandAll: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1) + 42,\r\n        right: theme.spacing(1),\r\n        opacity: 0.5,\r\n        zIndex: 3,\r\n    },\r\n    buttonCollapseAll: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1) + 42 * 2,\r\n        right: theme.spacing(1),\r\n        opacity: 0.5,\r\n        zIndex: 3,\r\n    },\r\n    buttonSave: {\r\n        color: theme.type === 'dark' ? '#CC0000' : '#CC0000'\r\n    },\r\n    noContent : {\r\n        padding: theme.spacing(1),\r\n        height: 64,\r\n        verticalAlign: 'middle',\r\n        lineHeight: '64px',\r\n        width: '100%',\r\n    },\r\n    dragHint: {\r\n        paddingLeft: theme.spacing(1),\r\n        fontSize: 10,\r\n        fontStyle: 'italic',\r\n        opacity: 0.8,\r\n    },\r\n    marginTop: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    noPaddingOnSide: {\r\n        //paddingRight: 0,\r\n        //paddingLeft: 0,\r\n    },\r\n    group: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200,\r\n        },\r\n        position: 'relative',\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 10,\r\n    },\r\n    buttonCopyLink: {\r\n        minHeight: 30,\r\n        marginTop: 20,\r\n        marginBottom: 10,\r\n        marginLeft: theme.spacing(2),\r\n    }\r\n});\r\n\r\nconst PREDEFINED_COLORS_MARKS = [\r\n    '#144578',\r\n    '#1868A8',\r\n    '#665191',\r\n    '#a05195',\r\n    '#d45087',\r\n    '#f95d6a',\r\n    '#ff7c43',\r\n    '#ffa600',\r\n];\r\n\r\nconst getItemStyle = (isDragging, draggableStyle) => ({\r\n    // some basic styles to make the items look a bit nicer\r\n    userSelect: 'none',\r\n    width: '100%',\r\n    // change background colour if dragging\r\n    background: isDragging ? 'lightgreen' : 'grey',\r\n    // styles we need to apply on draggables\r\n    ...draggableStyle\r\n});\r\n\r\nclass PresetTabs extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let copiedObject = window.sessionStorage.getItem('echarts.copiedObject');\r\n        if (copiedObject) {\r\n            try {\r\n                copiedObject = JSON.parse(copiedObject)\r\n            } catch (e) {\r\n                copiedObject = null;\r\n            }\r\n        }\r\n\r\n        this.state = {\r\n            presetData: DefaultPreset.getDefaultPreset(this.props.systemConfig),\r\n            selectedTab: window.localStorage.getItem('App.echarts.presetTabs.selectedTab') !== null ? window.localStorage.getItem('App.echarts.presetTabs.selectedTab') : '0',\r\n            linesOpened: window.localStorage.getItem('App.echarts.Lines.opened') !== null ? JSON.parse(window.localStorage.getItem('App.echarts.Lines.opened')) : [],\r\n            marksOpened: window.localStorage.getItem('App.echarts.Marks.opened') !== null ? JSON.parse(window.localStorage.getItem('App.echarts.Marks.opened')) : [],\r\n            deleteLineDialog: null,\r\n            deleteMarkDialog: null,\r\n            showColorDialog: false,\r\n            colorDialogValue: '',\r\n            webInstances: [],\r\n            toast: '',\r\n            copiedObject,\r\n        };\r\n\r\n        this.props.socket.getAdapterInstances('web')\r\n            .then(instances => {\r\n                const webInstances = instances.map(obj => ({\r\n                    index: obj._id.split('.').pop(),\r\n                    link: `http${obj.native.secure ? 's' : ''}://${obj.native.bind === '0.0.0.0' ? window.location.hostname : obj.native.bind}:${obj.native.port}`}))\r\n\r\n                this.setState({webInstances});\r\n            });\r\n\r\n        this.colorPickerCb = null;\r\n    }\r\n\r\n    lineOpenToggle = index => {\r\n        let linesOpened = JSON.parse(JSON.stringify(this.state.linesOpened));\r\n        linesOpened[index] = !this.state.linesOpened[index];\r\n        this.setState({linesOpened});\r\n        window.localStorage.setItem('App.echarts.Lines.opened', JSON.stringify(linesOpened));\r\n    };\r\n\r\n    markOpenToggle = index => {\r\n        let marksOpened = JSON.parse(JSON.stringify(this.state.marksOpened));\r\n        marksOpened[index] = !this.state.marksOpened[index];\r\n        this.setState({marksOpened});\r\n        window.localStorage.setItem('App.echarts.Marks.opened', JSON.stringify(marksOpened));\r\n    };\r\n\r\n    updateField = (name, value, time) => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData[name] = value;\r\n        if (time) {\r\n            presetData[name + '_time'] = time;\r\n        }\r\n        this.props.onChange(presetData);\r\n    };\r\n\r\n    updateMark = (index, markData) => {\r\n        let marks = JSON.parse(JSON.stringify(this.props.presetData.marks));\r\n        marks[index] = markData;\r\n        this.updateField('marks', marks);\r\n    };\r\n\r\n    updateLine = (index, lineData) => {\r\n        let lines = JSON.parse(JSON.stringify(this.props.presetData.lines));\r\n        lines[index] = lineData;\r\n        this.updateField('lines', lines);\r\n    };\r\n\r\n    expandAllLines = () => {\r\n        const linesOpened = this.props.presetData.lines.map(() => true);\r\n        window.localStorage.setItem('App.echarts.Lines.opened', JSON.stringify(linesOpened));\r\n        this.setState({linesOpened});\r\n    };\r\n\r\n    collapseAllLines = () => {\r\n        window.localStorage.setItem('App.echarts.Lines.opened', JSON.stringify([]));\r\n        this.setState({linesOpened: []});\r\n    };\r\n\r\n    expandAllMarks = () => {\r\n        const marksOpened = this.props.presetData.marks.map(() => true);\r\n        window.localStorage.setItem('App.echarts.Marks.opened', JSON.stringify([]));\r\n        this.setState({marksOpened});\r\n    };\r\n\r\n    collapseAllMarks = () => {\r\n        window.localStorage.setItem('App.echarts.Marks.opened', JSON.stringify([]));\r\n        this.setState({marksOpened: []});\r\n    };\r\n\r\n    addMark(data) {\r\n        let presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        if (data) {\r\n            presetData.marks.push(JSON.parse(JSON.stringify(data)));\r\n        } else {\r\n            const len = this.props.presetData.marks.length;\r\n            const color = PREDEFINED_COLORS_MARKS[len % PREDEFINED_COLORS_MARKS.length];\r\n            presetData.marks.push({color});\r\n        }\r\n        this.props.onChange(presetData);\r\n    }\r\n\r\n    deleteMark = index => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.marks.splice(index, 1);\r\n        const marksOpened = [...this.state.marksOpened];\r\n        marksOpened.splice(index, 1);\r\n        this.setState({marksOpened}, () =>\r\n            this.props.onChange(presetData));\r\n    };\r\n\r\n    addLine(data) {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        if (data) {\r\n            presetData.lines.push(JSON.parse(JSON.stringify(data)));\r\n        } else {\r\n            const len = this.props.presetData.lines.length;\r\n            const line = DefaultPreset.getDefaultLine(this.props.systemConfig);\r\n            line.xaxe = !len ? undefined : 'off';\r\n            presetData.lines.push(line);\r\n        }\r\n        this.props.onChange(presetData);\r\n    }\r\n\r\n    deleteLine = index => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.lines.splice(index, 1);\r\n        const linesOpened = [...this.state.linesOpened];\r\n        linesOpened.splice(index, 1);\r\n        this.setState({linesOpened}, () => this.props.onChange(presetData));\r\n    };\r\n\r\n    renderDeleteLineDialog() {\r\n        return this.state.deleteLineDialog !== null ? <Dialog\r\n            open={ true }\r\n            key=\"deleteLineDialog\"\r\n            onClose={ () => this.setState({deleteLineDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this line?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    autoFocus\r\n                    onClick={() => {\r\n                        this.deleteLine(this.state.deleteLineDialog);\r\n                        this.setState({deleteLineDialog: null});\r\n                    }}\r\n                    startIcon={<IconDelete />}\r\n                >\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    onClick={ () => this.setState({deleteLineDialog: null}) }\r\n                    startIcon={<IconCancel/>}\r\n                >\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderDeleteMarkDialog() {\r\n        return this.state.deleteMarkDialog !== null ? <Dialog\r\n            open={ true }\r\n            key=\"deleteMarkDialog\"\r\n            onClose={ () => this.setState({deleteMarkDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this mark?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    onClick={() => {\r\n                        this.deleteMark(this.state.deleteMarkDialog);\r\n                        this.setState({deleteMarkDialog: null});\r\n                    }}\r\n                    startIcon={<IconDelete/>}\r\n                >\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    onClick={ () => this.setState({deleteMarkDialog: null}) }\r\n                    startIcon={<IconCancel/>}\r\n                >\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    showColorPicker(value, cb) {\r\n        this.colorPickerCb = cb;\r\n        this.setState({colorDialogValue: value, showColorDialog: true});\r\n    }\r\n\r\n    renderColorDialog() {\r\n        return <Dialog\r\n            onClose={() => {\r\n                this.colorPickerCb = null;\r\n                this.setState({showColorDialog: false});\r\n            }}\r\n            open={this.state.showColorDialog}>\r\n            <ChromePicker\r\n                color={this.state.colorDialogValue}\r\n                onChange={value => {\r\n                    this.setState({colorDialogValue: value}, () =>\r\n                        this.colorPickerCb && this.colorPickerCb(value));\r\n                }}\r\n            />\r\n        </Dialog>;\r\n    }\r\n\r\n    renderTabLines() {\r\n        const anyClosed = this.props.presetData.lines.length > 1 && this.props.presetData.lines.find((l, i) => !this.state.linesOpened[i]);\r\n        const anyOpened = this.props.presetData.lines.length > 1 && this.props.presetData.lines.find((l, i) => this.state.linesOpened[i]);\r\n\r\n        return <Droppable droppableId=\"droppable\">\r\n            {(provided, snapshot) =>\r\n                <div\r\n                    {...provided.droppableProps}\r\n                    ref={provided.innerRef}\r\n                    style={{\r\n                        background: snapshot.isDraggingOver ? this.props.theme.palette.secondary.dark : undefined,\r\n                        width: '100%',\r\n                        minHeight: '100%',\r\n                    }}\r\n                >\r\n                    <TabPanel value=\"0\" classes={{root: this.props.classes.tabContent}}>\r\n                        <Fab onClick={() => this.addLine()} size=\"small\" color=\"secondary\" className={this.props.classes.buttonAdd}         title={I18n.t('Add line to chart')}><IconAdd/></Fab>\r\n                        {anyClosed ? <Fab onClick={this.expandAllLines}   size=\"small\" color=\"default\" className={this.props.classes.buttonExpandAll}  title={I18n.t('Expand all lines')}><IconExpand/></Fab> : null}\r\n                        {anyOpened ? <Fab onClick={this.collapseAllLines} size=\"small\" color=\"default\" className={this.props.classes.buttonCollapseAll} title={I18n.t('Collapse all lines')}><IconCollapse/></Fab> : null}\r\n                        {this.props.presetData.lines.length ? this.props.presetData.lines.map((line, index) =>\r\n                            <Draggable key={line.id + '_' + index} draggableId={line.id + '_' + index} index={index}>\r\n                                {(provided, snapshot) =>\r\n                                    <div\r\n                                        ref={provided.innerRef}\r\n                                        {...provided.draggableProps}\r\n                                        style={getItemStyle(snapshot.isDragging, provided.draggableProps.style)}\r\n                                    >\r\n                                        <Line\r\n                                            provided={provided}\r\n                                            snapshot={snapshot}\r\n                                            theme={this.props.theme}\r\n                                            instances={this.props.instances}\r\n                                            systemConfig={this.props.systemConfig}\r\n                                            line={line}\r\n                                            presetData={this.props.presetData}\r\n                                            width={this.props.width}\r\n                                            updateLine={this.updateLine}\r\n                                            deleteLine={index => this.setState({deleteLineDialog: index})}\r\n                                            index={index}\r\n                                            key={index}\r\n                                            socket={this.props.socket}\r\n                                            opened={typeof this.state.linesOpened[index] !== 'undefined' && this.state.linesOpened[index] === true}\r\n                                            lineOpenToggle={this.lineOpenToggle}\r\n                                            maxLines={this.props.presetData.lines.length}\r\n                                            onSelectColor={(value, cb) => this.showColorPicker(value, cb)}\r\n                                            onCopy={line => {\r\n                                                this.setState({copiedObject: {type: 'line', data: JSON.parse(JSON.stringify(line))}});\r\n                                                window.sessionStorage.setItem('echarts.copiedObject', JSON.stringify({type: 'line', data: line}));\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                            </Draggable>)\r\n                        :\r\n                            <div className={this.props.classes.noContent}>\r\n                                {I18n.t('Create a new line with a \"+\" on the right.')}\r\n                            </div>\r\n                        }\r\n                        {this.state.copiedObject && this.state.copiedObject.type === 'line' ?\r\n                            <Line\r\n                                presetData={this.props.presetData}\r\n                                line={this.state.copiedObject.data}\r\n                                theme={this.props.theme}\r\n                                instances={this.props.instances}\r\n                                systemConfig={this.props.systemConfig}\r\n                                width={this.props.width}\r\n                                deleteLine={() => this.setState({copiedObject: null})}\r\n                                key=\"copiedLine\"\r\n                                opened={false}\r\n                                onPaste={() => this.addLine(this.state.copiedObject.data)}\r\n                            /> : null}\r\n                        <div className={this.props.classes.dragHint}>{I18n.t('You can drag and drop simple lines from the left list.')}</div>\r\n                    </TabPanel>\r\n                </div>}\r\n            </Droppable>;\r\n    }\r\n\r\n    renderTabMarkings() {\r\n        const anyClosed = this.props.presetData.marks.length > 1 && this.props.presetData.marks.find((l, i) => !this.state.marksOpened[i]);\r\n        const anyOpened = this.props.presetData.marks.length > 1 && this.props.presetData.marks.find((l, i) =>  this.state.marksOpened[i]);\r\n\r\n        return <TabPanel value=\"1\" classes={{root: this.props.classes.tabContent}}>\r\n            <Fab onClick={() => this.addMark()} size=\"small\" color=\"secondary\" className={this.props.classes.buttonAdd} title={I18n.t('Add marking line to chart')}>\r\n                <IconAdd/>\r\n            </Fab>\r\n            {anyClosed ? <Fab onClick={this.expandAllMarks}   size=\"small\" color=\"default\" className={this.props.classes.buttonExpandAll}  title={I18n.t('Expand all markings')}><IconExpand/></Fab> : null}\r\n            {anyOpened ? <Fab onClick={this.collapseAllMarks} size=\"small\" color=\"default\" className={this.props.classes.buttonCollapseAll} title={I18n.t('Collapse all markings')}><IconCollapse/></Fab> : null}\r\n            {\r\n                this.props.presetData.marks.length ?\r\n                    this.props.presetData.marks.map((mark, index) => <Mark\r\n                        mark={mark}\r\n                        presetData={this.props.presetData}\r\n                        updateMark={this.updateMark}\r\n                        deleteMark={(index) => {this.setState({deleteMarkDialog: index})}}\r\n                        index={index}\r\n                        key={index}\r\n                        socket={this.props.socket}\r\n                        opened={typeof this.state.marksOpened[index] !== 'undefined' && this.state.marksOpened[index] === true}\r\n                        markOpenToggle={this.markOpenToggle}\r\n                        onSelectColor={(value, cb) => this.showColorPicker(value, cb)}\r\n                        onCopy={data => {\r\n                            this.setState({copiedObject: {type: 'marking', data: JSON.parse(JSON.stringify(data))}});\r\n                            window.sessionStorage.setItem('echarts.copiedObject', JSON.stringify({type: 'line', data}));\r\n                        }}\r\n                    />) :\r\n                    <div className={this.props.classes.noContent}>\r\n                        {I18n.t('You can create a new markings with a \"+\" on the right.')}\r\n                    </div>\r\n            }\r\n            {this.state.copiedObject && this.state.copiedObject.type === 'marking' ?\r\n                <Mark\r\n                    presetData={this.props.presetData}\r\n                    mark={this.state.copiedObject.data}\r\n                    theme={this.props.theme}\r\n                    instances={this.props.instances}\r\n                    systemConfig={this.props.systemConfig}\r\n                    width={this.props.width}\r\n                    deleteMark={() => this.setState({copiedObject: null})}\r\n                    key=\"copiedMark\"\r\n                    opened={false}\r\n                    onPaste={() => this.addMark(this.state.copiedObject.data)}\r\n                /> : null}\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabTime() {\r\n        return <TabPanel value=\"2\" classes={{root: this.props.classes.tabContent}}>\r\n                    <div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Type')}</p>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"timeType\" label=\"Type\" options={{\r\n                            'relative': 'relative',\r\n                            'static': 'static',\r\n                        }}/>\r\n                    </div>\r\n                    <div className={this.props.classes.group}>\r\n                        { this.props.presetData.timeType === 'static' ?\r\n                            <>\r\n                                <p className={this.props.classes.title}>{I18n.t('Start and end')}</p>\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"start\" label=\"Start\" />\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"end\" label=\"End\" />\r\n                            </> : <>\r\n                                <p className={this.props.classes.title}>{I18n.t('Relative')}</p>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"relativeEnd\" label=\"End\" options={{\r\n                                    'now': 'now',\r\n                                    '1minute': 'end of minute',\r\n                                    '5minutes': 'end of 5 minutes',\r\n                                    '10minutes': 'end of 10 minutes',\r\n                                    '30minutes': 'end of 30 minutes',\r\n                                    '1hour': 'end of hour',\r\n                                    '2hours': 'end of 2 hours',\r\n                                    '3hours': 'end of 3 hours',\r\n                                    '4hours': 'end of 4 hours',\r\n                                    '6hours': 'end of 6 hours',\r\n                                    '8hours': 'end of 8 hours',\r\n                                    '12hours': 'end of 12 hours',\r\n                                    'today': 'end of day',\r\n                                    'weekEurope': 'end of sunday',\r\n                                    'weekUsa': 'end of saturday',\r\n                                    'month': 'this month',\r\n                                    'year': 'this year',\r\n                                }}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"range\" label=\"Range\" options={{\r\n                                    '10': '10 minutes',\r\n                                    '30': '30 minutes',\r\n                                    '60': '1 hour',\r\n                                    '120': '2 hours',\r\n                                    '180': '3 hours',\r\n                                    '360': '6 hours',\r\n                                    '720': '12 hours',\r\n                                    '1440': '1 day',\r\n                                    '2880': '2 days',\r\n                                    '4320': '3 days',\r\n                                    '10080': '7 days',\r\n                                    '20160': '14 days',\r\n                                    '1m': '1 month',\r\n                                    '2m': '2 months',\r\n                                    '3m': '3 months',\r\n                                    '6m': '6 months',\r\n                                    '1y': '1 year',\r\n                                    '2y': '2 years',\r\n                                }}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"live\" label=\"Live update every\" options={{\r\n                                    '': 'none',\r\n                                    '5': '5 seconds',\r\n                                    '10': '10 seconds',\r\n                                    '15': '15 seconds',\r\n                                    '20': '20 seconds',\r\n                                    '30': '30 seconds',\r\n                                    '60': '1 minute',\r\n                                    '120': '2 minutes',\r\n                                    '300': '5 minutes',\r\n                                    '600': '10 minutes',\r\n                                    '900': '15 minutes',\r\n                                    '1200': '20 minutes',\r\n                                    '1800': '30 minutes',\r\n                                    '3600': '1 hour',\r\n                                    '7200': '2 hours',\r\n                                    '10800': '3 hours',\r\n                                    '21600': '6 hours',\r\n                                    '43200': '12 hours',\r\n                                    '86400': '1 day',\r\n                                }}/>\r\n                            </>\r\n                        }\r\n                    </div>\r\n                    {/*<div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Start and end')}</p>\r\n                        <IOObjectField socket={this.props.socket} formData={this.props.presetData} updateValue={this.updateField} name=\"ticks\" label=\"Use X-ticks from\" />\r\n                    </div>*/}\r\n                {this.props.presetData.lines.find(line => line.aggregate !== 'onchange') ?\r\n                    <div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Aggregate')}</p>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateType\" label=\"Step type\" options={{\r\n                            'count': 'counts',\r\n                            'step': 'seconds',\r\n                        }}/>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateSpan\"\r\n                                     label={this.props.presetData.aggregateType === 'step' ? 'Seconds' : 'Counts'}\r\n                        />\r\n                    </div> : null }\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Time format')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label=\"Custom time format\" name=\"timeFormatCustom\" />\r\n                {!this.props.presetData.timeFormatCustom ?\r\n                    <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Time format\" name=\"timeFormat\" options={{\r\n                        '': 'Default',\r\n                        'HH:mm DD.MM': 'HH:MM dd.mm',\r\n                        'HH:mm DD.MM.': 'HH:MM dd.mm.',\r\n                        'HH:mm <br/> DD.MM': 'HH:MM / dd.mm',\r\n                        'HH:mm <br/> DD.MM.': 'HH:MM / dd.mm.',\r\n                        'HH:mm <br/> DD.MM.YY': 'HH:MM / dd.mm.yy',\r\n                        'HH:mm:ss DD.MM.YY': 'HH:MM:SS dd.mm.yy',\r\n                        'HH:mm DD.MM.YY': 'HH:MM dd.mm.yy',\r\n                        'hh:mm:ss MM/DD/YY a': 'HH:MM:SS mm/dd/yy am (US)',\r\n                        'HH:mm:ss DD/MM/YY': 'HH:MM:SS dd/mm/yy (UK)',\r\n                        'HH:mm:ss MM.DD.YY': 'HH:MM:SS mm.dd.yy',\r\n                        'HH:mm ddd': 'HH:MM dow',\r\n                        'HH:mm:ss ddd': 'HH:MM:SS dow',\r\n                        'HH:mm MM.DD': 'HH:MM mm.dd',\r\n                        'HH:mm:ss': 'HH:MM:SS',\r\n                        'HH:mm': 'HH:MM',\r\n                        'DD.MM': 'dd.mm',\r\n                        'DD.MM.': 'dd.mm.',\r\n                        'MM/DD': 'mm/dd',\r\n                        'DD': 'dd',\r\n                        'MM': 'mm',\r\n                        'YY': 'y',\r\n                        'HH': 'HH',\r\n                        'mm': 'MM',\r\n                        'ddd': 'dow',\r\n                        'DD.MM.YY': 'dd.mm.yy',\r\n                    }}/> :\r\n                    <IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Time format\" name=\"timeFormat\" helperLink=\"https://momentjs.com/docs/#/displaying/format/\"/>\r\n                }\r\n                {/*<IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Animation\" name=\"animation\" options={{\r\n                                '0': 'no',\r\n                                '300': '300ms',\r\n                                '500': '500ms',\r\n                                '1000': '1 second',\r\n                                '2000': '2 seconds',\r\n                                '3000': '3 seconds',\r\n                                '5000': '5 seconds',\r\n                                '10000': '10 seconds',\r\n                            }}/>*/}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderToast() {\r\n        if (!this.state.toast) {\r\n            return null;\r\n        }\r\n        return <Snackbar\r\n            anchorOrigin={{\r\n                vertical: 'bottom',\r\n                horizontal: 'left',\r\n            }}\r\n            open={true}\r\n            autoHideDuration={2000}\r\n            onClose={() => this.setState({toast: ''})}\r\n            ContentProps={{'aria-describedby': 'message-id'}}\r\n            message={<span id=\"message-id\">{this.state.toast}</span>}\r\n            action={[\r\n                <IconButton\r\n                    key=\"close\"\r\n                    aria-label=\"Close\"\r\n                    color=\"inherit\"\r\n                    className={this.props.classes.close}\r\n                    onClick={() => this.setState({toast: ''})}\r\n                >\r\n                    <IconClose />\r\n                </IconButton>,\r\n            ]}\r\n        />;\r\n    }\r\n\r\n    renderTabOptions() {\r\n        return <TabPanel value=\"3\" classes={{root: this.props.classes.tabContent}}>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Legend')}</p>\r\n                <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Show legend\" name=\"legend\" options={{\r\n                    '': 'none',\r\n                    'nw': 'Top, left',\r\n                    'ne': 'Top, right',\r\n                    'sw': 'Bottom, left',\r\n                    'se': 'Bottom, right',\r\n                }}/>\r\n                {this.props.presetData.legend ?\r\n                    <>\r\n                        {/*<IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Legend columns\" name=\"legColumns\" min=\"1\" type=\"number\" />*/}\r\n                        {/*<IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Legend opacity (0-1)\" name=\"legBgOpacity\" />*/}\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Legend text color', 'legColor')}\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Legend background', 'legBg')}\r\n                        <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Show values'} name=\"legActual\" />\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Orientation\" name=\"legendDirection\" options={{\r\n                            '': 'horizontal',\r\n                            'vertical': 'vertical'\r\n                        }}/>\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Legend background', 'legBg')}\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"legFontSize\" label=\"Font size\" min={6} type=\"number\"/>\r\n                    </> : null}\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Options')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hover details'} name=\"hoverDetail\" />\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'No interpolate in hover'} name=\"hoverNoInterpolate\" />\r\n                {this.props.presetData.hoverDetail ? <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hide nulls in tooltip'} name=\"hoverNoNulls\" /> : null}\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Use comma'} name=\"useComma\" />\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Enable zoom and pan'} name=\"zoom\" />\r\n                {/*<IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hide edit button'} name=\"noedit\" />*/}\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Show export button'} name=\"export\" />\r\n                {this.props.presetData.export ? this.renderColorField(this.props.presetData, this.updateField, 'Export button color', 'exportColor') : null}\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Copy link to clipboard')}</p>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    className={this.props.classes.buttonCopyLink}\r\n                    onClick={() => {\r\n                        const link = `${window.location.protocol}//${window.location.host}/adapter/echarts/chart/index.html?preset=${this.props.selectedId}`;\r\n                        this.setState({toast: I18n.t('copied') + ': ' + link}, () =>\r\n                            Utils.copyToClipboard(link));\r\n                    }}\r\n                >\r\n                    <IconCopy/>\r\n                    admin\r\n                </Button>\r\n                {this.state.webInstances.map((instance, i) =>\r\n                    <Button\r\n                        key={i}\r\n                        variant=\"contained\"\r\n                        className={this.props.classes.buttonCopyLink}\r\n                        onClick={() => {\r\n                            const link = `${instance.link}/echarts/index.html?preset=${this.props.selectedId}`;\r\n                            this.setState({toast: I18n.t('copied') + ': ' + link}, () =>\r\n                                Utils.copyToClipboard(link));\r\n                        }}\r\n\r\n                    ><IconCopy/>{'web.' + instance.index}</Button>)}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabTitle() {\r\n        return <TabPanel value=\"4\" classes={{root: this.props.classes.tabContent}}>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Title')}</p>\r\n                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"title\" label=\"Title\"/>\r\n                {this.props.presetData.title ?\r\n                    <>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"titlePos\" label=\"Title position\" options={{\r\n                            '': 'default',\r\n                            'top:35;left:65': 'Top, left, inside',\r\n                            'top:35;right:5': 'Top, right, inside',\r\n                            'top:35;left:50': 'Top, center, inside',\r\n                            'top:50;left:65': 'Middle, left, inside',\r\n                            'top:50;right:5': 'Middle, right, inside',\r\n                            'bottom:5;left:65': 'Bottom, left, inside',\r\n                            'bottom:5;right:5': 'Bottom, right, inside',\r\n                            'bottom:5;left:50': 'Bottom, center, inside',\r\n                            /*'top:5;right:-5': 'Top, right, outside',\r\n                            'top:50;right:-5': 'Middle, right, outside',\r\n                            'bottom:5;right:-5': 'Bottom, right, outside',\r\n                            'bottom:-5;left:50': 'Bottom, center, outside',*/\r\n                        }}/>\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Title color', 'titleColor')}\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"titleSize\" label=\"Title size\" min={0} type=\"number\" />\r\n                    </>\r\n                    : null}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabAppearance() {\r\n        return <TabPanel value=\"5\" classes={{root: this.props.classes.tabContent}}>\r\n            {/*<h4>{I18n.t('Appearance')}</h4>*/}\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Theme')}</p>\r\n                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"theme\" label=\"Theme\" noTranslate={true} options={{\r\n                    '': 'auto',\r\n                    'default': 'default',\r\n                    'dark': 'dark',\r\n                    'dark-bold': 'dark-bold',\r\n                    'dark-blue': 'dark-blue',\r\n                    'gray': 'gray',\r\n                    'vintage': 'vintage',\r\n                    'macarons': 'macarons',\r\n                    'infographic': 'infographic',\r\n                    'shine': 'shine',\r\n                    'roma': 'roma',\r\n                    'azul': 'azul',\r\n                    'bee-inspired': '',\r\n                    'blue': 'blue',\r\n                    'royal': 'royal',\r\n                    'tech-blue': 'tech-blue',\r\n                    'red': 'red',\r\n                    'red-velvet': 'red-velvet',\r\n                    'green': 'green',\r\n                }}/>\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Chart size')}</p>\r\n                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"width\"  label=\"Width\"  classes={{fieldContainer: this.props.classes.marginTop}}/>\r\n                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"height\" label=\"Height\" classes={{fieldContainer: this.props.classes.marginTop}} />\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Backgrounds')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} name=\"noBackground\" label=\"No background\" />\r\n                {!this.props.presetData.noBackground ? this.renderColorField(this.props.presetData, this.updateField, 'Window background', 'window_bg', undefined, this.props.classes.marginTop) : null}\r\n                {this.renderColorField(this.props.presetData, this.updateField, 'Chart background', 'bg_custom', undefined, this.props.classes.marginTop)}\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Labels')}</p>\r\n                {this.renderColorField(this.props.presetData, this.updateField, 'X labels color', 'x_labels_color', undefined, this.props.classes.marginTop)}\r\n                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"x_labels_size\" label=\"X labels size\" min={6} type=\"number\"/>\r\n                {this.renderColorField(this.props.presetData, this.updateField, 'X ticks color', 'x_ticks_color', undefined, this.props.classes.marginTop)}\r\n                {this.renderColorField(this.props.presetData, this.updateField, 'Y labels color', 'y_labels_color', undefined, this.props.classes.marginTop)}\r\n                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"y_labels_size\" label=\"Y labels size\" min={6} type=\"number\"/>\r\n                {this.renderColorField(this.props.presetData, this.updateField, 'Y ticks color', 'y_ticks_color', undefined, this.props.classes.marginTop)}\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Grid')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} name=\"grid_hideX\" label=\"Hide X grid\" />\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} name=\"grid_hideY\" label=\"Hide Y grid\" />\r\n                {!this.props.presetData.grid_hideX || !this.props.presetData.grid_hideY ?\r\n                    this.renderColorField(this.props.presetData, this.updateField, 'Grid color', 'grid_color')\r\n                    : null }\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Border')}</p>\r\n                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"noBorder\" label=\"Border\" options={{\r\n                    '': 'With border',\r\n                    'noborder': 'Without border',\r\n                }}/>\r\n                {this.props.presetData.noBorder !== 'noborder' ?\r\n                    <>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"border_width\" label=\"Border width\" min={0} type=\"number\"/>\r\n                        {this.props.presetData.border_width ? this.renderColorField(this.props.presetData, this.updateField, 'Border color', 'border_color') : null}\r\n                        {this.props.presetData.border_width ? <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"border_style\" label=\"Border style\" options={{\r\n                            'solid':  'solid',\r\n                            'dotted': 'dotted',\r\n                            'dashed': 'dashed',\r\n                            'double': 'double',\r\n                            'groove': 'groove',\r\n                            'ridge':  'ridge',\r\n                            'inset':  'inset',\r\n                            'outset': 'outset',\r\n                        }}/> : null}\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"border_padding\" label=\"Border padding\" min={0} type=\"number\"/>\r\n\r\n                    </> : null}\r\n            </div>\r\n            {\r\n                !!this.props.presetData.lines.find(line => line.chartType === 'bar') ?\r\n                    <Grid item sm={6} xs={12}>\r\n                        <h4>{I18n.t('Bar settings')}</h4>\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Fill color', 'barColor')}\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"barLabels\" label=\"Show labels\" options={{\r\n                            '': 'none',\r\n                            'topover': 'top over',\r\n                            'topunder': 'top under',\r\n                            'bottom': 'bottom',\r\n                            'middle': 'middle',\r\n                        }}/>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"barWidth\" label=\"Bars width\" min={0} type=\"number\"/>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"barFontSize\" label=\"Label font size\" min={0} type=\"number\"/>\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Label color', 'barFontColor')}\r\n                    </Grid>\r\n                    : null\r\n            }\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n        return <div className={className}>\r\n            <TextField\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name] || ''}\r\n                onClick={() =>\r\n                    this.setState({['_c_' + name]: formData[name]}, () =>\r\n                        this.showColorPicker(this.state['_' + name], color =>\r\n                            this.setState({['_c_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))}\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_c_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_c_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <IconClear />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        return <TabContext value={this.state.selectedTab}>\r\n            <AppBar position=\"static\" className={this.props.classes.tabsContainer}>\r\n                {this.props.selectedPresetChanged || this.props.autoSave ? <Checkbox\r\n                    checked={!!this.props.autoSave}\r\n                    title={I18n.t('Auto save')}\r\n                    onChange={e => this.props.onAutoSave(e.target.checked)}\r\n                    inputProps={{ 'aria-label': 'primary checkbox' }}\r\n                /> : null}\r\n                {!this.props.selectedPresetChanged ? <IconButton\r\n                    classes={{root: this.props.classes.noPaddingOnSide}}\r\n                    onClick={ () => window.open('chart/index.html?preset=' + this.props.selectedId, 'own-preset-echarts') }\r\n                    title={ I18n.t('Open chart in own window') }\r\n                ><IconNewWindow/></IconButton> : null}\r\n                {!this.props.autoSave && this.props.selectedPresetChanged ? <IconButton\r\n                    classes={{root: this.props.classes.noPaddingOnSide}}\r\n                    className={this.props.classes.buttonSave}\r\n                    onClick={() => this.props.savePreset()}\r\n                >\r\n                    <IconSave/>\r\n                </IconButton> : null}\r\n                <TabList\r\n                    onChange={(event, newValue)=>{\r\n                        window.localStorage.setItem('App.echarts.presetTabs.selectedTab', newValue);\r\n                        this.setState({selectedTab: newValue})\r\n                    }}\r\n                    variant=\"scrollable\"\r\n                    scrollButtons=\"on\"\r\n                >\r\n                    <Tab label={I18n.t('Data')} value=\"0\"/>\r\n                    <Tab label={I18n.t('Markings')} value=\"1\"/>\r\n                    <Tab label={I18n.t('Time')} value=\"2\"/>\r\n                    <Tab label={I18n.t('Options')} value=\"3\"/>\r\n                    <Tab label={I18n.t('Title')} value=\"4\"/>\r\n                    <Tab label={I18n.t('Appearance')} value=\"5\"/>\r\n                </TabList>\r\n            </AppBar>\r\n            <div className={this.props.classes.tabsBody}>\r\n                {this.state.selectedTab === '0' ? this.renderTabLines()      : null}\r\n                {this.state.selectedTab === '1' ? this.renderTabMarkings()   : null}\r\n                {this.state.selectedTab === '2' ? this.renderTabTime()       : null}\r\n                {this.state.selectedTab === '3' ? this.renderTabOptions()    : null}\r\n                {this.state.selectedTab === '4' ? this.renderTabTitle()      : null}\r\n                {this.state.selectedTab === '5' ? this.renderTabAppearance() : null}\r\n            </div>\r\n            {this.renderDeleteLineDialog()}\r\n            {this.renderDeleteMarkDialog()}\r\n            {this.renderColorDialog()}\r\n            {this.renderToast()}\r\n        </TabContext>\r\n    }\r\n}\r\n\r\nPresetTabs.propTypes = {\r\n    onChange: PropTypes.func,\r\n    presetData: PropTypes.object,\r\n    selectedId: PropTypes.string,\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    savePreset: PropTypes.func,\r\n    selectedPresetChanged: PropTypes.bool,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    systemConfig: PropTypes.object,\r\n    onAutoSave: PropTypes.func,\r\n    autoSave: PropTypes.bool,\r\n};\r\n\r\nexport default withStyles(styles)(PresetTabs)","import React from 'react';\nimport PropTypes from 'prop-types';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import I18n from '@iobroker/adapter-react/i18n';\nimport {withStyles} from '@material-ui/core/styles/index';\n\nimport PresetTabs from './Components/PresetTabs';\n\n// replace later with MdHorizontalSplit and MdVerticalSplit\n//const IconVerticalSplit   = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAACFJREFUeAFjAIJRwP////8PYIKWHCigNQdKj/pn1D+jAABTG16wVQqVpQAAAABJRU5ErkJggg==';\n//const IconHorizontalSplit = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAABtJREFUeAFjAIJRwP8fCj7QkENn/4z6Z5QzCgBjbWaoyx1PqQAAAABJRU5ErkJggg==';\n\nconst TOOLBOX_WIDTH = 0;//34;\n\nconst styles = theme => ({\n    logBox: {\n        width: '100%',\n        height: '100%',\n        position: 'relative',\n        overflow: 'hidden'\n    },\n    logBoxInner: {\n        color: theme.palette.type === 'dark' ? 'white' : 'black',\n        width: `calc(100% - ${TOOLBOX_WIDTH}px)`,\n        height: '100%',\n        marginLeft: TOOLBOX_WIDTH,\n        overflow: 'none',\n        position: 'relative',\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    toolbox: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        marginLeft: 2,\n        width: TOOLBOX_WIDTH,\n        height: '100%',\n        boxShadow: '2px 0px 4px -1px rgba(0, 0, 0, 0.2), 4px 0px 5px 0px rgba(0, 0, 0, 0.14), 1px 0px 10px 0px rgba(0, 0, 0, 0.12)'\n    },\n    iconButtons: {\n        width: 32,\n        height: 32,\n        padding: 4\n    },\n    layoutIcon: {\n        width: 24,\n        height: 24,\n        background: theme.palette.type === 'dark' ? '#9d9d9d' : undefined,\n        borderRadius: theme.palette.type === 'dark' ? 30 : undefined,\n    },\n});\n\nclass SettingsEditor extends React.Component {\n    render() {\n        return <div className={this.props.classes.logBox}>\n            {/*false ? <div className={this.props.classes.toolbox} key=\"toolbox\">\n                {this.props.onLayoutChange ?\n                    (<IconButton\n                        className={this.props.classes.iconButtons}\n                        onClick={() => this.props.onLayoutChange()}\n                        title={I18n.t('Change layout')}\n                    >\n                        <img\n                            className={this.props.classes.layoutIcon}\n                            alt=\"split\"\n                            src={this.props.verticalLayout ? IconVerticalSplit : IconHorizontalSplit}\n                        />\n                    </IconButton>) : null}\n            </div> : null*/ }\n            <div className={this.props.classes.logBoxInner} key=\"logList\">\n                <PresetTabs\n                    width={this.props.width}\n                    socket={this.props.socket}\n                    presetData={this.props.presetData}\n                    selectedId={this.props.selectedId}\n                    onChange={this.props.onChange}\n                    instances={this.props.instances}\n                    systemConfig={this.props.systemConfig}\n                    selectedPresetChanged={this.props.selectedPresetChanged}\n                    savePreset={this.props.savePreset}\n                    theme={this.props.theme}\n                    onAutoSave={autoSave => this.props.onAutoSave(autoSave)}\n                    autoSave={this.props.autoSave}\n                />\n            </div>\n        </div>;\n    }\n}\n\nSettingsEditor.propTypes = {\n    socket: PropTypes.object,\n    selectedId: PropTypes.string,\n    presetData: PropTypes.object,\n    instances: PropTypes.array,\n    onLayoutChange: PropTypes.func,\n    onChange: PropTypes.func,\n    verticalLayout: PropTypes.bool,\n    savePreset: PropTypes.func,\n    selectedPresetChanged: PropTypes.bool,\n    width: PropTypes.number,\n    theme: PropTypes.object,\n    onAutoSave: PropTypes.func,\n    autoSave: PropTypes.bool,\n    systemConfig: PropTypes.object,\n};\n\nexport default withStyles(styles)(SettingsEditor);\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Popover from '@material-ui/core/Popover';\r\n\r\nimport {IOTextField, IOSelect, IODateTimeField} from './Fields';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IoMdTime as IconTime} from 'react-icons/all';\r\nimport {FiRefreshCw as IconRefresh} from 'react-icons/all';\r\nimport {IoMdArrowDropdown as IconDropDown} from 'react-icons/all';\r\nimport {MdAdd as IconPlus} from 'react-icons/md';\r\n\r\nclass IconAggregate extends React.Component {\r\n    render() {\r\n        return <svg onClick={e => this.props.onClick && this.props.onClick(e)} viewBox=\"0 0 32 32\" width={this.props.width || 20} height={this.props.width || 20} xmlns=\"http://www.w3.org/2000/svg\" className={ this.props.className }>\r\n            <path fill='none' stroke=\"currentColor\" strokeWidth='2' d='M16,9 L9,9 L9,16 L9,16 C9,19.8659932 12.1340068,23 16,23 L16,23 C19.8659932,23 23,19.8659932 23,16 C23,12.1340068 19.8659932,9 16,9 L16,9 Z M8,15 L15,15 L15,8 L15,8 C15,4.13400675 11.8659932,1 8,1 L8,1 C4.13400675,1 1,4.13400675 1,8 C1,11.8659932 4.13400675,15 8,15 L8,15 Z' transform='rotate(180 12 12)' />        </svg>;\r\n    }\r\n}\r\n\r\nlet styles = theme => ({\r\n    mainDiv: {\r\n        paddingLeft: 40,\r\n    },\r\n    fieldsContainer: {\r\n        '& > div': {\r\n            display: 'flex',\r\n            paddingRight: 20,\r\n            width: 200\r\n        }\r\n    },\r\n    hintButton: {\r\n        marginRight: 20,\r\n        float: 'right'\r\n    },\r\n    popOver: {\r\n        padding: theme.spacing(2)\r\n    },\r\n    refreshSelect: {\r\n        display: 'inline-block',\r\n        paddingLeft: 4,\r\n        '& > div:before': {\r\n            borderWidth: 0\r\n        },\r\n        '& > div:hover:before': {\r\n            borderBottom: 0\r\n        },\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    refreshSelectButtonTitle: {\r\n        display: 'inline-flex',\r\n        paddingTop: 6,\r\n    },\r\n    settingsButton: {\r\n        color: 'currentColor',\r\n        fontSize: 16,\r\n        textTransform: 'inherit'\r\n    },\r\n    grow1: {\r\n        flexGrow: 1,\r\n    },\r\n    aggregateIcon: {\r\n        marginTop: 4,\r\n    },\r\n});\r\n\r\nconst RefreshSelect = function (props) {\r\n    return <div className={props.className}>\r\n        <Select\r\n            onChange={e => props.updateValue(props.name, e.target.value)}\r\n            value={props.formData[props.name] || ''}\r\n            renderValue={props.renderValue}\r\n            displayEmpty\r\n        >\r\n            {\r\n                props.options ?\r\n                    Object.keys(props.options).map((key) =>\r\n                        <MenuItem key={key} value={key}>{props.noTranslate ? props.options[key] : I18n.t(props.options[key])}</MenuItem>)\r\n                        : null\r\n            }\r\n        </Select>\r\n    </div>\r\n};\r\n\r\nconst rangeOptions = {\r\n    '10': '10 minutes',\r\n    '30': '30 minutes',\r\n    '60': '1 hour',\r\n    '120': '2 hours',\r\n    '180': '3 hours',\r\n    '360': '6 hours',\r\n    '720': '12 hours',\r\n    '1440': '1 day',\r\n    '2880': '2 days',\r\n    '4320': '3 days',\r\n    '10080': '7 days',\r\n    '20160': '14 days',\r\n    '1m': '1 month',\r\n    '2m': '2 months',\r\n    '3m': '3 months',\r\n    '6m': '6 months',\r\n    '1y': '1 year',\r\n    '2y': '2 years',\r\n};\r\nconst relativeEndOptions = {\r\n    'now': 'now',\r\n    '1minute': 'end of minute',\r\n    '5minutes': 'end of 5 minutes',\r\n    '10minutes': 'end of 10 minutes',\r\n    '30minutes': 'end of 30 minutes',\r\n    '1hour': 'end of hour',\r\n    '2hours': 'end of 2 hours',\r\n    '3hours': 'end of 3 hours',\r\n    '4hours': 'end of 4 hours',\r\n    '6hours': 'end of 6 hours',\r\n    '8hours': 'end of 8 hours',\r\n    '12hours': 'end of 12 hours',\r\n    'today': 'end of day',\r\n    'weekEurope': 'end of sunday',\r\n    'weekUsa': 'end of saturday',\r\n    'month': 'this month',\r\n    'year': 'this year',\r\n};\r\nconst liveOptions = {\r\n    '': 'none',\r\n    '5': '5 seconds',\r\n    '10': '10 seconds',\r\n    '15': '15 seconds',\r\n    '20': '20 seconds',\r\n    '30': '30 seconds',\r\n    '60': '1 minute',\r\n    '120': '2 minutes',\r\n    '300': '5 minutes',\r\n    '600': '10 minutes',\r\n    '900': '15 minutes',\r\n    '1200': '20 minutes',\r\n    '1800': '30 minutes',\r\n    '3600': '1 hour',\r\n    '7200': '2 hours',\r\n    '10800': '3 hours',\r\n    '21600': '6 hours',\r\n    '43200': '12 hours',\r\n    '86400': '1 day',\r\n};\r\n\r\nconst CHART_TYPES = {\r\n    auto: 'Auto (Line or Steps)',\r\n    line: 'Line',\r\n    //bar: 'Bar',\r\n    scatterplot: 'Scatter plot',\r\n    steps: 'Steps',\r\n    stepsStart: 'Steps on start',\r\n    spline: 'Spline',\r\n};\r\n\r\nconst AGGREGATES = {\r\n    minmax: 'minmax',\r\n    average: 'average',\r\n    min: 'min',\r\n    max: 'max',\r\n    total: 'total',\r\n    onchange: 'raw',\r\n};\r\n\r\nclass ChartSettings extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timeSpanOpened: false,\r\n            aggregateOpened: false,\r\n            refreshOpened: false\r\n        };\r\n    }\r\n\r\n    updateField = (name, value, time) => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData[name] = value;\r\n        if (time) {\r\n            presetData[name + '_time'] = time;\r\n        }\r\n        this.props.onChange(presetData);\r\n        window.localStorage.setItem('App.echarts.__' + name, value);\r\n    };\r\n\r\n    render() {\r\n        return <Toolbar className={this.props.classes.mainDiv} variant=\"dense\">\r\n            <Button\r\n                title={ I18n.t('Time span') }\r\n                size=\"small\"\r\n                className={this.props.classes.settingsButton}\r\n                id=\"timeSpanOpenButton\"\r\n                onClick={() => {this.setState({timeSpanOpened: !this.state.timeSpanOpened})}}\r\n            >\r\n                <IconTime/>\r\n                {\r\n                    this.props.presetData.timeType === 'relative' ?\r\n                    I18n.t(rangeOptions[this.props.presetData.range]) + ' ' + I18n.t('to') + ' ' + I18n.t(relativeEndOptions[this.props.presetData.relativeEnd]) :\r\n                    this.props.presetData.start + ' ' + this.props.presetData.start_time + ' - ' + this.props.presetData.end + ' ' + this.props.presetData.end_time\r\n                }\r\n                <IconDropDown/>\r\n            </Button>\r\n            <Popover className={this.props.classes.popOver}\r\n                open={this.state.timeSpanOpened}\r\n                onClose={()=>{this.setState({timeSpanOpened: false})}}\r\n                anchorEl={()=> document.getElementById('timeSpanOpenButton')}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n            >\r\n                <div className={this.props.classes.popOver}>\r\n                    <div className={this.props.classes.fieldsContainer}>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"timeType\" label=\"Type\" options={{\r\n                            'relative': 'relative',\r\n                            'static': 'static',\r\n                        }}/>\r\n                        { this.props.presetData.timeType === 'static' ?\r\n                            <>\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"start\" label=\"Start\" />\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"end\" label=\"End\" />\r\n                            </> : <>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"relativeEnd\" label=\"End\" options={relativeEndOptions}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"range\" label=\"Range\" options={rangeOptions}/>\r\n                            </>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n            <Button\r\n                title={ I18n.t('Aggregate') }\r\n                size=\"small\"\r\n                className={this.props.classes.settingsButton}\r\n                id=\"aggregateOpenButton\"\r\n                onClick={() => {this.setState({aggregateOpened: !this.state.aggregateOpened})}}\r\n            >\r\n                <IconAggregate className={this.props.classes.aggregateIcon}/>\r\n                {CHART_TYPES[this.props.presetData.chartType] ? I18n.t(CHART_TYPES[this.props.presetData.chartType]) : ''}\r\n                /\r\n                {AGGREGATES[this.props.presetData.aggregate] ? I18n.t(AGGREGATES[this.props.presetData.aggregate]) : ''}\r\n                <IconDropDown/>\r\n            </Button>\r\n            <Popover\r\n                open={this.state.aggregateOpened}\r\n                anchorEl={()=> document.getElementById('aggregateOpenButton')}\r\n                onClose={()=>{this.setState({aggregateOpened: false})}}\r\n            >\r\n                <div className={this.props.classes.popOver}>\r\n                    <div className={this.props.classes.fieldsContainer}>\r\n                        <IOSelect\r\n                            formData={this.props.presetData}\r\n                            updateValue={this.updateField}\r\n                            name=\"chartType\"\r\n                            label=\"Chart type\"\r\n                            options={CHART_TYPES}\r\n                        />\r\n                        {this.props.presetData.chartType !== 'auto' ? <IOSelect\r\n                            formData={this.props.presetData}\r\n                            updateValue={this.updateField}\r\n                            name=\"aggregate\"\r\n                            label=\"Aggregate\"\r\n                            options={AGGREGATES}/> : null}\r\n                        {this.props.presetData.aggregate !== 'onchange' ? <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateType\" label=\"Step type\" options={{\r\n                            'count': 'counts',\r\n                            'step': 'seconds',\r\n                        }}/> : null}\r\n                        {this.props.presetData.aggregate !== 'onchange' ? <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateSpan\"\r\n                            label={this.props.presetData.aggregateType === 'step' ? 'Seconds' : 'Counts'}\r\n                        /> : null}\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n            {this.props.presetData.timeType === 'relative' ? <RefreshSelect\r\n                className={this.props.classes.refreshSelect}\r\n                minWidth={0} width=\"initial\"\r\n                formData={this.props.presetData}\r\n                updateValue={this.updateField}\r\n                name=\"live\"\r\n                label=\"\"\r\n                title={I18n.t('Auto-refresh')}\r\n                options={liveOptions}\r\n                renderValue={()=>\r\n                    <div className={this.props.classes.refreshSelectButtonTitle}>\r\n                        <IconRefresh/>&nbsp;{I18n.t(liveOptions[this.props.presetData.live])}\r\n                    </div>\r\n                }\r\n            /> : null }\r\n            <div className={this.props.classes.grow1}/>\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={this.props.classes.hintButton}\r\n                onClick={() => this.props.onCreatePreset(true)}\r\n            >\r\n                <IconPlus className={this.props.classes.buttonIcon}/>\r\n                {I18n.t('Create preset')}\r\n            </Button>\r\n        </Toolbar>;\r\n    }\r\n}\r\n\r\nChartSettings.propTypes = {\r\n    onChange: PropTypes.func,\r\n    presetData: PropTypes.object,\r\n    onCreatePreset: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(ChartSettings)","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withStyles} from \"@material-ui/core\";\nimport Paper from '@material-ui/core/Paper';\n\nconst styles = theme => ({\n    darkBackground: {\n        stroke: '#3a3a3a !important',\n        fill: '#515151 !important',\n    },\n    iframe: {\n        width: '100%',\n        height: '100%',\n        overflow: 'auto',\n        border: 0,\n        color: theme.palette.primary.main// && console.log(JSON.stringify(theme))\n    }\n});\n\n/*function deParam(params, coerce) {\n    const obj = {};\n    const coerceTypes = {'true': true, 'false': false, 'null': null};\n\n    // Iterate over all name=value pairs.\n    (params || '').replace(/\\+/g, ' ').split('&').forEach(v => {\n        const param = v.split('=');\n        let key = decodeURIComponent(param[0]);\n        let val;\n        let i = 0;\n\n        // If key is more complex than 'foo', like 'a[]' or 'a[b][c]', split it\n        // into its component parts.\n        let keys = key.split('][');\n        let keysLast = keys.length - 1;\n\n        // If the first keys part contains [ and the last ends with ], then []\n        // are correctly balanced.\n        if (/\\[/.test(keys[0]) && /]$/.test(keys[keysLast])) {\n            // Remove the trailing ] from the last keys part.\n            keys[keysLast] = keys[keysLast].replace(/]$/, '');\n\n            // Split first keys part into two parts on the [ and add them back onto\n            // the beginning of the keys array.\n            keys = keys.shift().split('[').concat(keys);\n\n            keysLast = keys.length - 1;\n        } else {\n            // Basic 'foo' style key.\n            keysLast = 0;\n        }\n\n        // Are we dealing with a name=value pair, or just a name?\n        if (param.length === 2) {\n            val = decodeURIComponent(param[1]);\n\n            // Coerce values.\n            if (coerce) {\n                val = val && !isNaN(val) && ((+val + '') === val) ? +val        // number\n                    : val === 'undefined' ? undefined         // undefined\n                        : coerceTypes[val] !== undefined ? coerceTypes[val] // true, false, null\n                            : val;                                                          // string\n            }\n\n            if (keysLast) {\n                let cur = obj;\n                // Complex key, build deep object structure based on a few rules:\n                // * The 'cur' pointer starts at the object top-level.\n                // * [] = array push (n is set to array length), [n] = array if n is\n                //   numeric, otherwise object.\n                // * If at the last keys part, set the value.\n                // * For each keys part, if the current level is undefined create an\n                //   object or array based on the type of the next keys part.\n                // * Move the 'cur' pointer to the next level.\n                // * Rinse & repeat.\n                for (; i <= keysLast; i++) {\n                    key = keys[i] === '' ? cur.length : keys[i];\n                    cur = cur[key] = i < keysLast\n                        ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : [])\n                        : val;\n                }\n\n            } else {\n                // Simple key, even simpler rules, since only scalars and shallow\n                // arrays are allowed.\n\n                if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\n                    // val is already an array, so push on the next value.\n                    obj[key].push(val);\n                } else if ({}.hasOwnProperty.call(obj, key)) {\n                    // val isn't an array, but since a second value has been specified,\n                    // convert val into an array.\n                    obj[key] = [obj[key], val];\n                } else {\n                    // val is a scalar.\n                    obj[key] = val;\n                }\n            }\n        } else if (key) {\n            // No value was defined, so set something meaningful.\n            obj[key] = coerce\n                ? undefined\n                : '';\n        }\n    });\n\n    return obj;\n}*/\n\nclass ChartFrame extends React.Component {\n    constructor(props) {\n        super(props);\n        this.ready = false;\n        this.refIframe = React.createRef();\n        this.lastPresetData = '';\n    }\n\n    componentDidMount() {\n        window.addEventListener('message', this.onReceiveMessage, false);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('message', this.onReceiveMessage, false);\n    }\n\n    onReceiveMessage = message => {\n        if (message && message.data === 'chartReady') {\n            this.ready = true;\n            this.lastPresetData = JSON.stringify(this.props.presetData);\n            this.refIframe.contentWindow.postMessage(this.lastPresetData, '*');\n            console.log('Received ready from iframe');\n        }\n    };\n\n    render() {\n        if (window.location.port === '3000') {\n            return <Paper className={this.props.classes.iframe} style={{background: '#333'}}>\n                <pre>{JSON.stringify(this.props.presetData, null, 2)}</pre>\n            </Paper>;\n        } else {\n            if (this.lastPresetData !== JSON.stringify(this.props.presetData) && this.ready) {\n                this.lastPresetData = JSON.stringify(this.props.presetData);\n                this.refIframe.contentWindow.postMessage(this.lastPresetData, '*');\n            }\n\n            return <iframe ref={el => this.refIframe = el}\n                title=\"iobrokerChart\"\n                className={this.props.classes.iframe}\n                src={this.props.src}>\n            </iframe>;\n        }\n    }\n}\n\nChartFrame.propTypes = {\n    src: PropTypes.string,\n    presetData: PropTypes.object,\n};\n\nexport default withStyles(styles)(ChartFrame);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {MuiThemeProvider, withStyles} from '@material-ui/core/styles';\n\nimport ChartSettings from './Components/ChartSettings';\nimport ChartFrame from './Components/ChartFrame';\n\nconst styles = theme => ({\n    toolbar: {\n        //a: console.log(JSON.stringify(theme)),\n        minHeight: theme.mixins.toolbar.minHeight,\n        boxShadow: '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)'\n    },\n    toolbarButtons: {\n        padding: 4,\n        marginLeft: 4\n    },\n    editorDiv: {\n        height: `calc(100% - ${theme.mixins.toolbar.minHeight + 38 + 1}px)`,\n        width: '100%',\n        overflow: 'hidden',\n        position: 'relative'\n    },\n    textButton: {\n        marginRight: 10,\n        minHeight: 24,\n        padding: '6px 16px'\n    },\n    tabIcon: {\n        width: 24,\n        height: 24,\n        verticalAlign: 'middle',\n        marginBottom: 2,\n        marginRight: 2,\n        borderRadius: 3\n    },\n    hintIcon: {\n        //fontSize: 32,\n        padding: '0 8px 0 8px'\n    },\n    hintText: {\n        //fontSize: 18\n    },\n    tabMenuButton: {\n        position: 'absolute',\n        top: 0,\n        right: 0,\n    },\n    tabChanged: {\n        color: theme.palette.secondary.main\n    },\n    tabText: {\n        maxWidth: 130,\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        display: 'inline-block',\n        verticalAlign: 'middle',\n    },\n    tabChangedIcon: {\n        color: '#FF0000',\n        fontSize: 16\n    },\n    closeButton: {\n        position: 'absolute',\n        top: 8,\n        right: 0,\n        zIndex: 10,\n        padding: 8,\n        cursor: 'pointer'\n    },\n    notRunning: {\n        color: '#ffbc00'\n    },\n    tabButton: {\n\n    },\n    tabButtonWrapper: {\n        display: 'inline-block',\n    },\n    menuIcon: {\n        width: 18,\n        height: 18,\n        borderRadius: 2,\n        marginRight: 5\n    },\n    container: {\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n    },\n    heightWithoutToolbar: {\n        height: 'calc(100% - 48px)',\n    },\n    height100: {\n        height: '100%',\n    }\n});\n\nclass MainChart extends React.Component {\n    renderToolbar() {\n        return this.props.selectedId && typeof this.props.selectedId === 'string' ? null :\n            <ChartSettings\n                onChange={this.props.onChange}\n                enablePresetMode={this.props.enablePresetMode}\n                presetData={this.props.presetData}\n                onCreatePreset={(name, parentId, historyInstance, stateId) => this.props.onCreatePreset(name, parentId, historyInstance, stateId)}\n            />;\n    }\n\n    getChartFrame() {\n        const URL = (window.location.search || '').includes('dev=true') ? 'http://localhost:3000/' : 'chart/';\n\n        const data = JSON.parse(JSON.stringify(this.props.presetData));\n\n        if (typeof this.props.selectedId === 'object') {\n            // fast chart\n            // remove settings from line\n            delete data.lines[0].aggregate;\n            delete data.lines[0].chartType;\n        }\n\n        return <div style={{display: this.props.visible ? 'block' : 'none'}} className={typeof this.props.selectedId !== 'string' ? this.props.classes.heightWithoutToolbar : this.props.classes.height100}>\n            <ChartFrame\n                src={URL + 'index.html?edit=1'}\n                presetData={data}\n            />\n        </div>;\n    }\n\n    render() {\n        return <MuiThemeProvider theme={this.props.theme}>\n            <div className={this.props.classes.container}>\n                {this.renderToolbar()}\n                {this.getChartFrame()}\n            </div>\n        </MuiThemeProvider>\n    }\n}\n\nMainChart.propTypes = {\n    onChange: PropTypes.func.isRequired,\n    onCreatePreset: PropTypes.func.isRequired,\n    visible: PropTypes.bool,\n    runningInstances: PropTypes.object,\n    presetData: PropTypes.object,\n    chartsList: PropTypes.array,\n    selectedId: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.object]),\n    theme: PropTypes.object\n};\n\nexport default withStyles(styles)(MainChart);\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport withWidth from '@material-ui/core/withWidth';\nimport {withStyles, withTheme} from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport { useDrag, useDrop, DndProvider as DragDropContext } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend'\n\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport ConfirmDialog from '@iobroker/adapter-react/Dialogs/Confirm'\n\n// icons\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {MdModeEdit as IconEdit} from 'react-icons/md';\nimport {MdClose as IconCancel} from 'react-icons/md';\nimport {MdCheck as IconCheck} from 'react-icons/md';\nimport {MdDelete as IconDelete} from 'react-icons/md';\nimport {FaScroll as IconScript} from 'react-icons/all';\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\nimport IconCopy from '@iobroker/adapter-react/icons/IconCopy';\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\nimport Utils from '@iobroker/adapter-react/Components/Utils';\n\n/*function getFolderPrefix(presetId) {\n    let result = presetId.split('.');\n    result.shift();\n    result.shift();\n    result.pop();\n    result = result.join('.');\n    return result;\n}*/\nconst HIDDEN_FOLDER = '_consumption_';\n\nconst hideFolder = !window.location.search.includes('hidden=false');\n\nfunction getFolderList(folder) {\n    let result = [];\n    Object.values(folder.subFolders || {})\n        .forEach(subFolder =>\n            result = result.concat(getFolderList(subFolder)));\n\n    return result;\n}\n\nexport const Droppable = (props) => {\n    const { onDrop} = props;\n\n    const [{ isOver, isOverAny}, drop] = useDrop({\n        accept: 'item',\n        drop: e => isOver ? onDrop(e) : undefined,\n        collect: monitor => ({\n            isOver: monitor.isOver({ shallow: true }),\n            isOverAny: monitor.isOver(),\n        }),\n    });\n\n    return <div ref={drop} className={clsx(isOver && 'js-folder-dragover', isOverAny && 'js-folder-dragging')}>\n        {props.children}\n    </div>;\n};\n\nexport const Draggable = (props) => {\n    const { name } = props;\n    const [{ opacity }, drag] = useDrag({\n        type: 'item',\n        item: () => ({name}),\n        collect: monitor => ({opacity: monitor.isDragging() ? 0.3 : 1}),\n    });\n    // About transform: https://github.com/react-dnd/react-dnd/issues/832#issuecomment-442071628\n    return <div ref={drag} style={{ opacity, transform: 'translate3d(0, 0, 0)' }}>\n        {props.children}\n    </div>;\n};\n\nconst LEVEL_PADDING = 16;\nconst FORBIDDEN_CHARS = /[.\\][*,;'\"`<>\\\\?]/g;\n\nconst styles = theme => ({\n    noGutters: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        width: '100%'\n    },\n    changed: {\n        position: 'relative',\n        '&:after': {\n            content: '\"\"',\n            position: 'absolute',\n            top: 2,\n            right: 2,\n            width: 5,\n            height: 5,\n            borderRadius: 5,\n            background: theme.type === 'dark' ? '#CC0000' : '#CC0000',\n        }\n    },\n    itemIcon: {\n        width: 32,\n        height: 32,\n        marginRight: 4,\n    },\n    itemIconFolder: {\n        cursor: 'pointer'\n    },\n    buttonsContainer: {\n        '& button': {\n            whiteSpace: 'nowrap'\n        }\n    },\n    itemIconPreset: {\n        color: theme.type === 'dark' ? theme.palette.primary.light : theme.palette.primary.dark\n    },\n    folderIconPreset: {\n        color: theme.type === 'dark' ? theme.palette.secondary.dark : theme.palette.secondary.light\n    },\n    width100: {\n        width: '100%',\n    },\n    buttonIcon: {\n        marginRight: theme.spacing(0.5),\n    },\n    itemIconRoot: {\n        minWidth: 24,\n    },\n    listItemSubTitle: {\n        fontSize: 'smaller',\n        opacity: 0.7,\n        fontStyle: 'italic'\n    },\n    mainList: {\n        width: 'calc(100% - ' + theme.spacing(1) + 'px)',\n        marginLeft: theme.spacing(1),\n        '& .js-folder-dragover>li>.folder-reorder': {\n            background: '#40adff'\n        },\n        '& .js-folder-dragging .folder-reorder': {\n            opacity: 1,\n        },\n        '& .js-folder-dragging .item-reorder': {\n            opacity: 0.3,\n        }\n    },\n    iconCopy: {\n        width: 16,\n    }\n});\n\nclass MenuList extends Component {\n    constructor(props) {\n        super(props);\n\n        let presetsOpened;\n        try {\n            presetsOpened = JSON.parse(window.localStorage.getItem('App.echarts.presets.opened')) || [];\n        } catch (e) {\n            presetsOpened = [];\n        }\n\n        this.state = {\n            presetsOpened,\n\n            presets: {},\n            presetFolders: null,\n            changingPreset: '',\n\n            deletePresetDialog: null,\n            movePresetDialog: null,\n            newPresetFolder: '',\n            addPresetFolderDialog: null,\n            addPresetFolderName: '',\n            editPresetFolderDialog: null,\n            editPresetFolderName: '',\n        };\n        this.scrollToSelect = false;\n        this.refSelected = React.createRef();\n\n        this.getAllPresets()\n            .then(newState => this.setState(newState));\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n        if (nextProps.scrollToSelect !== this.scrollToSelect) {\n            this.scrollToSelect = nextProps.scrollToSelect;\n\n            this.scrollToSelect && setTimeout(() => {\n                this.refSelected.current?.scrollIntoView({\n                    behavior: 'auto',\n                    block: 'center',\n                    inline: 'center'\n                });\n            }, 100);\n        }\n    }\n\n    componentDidMount() {\n        this.props.socket.subscribeObject(this.props.adapterName  + '.0.*', this.onPresetChange);\n    }\n\n    componentWillUnmount() {\n        this.props.socket.unsubscribeObject(this.props.adapterName  + '.0.*', this.onPresetChange);\n    }\n\n    onPresetChange = (id, obj) => {\n        if (!id || !id.startsWith('echarts.')) {\n            return;\n        }\n        let presets;\n        let changed = false;\n        if (obj) {\n            obj.common = obj.common || {};\n            obj.native = obj.native || {};\n            if (JSON.stringify(obj) !== JSON.stringify(this.state.presets[id])) {\n                presets = JSON.parse(JSON.stringify(this.state.presets));\n                presets[id] = obj;\n                changed = true;\n            }\n        } else if (this.state.presets[id]) {\n            presets = JSON.parse(JSON.stringify(this.state.presets));\n            delete presets[id];\n            changed = true;\n        }\n\n        if (changed) {\n            const emptyFolders = this.getEmptyFolders();\n            const newState = {presets, changingPreset: '', presetFolders: this.buildPresetTree(presets, emptyFolders)};\n            setTimeout(() => this.informAboutSubFolders(newState.presetFolders), 200);\n            this.setState(newState);\n        }\n    };\n\n    informAboutSubFolders(presetFolders) {\n        presetFolders = presetFolders || this.state.presetFolders || {};\n        this.props.onShowReorder(!!Object.keys(presetFolders.subFolders || {}).length);\n    }\n\n    getEmptyFolders(presetFolders, _path, _result) {\n        _result = _result || [];\n        _path   = _path   || [];\n        presetFolders = presetFolders || this.state.presetFolders || {};\n\n        if (presetFolders.id/* && !Object.keys(presetFolders.subFolders).length && !Object.keys(presetFolders.presets).length*/) {\n            const __path = [..._path];\n            __path.push(presetFolders.id)\n            _result.push(__path.join('.'));\n        }\n\n        if (presetFolders.subFolders) {\n            Object.keys(presetFolders.subFolders).forEach(name =>\n                this.getEmptyFolders(presetFolders.subFolders[name], _path, _result));\n        }\n\n        return _result;\n    }\n\n    getAllPresets(newState) {\n        newState = newState || {};\n        let presets = {};\n\n        return new Promise((resolve, reject) =>\n            this.props.socket.getRawSocket().emit('getObjectView', 'chart', 'chart', {\n                startkey: this.props.adapterName + '.',\n                endkey:   this.props.adapterName + '.\\u9999'\n            }, (err, res) => {\n                if (err) {\n                    reject(err);\n                } else {\n                    res && res.rows && res.rows.forEach(preset => preset.value._id && !preset.value._id.toString().endsWith('.') && (presets[preset.value._id] = preset.value));\n                    newState.presets = presets;\n                    newState.changingPreset = '';\n\n                    // fill missing info\n                    Object.keys(newState.presets).forEach(id => {\n                        const presetObj = newState.presets[id];\n                        presetObj.common = presetObj.common || {};\n                        presetObj.native = presetObj.native || {};\n                    });\n\n                    // store all empty folders\n                    const emptyFolders = this.getEmptyFolders();\n                    newState.presetFolders = this.buildPresetTree(presets, emptyFolders);\n                    setTimeout(() => this.informAboutSubFolders(newState.presetFolders), 200);\n                    resolve(newState);\n                }\n            }));\n    }\n\n    renderTreePreset(item, level, anySubFolders) {\n        const preset = this.state.presets[item._id];\n        if (!preset || (this.props.search && !item.common.name.includes(this.props.search))) {\n            return null;\n        }\n\n        level = level || 0;\n\n        const depthPx = (this.props.reorder ? level : level - 1) * LEVEL_PADDING;\n\n        const listItem = <ListItem\n            classes={ {gutters: clsx(this.props.classes.noGutters, this.props.selectedId === preset._id && this.props.selectedPresetChanged && this.props.classes.changed)} }\n            style={ {paddingLeft: depthPx } }\n            key={ item._id }\n            className={ clsx(this.props.reorder && 'item-reorder') }\n            ref={this.props.selectedId === item._id ? this.refSelected : null}\n            selected={this.props.selectedId === item._id}\n            button\n            onClick={() => this.props.onSelectedChanged(preset._id)}\n        >\n            <ListItemIcon classes={ {root: clsx(this.props.classes.itemIconRoot, this.props.classes.itemIconPreset)} }><IconScript className={ this.props.classes.itemIcon }/></ListItemIcon>\n            <ListItemText\n                classes={ {primary: this.props.classes.listItemTitle, secondary: this.props.classes.listItemSubTitle} }\n                primary={ <>\n                    { Utils.getObjectNameFromObj(preset, null, {language: I18n.getLanguage()}) }\n                </>}\n                secondary={ Utils.getObjectNameFromObj(preset, null, {language: I18n.getLanguage()}, true) }\n            />\n            <ListItemSecondaryAction>\n                {this.state.changingPreset === preset._id ?\n                    <CircularProgress size={ 24 }/>\n                    :\n                    (!this.props.reorder ? <>\n                        {this.props.selectedId !== preset._id || !this.props.selectedPresetChanged ? <IconButton\n                            size=\"small\"\n                            aria-label=\"Rename\"\n                            title={ I18n.t('Rename') }\n                            onClick={ (e) => {\n                                e.stopPropagation();\n                                this.setState({renameDialog: preset._id, renamePresetDialogTitle: item.common.name})\n                            }}\n                        >\n                            <IconEdit/>\n                        </IconButton> : null }\n                        {/*level || anySubFolders ?\n                            <IconButton\n                                size=\"small\"\n                                aria-label=\"Move to folder\"\n                                title={ I18n.t('Move to folder') }\n                                onClick={ () => this.setState({movePresetDialog: preset._id, newPresetFolder: getFolderPrefix(preset._id)}) }>\n                                <IconMoveToFolder/>\n                            </IconButton> : null*/}\n                        <IconButton size=\"small\" aria-label=\"Copy\" title={ I18n.t('Copy') } onClick={ () => this.props.onCopyPreset(preset._id) }><IconCopy className={this.props.classes.iconCopy}/></IconButton>\n                        <IconButton size=\"small\" aria-label=\"Delete\" title={ I18n.t('Delete') } onClick={ () => this.setState({deletePresetDialog: preset._id}) }><IconDelete/></IconButton>\n                    </> : null)\n                }\n            </ListItemSecondaryAction>\n        </ListItem>;\n\n        if (this.props.reorder) {\n            return <Draggable key={'draggable_' + item._id} name={item._id}>{listItem}</Draggable>;\n        } else {\n            return  listItem;\n        }\n    }\n\n    renderPresetsTree(parent, level) {\n        let result = [];\n\n        level = level || 0;\n        let presetsOpened = this.props.reorder || (this.state.presetsOpened && parent ? this.state.presetsOpened.includes(parent.prefix) : false);\n\n        const depthPx = (this.props.reorder ? level : level - 1) * LEVEL_PADDING;\n\n        const reactChildren = [];\n        if (parent && (presetsOpened || !parent.id)) { // root cannot be closed and have id = ''\n            const values     = Object.values(parent.presets || {});\n            const subFolders = Object.values(parent.subFolders || {});\n\n            // add first sub-folders\n            subFolders\n                .sort((a, b) => a.id > b.id ? 1 : (a.id < b.id ? -1 : 0))\n                .filter(subFolder => !(hideFolder && subFolder.id === HIDDEN_FOLDER))\n                .forEach(subFolder =>\n                    reactChildren.push(this.renderPresetsTree(subFolder, level + 1)));\n\n            // Add as second the presets\n            if (values.length || subFolders.length) {\n                values\n                    .sort((a, b) => a._id > b._id ? 1 : (a._id < b._id ? -1 : 0))\n                    .forEach(preset =>\n                        reactChildren.push(this.renderTreePreset(preset, level + 1, subFolders.length)));\n            } else {\n                reactChildren.push(<ListItem key=\"no presets\" classes={ {gutters: this.props.classes.noGutters} }>\n                    <ListItemText className={ this.props.classes.folderItem}>{ I18n.t('No presets created yet')}</ListItemText>\n                </ListItem>);\n            }\n        }\n\n        // Show folder item\n        if (parent && (parent.id || this.props.reorder)) {\n            const folder = <ListItem\n                key={ parent.prefix }\n                classes={ {gutters: this.props.classes.noGutters } }\n                className={ clsx(\n                    this.props.classes.width100,\n                    this.props.classes.folderItem,\n                    this.props.reorder && 'folder-reorder'\n                ) }\n                style={ {paddingLeft: depthPx} }\n            >\n                <ListItemIcon classes={ {root: clsx(this.props.classes.itemIconRoot, this.props.classes.folderIconPreset)} } onClick={ () => this.togglePresetsFolder(parent) }>{ presetsOpened ?\n                    <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\n                    <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\n                }</ListItemIcon>\n                <ListItemText>{ parent.id || I18n.t('Root')}</ListItemText>\n                <ListItemSecondaryAction>\n                    {!this.props.reorder && parent && parent.id && presetsOpened ? <IconButton\n                        onClick={() => this.props.onCreatePreset(null, parent.id)}\n                        title={ I18n.t('Create new preset') }\n                    ><IconAdd/></IconButton> : null}\n                    {!this.props.reorder ? <IconButton\n                        onClick={() => this.setState({editPresetFolderDialog: parent, editPresetFolderName: parent.id, editFolderDialogTitleOrigin: parent.id})}\n                        title={I18n.t('Edit folder name')}\n                    ><IconEdit/></IconButton> : null}\n                        {!this.props.reorder ? <IconButton onClick={ () => this.togglePresetsFolder(parent) } title={ presetsOpened ? I18n.t('Collapse') : I18n.t('Expand')  }>\n                        { presetsOpened ? <IconCollapse/> : <IconExpand/> }\n                    </IconButton> : null}\n                </ListItemSecondaryAction>\n            </ListItem>;\n\n            if (!this.props.reorder) {\n                result.push(folder);\n            } else {\n                result.push(<Droppable\n                    key={'droppable_' + parent.prefix}\n                    name={parent.prefix}\n                    onDrop={e => this.onDragFinish(e.name, 'echarts.0' + (parent.prefix ? '.' : '') + parent.prefix)}\n                >\n                    {folder}\n                </Droppable>);\n            }\n        }\n\n        reactChildren && reactChildren.forEach(r => result.push(r));\n\n        return result;\n    };\n\n    renamePresetFolder(folder, newName) {\n        return new Promise(resolve => this.setState({changingPreset: folder}, () => resolve()))\n            .then(() => {\n                let newSelectedId;\n                let pos;\n                // if selected folder opened, replace its ID in this.state.opened\n                if ((pos = this.state.presetsOpened.indexOf(folder.prefix)) !== -1) {\n                    const presetsOpened = [...this.state.presetsOpened];\n                    presetsOpened.splice(pos, 1);\n                    presetsOpened.push(newName);\n                    presetsOpened.sort();\n                    this.setState({presetsOpened});\n                }\n\n                let prefix = folder.prefix.split('.');\n                prefix[prefix.length - 1] = newName;\n                prefix = prefix.join('.');\n\n                if (Object.keys(folder.presets).find(id => id === this.props.selectedId)) {\n                    newSelectedId = `${this.props.adapterName}.0.${prefix}.${this.props.selectedId.split('.').pop()}`;\n                }\n\n                const promises = Object.keys(folder.presets).map(presetId =>\n                    this.addPresetToFolderPrefix(folder.presets[presetId], prefix, true));\n\n                return Promise.all(promises)\n                    .then(() => this.getAllPresets())\n                    .then(newState =>\n                        this.setState(newState, () =>\n                            this.props.onSelectedChanged(newSelectedId)));\n            });\n    }\n\n    isNameUnique(presetId, name) {\n        const len = presetId.split('.').length;\n        if (name === HIDDEN_FOLDER) {\n            return false;\n        }\n        return !Object.keys(this.state.presets)\n            .find(id => len === id.split('.').length && this.state.presets[id].common.name === name);\n    }\n\n    buildPresetTree(presets, emptyFolders) {\n        // console.log(presets);\n        presets = Object.values(presets);\n\n        let presetFolders = {subFolders: {}, presets: {}, id: '', prefix: ''};\n\n        // create missing folders\n        presets.forEach(preset => {\n            let id = preset._id;\n            const parts = id.split('.');\n            parts.shift();\n            parts.shift();\n            let currentFolder = presetFolders;\n            let prefix = '';\n            for (let i = 0; i < parts.length - 1; i++) {\n                if (prefix) {\n                    prefix = prefix + '.';\n                }\n                prefix = prefix + parts[i];\n                if (!currentFolder.subFolders[parts[i]]) {\n                    currentFolder.subFolders[parts[i]] = {\n                        subFolders: {},\n                        presets: {},\n                        id: parts[i],\n                        prefix,\n                    }\n                }\n                currentFolder = currentFolder.subFolders[parts[i]];\n            }\n            currentFolder.presets[id] = preset;\n        });\n\n        if (emptyFolders && emptyFolders.length) {\n            emptyFolders.forEach(id => {\n                const parts = id.split('.');\n                let currentFolder = presetFolders;\n                let prefix = '';\n                for (let i = 0; i < parts.length; i++) {\n                    if (prefix) {\n                        prefix = prefix + '.';\n                    }\n                    prefix = prefix + parts[i];\n                    if (!currentFolder.subFolders[parts[i]]) {\n                        currentFolder.subFolders[parts[i]] = {\n                            subFolders: {},\n                            presets: {},\n                            id: parts[i],\n                            prefix,\n                        }\n                    }\n                    currentFolder = currentFolder.subFolders[parts[i]];\n                }\n            });\n        }\n\n\n        return presetFolders;\n    }\n\n    findFolder(parent, folder) {\n        if (parent && parent.prefix === folder.prefix) {\n            return parent;\n        }\n        if (parent && parent.subFolders) {\n            for (let index in parent.subFolders) {\n                if (parent.subFolders.hasOwnProperty(index)) {\n                    let result = this.findFolder(parent.subFolders[index], folder);\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n    }\n\n    addFolder(parentFolder, id) {\n        let presetFolders = JSON.parse(JSON.stringify(this.state.presetFolders));\n        parentFolder = parentFolder || presetFolders;\n        let _parentFolder = this.findFolder(presetFolders, parentFolder);\n\n        let presetsOpened = JSON.parse(JSON.stringify(this.state.presetsOpened));\n\n        _parentFolder.subFolders[id] = {\n            presets: {},\n            subFolders: {},\n            id,\n            prefix: _parentFolder.prefix ? _parentFolder.prefix + '.' + id : id\n        };\n\n        presetsOpened.push(id);\n\n        return new Promise(resolve =>\n            this.setState({presetFolders, presetsOpened}, () => resolve()));\n    }\n\n    togglePresetsFolder(folder) {\n        const presetsOpened = [...this.state.presetsOpened];\n        const pos = presetsOpened.indexOf(folder.prefix);\n        if (pos === -1) {\n            presetsOpened.push(folder.prefix);\n        } else {\n            presetsOpened.splice(pos, 1);\n\n            // If active preset is inside this folder select the first preset\n            if (Object.keys(folder.presets).includes(this.props.selectedId)) {\n                return this.props.onSelectedChanged(null, allowedId => {\n                    if (allowedId !== false) {\n                        window.localStorage.setItem('App.echarts.presets.opened', JSON.stringify(presetsOpened));\n                        this.setState({presetsOpened});\n                    }\n                });\n            }\n        }\n\n        window.localStorage.setItem('App.echarts.presets.opened', JSON.stringify(presetsOpened));\n\n        this.setState({presetsOpened});\n    }\n\n    renderAddFolderDialog() {\n        return this.props.addPresetFolderDialog ?\n            <Dialog\n                maxWidth=\"md\"\n                fullWidth={true}\n                open={ true }\n                onClose={ () => this.props.onClosePresetFolderDialog()}\n            >\n                <DialogTitle>{I18n.t('Create folder')}</DialogTitle>\n                <DialogContent className={ this.props.classes.p }>\n                    <TextField\n                        fullWidth={true}\n                        autoFocus\n                        label={ I18n.t('Title') }\n                        value={ this.state.addPresetFolderName }\n                        onChange={ e => this.setState({addPresetFolderName: e.target.value.replace(FORBIDDEN_CHARS, '_').trim()})}\n                        onKeyPress={e => {\n                            if (this.state.addPresetFolderName && e.which === 13 && this.state.addPresetFolderName !== HIDDEN_FOLDER) {\n                                this.addFolder(null, this.state.addPresetFolderName)\n                                    .then(() => this.props.onClosePresetFolderDialog(() =>\n                                        this.informAboutSubFolders()));\n                            }\n                        }}\n                    />\n                </DialogContent>\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\n                    <Button\n                        variant=\"contained\"\n                        disabled={\n                            !this.state.addPresetFolderName ||\n                            !!Object.keys((this.state.presetFolders && this.state.presetFolders.subFolders) || {}).find(name => name === this.state.addPresetFolderName) ||\n                            this.state.addPresetFolderName === HIDDEN_FOLDER\n                        }\n                        onClick={() =>\n                            this.addFolder(null, this.state.addPresetFolderName)\n                                .then(() => this.props.onClosePresetFolderDialog(() =>\n                                    this.informAboutSubFolders()))\n                        }\n                        color=\"primary\"\n                        autoFocus\n                        startIcon={<IconCheck/>}\n                    >\n                        {I18n.t('Create')}\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        onClick={() => this.props.onClosePresetFolderDialog()}\n                        startIcon={<IconCancel/>}\n                    >\n                        { I18n.t('Cancel') }\n                    </Button>\n                </DialogActions>\n            </Dialog> : null;\n    }\n\n    renderRenameFolderDialog() {\n        if (!this.state.editPresetFolderDialog) {\n            return null;\n        }\n\n        const isUnique = !Object.keys((this.state.presetFolders && this.state.presetFolders.subFolders) || {})\n            .find(folder => folder.id === this.state.editPresetFolderName);\n\n        return <Dialog\n            maxWidth=\"md\"\n            fullWidth={true}\n            open={ !!this.state.editPresetFolderDialog }\n            onClose={ () => this.setState({editPresetFolderDialog: null}) }\n        >\n            <DialogTitle>{ I18n.t('Edit folder') }</DialogTitle>\n            <DialogContent>\n                <TextField\n                    fullWidth={true}\n                    autoFocus\n                    label={ I18n.t('Title') }\n                    value={ this.state.editPresetFolderName }\n                    onKeyPress={e => {\n                        if (this.state.editPresetFolderName && e.which === 13 && this.state.editPresetFolderName !== HIDDEN_FOLDER) {\n                            this.renamePresetFolder(this.state.editPresetFolderDialog, this.state.editPresetFolderName)\n                                .then(() => this.setState({editPresetFolderDialog: null}));\n                        }\n                    }}\n                    onChange={ e => this.setState({editPresetFolderName: e.target.value.replace(FORBIDDEN_CHARS, '_').trim()}) }/>\n            </DialogContent>\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\n                <Button\n                    variant=\"contained\"\n                    disabled={ !this.state.editPresetFolderName || this.state.editFolderDialogTitleOrigin === this.state.editPresetFolderName || !isUnique || this.state.editPresetFolderName === HIDDEN_FOLDER}\n                    onClick={ () => {\n                        this.renamePresetFolder(this.state.editPresetFolderDialog, this.state.editPresetFolderName)\n                            .then(() => this.setState({editPresetFolderDialog: null}));\n                    }}\n                    color=\"primary\"\n                    startIcon={<IconCheck/>}\n                >\n                    { I18n.t('Rename') }\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    onClick={ () => this.setState({editPresetFolderDialog: null}) }\n                    startIcon={<IconCancel/>}\n                >\n                    { I18n.t('Cancel') }\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    renderMoveDialog() {\n        if (!this.state.movePresetDialog) {\n            return null;\n        }\n\n        const newPresetFolder = this.state.newPresetFolder === '__root__' ? '' : this.state.newPresetFolder;\n        const presetId = this.state.movePresetDialog;\n        const newId = 'preset.0.' + newPresetFolder + (newPresetFolder ? '.' : '') + presetId;\n\n        const isIdUnique = !Object.keys(this.state.presets).find(id => id === newId);\n\n        return <Dialog\n            maxWidth=\"md\"\n            fullWidth={true}\n            open={ true }\n            key=\"movePresetDialog\"\n            onClose={ () => this.setState({movePresetDialog: null}) }\n        >\n            <DialogTitle>{ I18n.t('Move to folder') }</DialogTitle>\n            <DialogContent>\n                <FormControl classes={ {root: this.props.classes.width100} }>\n                    <InputLabel shrink={ true }>{ I18n.t('Folder') }</InputLabel>\n                    <Select\n                        autoFocus\n                        fullWidth={true}\n                        className={ this.props.classes.width100 }\n                        value={ this.state.newPresetFolder || '__root__' }\n                        onChange={e => this.setState({newPresetFolder: e.target.value}) }\n                        onKeyPress={e => e.which === 13 && this.setState({movePresetDialog: null}, () =>\n                            this.addPresetToFolderPrefix(this.state.presets[presetId], this.state.newPresetFolder === '__root__' ? '' : this.state.newPresetFolder))\n                        }\n                    >\n                        { getFolderList(this.state.presetFolders || {}).map(folder =>\n                            <MenuItem\n                                key={ folder.prefix }\n                                value={ folder.prefix || '__root__' }\n                            >\n                                { folder.prefix ? folder.prefix.replace('.', ' > ') : I18n.t('Root') }\n                            </MenuItem>)\n                        }\n                    </Select>\n                </FormControl>\n            </DialogContent>\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\n                <Button\n                    variant=\"contained\"\n                    disabled={ !isIdUnique }\n                    color=\"primary\" onClick={() =>\n                        this.setState({movePresetDialog: null}, () =>\n                            this.addPresetToFolderPrefix(this.state.presets[presetId], this.state.newPresetFolder === '__root__' ? '' : this.state.newPresetFolder))\n                    }\n                    startIcon={<IconCheck/>}\n                >\n                    { I18n.t('Move to folder') }\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    onClick={ () => this.setState({movePresetDialog: null}) }\n                    startIcon={<IconCancel/>}\n                >\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\n                    { I18n.t('Cancel') }\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    onError(e, comment) {\n        comment && console.error(comment);\n        this.props.onShowError(e);\n    }\n\n    onDragFinish(source, target) {\n        // new Id\n        let newId = target + '.' + source.split('.').pop();\n        if (newId !== source) {\n            // Check if source yet exists\n            if (this.state.presets[newId]) {\n                newId += '_' + I18n.t('copy');\n            }\n\n            this.props.socket.getObject(source)\n                .then(obj => {\n                    if (obj) {\n                        this.props.socket.setObject(newId, obj)\n                            .then(() => this.props.socket.delObject(source))\n                            .then(() => this.getAllPresets())\n                            .then(newState => this.setState(newState))\n                            .catch(e => this.onError(e, `Cannot delete object ${source}`));\n                    }\n                })\n                .catch(e => this.onError(e, `Cannot read object ${source}`));\n        }\n    }\n\n    renderRenameDialog() {\n        if (!this.state.renameDialog) {\n            return null;\n        }\n\n        const presetId = this.state.renameDialog;\n\n        return <Dialog\n            maxWidth=\"md\"\n            fullWidth={true}\n            open={ true }\n            key=\"renameDialog\"\n            onClose={ () => this.setState({renameDialog: null}) }\n        >\n            <DialogTitle>{ I18n.t('Rename preset') }</DialogTitle>\n            <DialogContent>\n                <FormControl classes={ {root: this.props.classes.width100} }>\n                    <TextField\n                        fullWidth={true}\n                        autoFocus\n                        label={ I18n.t('Name') }\n                        value={ this.state.renamePresetDialogTitle }\n                        onKeyDown={e => {\n                            if (e.keyCode === 13 && this.state.renamePresetDialogTitle && this.isNameUnique(presetId, this.state.renamePresetDialogTitle)) {\n                                this.setState({renameDialog: null}, () =>\n                                    this.renamePreset(presetId, this.state.renamePresetDialogTitle));\n                            }\n                        }}\n                        onChange={ e => this.setState({renamePresetDialogTitle: e.target.value})}\n                        onKeyPress={e => {\n                            if (this.isNameUnique(presetId, this.state.renamePresetDialogTitle) && this.state.renamePresetDialogTitle && e.which === 13) {\n                                this.setState({renameDialog: null}, () =>\n                                    this.renamePreset(presetId, this.state.renamePresetDialogTitle));\n                            }\n                        }}\n                    />\n                </FormControl>\n            </DialogContent>\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\n                <Button\n                    variant=\"contained\"\n                    disabled={ !this.state.renamePresetDialogTitle || !this.isNameUnique(presetId, this.state.renamePresetDialogTitle) }\n                    color=\"primary\" onClick={() =>\n                        this.setState({renameDialog: null}, () =>\n                            this.renamePreset(presetId, this.state.renamePresetDialogTitle))\n                    }\n                    startIcon={<IconCheck/>}\n                >\n                    { I18n.t('Rename') }\n                </Button>\n                <Button\n                    variant=\"contained\"\n                    onClick={ () => this.setState({renameDialog: null}) }\n                    startIcon={<IconCancel/>}\n                >\n                    { I18n.t('Cancel') }\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n\n    renderDeleteDialog() {\n        return this.state.deletePresetDialog ? <ConfirmDialog\n            title={ I18n.t('Are you sure for delete this preset?') }\n            ok={ I18n.t('Delete') }\n            cancel={ I18n.t('Cancel') }\n            suppressQuestionMinutes={3}\n            key=\"deletePresetDialog\"\n            dialogName=\"echarts.deletePresetDialog\"\n            onClose={isYes => {\n                if (isYes) {\n                    this.deletePreset(this.state.deletePresetDialog, () =>\n                        this.setState({deletePresetDialog: false}));\n                } else {\n                    this.setState({deletePresetDialog: false});\n                }\n            }}\n        /> : null;\n    }\n\n    renderSelectIdDialog() {\n        if (!this.state.showAddStateDialog) {\n            return null;\n        } else {\n            return <DialogSelectID\n                key={'selectDialog_add'}\n                socket={ this.props.socket }\n                dialogName={'Add'}\n                type={'state'}\n                title={ I18n.t('Enable logging for state')}\n                onOk={id => {\n                    console.log('Selected ' + id);\n                    const instance = this.state.showAddStateDialog.replace('system.adapter.', '');\n                    if (id) {\n                        this.props.socket.getObject(id)\n                            .then(obj => {\n                                if (!obj || !obj.common) {\n                                    return this.props.onShowError(I18n.t('Invalid object'));\n                                }\n                                if (obj.common.custom && obj.common.custom[instance]) {\n                                    return this.showToast(I18n.t('Already enabled'));\n                                } else {\n                                    obj.common.custom = obj.common.custom || {};\n                                    obj.common.custom[instance] = {\n                                        enabled: true,\n                                    };\n                                    this.props.socket.setObject(id, obj)\n                                        .then(() => {\n                                            const instances = JSON.parse(JSON.stringify(this.state.instances));\n                                            const inst = instances.find(item => item._id === 'system.adapter.' + instance);\n                                            inst.enabledDP = inst.enabledDP || {};\n                                            inst.enabledDP[obj._id] = obj;\n                                            this.setState({instances});\n                                        })\n                                        .catch(e => this.onError(e, `Cannot save object ${id}`));\n                                }\n                            })\n                            .catch(e => this.onError(e, `Cannot read object ${id}`));\n                    }\n                    this.setState({showAddStateDialog: false});\n                } }\n                onClose={ () => this.setState({showAddStateDialog: false}) }\n            />;\n        }\n    }\n\n    deletePreset(id, cb) {\n        return this.props.socket.delObject(id)\n            .then(() =>\n                this.getAllPresets()\n                    .then(newState =>\n                        this.setState(newState, () =>\n                            this.props.onSelectedChanged(null)))\n            )\n            .catch(e => this.onError(e, `Cannot delete object ${id}`))\n            .then(() => cb && cb());\n    }\n\n    renamePreset(id, newTitle) {\n        let preset;\n        return this.props.socket.getObject(id)\n            .then(obj => {\n                preset = obj;\n                preset.common.name = newTitle;\n                let newId = id.split('.');\n                newId.splice(-1, 1);\n                newId.push(newTitle.replace(FORBIDDEN_CHARS, '_').trim());\n                newId = newId.join('.');\n\n                preset._id = newId;\n                return this.props.socket.setObject(preset._id, preset);\n            })\n            .then(() => this.props.socket.delObject(id))\n            .then(() => this.getAllPresets())\n            .then(newState => {\n                if (id === this.props.selectedId) {\n                    this.setState(newState, () =>\n                        this.props.onSelectedChanged(preset._id));\n                } else {\n                    this.setState(newState);\n                }\n            })\n            .catch(e => this.onError(e, `Cannot get object ${id}`));\n    }\n\n    addPresetToFolderPrefix = (preset, folderPrefix, noRefresh) => {\n        let oldId = preset._id;\n        let presetId = preset._id.split('.').pop();\n        preset._id = `${this.props.adapterName}.0.${folderPrefix}${folderPrefix ? '.' : ''}${presetId}`;\n\n        return this.props.socket.setObject(preset._id, preset)\n            .then(() => {\n                console.log('Deleted ' + oldId);\n                return this.props.socket.delObject(oldId);\n            })\n            .then(() => {\n                console.log('Set new ID: ' + preset._id);\n                return !noRefresh && this.refreshData(presetId)\n            })\n            .catch(e =>\n                this.onError(e, `Cannot delete object ${oldId}`));\n    };\n\n    render() {\n        return <>\n            <DragDropContext backend={HTML5Backend}>\n                <List className={ clsx(this.props.classes.scroll, this.props.classes.mainList) }>\n                    { this.renderPresetsTree(this.state.presetFolders) }\n                </List>\n            </DragDropContext>\n            { this.renderAddFolderDialog() }\n            { this.renderRenameFolderDialog() }\n            { this.renderDeleteDialog() }\n            { this.renderMoveDialog() }\n            { this.renderRenameDialog() }\n        </>;\n    }\n}\n\nMenuList.propTypes = {\n    onChange: PropTypes.func,\n    socket: PropTypes.object,\n    addPresetFolderDialog: PropTypes.bool,\n    onClosePresetFolderDialog: PropTypes.func,\n    onCreatePreset: PropTypes.func,\n    onCopyPreset: PropTypes.func,\n    onShowReorder: PropTypes.func,\n    search: PropTypes.string,\n    reorder: PropTypes.bool,\n    adapterName: PropTypes.string.isRequired,\n    onShowError: PropTypes.func,\n    onSelectedChanged: PropTypes.func.isRequired,\n    scrollToSelect: PropTypes.bool,\n    selectedId: PropTypes.oneOfType([\n        PropTypes.object,\n        PropTypes.string\n    ]),\n    systemConfig: PropTypes.object,\n    selectedPresetChanged: PropTypes.bool,\n};\n\nexport default withWidth()(withStyles(styles)(withTheme(MenuList)));\n","import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport withWidth from \"@material-ui/core/withWidth\";\nimport {withStyles, withTheme} from \"@material-ui/core/styles\";\nimport clsx from 'clsx';\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Switch from '@material-ui/core/Switch';\n\n// icons\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\nimport {AiOutlineAreaChart as IconChart} from 'react-icons/ai';\nimport {FaWaveSquare as IconBooleanChart} from 'react-icons/fa';\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\nimport Utils from '@iobroker/adapter-react/Components/Utils';\n\nfunction sortObj(a, b) {\n    const aid = typeof a === 'object' ? a._id.replace('system.adapter.', '') : a.replace('system.adapter.', '');\n    const bid = typeof b === 'object' ? b._id.replace('system.adapter.', '') : b.replace('system.adapter.', '');\n    if (aid > bid) {\n        return 1;\n    } else if (aid < bid) {\n        return -1;\n    } else {\n        return 0;\n    }\n}\n\nfunction getEnumsForId(enums, id) {\n    const result = [];\n    Object.keys(enums).forEach(eID => {\n        const en = enums[eID];\n        if (en.common.members.includes(id) && !result.includes(eID)) {\n            result.push(eID);\n        }\n    });\n    return result;\n}\n\nconst LEVEL_PADDING = 16;\n\nconst styles = theme => ({\n    noGutters: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        paddingLeft: 0,\n        width: '100%'\n    },\n    itemIconFolder: {\n        cursor: 'pointer'\n    },\n    width100: {\n        width: '100%',\n    },\n    itemIcon: {\n        width: 32,\n        height: 32,\n        marginRight: 4,\n    },\n    itemIconRoot: {\n        minWidth: 24,\n    },\n    listItemSubTitle: {\n        fontSize: 'smaller',\n        opacity: 0.7,\n        fontStyle: 'italic'\n    },\n    adapterIcon: {\n        width: 20,\n        height: 20,\n        borderRadius: 2,\n    },\n    mainList: {\n        width: 'calc(100% - ' + theme.spacing(1) + 'px)',\n        marginLeft: theme.spacing(1),\n    },\n});\n\nclass ChartsTree extends Component {\n    constructor(props) {\n        super(props);\n\n        let chartsOpened;\n        try {\n            chartsOpened = JSON.parse(window.localStorage.getItem('App.echarts.opened')) || {};\n        } catch (e) {\n            chartsOpened = {};\n        }\n\n        this.state = {\n            instances: [], // chart folders\n            chartsOpened,\n        };\n\n        this.refSelected = React.createRef();\n        this.scrollToSelect = false;\n        this.adapterPromises = {};\n\n        this.getAllEnums()\n            .then(newState => this.getAllCharts(newState))\n            .then(newState => this.setState(newState, () =>\n                this.props.selectedId && this.props.onSelectedChanged(this.props.selectedId)));\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n        if (nextProps.scrollToSelect !== this.scrollToSelect) {\n            this.scrollToSelect = nextProps.scrollToSelect;\n\n            this.scrollToSelect && setTimeout(() => {\n                this.refSelected.current?.scrollIntoView({\n                    behavior: 'auto',\n                    block: 'center',\n                    inline: 'center'\n                });\n            }, 100);\n        }\n    }\n\n    getAllEnums(newState) {\n        newState = newState || {};\n        return this.props.socket.getEnums()\n            .then(enums => {\n                newState.enums = [];\n                Object.keys(enums).forEach(id => {\n                    if ((id.startsWith('enum.functions.') || id.startsWith('enum.rooms.')) && enums[id] && enums[id].common && enums[id].common.members && enums[id].common.members.length)  {\n                        newState.enums[id] = {\n                            common: {\n                                members: [...enums[id].common.members],\n                                name: Utils.getObjectNameFromObj(enums[id], null, {language: I18n.getLanguage()}),\n                            }\n                        };\n                    }\n                });\n                return newState;\n            })\n            .catch(e => this.onError(e, `Cannot read enums`));\n    }\n\n    getAdapterIcon(groupId, id) {\n        const p = id.split('.');\n\n        if (p.length < 2 || (p[0] === '0_userdata')) {\n            return Promise.resolve();\n        } else {\n            let instanceId;\n            if (p[0] === 'system') {\n                p.splice(4);\n                instanceId = p.join('.')\n            } else {\n                p.splice(2);\n                instanceId = 'system.adapter.' + p.join('.')\n            }\n\n            this.adapterPromises[instanceId] = this.adapterPromises[instanceId] || this.props.socket.getObject(instanceId);\n\n            return this.adapterPromises[instanceId]\n                .then(obj => {\n                    if (obj && obj.common && obj.common.icon) {\n                        return Promise.resolve({groupId, id, img: Utils.getObjectIcon(obj)});\n                    } else {\n                        return Promise.resolve();\n                    }\n                })\n                .catch(e => this.onError(e, `Cannot read object ${instanceId}`));\n        }\n    }\n\n    onError(e, comment) {\n        comment && console.error(comment);\n        this.props.onShowError(e);\n    }\n\n    getChartIcon(groupId, obj) {\n        if (!obj) {\n            return Promise.resolve();\n        } else\n        if (obj.common && obj.common.icon) {\n            return Promise.resolve({groupId, id: obj._id, img: Utils.getObjectIcon(obj)});\n        } else {\n            // try to read parent\n            const id = obj._id;\n            const channelID = Utils.getParentId(obj._id);\n            if (channelID && channelID.split('.').length > 2) {\n                return this.props.socket.getObject(channelID)\n                    .then(obj => {\n                        if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\n                            return Promise.resolve({groupId, id, img: Utils.getObjectIcon(obj)});\n                        } else {\n                            const deviceID = Utils.getParentId(channelID);\n                            if (deviceID && deviceID.split('.').length > 2) {\n                                return this.props.socket.getObject(deviceID)\n                                    .then(obj => {\n                                        if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\n                                            return Promise.resolve({\n                                                groupId,\n                                                id,\n                                                img: Utils.getObjectIcon(obj)\n                                            });\n                                        } else {\n                                            const adapterID = Utils.getParentId(deviceID);\n                                            if (adapterID && adapterID.split('.').length > 2) {\n                                                return this.props.socket.getObject(adapterID)\n                                                    .then(obj => {\n                                                        if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\n                                                            return Promise.resolve({\n                                                                groupId,\n                                                                id,\n                                                                img: Utils.getObjectIcon(obj)\n                                                            });\n                                                        } else {\n                                                            // get Adapter Icon\n                                                            if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\n                                                                return Promise.resolve({\n                                                                    groupId,\n                                                                    id,\n                                                                    img: Utils.getObjectIcon(obj)\n                                                                });\n                                                            } else {\n                                                                return this.getAdapterIcon(groupId, id);\n                                                            }\n                                                        }\n                                                    })\n                                                    .catch(e => this.onError(e, `Cannot read object ${adapterID}`));\n                                            } else {\n                                                return this.getAdapterIcon(groupId, id);\n                                            }\n                                        }\n                                    })\n                                    .catch(e => this.onError(e, `Cannot read object ${deviceID}`));\n                            } else {\n                                return this.getAdapterIcon(groupId, id);\n                            }\n                        }\n                    })\n                    .catch(e => this.onError(e, `Cannot read object ${channelID}`));\n            } else {\n                return this.getAdapterIcon(groupId, id);\n            }\n        }\n    }\n\n    getAllCharts(newState) {\n        newState = newState || {};\n        return new Promise(resolve =>\n            this.props.socket._socket.emit('getObjectView', 'custom', 'state', {}, (err, objs) => {\n                // console.log(objs);\n                const ids = ((objs && objs.rows) || []).map(item => item.id);\n                this.getObjects(ids, objs => {\n                    const ids = this.props.instances.map(obj => obj._id.substring('system.adapter.'.length));\n                    const _instances = {};\n                    newState.enums = newState.enums || this.state.enums;\n                    const iconPromises = [];\n                    Object.values(objs).forEach(obj => {\n                        const id = obj && obj.common && obj.common.custom && ids.find(id => Object.keys(obj.common.custom).includes(id));\n                        if (id) {\n                            const instanceObj = this.props.instances.find(obj => obj._id.endsWith(id));\n                            _instances[id] = _instances[id] || {_id: 'system.adapter.' + id, enabledDP: {}, names: {}, statesEnums: {}, icon: instanceObj.common.icon, name: instanceObj.common.name || '', types: {}, icons: {}};\n                            _instances[id].enabledDP[obj._id] = obj;\n                            _instances[id].names[obj._id] = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\n                            _instances[id].types[obj._id] = obj.common.type === 'boolean' ? 'boolean' : 'number';\n                            _instances[id].statesEnums[obj._id] = getEnumsForId(newState.enums, obj._id);\n                            iconPromises.push(this.getChartIcon(id, obj));\n                        }\n                    });\n\n                    let chartsOpened = JSON.parse(JSON.stringify(this.state.chartsOpened));\n                    const funcIds = Object.keys(newState.enums).filter(id => id.startsWith('enum.functions.'));\n                    const roomIds = Object.keys(newState.enums).filter(id => id.startsWith('enum.rooms.'));\n\n                    const insts = Object.values(_instances).map(obj => {\n                        const enabledDP = {};\n                        Object.keys(obj.enabledDP).forEach(id => {\n                            enabledDP[id] = obj.enabledDP[id];\n                            enabledDP[id].group = obj._id;\n                        });\n                        obj.enabledDP = enabledDP;\n                        chartsOpened[obj._id] = chartsOpened[obj._id] !== undefined ? (this.state.chartsOpened[obj._id] || false) : true;\n\n                        // Build for every instance the list of enums\n                        Object.keys(newState.enums).forEach(eID => {\n                            if (Object.keys(enabledDP).find(id => newState.enums[eID].common.members.includes(id))) {\n                                obj.enums = obj.enums || [];\n                                if (!obj.enums.includes(eID)) {\n                                    obj.enums.push(eID);\n                                }\n                            }\n                        });\n\n                        // Collect all enum-loss IDs in enum\n                        const otherFuncs = {common: {members: [], name: I18n.t('Others')}};\n                        const otherRooms = {common: {members: [], name: I18n.t('Others')}};\n                        Object.keys(enabledDP).forEach(id => {\n                            if (!funcIds.find(eID => newState.enums[eID].common.members.includes(id))) {\n                                otherFuncs.common.members.push(id);\n                            }\n                            if (!roomIds.find(eID => newState.enums[eID].common.members.includes(id))) {\n                                otherRooms.common.members.push(id);\n                            }\n                        });\n                        if (otherFuncs.common.members.length) {\n                            obj.enums = obj.enums || [];\n                            obj.enums.push('enum.functions.' + obj._id);\n                            newState.enums['enum.functions.' + obj._id] = otherFuncs;\n                        }\n                        if (otherRooms.common.members.length) {\n                            obj.enums = obj.enums || [];\n                            obj.enums.push('enum.rooms.' + obj._id);\n                            newState.enums['enum.rooms.' + obj._id] = otherRooms;\n                        }\n\n                        obj.enums && obj.enums.sort((a, b) => newState.enums[a].common.name > newState.enums[b].common.name ? 1 : (newState.enums[a].common.name < newState.enums[b].common.name ? -1 : 0));\n\n                        return obj;\n                    });\n\n                    insts.sort(sortObj);\n\n                    if (!this.props.selectedId) {\n                        // find first chart\n                        let selectedChartId = Object.keys(insts).length && Object.keys(insts[0].enabledDP).length ? Object.keys(insts[0].enabledDP)[0] : null;\n                        if (selectedChartId) {\n                            setTimeout(() => this.props.onSelectedChanged({id: selectedChartId, instance: insts[0]._id}), 500);\n                        }\n                    }\n                    newState.instances = insts;\n                    newState.chartsOpened = chartsOpened;\n\n                    // update icons asynchronous\n                    setTimeout(() => {\n                        Promise.all(iconPromises)\n                            .then(result => {\n                                const instances = JSON.parse(JSON.stringify(this.state.instances));\n                                let changed = false;\n                                result.forEach(res => {\n                                    if (res && res.groupId) {\n                                        const inst = instances.find(ins => ins._id === 'system.adapter.' + res.groupId);\n                                        if (inst) {\n                                            inst.icons[res.id] = res.img;\n                                            changed = true;\n                                        }\n                                    }\n                                });\n                                changed && this.setState({instances});\n                            });\n                    }, 100);\n\n                    resolve(newState);\n                });\n            }));\n    }\n\n    getObjects(ids, cb, result) {\n        result = result || {};\n        if (!ids || !ids.length) {\n            cb(result);\n        } else {\n            const id = ids.shift();\n            this.props.socket.getObject(id)\n                .catch(e => {\n                    console.error('Cannot read ' + id + ': ' + e);\n                    return null;\n                })\n                .then(obj => {\n                    if (obj) {\n                        result[id] = obj;\n                    }\n                    setTimeout(() => this.getObjects(ids, cb, result), 0);\n                });\n        }\n    }\n\n    getNewPresetName(prefix) {\n        let index = prefix ? '' : '1';\n        prefix = prefix || 'preset_';\n\n        while(!this.isNameUnique(prefix + index)) {\n            if (!index) {\n                index = 2;\n            } else {\n                index++;\n            }\n        }\n\n        return prefix + index;\n    };\n\n    toggleChartFolder = id => {\n        const chartsOpened = JSON.parse(JSON.stringify(this.state.chartsOpened));\n        chartsOpened[id] = !chartsOpened[id];\n        window.localStorage.setItem('App.echarts.opened', JSON.stringify(chartsOpened));\n        const newState = {chartsOpened};\n\n        let loadChart = null;\n\n        if (!chartsOpened[id]) {\n            const instance = id.split('///')[0];\n            if (this.props.selectedId && typeof this.props.selectedId === 'object' && this.props.selectedId.instance === instance) {\n                // TODO: Take next nearest opened chart folder\n            }\n        }\n\n        this.setState(newState, () => this.props.onSelectedChanged(loadChart));\n    };\n\n    renderSelectIdDialog() {\n        if (!this.state.showAddStateDialog) {\n            return null;\n        } else {\n            return <DialogSelectID\n                key={'selectDialog_add'}\n                socket={ this.props.socket }\n                dialogName={'Add'}\n                type={'state'}\n                title={ I18n.t('Enable logging for state')}\n                onOk={id => {\n                    console.log('Selected ' + id);\n                    const instance = this.state.showAddStateDialog.replace('system.adapter.', '');\n                    if (id) {\n                        this.props.socket.getObject(id)\n                            .then(obj => {\n                                if (!obj || !obj.common) {\n                                    return this.props.onShowError(I18n.t('Invalid object'));\n                                }\n                                if (obj.common.custom && obj.common.custom[instance]) {\n                                    return this.props.onShowToast(I18n.t('Already enabled'));\n                                } else {\n                                    obj.common.custom = obj.common.custom || {};\n                                    obj.common.custom[instance] = {\n                                        enabled: true,\n                                    };\n                                    this.props.socket.setObject(id, obj)\n                                        .then(() => {\n                                            const instances = JSON.parse(JSON.stringify(this.state.instances));\n                                            const inst = instances.find(item => item._id === 'system.adapter.' + instance);\n                                            inst.enabledDP = inst.enabledDP || {};\n                                            inst.enabledDP[obj._id] = obj;\n                                            this.setState({instances});\n                                        })\n                                        .catch(e => this.onError(e, `Cannot read object ${id}`));\n                                }\n                            })\n                            .catch(e => this.onError(e, `Cannot read object ${id}`));\n                    }\n                    this.setState({showAddStateDialog: false});\n                } }\n                onClose={ () => this.setState({showAddStateDialog: false}) }\n            />;\n        }\n    }\n\n    renderListItem(group, id, dragging, level) {\n        level = level || 0;\n        const instance = group._id;\n        const selected = this.props.selectedId &&\n            typeof this.props.selectedId === 'object' &&\n            this.props.selectedId.id === id &&\n            this.props.selectedId.instance === instance;\n\n        return <ListItem\n            key={instance + '_' + id}\n            ref={selected ? this.refSelected : null}\n            classes={ {gutters: this.props.classes.noGutters} }\n            button\n            style={{paddingLeft: LEVEL_PADDING * level}}\n            selected={selected}\n            onClick={dragging ? undefined : () => this.props.onSelectedChanged({id, instance})}\n        >\n            <ListItemIcon classes={{root: this.props.classes.itemIconRoot}}>\n                {group.types[id] === 'boolean' ?\n                    <IconBooleanChart className={this.props.classes.itemIcon}/>\n                    :\n                    <IconChart className={this.props.classes.itemIcon}/>\n                }\n            </ListItemIcon>\n            <ListItemText\n                classes={{\n                    primary: this.props.classes.listItemTitle,\n                    secondary: this.props.classes.listItemSubTitle\n                }}\n                primary={\n                    <span>\n                        {Utils.getIcon({icon: group.icons[id], prefix: '../../'}, {width: 20, height: 20, borderRadius: 2})}\n                        {group.names[id]}\n                    </span>\n                }\n                secondary={id.replace('system.adapter.', '')}\n            />\n            {!dragging && this.props.multiple && this.props.chartsList ? <ListItemSecondaryAction>\n                <Switch\n                    edge=\"end\"\n                    onChange={e => {\n                        const chartsList = JSON.parse(JSON.stringify(this.props.chartsList));\n                        const item = chartsList.find(item => item.id === id && item.instance === instance);\n                        if (e.target.checked && !item) {\n                            chartsList.push({id, instance});\n                            chartsList.sort((a, b) => {\n                                if (a.instance > b.instance) {\n                                    return 1;\n                                } else if (a.instance < b.instance) {\n                                    return -1;\n                                } else {\n                                    if (a.id > b.id) {\n                                        return 1;\n                                    } else if (a.id < b.id) {\n                                        return -1;\n                                    } else {\n                                        return 0;\n                                    }\n                                }\n                            });\n                            // if no charts selected => select this one\n                            if (typeof this.props.selectedId !== 'object') {\n                                this.props.onSelectedChanged({id, instance}, () =>\n                                    this.props.onChangeList(chartsList));\n                            } else {\n                                this.props.onChangeList(chartsList);\n                            }\n                        } else if (!e.target.checked && item) {\n                            chartsList.splice(chartsList.indexOf(item), 1);\n                            this.props.onChangeList(chartsList);\n                        }\n                    }}\n                    checked={!!this.props.chartsList.find(item => item.id === id && item.instance === instance)}\n                /> </ListItemSecondaryAction>: null}\n        </ListItem>\n    }\n\n    renderListItems(group, ids, enumId, renderContext) {\n        renderContext.gIndex = renderContext.gIndex || 0;\n\n        if (!ids || !ids.length) {\n            return null;\n        }\n        const instance = group._id;\n\n        const level = 1;\n\n        if (!enumId) {\n            return ids.map(id=>\n                <Draggable\n                    isDragDisabled={!this.props.selectedId || typeof this.props.selectedId === 'object'}\n                    key={instance + '_' + id}\n                    draggableId={instance + '***' + id}\n                    index={renderContext.gIndex++}>\n                    {(provided, snapshot) =>\n                        [\n                            <div\n                                key={instance + '_' + id + '_item'}\n                                ref={provided.innerRef}\n                                {...provided.draggableProps}\n                                {...provided.dragHandleProps}\n                                style={provided.draggableProps.style}\n                                className=\"drag-items\"\n                            >\n                                {this.renderListItem(group, id, false, level)}\n                            </div>,\n                            snapshot.isDragging ?\n                                <div className=\"react-beatiful-dnd-copy\" key={instance + '_' + id + '_dnd'}>\n                                    {this.renderListItem(group, id, true)}\n                                </div>: null\n                        ]\n                    }\n                </Draggable>\n            );\n        }  else {\n            const key = instance + '///' + enumId;\n            const opened = this.state.chartsOpened[key];\n            if (opened) {\n                ids = ids.filter(id => this.state.enums[enumId].common.members.includes(id));\n            }\n            return [\n                <ListItem\n                    key={key}\n                    style={{paddingLeft: LEVEL_PADDING * level}}\n                    classes={ {gutters: this.props.classes.noGutters} }\n                    className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\n                >\n                    <ListItemIcon classes={ {root: this.props.classes.itemIconRoot} } onClick={ () => this.toggleChartFolder(key) }>{ opened ?\n                        <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\n                        <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\n                    }</ListItemIcon>\n                    <ListItemText primary={this.state.enums[enumId].common.name}/>\n                    <ListItemSecondaryAction>\n                        <IconButton onClick={ () => this.toggleChartFolder(key) } title={ opened ? I18n.t('Collapse') : I18n.t('Expand')  }>\n                            { opened ? <IconCollapse/> : <IconExpand/> }\n                        </IconButton>\n                    </ListItemSecondaryAction>\n                </ListItem>,\n                opened ? <List key={key + '_LIST'}>\n                    {ids.map(id=>\n                        <Draggable\n                            isDragDisabled={!this.props.selectedId || typeof this.props.selectedId === 'object'}\n                            key={instance + '_' + id}\n                            draggableId={instance + '***' + id}\n                            index={renderContext.gIndex++}>\n                            {(provided, snapshot) =>\n                                [\n                                    <div\n                                        key={instance + '_' + id + '_item'}\n                                        ref={provided.innerRef}\n                                        {...provided.draggableProps}\n                                        {...provided.dragHandleProps}\n                                        style={provided.draggableProps.style}\n                                        className=\"drag-items\"\n                                    >\n                                        {this.renderListItem(group, id, false, 2)}\n                                    </div>,\n                                    snapshot.isDragging ?\n                                        <div className=\"react-beatiful-dnd-copy\" key={instance + '_' + id + '_dnd'}>\n                                            {this.renderListItem(group, id, true)}\n                                        </div>: null\n                                ]\n                            }\n                        </Draggable>\n                    )}\n                </List> : null\n            ]\n        }\n    }\n\n    render() {\n        const renderContext = {gIndex: 0};\n        return [\n            this.renderSelectIdDialog(),\n            <Droppable droppableId=\"Lines\" isDropDisabled={true} key=\"charts\">\n                {(provided, snapshot) =>\n                    <div ref={provided.innerRef} key=\"chartListDiv\">\n                        <List className={ clsx(this.props.classes.scroll, this.props.classes.mainList) } key=\"chartList\">\n                            {\n                                this.state.instances.map(group => {\n                                    let opened = this.state.chartsOpened[group._id];\n                                    let children = null;\n\n                                    // if instance opened\n                                    if (opened) {\n                                        // no groupBy\n                                        const ids = Object.keys(group.enabledDP)\n                                            .filter(id => !this.props.search || id.includes(this.props.search) || group.names[id].includes(this.props.search));\n\n                                        if (!this.props.groupBy) {\n                                            ids.sort(sortObj);\n                                            children = this.renderListItems(group, ids, null, renderContext);\n                                        } else {\n                                            children = (group.enums || []).filter(id => id.startsWith('enum.' + this.props.groupBy + '.'))\n                                                .map(eID =>\n                                                    this.renderListItems(group, ids, eID, renderContext));\n                                        }\n                                    }\n\n                                    return [\n                                        <ListItem\n                                            key={group._id}\n                                            classes={ {gutters: this.props.classes.noGutters} }\n                                            className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\n                                        >\n                                            <ListItemIcon classes={ {root: this.props.classes.itemIconRoot} } onClick={ () => this.toggleChartFolder(group._id) }>\n                                                { opened ?\n                                                    <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\n                                                    <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\n                                                }\n                                            </ListItemIcon>\n                                            <ListItemText primary={\n                                                <span>\n                                                    <img className={ this.props.classes.adapterIcon } alt=\"\" src={`../../adapter/${group.name}/${group.icon}`}/>\n                                                    {group._id.replace('system.adapter.', '')}\n                                                </span>\n                                            }/>\n                                                <ListItemSecondaryAction>\n                                                {opened ? <IconButton\n                                                        onClick={() => this.setState({showAddStateDialog: group._id})}\n                                                        title={ I18n.t('Enable logging for new state') }\n                                                    ><IconAdd/></IconButton> : null}\n                                                <IconButton onClick={ () => this.toggleChartFolder(group._id) } title={ opened ? I18n.t('Collapse') : I18n.t('Expand')  }>\n                                                    { opened ? <IconCollapse/> : <IconExpand/> }\n                                                </IconButton>\n                                            </ListItemSecondaryAction>\n                                        </ListItem>,\n                                        children\n                                    ];\n                                }\n                            )}\n                            {provided.placeholder}\n                        </List>\n                    </div> }\n            </Droppable>\n        ];\n    }\n}\n\nChartsTree.propTypes = {\n    socket: PropTypes.object,\n    instances: PropTypes.array,\n    adapterName: PropTypes.string.isRequired,\n    onShowToast: PropTypes.func,\n    onShowError: PropTypes.func,\n    onChangeList: PropTypes.func,\n    chartsList: PropTypes.array,\n    theme: PropTypes.object,\n    multiple: PropTypes.bool,\n    search: PropTypes.string,\n    groupBy: PropTypes.string,\n    scrollToSelect: PropTypes.bool,\n    selectedId: PropTypes.oneOfType([\n        PropTypes.object,\n        PropTypes.string\n    ]),\n    onSelectedChanged: PropTypes.func.isRequired,\n};\n\nexport default withWidth()(withStyles(styles)(withTheme(ChartsTree)));\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport withWidth from '@material-ui/core/withWidth';\nimport {withStyles, withTheme} from '@material-ui/core/styles';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\n// icons\nimport {MdAdd as IconAdd} from 'react-icons/md';\nimport {MdCreateNewFolder as IconFolderAdd} from 'react-icons/md';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ClearIcon from '@material-ui/icons/Close';\nimport {MdFullscreen as IconNewWindow} from 'react-icons/md';\nimport {MdSwapVert as IconReorder} from 'react-icons/md';\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport PresetsTree from './Components/PresetsTree';\nimport ChartsTree from './Components/ChartsTree';\n\n\nconst TOOLBAR_HEIGHT = 48;\n\nconst styles = theme => ({\n    mainListDiv: {\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n    },\n    mainToolbar: {\n        background: theme.palette.primary.main,\n    },\n    secondaryColors: {\n        background: '#888',\n        color: theme.palette.type === 'dark' ? '#000' : '#FFF',\n    },\n    smallMargin: {\n        marginTop: '8px !important',\n    },\n    heightMinusToolbar: {\n        height: 'calc(100% - ' + (TOOLBAR_HEIGHT * 2) + 'px)',\n        overflow: 'auto'\n    },\n});\n\nclass MenuList extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            search: null,\n            multiple: window.localStorage.getItem('App.echarts.multiple') === 'true',\n            showSearch: null,\n            groupBy: window.localStorage.getItem('App.echarts.groupBy') || '',\n            addPresetFolderDialog: false,\n            reorder: false,\n            showReorder: false,\n        };\n\n        try {\n            this.isIFrame = window.self !== window.top;\n        } catch (e) {\n            this.isIFrame = true;\n        }\n\n        if (this.state.multiple) {\n            let chartList = window.localStorage.getItem('App.echarts.chartList') || '[]';\n            try {\n                chartList = JSON.parse(chartList);\n            } catch (e) {\n                chartList = [];\n            }\n            setTimeout(() => this.props.onChangeList(chartList), 100);\n        }\n    }\n\n    renderListToolbar() {\n        return <Toolbar key=\"toolbar\" variant=\"dense\" className={ this.props.classes.mainToolbar }>\n            {!this.state.reorder ? <IconButton\n                onClick={ () => this.props.onCreatePreset(false) }\n                title={ I18n.t('Create new preset') }\n            ><IconAdd/></IconButton> : null}\n\n            {!this.state.reorder ? <IconButton\n                onClick={ () => this.setState({addPresetFolderDialog: true}) }\n                title={ I18n.t('Create new folder') }\n            ><IconFolderAdd/></IconButton> : null}\n\n            {!this.state.reorder ? <span className={this.props.classes.right}>\n                <IconButton onClick={() => this.setState({showSearch: !this.state.showSearch, search: ''})}>\n                    <SearchIcon/>\n                </IconButton>\n            </span> : null}\n\n            {this.state.showSearch ?\n                <TextField\n                    value={ this.state.search }\n                    className={ this.props.classes.textInput }\n                    onChange={ e => this.setState({search: e.target.value}) }\n                    InputProps={{\n                        endAdornment: this.state.search ?\n                            <IconButton\n                                onClick={() => this.setState({ search: '' })}>\n                                <ClearIcon />\n                            </IconButton>\n                            : undefined,\n                    }}\n                /> : null\n            }\n            <div style={{flexGrow: 1}}/>\n\n            {(!this.state.showSearch && this.state.showReorder) || this.state.reorder ? <IconButton\n                key=\"reorder\"\n                title={I18n.t('Reorder presets in folders')}\n                className={this.props.classes.toolbarButtons}\n                style={{color: this.state.reorder ? 'red' : 'inherit', float: 'right'}}\n                onClick={e => {\n                    e.stopPropagation();\n                    this.setState({reorder: !this.state.reorder});\n                }}\n            ><IconReorder/></IconButton> : null }\n\n            {!this.state.showSearch && this.isIFrame ? <IconButton\n                onClick={ () => window.open(window.location.href, 'own-echarts') }\n                title={ I18n.t('Open in own window') }\n                ><IconNewWindow/></IconButton> : null\n            }\n        </Toolbar>;\n    }\n\n    renderFooter() {\n        return <Toolbar key=\"toolbarBottom\" variant=\"dense\" className={ this.props.classes.secondaryColors }>\n            <FormGroup row>\n                {!this.props.selectedPresetChanged ? <FormControlLabel\n                    classes={{root: this.props.secondaryColors}}\n                    control={<Switch\n                        checked={this.state.multiple}\n                        classes={{root: this.props.secondaryColors}}\n                        onChange={e => {\n                        window.localStorage.setItem('App.echarts.multiple', e.target.checked ? 'true' : 'false');\n                        if (e.target.checked) {\n                            const selectedId = this.props.selectedId;\n                            if (selectedId && typeof selectedId === 'object') {\n                                this.setState({multiple: true}, () => this.props.onChangeList([JSON.parse(JSON.stringify(selectedId))]));\n                            } else {\n                                this.setState({multiple: true}, () => this.props.onChangeList([]));\n                            }\n                        } else {\n                            this.setState({multiple: false}, () => this.props.onChangeList(null));\n                        }\n                    }} />}\n                    label={I18n.t('Multiple')}\n                /> : null}\n                <FormControl>\n                    <InputLabel shrink={true} style={{whiteSpace: 'nowrap'}}>{I18n.t('Group by') }</InputLabel>\n                    <Select\n                        label={I18n.t('Group by')}\n                        onChange={e => {\n                            window.localStorage.setItem('App.echarts.groupBy', e.target.value);\n                            this.setState({groupBy: e.target.value});\n                        }}\n                        value={this.state.groupBy || ''}\n                        className={this.props.classes.smallMargin}\n                        displayEmpty\n                    >\n                        <MenuItem value=\"\">{I18n.t('None')}</MenuItem>\n                        <MenuItem value=\"rooms\">{I18n.t('Rooms')}</MenuItem>\n                        <MenuItem value=\"functions\">{I18n.t('Functions')}</MenuItem>\n                    </Select>\n                </FormControl>\n            </FormGroup>\n        </Toolbar>;\n    }\n\n    render() {\n        return <div className={this.props.classes.mainListDiv} key=\"mainMenuDiv\">\n            {this.renderListToolbar()}\n            <div className={ this.props.classes.heightMinusToolbar }>\n                <PresetsTree\n                    socket={this.props.socket}\n                    scrollToSelect={this.props.scrollToSelect}\n                    addPresetFolderDialog={this.state.addPresetFolderDialog}\n                    onClosePresetFolderDialog={cb => this.setState({addPresetFolderDialog: false}, cb)}\n                    onCreatePreset={(isFromCurrentSelection, parent) => this.props.onCreatePreset(isFromCurrentSelection, parent)}\n                    onCopyPreset={id => this.props.onCopyPreset(id)}\n                    adapterName={this.props.adapterName}\n                    selectedPresetChanged={this.props.selectedPresetChanged}\n                    onShowToast={toast => this.props.onShowToast(toast)}\n                    onShowError={toast => this.props.onShowToast(toast)}\n                    onShowReorder={showReorder => {\n                        if (showReorder !== this.props.showReorder) {\n                            this.setState({showReorder});\n                        }\n                    }}\n                    search={this.state.search}\n                    reorder={this.state.reorder}\n                    selectedId={this.props.selectedId}\n                    systemConfig={this.props.systemConfig}\n                    onSelectedChanged={(selectedId, cb) => this.props.onSelectedChanged(selectedId, cb)}\n                />\n                {!this.state.reorder ?\n                    <ChartsTree\n                        socket={this.props.socket}\n                        scrollToSelect={this.props.scrollToSelect}\n                        instances={this.props.instances}\n                        adapterName={this.props.adapterName}\n                        onShowToast={toast => this.props.onShowToast(toast)}\n                        onShowError={toast => this.props.onShowToast(toast)}\n                        search={this.state.search}\n                        multiple={this.state.multiple && !this.props.selectedPresetChanged}\n                        theme={this.props.theme}\n                        groupBy={this.state.groupBy}\n                        selectedId={this.props.selectedId}\n                        onChangeList={chartList => {\n                            window.localStorage.setItem('App.echarts.chartList', JSON.stringify(chartList));\n                            this.props.onChangeList(chartList);\n                        }}\n                        chartsList={this.props.chartsList}\n                        onSelectedChanged={(selectedId, cb) => this.props.onSelectedChanged(selectedId, cb)}\n                    /> : null }\n            </div>\n            {!this.state.reorder ? this.renderFooter() : null}\n        </div>;\n    }\n}\n\nMenuList.propTypes = {\n    onChange: PropTypes.func,\n    socket: PropTypes.object,\n    instances: PropTypes.array,\n    adapterName: PropTypes.string.isRequired,\n    theme: PropTypes.object,\n    onSelectedChanged: PropTypes.func.isRequired,\n    onShowToast: PropTypes.func.isRequired,\n    systemConfig: PropTypes.object,\n    onChangeList: PropTypes.func,\n    chartsList: PropTypes.array,\n    onCreatePreset: PropTypes.func,\n    onCopyPreset: PropTypes.func,\n    scrollToSelect: PropTypes.bool,\n    selectedId: PropTypes.oneOfType([\n        PropTypes.object,\n        PropTypes.string\n    ]),\n    selectedPresetChanged: PropTypes.bool,\n};\n\nexport default withWidth()(withStyles(styles)(withTheme(MenuList)));\n","import React from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport { withTheme } from '@material-ui/core/styles';\nimport withWidth from '@material-ui/core/withWidth';\nimport clsx from 'clsx';\nimport SplitterLayout from 'react-splitter-layout';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport { DragDropContext} from \"react-beautiful-dnd\";\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\n\n// icons\nimport {MdClose as IconCancel} from 'react-icons/md';\nimport {MdSave as IconSave} from 'react-icons/md';\nimport {MdMenu as IconMenuClosed} from 'react-icons/md';\nimport {MdArrowBack as IconMenuOpened} from 'react-icons/md';\n\nimport 'react-splitter-layout/lib/index.css';\n\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\nimport Loader from '@iobroker/adapter-react/Components/Loader'\nimport I18n from '@iobroker/adapter-react/i18n';\nimport '@iobroker/adapter-react/index.css';\nimport Utils from '@iobroker/adapter-react/Components/Utils';\n\nimport SettingsEditor from './SettingsEditor';\nimport MainChart from './MainChart';\nimport getUrlQuery from './utils/getUrlQuery';\nimport DefaultPreset from './Components/DefaultPreset';\nimport MenuList from './MenuList';\nimport flotConverter from './utils/flotConverter';\n\nconst styles = theme => ({\n    root: {\n        flexGrow: 1,\n        display: 'flex',\n        width: '100%',\n        height: '100%',\n        background: theme.palette.background.default,\n        color: theme.palette.text.primary,\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n    },\n    menuDiv: {\n        overflow: 'hidden',\n    },\n    splitterDivs: {\n        '&>div': {\n            overflow: 'hidden',\n            width: '100%',\n            height: '100%',\n        },\n        '& .layout-splitter': {\n            background: theme.type === 'dark' ? '#595858' : '#ccc;'\n        }\n    },\n    content: {\n        width: '100%',\n        height: '100%',\n        backgroundColor: theme.palette.background.default,\n        position: 'relative'\n    },\n    menuDivWithoutMenu: {\n        '&>div:first-child': {\n            display: 'none'\n        },\n        '&>.layout-splitter': {\n            display: 'none'\n        },\n    },\n    progress: {\n        margin: 100\n    },\n    menuOpenCloseButton: {\n        position: 'absolute',\n        left: 0,\n        borderRadius: '0 5px 5px 0',\n        top: 6,\n        paddingTop: 8,\n        cursor: 'pointer',\n        zIndex: 1,\n        height: 25,\n        width: 20,\n        background: theme.palette.secondary.main,\n        color: theme.palette.primary.main,\n        paddingLeft: 3,\n        '&:hover': {\n            color: 'white'\n        }\n    },\n    buttonsContainer: {\n        '& button': {\n            whiteSpace: 'nowrap'\n        }\n    },\n});\n\nconst FORBIDDEN_CHARS = /[.\\][*,;'\"`<>\\\\?]/g;\n\nfunction loadChartParam(name, defaultValue) {\n    return window.localStorage.getItem('App.echarts.__' + name) ? window.localStorage.getItem('App.echarts.__' + name) : defaultValue;\n}\n\nfunction parseHash() {\n    if (window.location.hash) {\n        const result = {};\n        window.location.hash\n            .replace(/^#/, '')\n            .split('&')\n            .forEach(line => {\n                const [name, val] = line.split('=');\n                result[name] = window.decodeURIComponent(val);\n                if (name === 'instance' && !result[name].startsWith('system.adapter')) {\n                    result[name] = 'system.adapter.' + result[name];\n                }\n            });\n        return result;\n    } else {\n        return null;\n    }\n}\n\nclass App extends GenericApp {\n    constructor(props) {\n        let settings = {socket: {}};\n        const query = getUrlQuery();\n        settings.socket.port = query.port || (parseInt(window.location.port) >= 3000 && parseInt(window.location.port) <= 3020 ? 8081 : window.location.port);\n        settings.socket.host = query.host || window.location.hostname;\n        settings.translations = {\n            'en': require('./i18n/en'),\n            'de': require('./i18n/de'),\n            'es': require('./i18n/es'),\n            'fr': require('./i18n/fr'),\n            'it': require('./i18n/it'),\n            'nl': require('./i18n/nl'),\n            'pl': require('./i18n/pl'),\n            'pt': require('./i18n/pt'),\n            'ru': require('./i18n/ru'),\n            'zh-cn': require('./i18n/zh-cn'),\n        };\n        super(props, settings);\n\n        this.config = parseHash();\n    }\n\n    onHashChanged() {\n        super.onHashChanged();\n        const config = parseHash();\n\n        if ((config.preset && (this.state.selectedId !== config.preset)) ||\n            (config.id && (this.state.selectedId?.id !== config.id || this.state.selectedId?.instance !== config.instance))\n        ) {\n            this.loadChartOrPreset(config.preset || config, () =>\n                this.setState({scrollToSelect: true}, () =>\n                    this.setState({scrollToSelect: false})));\n        }\n    }\n\n    onConnectionReady() {\n        let selectedId = window.localStorage.getItem('App.echarts.selectedId') || null;\n        let presetData = null;\n\n        if (selectedId) {\n            try {\n                selectedId = JSON.parse(selectedId)\n            } catch (e) {\n                selectedId = null;\n            }\n        }\n\n        const newState = {\n            ready: false,\n            instances: [],\n\n            selectedId,\n            selectedPresetChanged: false,\n            presetData,\n            originalPresetData: null,\n            chartsList: null,\n            addPresetDialog: null,\n            progress: 0,\n            autoSave: window.localStorage.getItem('App.echarts.autoSave') === 'true',\n\n            discardChangesConfirmDialog: false,\n\n            resizing: false,\n            menuOpened: window.localStorage.getItem('App.echarts.menuOpened') !== 'false',\n            menuSelectId: '',\n            logHorzLayout: window.localStorage.getItem('App.echarts.logHorzLayout') === 'true',\n        };\n\n        this.settingsSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.echarts.settingsSize')) || 150 : 150;\n        this.menuSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.echarts.menuSize')) || 500 : 500;\n\n        this.objects = {};\n\n        this.socket.getSystemConfig()\n            .then(systemConfig => {\n                newState.systemConfig = systemConfig;\n                newState.presetData = DefaultPreset.getDefaultPreset(systemConfig);\n\n                if (this.config && this.config.id) {\n                    newState.selectedId = {id: this.config.id, instance: this.config.instance};\n                    if (this.config.menuOpened !== undefined) {\n                        newState.menuOpened = this.config.menuOpened === 'true' || this.config.menuOpened === true;\n                    }\n                    this.config = null;\n                }\n\n                this.setState(newState);\n                return flotConverter(this.socket, this.instance);\n            })\n            .then(() => this.socket.getAdapterInstances(''))\n            // get only history adapters\n            .then(instances => instances.filter(entry => entry && entry.common && entry.common.getHistory && entry.common.enabled))\n            .then(instances => this.setState({ready: true, instances}))\n            .catch(e => this.onError(e, 'Cannot read system config'));\n    }\n\n    getNewPresetName(parentId, prefix, index) {\n        index  = index  || (prefix ? '' : '1');\n        prefix = prefix || 'preset_';\n\n        return this.socket.getObject(`${this.adapterName}.${this.instance}.${parentId ? parentId + '.' : ''}${prefix}${index}`)\n            .then(obj => {\n                if (!obj) {\n                    return prefix + index;\n                } else {\n                    if (!index) {\n                        index = 2;\n                    } else {\n                        index++;\n                    }\n                    return this.getNewPresetName(parentId, prefix, index);\n                }\n            })\n            .catch(e => prefix + index);\n    }\n\n    getUniqueId(id, name, cb, _count) {\n        _count = _count || 0;\n        const newId = id + '_' + I18n.t('copy');\n        const newName = name + ' ' + I18n.t('copy');\n        this.socket.getObject(newId)\n            .then(obj => {\n                if (obj) {\n                    setTimeout(() => this.getUniqueId(newId, newName, cb, _count + 1));\n                } else {\n                    cb(null, newId, newName);\n                }\n            })\n            .catch(e => {\n                if (_count > 10) {\n                    cb(I18n.t('Cannot create unique ID'));\n                } else {\n                    setTimeout(() => this.getUniqueId(newId, newName, cb, _count + 1));\n                }\n            })\n    }\n\n    onCopyPreset = presetId => {\n        this.socket.getObject(presetId)\n            .then(obj => {\n                this.getUniqueId(presetId, obj.common.name, (err, newId, newName) => {\n                    obj._id = newId;\n                    obj.common.name = newName;\n                    this.socket.setObject(newId, obj)\n                        .then(() => this.loadChartOrPreset(newId))\n                        .catch(e => this.onError(e, 'Cannot save object'));\n                });\n            })\n            .catch(e => this.onError(e, 'Cannot read object'));\n    };\n\n    onCreatePreset = (isFromCurrentSelection, parentId) => {\n        if (isFromCurrentSelection === true) {\n            let name;\n\n            const chartsList = JSON.parse(JSON.stringify(this.state.chartsList || []));\n            if (!chartsList.find(item => item.id === this.state.selectedId.id && item.instance === this.state.selectedId.instance)) {\n                chartsList.push(this.state.selectedId);\n            }\n\n            // Todo> Detect if all ids are from one enum\n\n            // create from list selectedId\n            return new Promise(resolve => {\n                if (chartsList.length === 1) {\n                    return this.socket.getObject(chartsList[0].id)\n                        .then(obj => resolve(obj));\n                } else {\n                    resolve(null);\n                }\n            })\n                .then(obj => {\n                    if (obj) {\n                        name = (obj && obj.common && obj.common.name ? Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}) : '').trim();\n                    }\n\n                    return this.getNewPresetName(parentId, name)\n                        .then(name => {\n                            let template = {\n                                common: {\n                                    name,\n                                    expert: true,\n                                },\n                                native: {\n                                    data: JSON.parse(JSON.stringify(this.state.presetData))\n                                },\n                                type: 'chart'\n                            };\n                            let id = `${this.adapterName}.0.${parentId ? parentId + '.' : ''}${name.replace(FORBIDDEN_CHARS, '_')}`;\n\n                            return this.socket.setObject(id, template)\n                                .then(() => this.loadChartOrPreset(id))\n                                .catch(e => this.onError(e, 'Cannot save object'));\n                        });\n                })\n                .catch(e => this.onError(e, 'Cannot read object'));\n\n        } else {\n            // create empty preset\n            return this.getNewPresetName(parentId)\n                .then(name => {\n                    let template = {\n                        common: {\n                            name,\n                        },\n                        native: {\n                            url: '',\n                            data: DefaultPreset.getDefaultPreset(this.state.systemConfig, null, null, I18n.getLanguage()),\n                        },\n                        type: 'chart'\n                    };\n\n                    let id = `${this.adapterName}.0.${parentId ? parentId + '.' : ''}${name.replace(FORBIDDEN_CHARS, '_')}`;\n\n                    return this.socket.setObject(id, template)\n                        .then(() => this.loadChartOrPreset(id))\n                        .catch(e => this.onError(e, 'Cannot save object'));\n                })\n                .catch(e => this.showError(e));\n        }\n    };\n\n    onError(e, comment) {\n        comment && console.error(comment);\n        this.showError(e);\n    }\n\n    savePreset = () => {\n        if (!this.state.presetData) {\n            this.showError(I18n.t('Empty preset cannot be saved!'));\n            return Promise.reject();\n        } else {\n            return this.socket.getObject(this.state.selectedId)\n                .then(obj => {\n                    if (!obj || !obj.native) {\n                        return this.showError(I18n.t('Invalid object'));\n                    } else {\n                        obj.native.data = this.state.presetData;\n                        return this.socket.setObject(obj._id, obj)\n                            .then(() => this.setState({originalPresetData: JSON.stringify(this.state.presetData), selectedPresetChanged: false}))\n                            .catch(e => this.onError(e, 'Cannot save object'));\n                    }\n                })\n                .catch(e => this.onError(e, 'Cannot read object'));\n        }\n    };\n\n    loadChartOrPreset(selectedId, cb) {\n        window.localStorage.setItem('App.echarts.selectedId', JSON.stringify(selectedId));\n\n        if (selectedId && typeof selectedId === 'object') {\n            // load chart\n            const promises = [];\n            if (this.state.chartsList) {\n                this.state.chartsList.forEach(item => !this.objects[item.id] && promises.push(this.socket.getObject(item.id)));\n                !this.objects[selectedId.id] && !this.state.chartsList.find(item => item.id === selectedId.id) && promises.push(this.socket.getObject(selectedId.id));\n            } else {\n                this.objects = {};\n                promises.push(this.socket.getObject(selectedId.id));\n            }\n\n            return Promise.all(promises)\n                .then(results => {\n                    results.forEach(obj => obj && (this.objects[obj._id] = obj));\n\n                    const lines = (this.state.chartsList || []).map(item => DefaultPreset.getDefaultLine(this.state.systemConfig, item.instance, this.objects[item.id], I18n.getLanguage()));\n\n                    (!this.state.chartsList || !this.state.chartsList.find(item => item.id === selectedId.id && item.instance === selectedId.instance)) &&\n                        lines.push(DefaultPreset.getDefaultLine(this.state.systemConfig, selectedId.instance, this.objects[selectedId.id], I18n.getLanguage()));\n\n                    // combine same units together: e.g. if line1 and line2 are in percent => use same yAxis\n                    if (lines.length > 1) {\n                        // Find first non empty\n                        // ignore all booleans\n                        const first = lines.find(item => !item.isBoolean);\n                        if (first) {\n                            const iFirst = lines.indexOf(first);\n                            // set it to left\n                            first.yaxe = 'left';\n                            // find all lines with the same unit and place them to left\n                            if (first.unit) {\n                                for (let k = iFirst + 1; k < lines.length; k++) {\n                                    if (lines[k].unit === first.unit) {\n                                        lines[k].commonYAxis = iFirst;\n                                    }\n                                }\n                            }\n                            for (let k = iFirst + 1; k < lines.length; k++) {\n                                if (lines[k].unit && lines[k].unit !== first.unit) {\n                                    lines[k].yaxe = 'right';\n                                    // combine all following lines to one axis\n                                    for (let j = k + 1; j < lines.length; j++) {\n                                        if (lines[k].unit === lines[j].unit && lines[j].commonYAxis === undefined) {\n                                            lines[k].commonYAxis = j;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n\n                    let presetData = {\n                        marks:          [],\n                        lines:          lines,\n                        zoom:           true,\n                        hoverDetail:    true,\n                        aggregate:      loadChartParam('aggregate', 'minmax'),\n                        chartType:      loadChartParam('chartType', 'auto'),\n                        live:           loadChartParam('live', '30'),\n                        timeType:       loadChartParam('timeType', 'relative'),\n                        aggregateType:  loadChartParam('aggregateType', 'step'),\n                        aggregateSpan:  loadChartParam('aggregateSpan', 300),\n                        ticks:          loadChartParam('ticks', ''),\n                        range:          loadChartParam('range', 1440),\n                        relativeEnd:    loadChartParam('relativeEnd', 'now'),\n                        start:          loadChartParam('start', ''),\n                        end:            loadChartParam('end', ''),\n                        start_time:     loadChartParam('start_time', ''),\n                        end_time:       loadChartParam('end_time', ''),\n                        noBorder:       'noborder',\n                        noedit:         false,\n                        animation:      0,\n                        legend:         lines.length > 1 ? 'nw' : ''\n                    };\n\n                    this.setState({\n                        presetData,\n                        originalPresetData: '',\n                        selectedPresetChanged: false,\n                        selectedId,\n                    }, () => {\n                        const hash = `#id=${selectedId.id}&instance=${selectedId.instance.replace(/^system\\.adapter\\./, '')}`;\n                        if (window.location.hash !== hash) {\n                            window.location.hash = hash;\n                        }\n                        cb && cb()\n                    });\n                })\n                .catch(e => this.onError(e, 'Cannot read object'));\n        } else if (selectedId) {\n            // load preset\n            return this.socket.getObject(selectedId)\n                .then(obj => {\n                    if (obj && obj.native && obj.native.data) {\n\n                        const newState = {\n                            presetData: obj.native.data,\n                            originalPresetData: JSON.stringify(obj.native.data),\n                            selectedPresetChanged: false,\n                            selectedId,\n                        };\n\n                        this.setState(newState, () => cb && cb());\n                    } else {\n                        cb && cb();\n                    }\n                })\n                .catch(e => this.onError(e, 'Cannot read object'));\n        } else {\n            this.setState({\n                presetData: null,\n                originalPresetData: '',\n                selectedPresetChanged: false,\n                selectedId: null,\n            }, () => cb && cb());\n        }\n    }\n\n    discardChangesConfirmDialog() {\n        return this.state.discardChangesConfirmDialog ? <Dialog\n            maxWidth=\"lg\"\n            fullWidth={true}\n            open={ true }\n            key=\"discardChangesConfirmDialog\"\n            onClose={ () => this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(false)) }>\n                <DialogTitle>{\n                    this.state.discardChangesConfirmDialog === 'chart' ? I18n.t('Are you sure for loading the chart and discard unsaved changes?')\n                    : (this.state.discardChangesConfirmDialog === 'preset' ? I18n.t('Are you sure for loading the preset and discard unsaved changes?') :\n                        I18n.t('Are you sure for closing folder and discard unsaved changes?'))\n                }</DialogTitle>\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\n                    <Button\n                        variant=\"outlined\"\n                        onClick={() =>\n                            this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(true))}\n                    >\n                            { I18n.t('Load without save')}\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        color=\"secondary\"\n                        autoFocus\n                        onClick={() => {\n                            this.savePreset()\n                                .then(() => this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(true)));\n                        }}\n                        startIcon={<IconSave/>}\n                    >\n\n                        { I18n.t('Save current preset and load') }\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        onClick={() =>\n                            this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(false))\n                        }\n                        startIcon={<IconCancel/>}\n                    >\n                        { I18n.t('Cancel') }\n                    </Button>\n                </DialogActions>\n            </Dialog> : null;\n    };\n\n    renderMain() {\n        const {classes} = this.props;\n        return [\n            <div className={clsx(classes.content, 'iobVerticalSplitter')} key=\"confirmdialog\">\n                <div key=\"confirmdiv\" className={classes.menuOpenCloseButton} onClick={() => {\n                    window.localStorage && window.localStorage.setItem('App.echarts.menuOpened', this.state.menuOpened ? 'false' : 'true');\n                    this.setState({menuOpened: !this.state.menuOpened, resizing: true});\n                    setTimeout(() => this.setState({resizing: false}), 300);\n                }}>\n                    {this.state.menuOpened ? <IconMenuOpened /> : <IconMenuClosed />}\n                </div>\n                <SplitterLayout\n                    key=\"MainSplitter\"\n                    vertical={!this.state.logHorzLayout}\n                    primaryMinSize={100}\n                    secondaryInitialSize={this.settingsSize}\n                    //customClassName={classes.menuDiv + ' ' + classes.splitterDivWithoutMenu}\n                    onDragStart={() => this.setState({resizing: true})}\n                    onSecondaryPaneSizeChange={size => this.settingsSize = parseFloat(size)}\n                    onDragEnd={() => {\n                        this.setState({resizing: false});\n                        window.localStorage && window.localStorage.setItem('App.echarts.settingsSize', this.settingsSize.toString());\n                    }}\n                >\n                    { this.state.selectedId ? <MainChart\n                        key=\"MainChart\"\n                        visible={!this.state.resizing}\n                        theme={this.state.theme}\n                        onChange={presetData => this.setState({presetData})}\n                        presetData={this.state.presetData}\n                        selectedId={this.state.selectedId}\n                        chartsList={this.state.chartsList}\n                        onCreatePreset={this.onCreatePreset}\n                        onCopyPreset={this.onCopyPreset}\n                    /> : null}\n                    {\n                        this.state.presetData && this.state.selectedId && typeof this.state.selectedId === 'string' ? <SettingsEditor\n                            socket={this.socket}\n                            key=\"Editor\"\n                            width={window.innerWidth - this.menuSize}\n                            theme={this.state.theme}\n                            onChange={presetData => {\n                                if (this.state.autoSave) {\n                                    this.setState({presetData}, () => this.savePreset());\n                                } else {\n                                    this.setState({presetData, selectedPresetChanged: JSON.stringify(presetData) !== this.state.originalPresetData});\n                                }\n                            }}\n                            presetData={this.state.presetData}\n                            selectedId={this.state.selectedId}\n                            verticalLayout={!this.state.logHorzLayout}\n                            onLayoutChange={() => this.toggleLogLayout()}\n                            connection={this.socket}\n                            instances={this.state.instances}\n                            systemConfig={this.state.systemConfig}\n                            selectedPresetChanged={this.state.selectedPresetChanged}\n                            savePreset={this.savePreset}\n                            autoSave={this.state.autoSave}\n                            onAutoSave={autoSave => {\n                                window.localStorage.setItem('App.echarts.autoSave', autoSave ? 'true' : 'false');\n                                if (autoSave && this.state.selectedPresetChanged) {\n                                    this.savePreset()\n                                        .then(() => this.setState({autoSave}));\n                                } else {\n                                    this.setState({autoSave});\n                                }\n\n                            }}\n                        /> : null\n                    }\n                </SplitterLayout>\n            </div>\n        ];\n    }\n\n    onDragEnd = result => {\n        const { source, destination, draggableId } = result;\n        if (destination && draggableId.includes('***') && source.droppableId === 'Lines') {\n            const [instance, stateId] = draggableId.split('***');\n            this.socket.getObject(stateId)\n                .then(obj => {\n                    //const len = this.state.presetData.lines.length;\n                    //const color = (obj && obj.common && obj.common.color) || PREDEFINED_COLORS[len % PREDEFINED_COLORS.length];\n                    const presetData = JSON.parse(JSON.stringify(this.state.presetData));\n                    const newLine = DefaultPreset.getDefaultLine(this.state.systemConfig, instance, obj, I18n.getLanguage());\n                    if (!destination) {\n                        presetData.lines.push(newLine);\n                    } else {\n                        presetData.lines.splice(destination.index, 0, newLine);\n                    }\n                    if (presetData.lines.length > 1) {\n                        // combine new unit with existing one\n                        if (newLine.unit) {\n                            for (let i = 0; i < presetData.lines.length; i++) {\n                                if (newLine !== presetData.lines[i] && presetData.lines[i].unit === newLine.unit) {\n                                    newLine.commonYAxis = i;\n                                    break;\n                                }\n                            }\n                        }\n                    }\n\n                    this.setState({presetData, selectedPresetChanged: JSON.stringify(presetData) !== this.state.originalPresetData});\n                })\n                .catch(e => this.onError(e, 'Cannot read object'));\n\n        } else if (destination && source.droppableId === destination.droppableId) {\n            const presetData = JSON.parse(JSON.stringify(this.state.presetData));\n            const [removed] = presetData.lines.splice(source.index, 1);\n            presetData.lines.splice(destination.index, 0, removed);\n            this.setState({presetData, selectedPresetChanged: JSON.stringify(presetData) !== this.state.originalPresetData});\n        }\n    };\n\n    toggleLogLayout() {\n        window.localStorage && window.localStorage.setItem('App.echarts.logHorzLayout', this.state.logHorzLayout ? 'false' : 'true');\n        this.setState({logHorzLayout: !this.state.logHorzLayout});\n    }\n\n    render() {\n        const {classes} = this.props;\n\n        if (!this.state.ready) {\n            return <MuiThemeProvider theme={this.state.theme}>\n                <Loader theme={this.state.themeType}/>\n            </MuiThemeProvider>;\n        }\n\n        return <MuiThemeProvider theme={this.state.theme}>\n            <React.Fragment>\n                <div className={classes.root} key=\"divSide\">\n                    <DragDropContext onDragEnd={this.onDragEnd}>\n                        <SplitterLayout\n                            key=\"sidemenuwidth\"\n                            vertical={false}\n                            primaryMinSize={300}\n                            primaryIndex={1}\n                            secondaryMinSize={300}\n                            secondaryInitialSize={this.menuSize}\n                            customClassName={clsx(classes.splitterDivs, !this.state.menuOpened ? classes.menuDivWithoutMenu : '')}\n                            onDragStart={() => this.setState({resizing: true})}\n                            onSecondaryPaneSizeChange={size => this.menuSize = parseFloat(size)}\n                            onDragEnd={() => {\n                                this.setState({resizing: false});\n                                window.localStorage && window.localStorage.setItem('App.echarts.menuSize', this.menuSize.toString());\n                            }}\n                        >\n                            <MenuList\n                                key=\"menuList\"\n                                scrollToSelect={this.state.scrollToSelect}\n                                socket={this.socket}\n                                theme={this.state.theme}\n                                adapterName={this.adapterName}\n                                instances={this.state.instances}\n                                systemConfig={this.state.systemConfig}\n                                onShowToast={toast => this.showToast(toast)}\n                                selectedPresetChanged={this.state.selectedPresetChanged}\n                                chartsList={this.state.chartsList}\n                                selectedId={this.state.selectedId}\n                                onCopyPreset={this.onCopyPreset}\n                                onCreatePreset={this.onCreatePreset}\n                                onChangeList={(chartsList, cb) => {\n                                    // if some deselected\n                                    let selectedId = this.state.selectedId;\n                                    if (chartsList && this.state.chartsList && chartsList.length && chartsList.length < this.state.chartsList.length) {\n                                        const removedLine = this.state.chartsList.find(item => !chartsList.find(it => it.id === item.id && it.instance === item.instance));\n                                        const index = this.state.chartsList.indexOf(removedLine);\n                                        if (this.state.chartsList[index + 1]) {\n                                            selectedId = this.state.chartsList[index + 1];\n                                        } else if (this.state.chartsList[index - 1]) {\n                                            selectedId = this.state.chartsList[index - 1];\n                                        } else {\n                                            selectedId = chartsList[0];\n                                        }\n                                    }\n                                    this.setState({chartsList}, () => this.loadChartOrPreset(selectedId, cb));\n                                }}\n                                onSelectedChanged={(selectedId, cb) => {\n                                    if (cb && this.state.selectedPresetChanged) {\n                                        this.confirmCB = confirmed => {\n                                            if (confirmed) {\n                                                this.loadChartOrPreset(selectedId, () => cb && cb(selectedId));\n                                            } else {\n                                                cb(false); // cancel\n                                            }\n                                            this.confirmCB = null;\n                                        };\n\n                                        this.setState({discardChangesConfirmDialog: selectedId && typeof selectedId === 'object' ? 'chart' : (selectedId ? 'preset' : 'folder')});\n                                    } else {\n                                        this.loadChartOrPreset(selectedId, () => cb && cb(selectedId));\n                                    }\n                                }}\n                            />\n                            {this.renderMain()}\n                        </SplitterLayout>\n                    </DragDropContext>\n                </div>\n                { this.discardChangesConfirmDialog() }\n                { this.renderError() }\n                { this.renderToast() }\n            </React.Fragment>\n        </MuiThemeProvider>;\n    }\n}\n\nexport default withWidth()(withStyles(styles)(withTheme(App)));\n","export default function getUrlQuery() {\r\n    const parts = (window.location.search || '').replace(/^\\?/, '').split('&');\r\n    const query = {};\r\n    parts.forEach(item => {\r\n        const [name, val] = item.split('=');\r\n        query[decodeURIComponent(name)] = val !== undefined ? decodeURIComponent(val) : true;\r\n    });\r\n    return query;\r\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { MuiThemeProvider} from '@material-ui/core/styles';\nimport * as Sentry from '@sentry/browser';\nimport * as SentryIntegrations from '@sentry/integrations';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { version } from '../package.json';\nimport theme from '@iobroker/adapter-react/Theme';\nimport Utils from '@iobroker/adapter-react/Components/Utils';\n\nwindow.adapterName = 'echarts';\nlet themeName = Utils.getThemeName();\n\nconsole.log('iobroker.' + window.adapterName + '@' + version + ' using theme \"' + themeName + '\"');\n\nfunction build() {\n    return ReactDOM.render(\n        <MuiThemeProvider theme={theme(themeName)}>\n            <App\n                onThemeChange={_theme => {\n                    themeName = _theme;\n                    build();\n                }}\n            />\n        </MuiThemeProvider>,\n        document.getElementById('root')\n    );\n}\n\n// if not local development\nif (window.location.host !== 'localhost:3000') {\n    Sentry.init({\n        dsn: 'https://709f116e1de34029921e4f2696d6740f@sentry.iobroker.net/88',\n        release: 'iobroker.' + window.adapterName + '@' + version,\n        integrations: [new SentryIntegrations.Dedupe()],\n        beforeSend: function (event, hint) {\n            let ignore = false;\n\n            // ignore some errors\n            if (event.exception &&\n                event.exception.values &&\n                event.exception.values[0] && event.exception.values[0].value) {\n                if (event.exception.values[0].value.includes('ioBroker is not connected')) {\n                    ignore = true;\n                }\n            }\n\n            return ignore ? null : event;\n        },\n    });\n}\n\nbuild();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}